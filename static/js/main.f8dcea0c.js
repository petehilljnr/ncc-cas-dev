/*! For license information please see main.f8dcea0c.js.LICENSE.txt */
(()=>{var t={434:function(t,e,n){t.exports=function(){"use strict";var t=function(t,e){var n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on:function(t,e,r){if(void 0===n[t])throw new Error("Invalid event type: "+t);n[t].push({selector:e,fn:r})},render:function(t){e.store.featureChanged(t)}},i=function(t,i){for(var o=n[t],s=o.length;s--;){var a=o[s];if(a.selector(i)){a.fn.call(r,i)||e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(r),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){i("drag",t)},click:function(t){i("click",t)},mousemove:function(t){i("mousemove",t)},mousedown:function(t){i("mousedown",t)},mouseup:function(t){i("mouseup",t)},mouseout:function(t){i("mouseout",t)},keydown:function(t){i("keydown",t)},keyup:function(t){i("keyup",t)},touchstart:function(t){i("touchstart",t)},touchmove:function(t){i("touchmove",t)},touchend:function(t){i("touchend",t)},tap:function(t){i("tap",t)}}},e=6378137;function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var n,r,i,s,a,l,c=0,u=t.length;if(u>2){for(l=0;l<u;l++)l===u-2?(i=u-2,s=u-1,a=0):l===u-1?(i=u-1,s=0,a=1):(i=l,s=l+1,a=l+2),n=t[i],r=t[s],c+=(o(t[a][0])-o(n[0]))*Math.sin(o(r[1]));c=c*e*e/2}return c}function o(t){return t*Math.PI/180}var s={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=r(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:i},a="mapboxgl-ctrl",l="mapbox-gl-draw_ctrl-draw-btn",c="mapbox-gl-draw_line",u="mapbox-gl-draw_polygon",h="mapbox-gl-draw_point",d="mapbox-gl-draw_trash",f="mapbox-gl-draw_combine",p="mapbox-gl-draw_uncombine",g="mapboxgl-ctrl-group",m="active",v="mapbox-gl-draw_boxselect",y="mapbox-gl-draw-hot",_="mapbox-gl-draw-cold",b="add",x="move",w="drag",S="pointer",A="none",E={POLYGON:"polygon",LINE:"line_string",POINT:"point"},C="Feature",k="Polygon",T="LineString",M="Point",P="FeatureCollection",L="Multi",O="MultiPoint",R="MultiLineString",D="MultiPolygon",I={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},F="draw.create",N="draw.delete",j="draw.update",z="draw.selectionchange",B="draw.modechange",U="draw.actionable",V="draw.render",H="draw.combine",W="draw.uncombine",G="move",Y="change_coordinates",X="feature",q="midpoint",Z="vertex",K="true",Q="false",J=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],$={Point:0,LineString:1,Polygon:2};function tt(t,e){var n=$[t.geometry.type]-$[e.geometry.type];return 0===n&&t.geometry.type===k?t.area-e.area:n}function et(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,n=t.length;e<n;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}et.prototype.add=function(t){return this.has(t)||(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length),this},et.prototype.delete=function(t){return!1===this.has(t)||(this._length--,delete this._items[t],delete this._nums[t]),this},et.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},et.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach((function(n){e.push({k:n,v:t._items[n]})})),Object.keys(this._nums).forEach((function(n){e.push({k:JSON.parse(n),v:t._nums[n]})})),e.sort((function(t,e){return t.v-e.v})).map((function(t){return t.k}))},et.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var nt=[X,q,Z],rt={click:function(t,e,n){return it(t,e,n,n.options.clickBuffer)},touch:function(t,e,n){return it(t,e,n,n.options.touchBuffer)}};function it(t,e,n,r){if(null===n.map)return[];var i=t?function(t,e){return void 0===e&&(e=0),[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}(t,r):e,o={};n.options.styles&&(o.layers=n.options.styles.map((function(t){return t.id})));var a=n.map.queryRenderedFeatures(i,o).filter((function(t){return-1!==nt.indexOf(t.properties.meta)})),l=new et,c=[];return a.forEach((function(t){var e=t.properties.id;l.has(e)||(l.add(e),c.push(t))})),function(t){return t.map((function(t){return t.geometry.type===k&&(t.area=s.geometry({type:C,property:{},geometry:t.geometry})),t})).sort(tt).map((function(t){return delete t.area,t}))}(c)}function ot(t,e){var n=rt.click(t,null,e),r={mouse:A};return n[0]&&(r.mouse=n[0].properties.active===K?x:S,r.feature=n[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(r.mouse=b),e.ui.queueMapClasses(r),e.ui.updateMapClasses(),n[0]}function st(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function at(t,e,n){void 0===n&&(n={});var r=null!=n.fineTolerance?n.fineTolerance:4,i=null!=n.grossTolerance?n.grossTolerance:12,o=null!=n.interval?n.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var s=st(t.point,e.point);return s<r||s<i&&e.time-t.time<o}function lt(t,e,n){void 0===n&&(n={});var r=null!=n.tolerance?n.tolerance:25,i=null!=n.interval?n.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,st(t.point,e.point)<r&&e.time-t.time<i}function ct(t,e){return t(e={exports:{}},e.exports),e.exports}var ut=ct((function(t){var e=t.exports=function(t,n){if(n||(n=16),void 0===t&&(t=128),t<=0)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(n),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,t/i))/Math.log(n)*i;var o=r-Math.floor(r),s="";for(i=0;i<Math.floor(r);i++)s=Math.floor(Math.random()*n).toString(n)+s;if(o){var a=Math.pow(n,o);s=Math.floor(Math.random()*a).toString(n)+s}var l=parseInt(s,n);return l!==1/0&&l>=Math.pow(2,t)?e(t,n):s};e.rack=function(t,n,r){var i=function(i){var s=0;do{if(s++>10){if(!r)throw new Error("too many ID collisions, use more bits");t+=r}var a=e(t,n)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(t){return i.hats[t]},i.set=function(t,e){return i.hats[t]=e,i},i.bits=t||128,i.base=n||16,i}})),ht=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||ut(),this.type=e.geometry.type};ht.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},ht.prototype.incomingCoords=function(t){this.setCoordinates(t)},ht.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},ht.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},ht.prototype.setProperty=function(t,e){this.properties[t]=e},ht.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:C,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},ht.prototype.internal=function(t){var e={id:this.id,meta:X,"meta:type":this.type,active:Q,mode:t};if(this.ctx.options.userProperties)for(var n in this.properties)e["user_"+n]=this.properties[n];return{type:C,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var dt=function(t,e){ht.call(this,t,e)};(dt.prototype=Object.create(ht.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},dt.prototype.updateCoordinate=function(t,e,n){this.coordinates=3===arguments.length?[e,n]:[t,e],this.changed()},dt.prototype.getCoordinate=function(){return this.getCoordinates()};var ft=function(t,e){ht.call(this,t,e)};(ft.prototype=Object.create(ht.prototype)).isValid=function(){return this.coordinates.length>1},ft.prototype.addCoordinate=function(t,e,n){this.changed();var r=parseInt(t,10);this.coordinates.splice(r,0,[e,n])},ft.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},ft.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},ft.prototype.updateCoordinate=function(t,e,n){var r=parseInt(t,10);this.coordinates[r]=[e,n],this.changed()};var pt=function(t,e){ht.call(this,t,e),this.coordinates=this.coordinates.map((function(t){return t.slice(0,-1)}))};(pt.prototype=Object.create(ht.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(t){return t.length>2}))},pt.prototype.incomingCoords=function(t){this.coordinates=t.map((function(t){return t.slice(0,-1)})),this.changed()},pt.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},pt.prototype.addCoordinate=function(t,e,n){this.changed();var r=t.split(".").map((function(t){return parseInt(t,10)}));this.coordinates[r[0]].splice(r[1],0,[e,n])},pt.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];n&&(n.splice(e[1],1),n.length<3&&this.coordinates.splice(e[0],1))},pt.prototype.getCoordinate=function(t){var e=t.split(".").map((function(t){return parseInt(t,10)})),n=this.coordinates[e[0]];return JSON.parse(JSON.stringify(n[e[1]]))},pt.prototype.getCoordinates=function(){return this.coordinates.map((function(t){return t.concat([t[0]])}))},pt.prototype.updateCoordinate=function(t,e,n){this.changed();var r=t.split("."),i=parseInt(r[0],10),o=parseInt(r[1],10);void 0===this.coordinates[i]&&(this.coordinates[i]=[]),this.coordinates[i][o]=[e,n]};var gt={MultiPoint:dt,MultiLineString:ft,MultiPolygon:pt},mt=function(t,e,n,r,i){var o=n.split("."),s=parseInt(o[0],10),a=o[1]?o.slice(1).join("."):null;return t[s][e](a,r,i)},vt=function(t,e){if(ht.call(this,t,e),delete this.coordinates,this.model=gt[e.geometry.type],void 0===this.model)throw new TypeError(e.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(e.geometry.coordinates)};function yt(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t}(vt.prototype=Object.create(ht.prototype))._coordinatesToFeatures=function(t){var e=this,n=this.model.bind(this);return t.map((function(t){return new n(e.ctx,{id:ut(),type:C,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})}))},vt.prototype.isValid=function(){return this.features.every((function(t){return t.isValid()}))},vt.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},vt.prototype.getCoordinate=function(t){return mt(this.features,"getCoordinate",t)},vt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(t){return t.type===k?t.getCoordinates():t.coordinates}))))},vt.prototype.updateCoordinate=function(t,e,n){mt(this.features,"updateCoordinate",t,e,n),this.changed()},vt.prototype.addCoordinate=function(t,e,n){mt(this.features,"addCoordinate",t,e,n),this.changed()},vt.prototype.removeCoordinate=function(t){mt(this.features,"removeCoordinate",t),this.changed()},vt.prototype.getFeatures=function(){return this.features},yt.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},yt.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce((function(t,n){return void 0===t[n.feature_id]&&(t[n.feature_id]=!0,e._ctx.store.get(n.feature_id).changed()),t}),{})},yt.prototype.getSelected=function(){return this._ctx.store.getSelected()},yt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},yt.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},yt.prototype.getFeature=function(t){return this._ctx.store.get(t)},yt.prototype.select=function(t){return this._ctx.store.select(t)},yt.prototype.deselect=function(t){return this._ctx.store.deselect(t)},yt.prototype.deleteFeature=function(t,e){return void 0===e&&(e={}),this._ctx.store.delete(t,e)},yt.prototype.addFeature=function(t){return this._ctx.store.add(t)},yt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},yt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},yt.prototype.setActionableState=function(t){void 0===t&&(t={});var e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},yt.prototype.changeMode=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this._ctx.events.changeMode(t,e,n)},yt.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},yt.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},yt.prototype.featuresAt=function(t,e,n){if(void 0===n&&(n="click"),"click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return rt[n](t,e,this._ctx)},yt.prototype.newFeature=function(t){var e=t.geometry.type;return e===M?new dt(this._ctx,t):e===T?new ft(this._ctx,t):e===k?new pt(this._ctx,t):new vt(this._ctx,t)},yt.prototype.isInstanceOf=function(t,e){if(t===M)return e instanceof dt;if(t===T)return e instanceof ft;if(t===k)return e instanceof pt;if("MultiFeature"===t)return e instanceof vt;throw new Error("Unknown feature class: "+t)},yt.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)},yt.prototype.onSetup=function(){},yt.prototype.onDrag=function(){},yt.prototype.onClick=function(){},yt.prototype.onMouseMove=function(){},yt.prototype.onMouseDown=function(){},yt.prototype.onMouseUp=function(){},yt.prototype.onMouseOut=function(){},yt.prototype.onKeyUp=function(){},yt.prototype.onKeyDown=function(){},yt.prototype.onTouchStart=function(){},yt.prototype.onTouchMove=function(){},yt.prototype.onTouchEnd=function(){},yt.prototype.onTap=function(){},yt.prototype.onStop=function(){},yt.prototype.onTrash=function(){},yt.prototype.onCombineFeature=function(){},yt.prototype.onUncombineFeature=function(){},yt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var _t={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},bt=Object.keys(_t);function xt(t){var e=Object.keys(t);return function(n,r){void 0===r&&(r={});var i={},o=e.reduce((function(e,n){return e[n]=t[n],e}),new yt(n));return{start:function(){var e=this;i=o.onSetup(r),bt.forEach((function(n){var r,s=_t[n],a=function(){return!1};t[s]&&(a=function(){return!0}),e.on(n,a,(r=s,function(t){return o[r](i,t)}))}))},stop:function(){o.onStop(i)},trash:function(){o.onTrash(i)},combineFeatures:function(){o.onCombineFeatures(i)},uncombineFeatures:function(){o.onUncombineFeatures(i)},render:function(t,e){o.toDisplayFeatures(i,t,e)}}}}function wt(t){return[].concat(t).filter((function(t){return void 0!==t}))}function St(){var t=this;if(!t.ctx.map||void 0===t.ctx.map.getSource(y))return l();var e=t.ctx.events.currentModeName();t.ctx.ui.queueMapClasses({mode:e});var n=[],r=[];t.isDirty?r=t.getAllIds():(n=t.getChangedIds().filter((function(e){return void 0!==t.get(e)})),r=t.sources.hot.filter((function(e){return e.properties.id&&-1===n.indexOf(e.properties.id)&&void 0!==t.get(e.properties.id)})).map((function(t){return t.properties.id}))),t.sources.hot=[];var i=t.sources.cold.length;t.sources.cold=t.isDirty?[]:t.sources.cold.filter((function(t){var e=t.properties.id||t.properties.parent;return-1===n.indexOf(e)}));var o=i!==t.sources.cold.length||r.length>0;function s(n,r){var i=t.get(n).internal(e);t.ctx.events.currentModeRender(i,(function(e){t.sources[r].push(e)}))}if(n.forEach((function(t){return s(t,"hot")})),r.forEach((function(t){return s(t,"cold")})),o&&t.ctx.map.getSource(_).setData({type:P,features:t.sources.cold}),t.ctx.map.getSource(y).setData({type:P,features:t.sources.hot}),t._emitSelectionChange&&(t.ctx.map.fire(z,{features:t.getSelected().map((function(t){return t.toGeoJSON()})),points:t.getSelectedCoordinates().map((function(t){return{type:C,properties:{},geometry:{type:M,coordinates:t.coordinates}}}))}),t._emitSelectionChange=!1),t._deletedFeaturesToEmit.length){var a=t._deletedFeaturesToEmit.map((function(t){return t.toGeoJSON()}));t._deletedFeaturesToEmit=[],t.ctx.map.fire(N,{features:a})}function l(){t.isDirty=!1,t.clearChangedIds()}l(),t.ctx.map.fire(V,{})}function At(t){var e,n=this;this._features={},this._featureIds=new et,this._selectedFeatureIds=new et,this._selectedCoordinates=[],this._changedFeatureIds=new et,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=function(){e||(e=requestAnimationFrame((function(){e=null,St.call(n)})))},this.isDirty=!1}function Et(t,e){var n=t._selectedCoordinates.filter((function(e){return t._selectedFeatureIds.has(e.feature_id)}));t._selectedCoordinates.length===n.length||e.silent||(t._emitSelectionChange=!0),t._selectedCoordinates=n}At.prototype.createRenderBatch=function(){var t=this,e=this.render,n=0;return this.render=function(){n++},function(){t.render=e,n>0&&t.render()}},At.prototype.setDirty=function(){return this.isDirty=!0,this},At.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},At.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},At.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},At.prototype.getAllIds=function(){return this._featureIds.values()},At.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},At.prototype.delete=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._featureIds.has(t)&&(n._featureIds.delete(t),n._selectedFeatureIds.delete(t),e.silent||-1===n._deletedFeaturesToEmit.indexOf(n._features[t])&&n._deletedFeaturesToEmit.push(n._features[t]),delete n._features[t],n.isDirty=!0)})),Et(this,e),this},At.prototype.get=function(t){return this._features[t]},At.prototype.getAll=function(){var t=this;return Object.keys(this._features).map((function(e){return t._features[e]}))},At.prototype.select=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._selectedFeatureIds.has(t)||(n._selectedFeatureIds.add(t),n._changedFeatureIds.add(t),e.silent||(n._emitSelectionChange=!0))})),this},At.prototype.deselect=function(t,e){var n=this;return void 0===e&&(e={}),wt(t).forEach((function(t){n._selectedFeatureIds.has(t)&&(n._selectedFeatureIds.delete(t),n._changedFeatureIds.add(t),e.silent||(n._emitSelectionChange=!0))})),Et(this,e),this},At.prototype.clearSelected=function(t){return void 0===t&&(t={}),this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},At.prototype.setSelected=function(t,e){var n=this;return void 0===e&&(e={}),t=wt(t),this.deselect(this._selectedFeatureIds.values().filter((function(e){return-1===t.indexOf(e)})),{silent:e.silent}),this.select(t.filter((function(t){return!n._selectedFeatureIds.has(t)})),{silent:e.silent}),this},At.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},At.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},At.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},At.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map((function(e){return t.get(e)}))},At.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map((function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}}))},At.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},At.prototype.setFeatureProperty=function(t,e,n){this.get(t).setProperty(e,n),this.featureChanged(t)},At.prototype.storeMapConfig=function(){var t=this;J.forEach((function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())}))},At.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach((function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()}))},At.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]};var Ct=function(){for(var t=arguments,e={},n=0;n<arguments.length;n++){var r=t[n];for(var i in r)kt.call(r,i)&&(e[i]=r[i])}return e},kt=Object.prototype.hasOwnProperty,Tt=["mode","feature","mouse"];function Mt(e){var n=null,r=null,i={onRemove:function(){return e.map.off("load",i.connect),clearInterval(r),i.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,n&&n.parentNode&&n.parentNode.removeChild(n),n=null,this},connect:function(){e.map.off("load",i.connect),clearInterval(r),i.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(o){var s=o.fire;return o.fire=function(t,e){var n=arguments;return 1===s.length&&1!==arguments.length&&(n=[Ct({},{type:t},e)]),s.apply(o,n)},e.map=o,e.events=function(e){var n=Object.keys(e.options.modes).reduce((function(t,n){return t[n]=xt(e.options.modes[n]),t}),{}),r={},i={},o={},s=null,a=null;o.drag=function(t,n){n({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:w}),a.drag(t)):t.originalEvent.stopPropagation()},o.mousedrag=function(t){o.drag(t,(function(t){return!at(r,t)}))},o.touchdrag=function(t){o.drag(t,(function(t){return!lt(i,t)}))},o.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return o.mousedrag(t);var n=ot(t,e);t.featureTarget=n,a.mousemove(t)},o.mousedown=function(t){r={time:(new Date).getTime(),point:t.point};var n=ot(t,e);t.featureTarget=n,a.mousedown(t)},o.mouseup=function(t){var n=ot(t,e);t.featureTarget=n,at(r,{point:t.point,time:(new Date).getTime()})?a.click(t):a.mouseup(t)},o.mouseout=function(t){a.mouseout(t)},o.touchstart=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){i={time:(new Date).getTime(),point:t.point};var n=rt.touch(t,null,e)[0];t.featureTarget=n,a.touchstart(t)}},o.touchmove=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled)return a.touchmove(t),o.touchdrag(t)},o.touchend=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled){var n=rt.touch(t,null,e)[0];t.featureTarget=n,lt(i,{time:(new Date).getTime(),point:t.point})?a.tap(t):a.touchend(t)}};var l=function(t){return!(8===t||46===t||t>=48&&t<=57)};function c(r,i,o){void 0===o&&(o={}),a.stop();var l=n[r];if(void 0===l)throw new Error(r+" is not valid");s=r;var c=l(e,i);a=t(c,e),o.silent||e.map.fire(B,{mode:r}),e.store.setDirty(),e.store.render()}o.keydown=function(t){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?l(t.keyCode)?a.keydown(t):49===t.keyCode&&e.options.controls.point?c(I.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?c(I.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&c(I.DRAW_POLYGON):(t.preventDefault(),a.trash()))},o.keyup=function(t){l(t.keyCode)&&a.keyup(t)},o.zoomend=function(){e.store.changeZoom()},o.data=function(t){if("style"===t.dataType){var n=e.setup,r=e.map,i=e.options,o=e.store;i.styles.some((function(t){return r.getLayer(t.id)}))||(n.addLayers(),o.setDirty(),o.render())}};var u={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){s=e.options.defaultMode,a=t(n[s](e),e)},changeMode:c,actionable:function(t){var n=!1;Object.keys(t).forEach((function(e){if(void 0===u[e])throw new Error("Invalid action type");u[e]!==t[e]&&(n=!0),u[e]=t[e]})),n&&e.map.fire(U,{actions:u})},currentModeName:function(){return s},currentModeRender:function(t,e){return a.render(t,e)},fire:function(t,e){o[t]&&o[t](e)},addEventListeners:function(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners:function(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash:function(t){a.trash(t)},combineFeatures:function(){a.combineFeatures()},uncombineFeatures:function(){a.uncombineFeatures()},getMode:function(){return s}}}(e),e.ui=function(t){var e={},n=null,r={mode:null,feature:null,mouse:null},i={mode:null,feature:null,mouse:null};function o(t){i=Ct(i,t)}function s(){var e,n;if(t.container){var o=[],s=[];Tt.forEach((function(t){i[t]!==r[t]&&(o.push(t+"-"+r[t]),null!==i[t]&&s.push(t+"-"+i[t]))})),o.length>0&&(e=t.container.classList).remove.apply(e,o),s.length>0&&(n=t.container.classList).add.apply(n,s),r=Ct(r,i)}}function v(t,e){void 0===e&&(e={});var r=document.createElement("button");return r.className=l+" "+e.className,r.setAttribute("title",e.title),e.container.appendChild(r),r.addEventListener("click",(function(r){if(r.preventDefault(),r.stopPropagation(),r.target===n)return y(),void e.onDeactivate();_(t),e.onActivate()}),!0),r}function y(){n&&(n.classList.remove(m),n=null)}function _(t){y();var r=e[t];r&&r&&"trash"!==t&&(r.classList.add(m),n=r)}return{setActiveButton:_,queueMapClasses:o,updateMapClasses:s,clearMapClasses:function(){o({mode:null,feature:null,mouse:null}),s()},addButtons:function(){var n=t.options.controls,r=document.createElement("div");return r.className=g+" "+a,n?(n[E.LINE]&&(e[E.LINE]=v(E.LINE,{container:r,className:c,title:"LineString tool "+(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(I.DRAW_LINE_STRING)},onDeactivate:function(){return t.events.trash()}})),n[E.POLYGON]&&(e[E.POLYGON]=v(E.POLYGON,{container:r,className:u,title:"Polygon tool "+(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(I.DRAW_POLYGON)},onDeactivate:function(){return t.events.trash()}})),n[E.POINT]&&(e[E.POINT]=v(E.POINT,{container:r,className:h,title:"Marker tool "+(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(I.DRAW_POINT)},onDeactivate:function(){return t.events.trash()}})),n.trash&&(e.trash=v("trash",{container:r,className:d,title:"Delete",onActivate:function(){t.events.trash()}})),n.combine_features&&(e.combine_features=v("combineFeatures",{container:r,className:f,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),n.uncombine_features&&(e.uncombine_features=v("uncombineFeatures",{container:r,className:p,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),r):r},removeButtons:function(){Object.keys(e).forEach((function(t){var n=e[t];n.parentNode&&n.parentNode.removeChild(n),delete e[t]}))}}}(e),e.container=o.getContainer(),e.store=new At(e),n=e.ui.addButtons(),e.options.boxSelect&&(o.boxZoom.disable(),o.dragPan.disable(),o.dragPan.enable()),o.loaded()?i.connect():(o.on("load",i.connect),r=setInterval((function(){o.loaded()&&i.connect()}),16)),e.events.start(),n},addLayers:function(){e.map.addSource(_,{data:{type:P,features:[]},type:"geojson"}),e.map.addSource(y,{data:{type:P,features:[]},type:"geojson"}),e.options.styles.forEach((function(t){e.map.addLayer(t)})),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach((function(t){e.map.getLayer(t.id)&&e.map.removeLayer(t.id)})),e.map.getSource(_)&&e.map.removeSource(_),e.map.getSource(y)&&e.map.removeSource(y)}};return e.setup=i,i}function Pt(t){return function(e){var n=e.featureTarget;return!!n&&!!n.properties&&n.properties.meta===t}}function Lt(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===K&&t.featureTarget.properties.meta===X}function Ot(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===Q&&t.featureTarget.properties.meta===X}function Rt(t){return void 0===t.featureTarget}function Dt(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===Z}function It(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey}function Ft(t){return 27===t.keyCode}function Nt(t){return 13===t.keyCode}var jt=zt;function zt(t,e){this.x=t,this.y=e}function Bt(t,e){var n=e.getBoundingClientRect();return new jt(t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0))}function Ut(t,e,n,r){return{type:C,properties:{meta:Z,parent:t,coord_path:n,active:r?K:Q},geometry:{type:M,coordinates:e}}}function Vt(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r,i=t.geometry,o=i.type,s=i.coordinates,a=t.properties&&t.properties.id,l=[];function c(t,n){var r="",i=null;t.forEach((function(t,o){var s=null!=n?n+"."+o:String(o),c=Ut(a,t,s,u(s));if(e.midpoints&&i){var h=function(t,e,n){var r=e.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;var o={lng:(r[0]+i[0])/2,lat:(r[1]+i[1])/2};return{type:C,properties:{meta:q,parent:t,lng:o.lng,lat:o.lat,coord_path:n.properties.coord_path},geometry:{type:M,coordinates:[o.lng,o.lat]}}}(a,i,c);h&&l.push(h)}i=c;var d=JSON.stringify(t);r!==d&&l.push(c),0===o&&(r=d)}))}function u(t){return!!e.selectedPaths&&-1!==e.selectedPaths.indexOf(t)}return o===M?l.push(Ut(a,s,n,u(n))):o===k?s.forEach((function(t,e){c(t,null!==n?n+"."+e:String(e))})):o===T?c(s,n):0===o.indexOf(L)&&(r=o.replace(L,""),s.forEach((function(n,i){var o={type:C,properties:t.properties,geometry:{type:r,coordinates:n}};l=l.concat(Vt(o,e,i))}))),l}zt.prototype={clone:function(){return new zt(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},zt.convert=function(t){return t instanceof zt?t:Array.isArray(t)?new zt(t[0],t[1]):t};var Ht=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()}),0)},Wt=function(t){setTimeout((function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()}),0)},Gt=function(t){if(!t||!t.type)return null;var e=Yt[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null},Yt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Xt(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,e){return t.concat(Xt(e))}),[]),t;case"Feature":return t.geometry?Xt(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):[t];case"MultiPoint":return t.coordinates.map((function(t){return{type:"Point",coordinates:t}}));case"MultiPolygon":return t.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}));case"MultiLineString":return t.coordinates.map((function(t){return{type:"LineString",coordinates:t}}));case"GeometryCollection":return t.geometries.map(Xt).reduce((function(t,e){return t.concat(e)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}var qt=function(t){if(!t)return[];var e=Xt(Gt(t)),n=[];return e.features.forEach((function(t){t.geometry&&(n=n.concat(function t(e){return Array.isArray(e)&&e.length&&"number"==typeof e[0]?[e]:e.reduce((function(e,n){return Array.isArray(n)&&Array.isArray(n[0])?e.concat(t(n)):(e.push(n),e)}),[])}(t.geometry.coordinates)))})),n},Zt=ct((function(t){var e=t.exports=function(t){return new n(t)};function n(t){this.value=t}function r(t,e,n){var r=[],s=[],u=!0;return function t(h){var d=n?i(h):h,f={},p=!0,g={node:d,node_:h,path:[].concat(r),parent:s[s.length-1],parents:s,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(t,e){g.isRoot||(g.parent.node[g.key]=t),g.node=t,e&&(p=!1)},delete:function(t){delete g.parent.node[g.key],t&&(p=!1)},remove:function(t){a(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],t&&(p=!1)},keys:null,before:function(t){f.before=t},after:function(t){f.after=t},pre:function(t){f.pre=t},post:function(t){f.post=t},stop:function(){u=!1},block:function(){p=!1}};if(!u)return g;function m(){if("object"==typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=o(g.node)),g.isLeaf=0==g.keys.length;for(var t=0;t<s.length;t++)if(s[t].node_===h){g.circular=s[t];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}m();var v=e.call(g,g.node);return void 0!==v&&g.update&&g.update(v),f.before&&f.before.call(g,g.node),p?("object"!=typeof g.node||null===g.node||g.circular||(s.push(g),m(),l(g.keys,(function(e,i){r.push(e),f.pre&&f.pre.call(g,g.node[e],e);var o=t(g.node[e]);n&&c.call(g.node,e)&&(g.node[e]=o.node),o.isLast=i==g.keys.length-1,o.isFirst=0==i,f.post&&f.post.call(g,o),r.pop()})),s.pop()),f.after&&f.after.call(g,g.node),g):g}(t).node}function i(t){if("object"==typeof t&&null!==t){var e;if(a(t))e=[];else if("[object Date]"===s(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===s(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===s(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===s(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===s(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===s(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var n=t.constructor&&t.constructor.prototype||t.__proto__||{},r=function(){};r.prototype=n,e=new r}return l(o(t),(function(n){e[n]=t[n]})),e}return t}n.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!c.call(e,r)){e=void 0;break}e=e[r]}return e},n.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!e||!c.call(e,r))return!1;e=e[r]}return!0},n.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];c.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e,e},n.prototype.map=function(t){return r(this.value,t,!0)},n.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},n.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(r=t.call(this,r,e))})),r},n.prototype.paths=function(){var t=[];return this.forEach((function(e){t.push(this.path)})),t},n.prototype.nodes=function(){var t=[];return this.forEach((function(e){t.push(this.node)})),t},n.prototype.clone=function(){var t=[],e=[];return function n(r){for(var s=0;s<t.length;s++)if(t[s]===r)return e[s];if("object"==typeof r&&null!==r){var a=i(r);return t.push(r),e.push(a),l(o(r),(function(t){a[t]=n(r[t])})),t.pop(),e.pop(),a}return r}(this.value)};var o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function s(t){return Object.prototype.toString.call(t)}var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)};l(o(n.prototype),(function(t){e[t]=function(e){var r=[].slice.call(arguments,1),i=new n(e);return i[t].apply(i,r)}}));var c=Object.hasOwnProperty||function(t,e){return e in t}})),Kt=Qt;function Qt(t){if(!(this instanceof Qt))return new Qt(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}Qt.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},Qt.prototype.equals=function(t){var e;return e=t instanceof Qt?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},Qt.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Qt.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof Qt?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},Qt.prototype.bbox=function(){return this._valid?this._bbox:null},Qt.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],n=t[1];return this._bbox[0]<=e&&this._bbox[1]<=n&&this._bbox[2]>=e&&this._bbox[3]>=n},Qt.prototype.intersect=function(t){return this._valid?(e=t instanceof Qt?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},Qt.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},Qt.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Jt={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},$t=Object.keys(Jt),te=function(t){return ee(t).bbox()};function ee(t){for(var e=Kt(),n=qt(t),r=0;r<n.length;r++)e.include(n[r]);return e}function ne(t,e){var n=-90,r=90,i=-90,o=90,s=270,a=-270;t.forEach((function(t){var e=te(t),l=e[1],c=e[3],u=e[0],h=e[2];l>n&&(n=l),c<r&&(r=c),c>i&&(i=c),l<o&&(o=l),u<s&&(s=u),h>a&&(a=h)}));var l=e;return n+l.lat>85&&(l.lat=85-n),i+l.lat>90&&(l.lat=90-i),r+l.lat<-85&&(l.lat=-85-r),o+l.lat<-90&&(l.lat=-90-o),s+l.lng<=-270&&(l.lng+=360*Math.ceil(Math.abs(l.lng)/360)),a+l.lng>=270&&(l.lng-=360*Math.ceil(Math.abs(l.lng)/360)),l}function re(t,e){var n=ne(t.map((function(t){return t.toGeoJSON()})),e);t.forEach((function(t){var e,r=t.getCoordinates(),i=function(t){var e={lng:t[0]+n.lng,lat:t[1]+n.lat};return[e.lng,e.lat]},o=function(t){return t.map((function(t){return i(t)}))};t.type===M?e=i(r):t.type===T||t.type===O?e=r.map(i):t.type===k||t.type===R?e=r.map(o):t.type===D&&(e=r.map((function(t){return t.map((function(t){return o(t)}))}))),t.incomingCoords(e)}))}te.polygon=function(t){return ee(t).polygon()},te.bboxify=function(t){return Zt(t).map((function(t){t&&$t.some((function(e){return!!t[e]&&-1!==Jt[e].indexOf(t.type)}))&&(t.bbox=ee(t).bbox(),this.update(t))}))};var ie={onSetup:function(t){var e=this,n={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(n.initiallySelectedFeatureIds.filter((function(t){return void 0!==e.getFeature(t)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),n},fireUpdate:function(){this.map.fire(j,{action:G,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(){var t=this,e=this.getSelected(),n=e.filter((function(e){return t.isInstanceOf("MultiFeature",e)})),r=!1;if(e.length>1){r=!0;var i=e[0].type.replace("Multi","");e.forEach((function(t){t.type.replace("Multi","")!==i&&(r=!1)}))}var o=n.length>0,s=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:o,trash:s})},getUniqueIds:function(t){return t.length?t.map((function(t){return t.properties.id})).filter((function(t){return void 0!==t})).reduce((function(t,e){return t.add(e),t}),new et).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){Ht(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t),!0},onMouseOut:function(t){return!t.dragMoving||this.fireUpdate()}};ie.onTap=ie.onClick=function(t,e){return Rt(e)?this.clickAnywhere(t,e):Pt(Z)(e)?this.clickOnVertex(t,e):function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===X}(e)?this.clickOnFeature(t,e):void 0},ie.clickAnywhere=function(t){var e=this,n=this.getSelectedIds();n.length&&(this.clearSelectedFeatures(),n.forEach((function(t){return e.doRender(t)}))),Ht(this),this.stopExtendedInteractions(t)},ie.clickOnVertex=function(t,e){this.changeMode(I.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:x})},ie.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},ie.clickOnFeature=function(t,e){var n=this;Wt(this),this.stopExtendedInteractions(t);var r=It(e),i=this.getSelectedIds(),o=e.featureTarget.properties.id,s=this.isSelected(o);if(!r&&s&&this.getFeature(o).type!==M)return this.changeMode(I.DIRECT_SELECT,{featureId:o});s&&r?(this.deselect(o),this.updateUIClasses({mouse:S}),1===i.length&&Ht(this)):!s&&r?(this.select(o),this.updateUIClasses({mouse:x})):s||r||(i.forEach((function(t){return n.doRender(t)})),this.setSelected(o),this.updateUIClasses({mouse:x})),this.doRender(o)},ie.onMouseDown=function(t,e){return Lt(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button}(e)?this.startBoxSelect(t,e):void 0},ie.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=Bt(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},ie.onTouchStart=function(t,e){if(Lt(e))return this.startOnActiveFeature(t,e)},ie.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},ie.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:b}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(v),this.map.getContainer().appendChild(t.boxSelectElement));var n=Bt(e.originalEvent,this.map.getContainer()),r=Math.min(t.boxSelectStartLocation.x,n.x),i=Math.max(t.boxSelectStartLocation.x,n.x),o=Math.min(t.boxSelectStartLocation.y,n.y),s=Math.max(t.boxSelectStartLocation.y,n.y),a="translate("+r+"px, "+o+"px)";t.boxSelectElement.style.transform=a,t.boxSelectElement.style.WebkitTransform=a,t.boxSelectElement.style.width=i-r+"px",t.boxSelectElement.style.height=s-o+"px"},ie.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};re(this.getSelected(),n),t.dragMoveLocation=e.lngLat},ie.onMouseUp=function(t,e){var n=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var r=[t.boxSelectStartLocation,Bt(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,r,"click"),o=this.getUniqueIds(i).filter((function(t){return!n.isSelected(t)}));o.length&&(this.select(o),o.forEach((function(t){return n.doRender(t)})),this.updateUIClasses({mouse:x}))}this.stopExtendedInteractions(t)},ie.toDisplayFeatures=function(t,e,n){e.properties.active=this.isSelected(e.properties.id)?K:Q,n(e),this.fireActionable(),e.properties.active===K&&e.geometry.type!==M&&Vt(e).forEach(n)},ie.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ie.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],n=[],r=t[0].type.replace("Multi",""),i=0;i<t.length;i++){var o=t[i];if(o.type.replace("Multi","")!==r)return;o.type.includes("Multi")?o.getCoordinates().forEach((function(t){e.push(t)})):e.push(o.getCoordinates()),n.push(o.toGeoJSON())}if(n.length>1){var s=this.newFeature({type:C,properties:n[0].properties,geometry:{type:"Multi"+r,coordinates:e}});this.addFeature(s),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([s.id]),this.map.fire(H,{createdFeatures:[s.toGeoJSON()],deletedFeatures:n})}this.fireActionable()}},ie.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var n=[],r=[],i=function(i){var o=e[i];t.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach((function(e){t.addFeature(e),e.properties=o.properties,n.push(e.toGeoJSON()),t.select([e.id])})),t.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))},o=0;o<e.length;o++)i(o);n.length>1&&this.map.fire(W,{createdFeatures:n,deletedFeatures:r}),this.fireActionable()}};var oe=Pt(Z),se=Pt(q),ae={fireUpdate:function(){this.map.fire(j,{action:Y,features:this.getSelected().map((function(t){return t.toGeoJSON()}))})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties,r=t.selectedCoordPaths.indexOf(n.coord_path);It(e)||-1!==r?It(e)&&-1===r&&t.selectedCoordPaths.push(n.coord_path):t.selectedCoordPaths=[n.coord_path];var i=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(i)},onMidpoint:function(t,e){this.startDragging(t,e);var n=e.featureTarget.properties;t.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),t.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(t,e){return e.map((function(e){return{feature_id:t,coord_path:e}}))},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,n){re(this.getSelected(),n),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,n){for(var r=t.selectedCoordPaths.map((function(e){return t.feature.getCoordinate(e)})),i=ne(r.map((function(t){return{type:C,properties:{},geometry:{type:M,coordinates:t}}})),n),o=0;o<r.length;o++){var s=r[o];t.feature.updateCoordinate(t.selectedCoordPaths[o],s[0]+i.lng,s[1]+i.lat)}},clickNoTarget:function(){this.changeMode(I.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(I.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,n=this.getFeature(e);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===M)throw new TypeError("direct_select mode doesn't handle point features");var r={featureId:e,feature:n,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,r.selectedCoordPaths)),this.setSelected(e),Wt(this),this.setActionableState({trash:!0}),r},onStop:function(){Ht(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,n){t.featureId===e.properties.id?(e.properties.active=K,n(e),Vt(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(n)):(e.properties.active=Q,n(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort((function(t,e){return e.localeCompare(t,"en",{numeric:!0})})).forEach((function(e){return t.feature.removeCoordinate(e)})),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(I.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var n=Lt(e),r=oe(e),i=0===t.selectedCoordPaths.length;return n&&i||r&&!i?this.updateUIClasses({mouse:x}):this.updateUIClasses({mouse:A}),this.stopDragging(t),!0},onMouseOut:function(t){return t.dragMoving&&this.fireUpdate(),!0}};ae.onTouchStart=ae.onMouseDown=function(t,e){return oe(e)?this.onVertex(t,e):Lt(e)?this.onFeature(t,e):se(e)?this.onMidpoint(t,e):void 0},ae.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var n={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,n):this.dragFeature(t,e,n),t.dragMoveLocation=e.lngLat}},ae.onClick=function(t,e){return Rt(e)?this.clickNoTarget(t,e):Lt(e)?this.clickActiveFeature(t,e):Ot(e)?this.clickInactive(t,e):void this.stopDragging(t)},ae.onTap=function(t,e){return Rt(e)?this.clickNoTarget(t,e):Lt(e)?this.clickActiveFeature(t,e):Ot(e)?this.clickInactive(t,e):void 0},ae.onTouchEnd=ae.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)};var le={};function ce(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}le.onSetup=function(){var t=this.newFeature({type:C,properties:{},geometry:{type:M,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b}),this.activateUIButton(E.POINT),this.setActionableState({trash:!0}),{point:t}},le.stopDrawingAndRemove=function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT)},le.onTap=le.onClick=function(t,e){this.updateUIClasses({mouse:x}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(F,{features:[t.point.toGeoJSON()]}),this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.point.id]})},le.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},le.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.point.id;if(e.properties.active=r?K:Q,!r)return n(e)},le.onTrash=le.stopDrawingAndRemove,le.onKeyUp=function(t,e){if(Ft(e)||Nt(e))return this.stopDrawingAndRemove(t,e)};var ue={onSetup:function(){var t=this.newFeature({type:C,properties:{},geometry:{type:k,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),Wt(this),this.updateUIClasses({mouse:b}),this.activateUIButton(E.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ce(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:b}),t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0."+t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Dt(e)&&this.updateUIClasses({mouse:S})}};ue.onTap=ue.onClick=function(t,e){return Dt(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},ue.onKeyUp=function(t,e){Ft(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT)):Nt(e)&&this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},ue.onStop=function(t){this.updateUIClasses({mouse:A}),Ht(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0."+t.currentVertexPosition),t.polygon.isValid()?this.map.fire(F,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT,{},{silent:!0})))},ue.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.polygon.id;if(e.properties.active=r?K:Q,!r)return n(e);if(0!==e.geometry.coordinates.length){var i=e.geometry.coordinates[0].length;if(!(i<3)){if(e.properties.meta=X,n(Ut(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),i>3){var o=e.geometry.coordinates[0].length-3;n(Ut(t.polygon.id,e.geometry.coordinates[0][o],"0."+o,!1))}if(i<=4){var s=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(n({type:C,properties:e.properties,geometry:{coordinates:s,type:T}}),3===i)return}return n(e)}}},ue.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT)};var he={onSetup:function(t){var e,n,r=(t=t||{}).featureId,i="forward";if(r){if(!(e=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var o=t.from;if(o&&"Feature"===o.type&&o.geometry&&"Point"===o.geometry.type&&(o=o.geometry),o&&"Point"===o.type&&o.coordinates&&2===o.coordinates.length&&(o=o.coordinates),!o||!Array.isArray(o))throw new Error("Please use the `from` property to indicate which point to continue the line from");var s=e.coordinates.length-1;if(e.coordinates[s][0]===o[0]&&e.coordinates[s][1]===o[1])n=s+1,e.addCoordinate.apply(e,[n].concat(e.coordinates[s]));else{if(e.coordinates[0][0]!==o[0]||e.coordinates[0][1]!==o[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");i="backwards",n=0,e.addCoordinate.apply(e,[n].concat(e.coordinates[0]))}}else e=this.newFeature({type:C,properties:{},geometry:{type:T,coordinates:[]}}),n=0,this.addFeature(e);return this.clearSelectedFeatures(),Wt(this),this.updateUIClasses({mouse:b}),this.activateUIButton(E.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:n,direction:i}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&ce(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&ce(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:b}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),Dt(e)&&this.updateUIClasses({mouse:S})}};he.onTap=he.onClick=function(t,e){if(Dt(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},he.onKeyUp=function(t,e){Nt(e)?this.changeMode(I.SIMPLE_SELECT,{featureIds:[t.line.id]}):Ft(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT))},he.onStop=function(t){Ht(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate(""+t.currentVertexPosition),t.line.isValid()?this.map.fire(F,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT,{},{silent:!0})))},he.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(I.SIMPLE_SELECT)},he.toDisplayFeatures=function(t,e,n){var r=e.properties.id===t.line.id;if(e.properties.active=r?K:Q,!r)return n(e);e.geometry.coordinates.length<2||(e.properties.meta=X,n(Ut(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],""+("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),n(e))};var de={simple_select:ie,direct_select:ae,draw_point:le,draw_polygon:ue,draw_line_string:he},fe={defaultMode:I.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:de,controls:{},userProperties:!1},pe={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ge={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function me(t,e){return t.map((function(t){return t.source?t:Ct(t,{id:t.id+"."+e,source:"hot"===e?y:_})}))}var ve=ct((function(t,e){var r="[object Arguments]",i="[object Map]",o="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,d=u||h||Function("return this")(),f=e&&!e.nodeType&&e,p=f&&t&&!t.nodeType&&t,g=p&&p.exports===f,m=g&&u.process,v=function(){try{return m&&m.binding&&m.binding("util")}catch(t){}}(),y=v&&v.isTypedArray;function _(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function x(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var w,S,A,E=Array.prototype,C=Function.prototype,k=Object.prototype,T=d["__core-js_shared__"],M=C.toString,P=k.hasOwnProperty,L=(w=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",O=k.toString,R=RegExp("^"+M.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=g?d.Buffer:void 0,I=d.Symbol,F=d.Uint8Array,N=k.propertyIsEnumerable,j=E.splice,z=I?I.toStringTag:void 0,B=Object.getOwnPropertySymbols,U=D?D.isBuffer:void 0,V=(S=Object.keys,A=Object,function(t){return S(A(t))}),H=vt(d,"DataView"),W=vt(d,"Map"),G=vt(d,"Promise"),Y=vt(d,"Set"),X=vt(d,"WeakMap"),q=vt(Object,"create"),Z=xt(H),K=xt(W),Q=xt(G),J=xt(Y),$=xt(X),tt=I?I.prototype:void 0,et=tt?tt.valueOf:void 0;function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new it;++e<n;)this.add(t[e])}function st(t){var e=this.__data__=new rt(t);this.size=e.size}function at(t,e){var n=At(t),r=!n&&St(t),i=!n&&!r&&Et(t),o=!n&&!r&&!i&&Pt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=a.length;for(var c in t)!e&&!P.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bt(c,l))||a.push(c);return a}function lt(t,e){for(var n=t.length;n--;)if(wt(t[n][0],e))return n;return-1}function ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?function(t){var e=P.call(t,z),n=t[z];try{t[z]=void 0;var r=!0}catch(t){}var i=O.call(t);return r&&(e?t[z]=n:delete t[z]),i}(t):function(t){return O.call(t)}(t)}function ut(t){return Mt(t)&&ct(t)==r}function ht(t,e,n,a,l){return t===e||(null==t||null==e||!Mt(t)&&!Mt(e)?t!=t&&e!=e:function(t,e,n,a,l,c){var u=At(t),h=At(e),d=u?"[object Array]":_t(t),f=h?"[object Array]":_t(e),p=(d=d==r?o:d)==o,g=(f=f==r?o:f)==o,m=d==f;if(m&&Et(t)){if(!Et(e))return!1;u=!0,p=!1}if(m&&!p)return c||(c=new st),u||Pt(t)?pt(t,e,n,a,l,c):function(t,e,n,r,o,a,l){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new F(t),new F(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return wt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case i:var c=b;case s:var u=1&r;if(c||(c=x),t.size!=e.size&&!u)return!1;var h=l.get(t);if(h)return h==e;r|=2,l.set(t,e);var d=pt(c(t),c(e),r,o,a,l);return l.delete(t),d;case"[object Symbol]":if(et)return et.call(t)==et.call(e)}return!1}(t,e,d,n,a,l,c);if(!(1&n)){var v=p&&P.call(t,"__wrapped__"),y=g&&P.call(e,"__wrapped__");if(v||y){var _=v?t.value():t,w=y?e.value():e;return c||(c=new st),l(_,w,n,a,c)}}return!!m&&(c||(c=new st),function(t,e,n,r,i,o){var s=1&n,a=gt(t),l=a.length;if(l!=gt(e).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in e:P.call(e,u)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);for(var f=s;++c<l;){var p=t[u=a[c]],g=e[u];if(r)var m=s?r(g,p,u,e,t,o):r(p,g,u,t,e,o);if(!(void 0===m?p===g||i(p,g,n,r,o):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,a,l,c))}(t,e,n,a,ht,l))}function dt(t){return!(!Tt(t)||function(t){return!!L&&L in t}(t))&&(Ct(t)?R:a).test(xt(t))}function ft(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||k))return V(t);var e,n,r=[];for(var i in Object(t))P.call(t,i)&&"constructor"!=i&&r.push(i);return r}function pt(t,e,n,r,i,o){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var u=-1,h=!0,d=2&n?new ot:void 0;for(o.set(t,e),o.set(e,t);++u<a;){var f=t[u],p=e[u];if(r)var g=s?r(p,f,u,e,t,o):r(f,p,u,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!_(e,(function(t,e){if(s=e,!d.has(s)&&(f===t||i(f,t,n,r,o)))return d.push(e);var s}))){h=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function gt(t){return function(t,e,n){var r=e(t);return At(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Lt,yt)}function mt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return dt(n)?n:void 0}nt.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},nt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt.prototype.get=function(t){var e=this.__data__;if(q){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return P.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return q?void 0!==e[t]:P.call(e,t)},nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this},rt.prototype.clear=function(){this.__data__=[],this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=lt(e,t);return!(n<0)&&(n==e.length-1?e.pop():j.call(e,n,1),--this.size,!0)},rt.prototype.get=function(t){var e=this.__data__,n=lt(e,t);return n<0?void 0:e[n][1]},rt.prototype.has=function(t){return lt(this.__data__,t)>-1},rt.prototype.set=function(t,e){var n=this.__data__,r=lt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(W||rt),string:new nt}},it.prototype.delete=function(t){var e=mt(this,t).delete(t);return this.size-=e?1:0,e},it.prototype.get=function(t){return mt(this,t).get(t)},it.prototype.has=function(t){return mt(this,t).has(t)},it.prototype.set=function(t,e){var n=mt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},ot.prototype.add=ot.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ot.prototype.has=function(t){return this.__data__.has(t)},st.prototype.clear=function(){this.__data__=new rt,this.size=0},st.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},st.prototype.get=function(t){return this.__data__.get(t)},st.prototype.has=function(t){return this.__data__.has(t)},st.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rt){var r=n.__data__;if(!W||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new it(r)}return n.set(t,e),this.size=n.size,this};var yt=B?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(B(t),(function(e){return N.call(t,e)})))}:function(){return[]},_t=ct;function bt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||l.test(t))&&t>-1&&t%1==0&&t<e}function xt(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function wt(t,e){return t===e||t!=t&&e!=e}(H&&"[object DataView]"!=_t(new H(new ArrayBuffer(1)))||W&&_t(new W)!=i||G&&"[object Promise]"!=_t(G.resolve())||Y&&_t(new Y)!=s||X&&"[object WeakMap]"!=_t(new X))&&(_t=function(t){var e=ct(t),n=e==o?t.constructor:void 0,r=n?xt(n):"";if(r)switch(r){case Z:return"[object DataView]";case K:return i;case Q:return"[object Promise]";case J:return s;case $:return"[object WeakMap]"}return e});var St=ut(function(){return arguments}())?ut:function(t){return Mt(t)&&P.call(t,"callee")&&!N.call(t,"callee")},At=Array.isArray,Et=U||function(){return!1};function Ct(t){if(!Tt(t))return!1;var e=ct(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Tt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Mt(t){return null!=t&&"object"==typeof t}var Pt=y?function(t){return function(e){return t(e)}}(y):function(t){return Mt(t)&&kt(t.length)&&!!c[ct(t)]};function Lt(t){return null!=(e=t)&&kt(e.length)&&!Ct(e)?at(t):ft(t);var e}t.exports=function(t,e){return ht(t,e)}})),ye={Polygon:pt,LineString:ft,Point:dt,MultiPolygon:vt,MultiLineString:vt,MultiPoint:vt};function _e(t,e){return e.modes=I,e.getFeatureIdsAt=function(e){return rt.click({point:e},null,t).map((function(t){return t.properties.id}))},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:P,features:t.store.getSelectedIds().map((function(e){return t.store.get(e)})).map((function(t){return t.toGeoJSON()}))}},e.getSelectedPoints=function(){return{type:P,features:t.store.getSelectedCoordinates().map((function(t){return{type:C,properties:{},geometry:{type:M,coordinates:t.coordinates}}}))}},e.set=function(n){if(void 0===n.type||n.type!==P||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");var r=t.store.createRenderBatch(),i=t.store.getAllIds().slice(),o=e.add(n),s=new et(o);return(i=i.filter((function(t){return!s.has(t)}))).length&&e.delete(i),r(),o},e.add=function(e){var n=JSON.parse(JSON.stringify(Gt(e))).features.map((function(e){if(e.id=e.id||ut(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var n=ye[e.geometry.type];if(void 0===n)throw new Error("Invalid geometry type: "+e.geometry.type+".");var r=new n(t,e);t.store.add(r)}else{var i=t.store.get(e.id);i.properties=e.properties,ve(i.getCoordinates(),e.geometry.coordinates)||i.incomingCoords(e.geometry.coordinates)}return e.id}));return t.store.render(),n},e.get=function(e){var n=t.store.get(e);if(n)return n.toGeoJSON()},e.getAll=function(){return{type:P,features:t.store.getAll().map((function(t){return t.toGeoJSON()}))}},e.delete=function(n){return t.store.delete(n,{silent:!0}),e.getMode()!==I.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(I.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===I.DIRECT_SELECT?t.events.changeMode(I.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(n,r){return void 0===r&&(r={}),n===I.SIMPLE_SELECT&&e.getMode()===I.SIMPLE_SELECT?(i=r.featureIds||[],o=t.store.getSelectedIds(),i.length===o.length&&JSON.stringify(i.map((function(t){return t})).sort())===JSON.stringify(o.map((function(t){return t})).sort())||(t.store.setSelected(r.featureIds,{silent:!0}),t.store.render()),e):(n===I.DIRECT_SELECT&&e.getMode()===I.DIRECT_SELECT&&r.featureId===t.store.getSelectedIds()[0]||t.events.changeMode(n,r,{silent:!0}),e);var i,o},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(n,r,i){return t.store.setFeatureProperty(n,r,i),e},e}var be=function(t,e){var n={options:t=function(t){void 0===t&&(t={});var e=Ct(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=Ct(ge,t.controls):e.controls=Ct(pe,t.controls),(e=Ct(fe,e)).styles=me(e.styles,"cold").concat(me(e.styles,"hot")),e}(t)};e=_e(n,e),n.api=e;var r=Mt(n);return e.onAdd=r.onAdd,e.onRemove=r.onRemove,e.types=E,e.options=t,e};function xe(t){be(t,this)}return xe.modes=de,xe}()},694:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&t.push(s)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&t.push(a);else t.push(n.toString())}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},419:(t,e,n)=>{"use strict";n.d(e,{B8:()=>A,Il:()=>i,J5:()=>s,SU:()=>S,Ss:()=>E,Ym:()=>L,ZP:()=>b,xV:()=>o});var r=n(814);function i(){}var o=.7,s=1/o,a="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),d=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),f=new RegExp("^rgba\\("+[a,a,a,l]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,l]+"\\)$"),g=new RegExp("^hsl\\("+[l,c,c]+"\\)$"),m=new RegExp("^hsla\\("+[l,c,c,l]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function _(){return this.rgb().formatRgb()}function b(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?x(e):3===n?new E(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?w(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?w(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new E(e[1],e[2],e[3],1):(e=d.exec(t))?new E(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?w(e[1],e[2],e[3],e[4]):(e=p.exec(t))?w(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?M(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?M(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?x(v[t]):"transparent"===t?new E(NaN,NaN,NaN,0):null}function x(t){return new E(t>>16&255,t>>8&255,255&t,1)}function w(t,e,n,r){return r<=0&&(t=e=n=NaN),new E(t,e,n,r)}function S(t){return t instanceof i||(t=b(t)),t?new E((t=t.rgb()).r,t.g,t.b,t.opacity):new E}function A(t,e,n,r){return 1===arguments.length?S(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function C(){return"#"+T(this.r)+T(this.g)+T(this.b)}function k(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function T(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function M(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new O(t,e,n,r)}function P(t){if(t instanceof O)return new O(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=b(t)),!t)return new O;if(t instanceof O)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-o,c=(s+o)/2;return l?(a=e===s?(n-r)/l+6*(n<r):n===s?(r-e)/l+2:(e-n)/l+4,l/=c<.5?s+o:2-s-o,a*=60):l=c>0&&c<1?0:a,new O(a,l,c,t.opacity)}function L(t,e,n,r){return 1===arguments.length?P(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function R(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}(0,r.Z)(i,b,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return P(this).formatHsl()},formatRgb:_,toString:_}),(0,r.Z)(E,A,(0,r.l)(i,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C,formatHex:C,formatRgb:k,toString:k})),(0,r.Z)(O,L,(0,r.l)(i,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new O(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new O(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new E(R(t>=240?t-240:t+120,i,r),R(t,i,r),R(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},814:(t,e,n)=>{"use strict";function r(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}n.d(e,{Z:()=>r,l:()=>i})},986:(t,e,n)=>{"use strict";function r(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}function i(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],s=t[i+1],a=i>0?t[i-1]:2*o-s,l=i<e-1?t[i+2]:2*s-o;return r((n-i/e)*e,a,o,s,l)}}n.d(e,{Z:()=>i,t:()=>r})},313:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(986);function i(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],s=t[i%e],a=t[(i+1)%e],l=t[(i+2)%e];return(0,r.t)((n-i/e)*e,o,s,a,l)}}},412:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>a,wx:()=>o,yi:()=>s});var r=n(453);function i(t,e){return function(n){return t+n*e}}function o(t,e){var n=e-t;return n?i(t,n>180||n<-180?n-360*Math.round(n/360):n):(0,r.Z)(isNaN(t)?e:t)}function s(t){return 1===(t=+t)?a:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):(0,r.Z)(isNaN(e)?n:e)}}function a(t,e){var n=e-t;return n?i(t,n):(0,r.Z)(isNaN(t)?e:t)}},453:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=t=>()=>t},765:(t,e,n)=>{"use strict";function r(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{Z:()=>r})},211:(t,e,n)=>{"use strict";n.d(e,{YD:()=>u,ZP:()=>a,hD:()=>c});var r=n(419),i=n(986),o=n(313),s=n(412);const a=function t(e){var n=(0,s.yi)(e);function i(t,e){var i=n((t=(0,r.B8)(t)).r,(e=(0,r.B8)(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),l=(0,s.ZP)(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=a(e),t.opacity=l(e),t+""}}return i.gamma=t,i}(1);function l(t){return function(e){var n,i,o=e.length,s=new Array(o),a=new Array(o),l=new Array(o);for(n=0;n<o;++n)i=(0,r.B8)(e[n]),s[n]=i.r||0,a[n]=i.g||0,l[n]=i.b||0;return s=t(s),a=t(a),l=t(l),i.opacity=1,function(t){return i.r=s(t),i.g=a(t),i.b=l(t),i+""}}}var c=l(i.Z),u=l(o.Z)},514:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(765),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(i.source,"g");function s(t,e){var n,s,a,l=i.lastIndex=o.lastIndex=0,c=-1,u=[],h=[];for(t+="",e+="";(n=i.exec(t))&&(s=o.exec(e));)(a=s.index)>l&&(a=e.slice(l,a),u[c]?u[c]+=a:u[++c]=a),(n=n[0])===(s=s[0])?u[c]?u[c]+=s:u[++c]=s:(u[++c]=null,h.push({i:c,x:(0,r.Z)(n,s)})),l=o.lastIndex;return l<e.length&&(a=e.slice(l),u[c]?u[c]+=a:u[++c]=a),u.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)u[(n=h[r]).i]=n.x(t);return u.join("")})}},97:(t,e,n)=>{"use strict";n.d(e,{Y:()=>c,w:()=>u});var r,i=n(765),o=180/Math.PI,s={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a(t,e,n,r,i,s){var a,l,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*o,skewX:Math.atan(c)*o,scaleX:a,scaleY:l}}function l(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}return function(s,a){var l=[],c=[];return s=t(s),a=t(a),function(t,r,o,s,a,l){if(t!==o||r!==s){var c=a.push("translate(",null,e,null,n);l.push({i:c-4,x:(0,i.Z)(t,o)},{i:c-2,x:(0,i.Z)(r,s)})}else(o||s)&&a.push("translate("+o+e+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,l,c),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(o(n)+"rotate(",null,r)-2,x:(0,i.Z)(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}(s.rotate,a.rotate,l,c),function(t,e,n,s){t!==e?s.push({i:n.push(o(n)+"skewX(",null,r)-2,x:(0,i.Z)(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}(s.skewX,a.skewX,l,c),function(t,e,n,r,s,a){if(t!==n||e!==r){var l=s.push(o(s)+"scale(",null,",",null,")");a.push({i:l-4,x:(0,i.Z)(t,n)},{i:l-2,x:(0,i.Z)(e,r)})}else 1===n&&1===r||s.push(o(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,l,c),s=a=null,function(t){for(var e,n=-1,r=c.length;++n<r;)l[(e=c[n]).i]=e.x(t);return l.join("")}}}var c=l((function(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?s:a(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),u=l((function(t){return null==t?s:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",t),(t=r.transform.baseVal.consolidate())?a((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):s)}),", ",")",")")},756:function(t,e,n){!function(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,g,m,v,y,_){"use strict";const b="4.2.7";class x extends Error{}const w={CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10};class S{constructor(){this.enableDebugLog=!1,this._alreadyWarned={}}warn(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),this}warnOnce(t){return this._alreadyWarned[t]||(this._alreadyWarned[t]=!0,A.warn(t)),this}debug(t){return this.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),this}}const A=new S;class E{constructor(){this._defaultColors=E._schemeCategory20c,this.dateFormat=e.timeFormat("%m/%d/%Y"),this._renderlet=null,this.disableTransitions=!1}defaultColors(t){return arguments.length?(this._defaultColors=t,this):(this._defaultColors===E._schemeCategory20c&&A.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),this._defaultColors)}}E._schemeCategory20c=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];const C=new E,k={eventHandler:t=>function(e,n){console.warn("No d3.js compatbility event handler registered, defaulting to v6 behavior."),t.call(this,n,e)},nester:t=>{let{key:e,sortKeys:n,sortValues:r,entries:i}=t;throw new Error("No d3.js compatbility nester registered, load v5 or v6 compability layer.")},pointer:()=>{throw new Error("No d3.js compatbility pointer registered, load v5 or v6 compability layer.")}};class T{constructor(){this._chartMap={}}_initializeChartGroup(t){return t||(t=w.DEFAULT_CHART_GROUP),this._chartMap[t]||(this._chartMap[t]=[]),t}has(t){for(const e in this._chartMap)if(this._chartMap[e].indexOf(t)>=0)return!0;return!1}register(t,e){this._chartMap[e=this._initializeChartGroup(e)].push(t)}deregister(t,e){e=this._initializeChartGroup(e);for(let n=0;n<this._chartMap[e].length;n++)if(this._chartMap[e][n].anchorName()===t.anchorName()){this._chartMap[e].splice(n,1);break}}clear(t){t?delete this._chartMap[t]:this._chartMap={}}list(t){return t=this._initializeChartGroup(t),this._chartMap[t]}}const M=new T,P=function(t,e){M.register(t,e)},L=function(t,e){M.deregister(t,e)},O=function(t){return M.has(t)},R=function(t){M.clear(t)},D=function(t){const e=M.list(t);for(let n=0;n<e.length;++n)e[n].filterAll()},I=function(t){const e=M.list(t);for(let n=0;n<e.length;++n)e[n].focus&&e[n].focus()},F=function(t){const e=M.list(t);for(let n=0;n<e.length;++n)e[n].render();null!==C._renderlet&&C._renderlet(t)},N=function(t){const e=M.list(t);for(let n=0;n<e.length;++n)e[n].redraw();null!==C._renderlet&&C._renderlet(t)},j=function(t,e,n,r){if(C.disableTransitions||e<=0)return t;let i=t.transition(r);return(e>=0||void 0!==e)&&(i=i.duration(e)),(n>=0||void 0!==n)&&(i=i.delay(n)),i},z=function(t,e,n,r){return t?function(t){return j(t,e,n,r)}:function(t){return t}},B=function(t,e){if(t.empty()||!t.duration)e.call(t);else{let n=0;t.each((()=>{++n})).on("end",(()=>{--n||e.call(t)}))}},U=function(t){return arguments.length?(C._renderlet=t,null):C._renderlet},V=function(t){return t instanceof Object&&t.__dcFlag__&&!0},H={current:null,trigger:function(t,e){e?(H.current=t,setTimeout((()=>{t===H.current&&t()}),e)):t()}},W={RangedFilter:function(t,e){const n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},TwoDimensionalFilter:function(t){if(null===t)return null;const e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},RangedTwoDimensionalFilter:function(t){if(null===t)return null;const e=t;let n;return n=e[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],e.isFiltered=function(t){let e,r;return t instanceof Array?(e=t[0],r=t[1]):(e=t,r=n[0][1]),e>=n[0][0]&&e<n[1][0]&&r>=n[0][1]&&r<n[1][1]},e.filterType="RangedTwoDimensionalFilter",e},HierarchyFilter:function(t){if(null===t)return null;const e=t.slice(0);return e.isFiltered=function(t){if(!(e.length&&t&&t.length&&t.length>=e.length))return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},e}};class G extends Error{}const Y=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},X={printSingleValue:function(t){let e="".concat(t);return t instanceof Date?e=C.dateFormat(t):"string"===typeof t?e=t:X.isFloat(t)?e=X.printSingleValue.fformat(t):X.isInteger(t)&&(e=Math.round(t)),e}};X.printSingleValue.fformat=r.format(".2f"),X._toTimeFunc=function(t){return{second:n.timeSecond,minute:n.timeMinute,hour:n.timeHour,day:n.timeDay,week:n.timeWeek,month:n.timeMonth,year:n.timeYear}[t]},X.add=function(t,e,r){if("string"===typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"===typeof e&&(e=+e),"millis"===r?new Date(t.getTime()+e):("function"!==typeof(r=r||n.timeDay)&&(r=X._toTimeFunc(r)),r.offset(t,e));if("string"===typeof e){const n=+e/100;return t>0?t*(1+n):t*(1-n)}return t+e},X.subtract=function(t,e,r){if("string"===typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"===typeof e&&(e=+e),"millis"===r?new Date(t.getTime()-e):("function"!==typeof(r=r||n.timeDay)&&(r=X._toTimeFunc(r)),r.offset(t,-e));if("string"===typeof e){const n=+e/100;return t<0?t*(1+n):t*(1-n)}return t-e},X.isNumber=function(t){return t===+t},X.isFloat=function(t){return t===+t&&t!==(0|t)},X.isInteger=function(t){return t===+t&&t===(0|t)},X.isNegligible=function(t){return!X.isNumber(t)||t<w.NEGLIGIBLE_NUMBER&&t>-w.NEGLIGIBLE_NUMBER},X.clamp=function(t,e,n){return t<e?e:t>n?n:t},X.constant=function(t){return function(){return t}};let q=0;function Z(t,e){for(let n=0;n<t.length;n++)if(t[n].key===e)return t[n]}X.uniqueId=function(){return++q},X.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},X.appendOrSelect=function(t,e,n){n=n||e;let r=t.select(e);return r.empty()&&(r=t.append(n)),r},X.safeNumber=function(t){return X.isNumber(+t)?+t:0},X.arraysEqual=function(t,e){return!t&&!e||!(!t||!e)&&t.length===e.length&&t.every(((t,n)=>t.valueOf()===e[n].valueOf()))},X.allChildren=function(t){let e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(let n=0;n<t.children.length;n++)e=e.concat(X.allChildren(t.children[n]));return e},X.toHierarchy=function(t,e){const n={key:"root",children:[]};for(let r=0;r<t.length;r++){const i=t[r],o=i.key,s=e(i);let a=n;for(let t=0;t<o.length;t++){const e=o.slice(0,t+1),n=a.children,r=o[t];let l;t+1<o.length?(l=Z(n,r),void 0===l&&(l={key:r,children:[],path:e},n.push(l)),a=l):(l={key:r,value:s,data:i,path:e},n.push(l))}}return n},X.getAncestors=function(t){const e=[];let n=t;for(;n.parent;)e.unshift(n.name),n=n.parent;return e},X.arraysIdentical=function(t,e){let n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0};const K={filters:function(t){let e="";for(let n=0;n<t.length;++n)n>0&&(e+=", "),e+=K.filter(t[n]);return e},filter:function(t){let e="";return"undefined"!==typeof t&&null!==t&&(t instanceof Array?t.length>=2?e="[".concat(t.map((t=>X.printSingleValue(t))).join(" -> "),"]"):t.length>=1&&(e=X.printSingleValue(t[0])):e=X.printSingleValue(t)),e}},Q={integers:function(t,e){return Math.abs(e-t)},ordinal:function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},fp:{}};Q.fp.precision=function(t){const e=function(t,n){const r=Math.abs((n-t)/e.resolution);return X.isNegligible(r-Math.floor(r))?Math.floor(r):Math.ceil(r)};return e.resolution=t,e};const J=(t,e)=>(0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction((t=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.isFiltered){if(r.isFiltered(t))return!0}else if(r<=t&&r>=t)return!0}return!1})):t.filterExact(e[0]),e),$=(t,e)=>null===e||"undefined"===typeof e?t.length>0:t.some((t=>e<=t&&e>=t)),tt=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t},et=(t,e)=>(t.push(e),t),nt=t=>[];class rt{constructor(){this.__dcFlag__=X.uniqueId(),this._svgDescription=null,this._keyboardAccessible=!1,this._dimension=void 0,this._group=void 0,this._anchor=void 0,this._root=void 0,this._svg=void 0,this._isChild=void 0,this._minWidth=200,this._defaultWidthCalc=t=>{const e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>this._minWidth?e:this._minWidth},this._widthCalc=this._defaultWidthCalc,this._minHeight=200,this._defaultHeightCalc=t=>{const e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>this._minHeight?e:this._minHeight},this._heightCalc=this._defaultHeightCalc,this._width=void 0,this._height=void 0,this._useViewBoxResizing=!1,this._keyAccessor=Y("key"),this._valueAccessor=Y("value"),this._label=Y("key"),this._ordering=Y("key"),this._renderLabel=!1,this._title=t=>"".concat(this.keyAccessor()(t),": ").concat(this.valueAccessor()(t)),this._renderTitle=!0,this._controlsUseVisibility=!1,this._transitionDuration=750,this._transitionDelay=0,this._filterPrinter=K.filters,this._mandatoryAttributesList=["dimension","group"],this._chartGroup=w.DEFAULT_CHART_GROUP,this._listeners=o.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),this._legend=void 0,this._commitHandler=void 0,this._defaultData=t=>t.all(),this._data=this._defaultData,this._filters=[],this._filterHandler=J,this._hasFilterHandler=$,this._removeFilterHandler=tt,this._addFilterHandler=et,this._resetFilterHandler=nt}height(t){return arguments.length?(this._heightCalc=t?"function"===typeof t?t:X.constant(t):this._defaultHeightCalc,this._height=void 0,this):(X.isNumber(this._height)||(this._height=this._heightCalc(this._root.node())),this._height)}width(t){return arguments.length?(this._widthCalc=t?"function"===typeof t?t:X.constant(t):this._defaultWidthCalc,this._width=void 0,this):(X.isNumber(this._width)||(this._width=this._widthCalc(this._root.node())),this._width)}minWidth(t){return arguments.length?(this._minWidth=t,this):this._minWidth}minHeight(t){return arguments.length?(this._minHeight=t,this):this._minHeight}useViewBoxResizing(t){return arguments.length?(this._useViewBoxResizing=t,this):this._useViewBoxResizing}dimension(t){return arguments.length?(this._dimension=t,this.expireCache(),this):this._dimension}data(t){return arguments.length?(this._data="function"===typeof t?t:X.constant(t),this.expireCache(),this):this._data(this._group)}group(t,e){return arguments.length?(this._group=t,this._groupName=e,this.expireCache(),this):this._group}ordering(t){return arguments.length?(this._ordering=t,this.expireCache(),this):this._ordering}_computeOrderedGroups(t){return Array.from(t).sort(((t,e)=>s.ascending(this._ordering(t),this._ordering(e))))}filterAll(){return this.filter(null)}select(t){return this._root.select(t)}selectAll(t){return this._root?this._root.selectAll(t):null}anchor(t,e){if(!arguments.length)return this._anchor;if(V(t))this._anchor=t.anchor(),this._anchor.children&&(this._anchor="#".concat(t.anchorName())),this._root=t.root(),this._isChild=!0;else{if(!t)throw new x("parent must be defined");t.select&&t.classed?this._anchor=t.node():this._anchor=t,this._root=i.select(this._anchor),this._root.classed(w.CHART_CLASS,!0),P(this,e),this._isChild=!1}return this._chartGroup=e,this}anchorName(){const t=this.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart".concat(this.chartID())}root(t){return arguments.length?(this._root=t,this):this._root}svg(t){return arguments.length?(this._svg=t,this):this._svg}resetSvg(){return this.select("svg").remove(),this.generateSvg()}sizeSvg(){this._svg&&(this._useViewBoxResizing?this._svg.attr("viewBox")||this._svg.attr("viewBox","0 0 ".concat(this.width()," ").concat(this.height())):this._svg.attr("width",this.width()).attr("height",this.height()))}generateSvg(){return this._svg=this.root().append("svg"),(this._svgDescription||this._keyboardAccessible)&&(this._svg.append("desc").attr("id","desc-id-".concat(this.__dcFlag__)).html("".concat(this.svgDescription())),this._svg.attr("tabindex","0").attr("role","img").attr("aria-labelledby","desc-id-".concat(this.__dcFlag__))),this.sizeSvg(),this._svg}svgDescription(t){return arguments.length?(this._svgDescription=t,this):this._svgDescription||this.constructor.name}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}filterPrinter(t){return arguments.length?(this._filterPrinter=t,this):this._filterPrinter}controlsUseVisibility(t){return arguments.length?(this._controlsUseVisibility=t,this):this._controlsUseVisibility}turnOnControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display";this.selectAll(".reset").style(t,null),this.selectAll(".filter").text(this._filterPrinter(this.filters())).style(t,null)}return this}turnOffControls(){if(this._root){const t=this.controlsUseVisibility()?"visibility":"display",e=this.controlsUseVisibility()?"hidden":"none";this.selectAll(".reset").style(t,e),this.selectAll(".filter").style(t,e).text(this.filter())}return this}transitionDuration(t){return arguments.length?(this._transitionDuration=t,this):this._transitionDuration}transitionDelay(t){return arguments.length?(this._transitionDelay=t,this):this._transitionDelay}_mandatoryAttributes(t){return arguments.length?(this._mandatoryAttributesList=t,this):this._mandatoryAttributesList}checkForMandatoryAttributes(t){if(!this[t]||!this[t]())throw new G("Mandatory attribute chart.".concat(t," is missing on chart[#").concat(this.anchorName(),"]"))}render(){this._height=this._width=void 0,this._listeners.call("preRender",this,this),this._mandatoryAttributesList&&this._mandatoryAttributesList.forEach((t=>this.checkForMandatoryAttributes(t)));const t=this._doRender();return this._legend&&this._legend.render(),this._activateRenderlets("postRender"),t}_makeKeyboardAccessible(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=this._svg.selectAll(".dc-tabbable").attr("tabindex",0);t&&i.on("keydown",k.eventHandler(((e,r)=>{13===r.keyCode&&"object"===typeof e&&t.call(this,e,...n),32===r.keyCode&&"object"===typeof e&&(t.call(this,e,...n),r.preventDefault())})))}_activateRenderlets(t){this._listeners.call("pretransition",this,this),this.transitionDuration()>0&&this._svg?this._svg.transition().duration(this.transitionDuration()).delay(this.transitionDelay()).on("end",(()=>{this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this)})):(this._listeners.call("renderlet",this,this),t&&this._listeners.call(t,this,this))}redraw(){this.sizeSvg(),this._listeners.call("preRedraw",this,this);const t=this._doRedraw();return this._legend&&this._legend.render(),this._activateRenderlets("postRedraw"),t}commitHandler(t){return arguments.length?(this._commitHandler=t,this):this._commitHandler}redrawGroup(){return this._commitHandler?this._commitHandler(!1,((t,e)=>{t?console.log(t):N(this.chartGroup())})):N(this.chartGroup()),this}renderGroup(){return this._commitHandler?this._commitHandler(!1,((t,e)=>{t?console.log(t):F(this.chartGroup())})):F(this.chartGroup()),this}_invokeFilteredListener(t){void 0!==t&&this._listeners.call("filtered",this,this,t)}_invokeZoomedListener(){this._listeners.call("zoomed",this,this)}hasFilterHandler(t){return arguments.length?(this._hasFilterHandler=t,this):this._hasFilterHandler}hasFilter(t){return this._hasFilterHandler(this._filters,t)}removeFilterHandler(t){return arguments.length?(this._removeFilterHandler=t,this):this._removeFilterHandler}addFilterHandler(t){return arguments.length?(this._addFilterHandler=t,this):this._addFilterHandler}resetFilterHandler(t){return arguments.length?(this._resetFilterHandler=t,this):this._resetFilterHandler}applyFilters(t){if(this.dimension()&&this.dimension().filter){const e=this._filterHandler(this.dimension(),t);e&&(t=e)}return t}replaceFilter(t){return this._filters=this._resetFilterHandler(this._filters),this.filter(t),this}filter(t){if(!arguments.length)return this._filters.length>0?this._filters[0]:null;let e=this._filters;return t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach((t=>{e=this._hasFilterHandler(e,t)?this._removeFilterHandler(e,t):this._addFilterHandler(e,t)})):e=null===t?this._resetFilterHandler(e):this._hasFilterHandler(e,t)?this._removeFilterHandler(e,t):this._addFilterHandler(e,t),this._filters=this.applyFilters(e),this._invokeFilteredListener(t),null!==this._root&&this.hasFilter()?this.turnOnControls():this.turnOffControls(),this}filters(){return this._filters}highlightSelected(t){i.select(t).classed(w.SELECTED_CLASS,!0),i.select(t).classed(w.DESELECTED_CLASS,!1)}fadeDeselected(t){i.select(t).classed(w.SELECTED_CLASS,!1),i.select(t).classed(w.DESELECTED_CLASS,!0)}resetHighlight(t){i.select(t).classed(w.SELECTED_CLASS,!1),i.select(t).classed(w.DESELECTED_CLASS,!1)}onClick(t){const e=this.keyAccessor()(t);H.trigger((()=>{this.filter(e),this.redrawGroup()}))}filterHandler(t){return arguments.length?(this._filterHandler=t,this):this._filterHandler}_doRender(){return this}_doRedraw(){return this}legendables(){return[]}legendHighlight(){}legendReset(){}legendToggle(){}isLegendableHidden(){return!1}keyAccessor(t){return arguments.length?(this._keyAccessor=t,this):this._keyAccessor}valueAccessor(t){return arguments.length?(this._valueAccessor=t,this):this._valueAccessor}label(t,e){return arguments.length?(this._label=t,(void 0===e||e)&&(this._renderLabel=!0),this):this._label}renderLabel(t){return arguments.length?(this._renderLabel=t,this):this._renderLabel}title(t){return arguments.length?(this._title=t,this):this._title}renderTitle(t){return arguments.length?(this._renderTitle=t,this):this._renderTitle}chartGroup(t){return arguments.length?(this._isChild||L(this,this._chartGroup),this._chartGroup=t,this._isChild||P(this,this._chartGroup),this):this._chartGroup}expireCache(){return this}legend(t){return arguments.length?(this._legend=t,this._legend.parent(this),this):this._legend}chartID(){return this.__dcFlag__}options(t){const e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(const n in t)"function"===typeof this[n]?t[n]instanceof Array&&-1!==e.indexOf(n)?this[n].apply(this,t[n]):this[n].call(this,t[n]):A.debug("Not a valid option setter name: ".concat(n));return this}on(t,e){return this._listeners.on(t,e),this}renderlet(t){return A.warnOnce('chart.renderlet has been deprecated. Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),this.on("renderlet.".concat(X.uniqueId()),t),this}}const it=()=>new rt,ot=t=>class extends t{constructor(){super(),this._colors=a.scaleOrdinal(C.defaultColors()),this._colorAccessor=t=>this.keyAccessor()(t),this._colorCalculator=void 0;{const t=this;t.getColor=function(e,n){return t._colorCalculator?t._colorCalculator.call(this,e,n):t._colors(t._colorAccessor.call(this,e,n))}}}calculateColorDomain(){const t=[s.min(this.data(),this.colorAccessor()),s.max(this.data(),this.colorAccessor())];return this._colors.domain(t),this}colors(t){return arguments.length?(this._colors=t instanceof Array?a.scaleQuantize().range(t):"function"===typeof t?t:X.constant(t),this):this._colors}ordinalColors(t){return this.colors(a.scaleOrdinal().range(t))}linearColors(t){return this.colors(a.scaleLinear().range(t).interpolate(l.interpolateHcl))}colorAccessor(t){return arguments.length?(this._colorAccessor=t,this):this._colorAccessor}colorDomain(t){return arguments.length?(this._colors.domain(t),this):this._colors.domain()}colorCalculator(t){return arguments.length?(this._colorCalculator=t,this):this._colorCalculator||this.getColor}},st=t=>class extends(ot(t)){constructor(){super(),this._maxBubbleRelativeSize=.3,this._minRadiusWithLabel=10,this._sortBubbleSize=!1,this._elasticRadius=!1,this._excludeElasticZero=!0,this.BUBBLE_NODE_CLASS="node",this.BUBBLE_CLASS="bubble",this.MIN_RADIUS=10,this.renderLabel(!0),this.data((t=>{const e=t.all();if(this._keyboardAccessible&&e.sort(((t,e)=>s.ascending(this.keyAccessor()(t),this.keyAccessor()(e)))),this._sortBubbleSize){const t=this.radiusValueAccessor();e.sort(((e,n)=>s.descending(t(e),t(n))))}return e})),this._r=a.scaleLinear().domain([0,100])}_rValueAccessor(t){return t.r}r(t){return arguments.length?(this._r=t,this):this._r}elasticRadius(t){return arguments.length?(this._elasticRadius=t,this):this._elasticRadius}calculateRadiusDomain(){this._elasticRadius&&this.r().domain([this.rMin(),this.rMax()])}radiusValueAccessor(t){return arguments.length?(this._rValueAccessor=t,this):this._rValueAccessor}rMin(){let t=this.data().map(this.radiusValueAccessor());return this._excludeElasticZero&&(t=t.filter((t=>t>0))),s.min(t)}rMax(){return s.max(this.data(),(t=>this.radiusValueAccessor()(t)))}bubbleR(t){const e=this.radiusValueAccessor()(t);let n=this.r()(e);return(isNaN(n)||e<=0)&&(n=0),n}_labelFunction(t){return this.label()(t)}_shouldLabel(t){return this.bubbleR(t)>this._minRadiusWithLabel}_labelOpacity(t){return this._shouldLabel(t)?1:0}_labelPointerEvent(t){return this._shouldLabel(t)?"all":"none"}_doRenderLabel(t){if(this.renderLabel()){let e=t.select("text");e.empty()&&(e=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",k.eventHandler((t=>this.onClick(t))))),e.attr("opacity",0).attr("pointer-events",(t=>this._labelPointerEvent(t))).text((t=>this._labelFunction(t))),j(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",(t=>this._labelOpacity(t)))}}doUpdateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("pointer-events",(t=>this._labelPointerEvent(t))).text((t=>this._labelFunction(t)));j(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",(t=>this._labelOpacity(t)))}}_titleFunction(t){return this.title()(t)}_doRenderTitles(t){this.renderTitle()&&t.select("title").empty()&&t.append("title").text((t=>this._titleFunction(t)))}doUpdateTitles(t){this.renderTitle()&&t.select("title").text((t=>this._titleFunction(t)))}sortBubbleSize(t){return arguments.length?(this._sortBubbleSize=t,this):this._sortBubbleSize}minRadius(t){return arguments.length?(this.MIN_RADIUS=t,this):this.MIN_RADIUS}minRadiusWithLabel(t){return arguments.length?(this._minRadiusWithLabel=t,this):this._minRadiusWithLabel}maxBubbleRelativeSize(t){return arguments.length?(this._maxBubbleRelativeSize=t,this):this._maxBubbleRelativeSize}excludeElasticZero(t){return arguments.length?(this._excludeElasticZero=t,this):this._excludeElasticZero}fadeDeselectedArea(t){if(this.hasFilter()){const t=this;this.selectAll("g.".concat(t.BUBBLE_NODE_CLASS)).each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}))}else{const t=this;this.selectAll("g.".concat(t.BUBBLE_NODE_CLASS)).each((function(){t.resetHighlight(this)}))}}isSelectedNode(t){return this.hasFilter(t.key)}onClick(t){const e=t.key;H.trigger((()=>{this.filter(e),this.redrawGroup()}))}},at=t=>class extends t{constructor(){super(),this._cap=1/0,this._takeFront=!0,this._othersLabel="Others",this._othersGrouper=(t,e)=>{const n=s.sum(e,this.valueAccessor()),r=e.map(this.keyAccessor());return n>0?t.concat([{others:r,key:this.othersLabel(),value:n}]):t},this.ordering((t=>-t.value)),this.data((t=>{if(this._cap===1/0)return this._computeOrderedGroups(t.all());{let e,n=t.all();if(n=this._computeOrderedGroups(n),this._cap)if(this._takeFront)e=n.slice(this._cap),n=n.slice(0,this._cap);else{const t=Math.max(0,n.length-this._cap);e=n.slice(0,t),n=n.slice(t)}return this._othersGrouper?this._othersGrouper(n,e):n}}))}cappedKeyAccessor(t,e){return t.others?t.key:this.keyAccessor()(t,e)}cappedValueAccessor(t,e){return t.others?t.value:this.valueAccessor()(t,e)}cap(t){return arguments.length?(this._cap=t,this):this._cap}takeFront(t){return arguments.length?(this._takeFront=t,this):this._takeFront}othersLabel(t){return arguments.length?(this._othersLabel=t,this):this._othersLabel}othersGrouper(t){return arguments.length?(this._othersGrouper=t,this):this._othersGrouper}onClick(t){t.others&&this.filter([t.others]),super.onClick(t)}};class lt extends rt{constructor(){super(),this._margin={top:10,right:50,bottom:30,left:30}}margins(t){return arguments.length?(this._margin=t,this):this._margin}effectiveWidth(){return this.width()-this.margins().left-this.margins().right}effectiveHeight(){return this.height()-this.margins().top-this.margins().bottom}}const ct="grid-line",ut="horizontal",ht="vertical",dt="y-axis-label",ft="x-axis-label",pt="custom-brush-handle",gt=12;class mt extends(ot(lt)){constructor(){super(),this.colors(a.scaleOrdinal(c.schemeCategory10)),this._mandatoryAttributes().push("x"),this._parent=void 0,this._g=void 0,this._chartBodyG=void 0,this._x=void 0,this._origX=void 0,this._xOriginalDomain=void 0,this._xAxis=null,this._xUnits=Q.integers,this._xAxisPadding=0,this._xAxisPaddingUnit=n.timeDay,this._xElasticity=!1,this._xAxisLabel=void 0,this._xAxisLabelPadding=0,this._lastXDomain=void 0,this._y=void 0,this._yAxis=null,this._yAxisPadding=0,this._yElasticity=!1,this._yAxisLabel=void 0,this._yAxisLabelPadding=0,this._brush=d.brushX(),this._gBrush=void 0,this._brushOn=!0,this._parentBrushOn=!1,this._round=void 0,this._ignoreBrushEvents=!1,this._renderHorizontalGridLine=!1,this._renderVerticalGridLine=!1,this._resizing=!1,this._unitCount=void 0,this._zoomScale=[1,1/0],this._zoomOutRestrict=!0,this._zoom=h.zoom().on("zoom",k.eventHandler(((t,e)=>this._onZoom(e)))),this._nullZoom=h.zoom().on("zoom",null),this._hasBeenMouseZoomable=!1,this._ignoreZoomEvents=!1,this._rangeChart=void 0,this._focusChart=void 0,this._mouseZoomable=!1,this._clipPadding=0,this._fOuterRangeBandPadding=.5,this._fRangeBandPadding=0,this._useRightYAxis=!1,this._useTopXAxis=!1}rescale(){return this._unitCount=void 0,this._resizing=!0,this}resizing(t){return arguments.length?(this._resizing=t,this):this._resizing}rangeChart(t){return arguments.length?(this._rangeChart=t,this._rangeChart.focusChart(this),this):this._rangeChart}zoomScale(t){return arguments.length?(this._zoomScale=t,this):this._zoomScale}zoomOutRestrict(t){return arguments.length?(this._zoomOutRestrict=t,this):this._zoomOutRestrict}_generateG(t){this._parent=void 0===t?this.svg():t;const e=window.location.href.split("#")[0];return this._g=this._parent.append("g"),this._chartBodyG=this._g.append("g").attr("class","chart-body").attr("transform","translate(".concat(this.margins().left,", ").concat(this.margins().top,")")).attr("clip-path","url(".concat(e,"#").concat(this._getClipPathId(),")")),this._g}g(t){return arguments.length?(this._g=t,this):this._g}mouseZoomable(t){return arguments.length?(this._mouseZoomable=t,this):this._mouseZoomable}chartBodyG(t){return arguments.length?(this._chartBodyG=t,this):this._chartBodyG}x(t){return arguments.length?(this._x=t,this._xOriginalDomain=this._x.domain(),this.rescale(),this):this._x}xOriginalDomain(){return this._xOriginalDomain}xUnits(t){return arguments.length?(this._xUnits=t,this):this._xUnits}xAxis(t){return arguments.length?(this._xAxis=t,this):(this._xAxis||(this._xAxis=this._createXAxis()),this._xAxis)}elasticX(t){return arguments.length?(this._xElasticity=t,this):this._xElasticity}xAxisPadding(t){return arguments.length?(this._xAxisPadding=t,this):this._xAxisPadding}xAxisPaddingUnit(t){return arguments.length?(this._xAxisPaddingUnit=t,this):this._xAxisPaddingUnit}xUnitCount(){return void 0===this._unitCount&&(this.isOrdinal()?this._unitCount=this.x().domain().length:(this._unitCount=this.xUnits()(this.x().domain()[0],this.x().domain()[1]),this._unitCount instanceof Array&&(this._unitCount=this._unitCount.length))),this._unitCount}useRightYAxis(t){return arguments.length?(this._useRightYAxis!==t&&this._yAxis&&A.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),this._useRightYAxis=t,this):this._useRightYAxis}useTopXAxis(t){return arguments.length?(this._useTopXAxis!==t&&this._xAxis&&A.warn("Value of useTopXAxis has been altered, after xAxis was created. You might get unexpected yAxis behavior. Make calls to useTopXAxis sooner in your chart creation process."),this._useTopXAxis=t,this):this._useTopXAxis}isOrdinal(){return this.xUnits()===Q.ordinal}_useOuterPadding(){return!0}_ordinalXDomain(){return this._computeOrderedGroups(this.data()).map(this.keyAccessor())}_createXAxis(){return this._useTopXAxis?u.axisTop():u.axisBottom()}_prepareXAxis(t,e){this.isOrdinal()?(this._x.bandwidth||(A.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),this._x=a.scaleBand().domain(this._x.domain())),(this.elasticX()||0===this._x.domain().length)&&this._x.domain(this._ordinalXDomain())):this.elasticX()&&this._x.domain([this.xAxisMin(),this.xAxisMax()]);const n=this._x.domain();!e&&X.arraysEqual(this._lastXDomain,n)||this.rescale(),this._lastXDomain=n,this.isOrdinal()?this._x.range([0,this.xAxisLength()]).paddingInner(this._fRangeBandPadding).paddingOuter(this._useOuterPadding()?this._fOuterRangeBandPadding:0):this._x.range([0,this.xAxisLength()]),this._xAxis||(this._xAxis=this._createXAxis()),this._xAxis=this._xAxis.scale(this.x()),this._renderVerticalGridLines(t)}renderXAxis(t){let e=t.select("g.x");e.empty()&&(e=t.append("g").attr("class","axis x").attr("transform","translate(".concat(this.margins().left,",").concat(this._xAxisY(),")")));let n=t.select("text.".concat(ft));const r=this._useTopXAxis?this._xAxisLabelPadding:this.height()-this._xAxisLabelPadding;n.empty()&&this.xAxisLabel()&&(n=t.append("text").attr("class",ft).attr("transform","translate(".concat(this.margins().left+this.xAxisLength()/2,",").concat(r,")")).attr("text-anchor","middle")),this.xAxisLabel()&&n.text()!==this.xAxisLabel()&&n.text(this.xAxisLabel()),j(e,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(this.margins().left,",").concat(this._xAxisY(),")")).call(this._xAxis),j(n,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(this.margins().left+this.xAxisLength()/2,",").concat(r,")"))}_renderVerticalGridLines(t){let e=t.select("g.".concat(ht));if(this._renderVerticalGridLine){e.empty()&&(e=t.insert("g",":first-child").attr("class","".concat(ct," ").concat(ht)).attr("transform","translate(".concat(this.margins().left,",").concat(this.margins().top,")")));const n=this._xAxis.tickValues()?this._xAxis.tickValues():"function"===typeof this._x.ticks?this._x.ticks.apply(this._x,this._xAxis.tickArguments()):this._x.domain(),r=e.selectAll("line").data(n),i=r.enter().append("line").attr("x1",(t=>this._x(t))).attr("y1",this._xAxisY()-this.margins().top).attr("x2",(t=>this._x(t))).attr("y2",0).attr("opacity",0);j(i,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),j(r,this.transitionDuration(),this.transitionDelay()).attr("x1",(t=>this._x(t))).attr("y1",this._xAxisY()-this.margins().top).attr("x2",(t=>this._x(t))).attr("y2",0),r.exit().remove()}else e.selectAll("line").remove()}_xAxisY(){return this._useTopXAxis?this.margins().top:this.height()-this.margins().bottom}xAxisLength(){return this.effectiveWidth()}xAxisLabel(t,e){return arguments.length?(this._xAxisLabel=t,this.margins().bottom-=this._xAxisLabelPadding,this._xAxisLabelPadding=void 0===e?gt:e,this.margins().bottom+=this._xAxisLabelPadding,this):this._xAxisLabel}_createYAxis(){return this._useRightYAxis?u.axisRight():u.axisLeft()}_prepareYAxis(t){if(void 0===this._y||this.elasticY()){void 0===this._y&&(this._y=a.scaleLinear());const t=this.yAxisMin()||0,e=this.yAxisMax()||0;this._y.domain([t,e]).rangeRound([this.yAxisHeight(),0])}this._y.range([this.yAxisHeight(),0]),this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis.scale(this._y),this._renderHorizontalGridLinesForAxis(t,this._y,this._yAxis)}renderYAxisLabel(t,e,n,r){r=r||this._yAxisLabelPadding;let i=this.g().select("text.".concat(dt,".").concat(t,"-label"));const o=this.margins().top+this.yAxisHeight()/2;i.empty()&&e&&(i=this.g().append("text").attr("transform","translate(".concat(r,",").concat(o,"),rotate(").concat(n,")")).attr("class","".concat(dt," ").concat(t,"-label")).attr("text-anchor","middle").text(e)),e&&i.text()!==e&&i.text(e),j(i,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(r,",").concat(o,"),rotate(").concat(n,")"))}renderYAxisAt(t,e,n){let r=this.g().select("g.".concat(t));r.empty()&&(r=this.g().append("g").attr("class","axis ".concat(t)).attr("transform","translate(".concat(n,",").concat(this.margins().top,")"))),j(r,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(n,",").concat(this.margins().top,")")).call(e)}renderYAxis(){const t=this._useRightYAxis?this.width()-this.margins().right:this._yAxisX();this.renderYAxisAt("y",this._yAxis,t);const e=this._useRightYAxis?this.width()-this._yAxisLabelPadding:this._yAxisLabelPadding,n=this._useRightYAxis?90:-90;this.renderYAxisLabel("y",this.yAxisLabel(),n,e)}_renderHorizontalGridLinesForAxis(t,e,n){let r=t.select("g.".concat(ut));if(this._renderHorizontalGridLine){const i=n.tickValues()?n.tickValues():e.ticks?e.ticks.apply(e,n.tickArguments()):e.domain();r.empty()&&(r=t.insert("g",":first-child").attr("class","".concat(ct," ").concat(ut)).attr("transform","translate(".concat(this.margins().left,",").concat(this.margins().top,")")));const o=r.selectAll("line").data(i),s=o.enter().append("line").attr("x1",1).attr("y1",(t=>e(t))).attr("x2",this.xAxisLength()).attr("y2",(t=>e(t))).attr("opacity",0);j(s,this.transitionDuration(),this.transitionDelay()).attr("opacity",.5),j(o,this.transitionDuration(),this.transitionDelay()).attr("x1",1).attr("y1",(t=>e(t))).attr("x2",this.xAxisLength()).attr("y2",(t=>e(t))),o.exit().remove()}else r.selectAll("line").remove()}_yAxisX(){return this.useRightYAxis()?this.width()-this.margins().right:this.margins().left}yAxisLabel(t,e){return arguments.length?(this._yAxisLabel=t,this.margins().left-=this._yAxisLabelPadding,this._yAxisLabelPadding=void 0===e?gt:e,this.margins().left+=this._yAxisLabelPadding,this):this._yAxisLabel}y(t){return arguments.length?(this._y=t,this.rescale(),this):this._y}yAxis(t){return arguments.length?(this._yAxis=t,this):(this._yAxis||(this._yAxis=this._createYAxis()),this._yAxis)}elasticY(t){return arguments.length?(this._yElasticity=t,this):this._yElasticity}renderHorizontalGridLines(t){return arguments.length?(this._renderHorizontalGridLine=t,this):this._renderHorizontalGridLine}renderVerticalGridLines(t){return arguments.length?(this._renderVerticalGridLine=t,this):this._renderVerticalGridLine}xAxisMin(){const t=s.min(this.data(),(t=>this.keyAccessor()(t)));return X.subtract(t,this._xAxisPadding,this._xAxisPaddingUnit)}xAxisMax(){const t=s.max(this.data(),(t=>this.keyAccessor()(t)));return X.add(t,this._xAxisPadding,this._xAxisPaddingUnit)}yAxisMin(){const t=s.min(this.data(),(t=>this.valueAccessor()(t)));return X.subtract(t,this._yAxisPadding)}yAxisMax(){const t=s.max(this.data(),(t=>this.valueAccessor()(t)));return X.add(t,this._yAxisPadding)}yAxisPadding(t){return arguments.length?(this._yAxisPadding=t,this):this._yAxisPadding}yAxisHeight(){return this.effectiveHeight()}round(t){return arguments.length?(this._round=t,this):this._round}_rangeBandPadding(t){return arguments.length?(this._fRangeBandPadding=t,this):this._fRangeBandPadding}_outerRangeBandPadding(t){return arguments.length?(this._fOuterRangeBandPadding=t,this):this._fOuterRangeBandPadding}filter(t){return arguments.length?(super.filter(t),this.redrawBrush(t,!1),this):super.filter()}brush(t){return arguments.length?(this._brush=t,this):this._brush}renderBrush(t,e){this._brushOn&&(this._brush.on("start brush end",k.eventHandler(((t,e)=>this._brushing(e)))),this._gBrush=t.append("g").attr("class","brush").attr("transform","translate(".concat(this.margins().left,",").concat(this.margins().top,")")),this.setBrushExtents(),this.createBrushHandlePaths(this._gBrush,e),this.redrawBrush(this.filter(),e))}createBrushHandlePaths(t){let e=t.selectAll("path.".concat(pt)).data([{type:"w"},{type:"e"}]);e=e.enter().append("path").attr("class",pt).merge(e),e.attr("d",(t=>this.resizeHandlePath(t)))}extendBrush(t){return t&&this.round()&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}brushIsEmpty(t){return!t||t[1]<=t[0]}_brushing(t){if(this._ignoreBrushEvents)return;let e=t.selection;e&&(e=e.map(this.x().invert)),e=this.extendBrush(e),this.redrawBrush(e,!1);const n=this.brushIsEmpty(e)?null:W.RangedFilter(e[0],e[1]);H.trigger((()=>{this.applyBrushSelection(n)}),w.EVENT_DELAY)}applyBrushSelection(t){this.replaceFilter(t),this.redrawGroup()}_withoutBrushEvents(t){const e=this._ignoreBrushEvents;this._ignoreBrushEvents=!0;try{t()}finally{this._ignoreBrushEvents=e}}setBrushExtents(t){this._withoutBrushEvents((()=>{this._brush.extent([[0,0],[this.effectiveWidth(),this.effectiveHeight()]])})),this._gBrush.call(this._brush)}redrawBrush(t,e){if(this._brushOn&&this._gBrush)if(this._resizing&&this.setBrushExtents(e),t){const n=[this._x(t[0]),this._x(t[1])],r=z(e,this.transitionDuration(),this.transitionDelay())(this._gBrush);this._withoutBrushEvents((()=>{r.call(this._brush.move,n)})),r.selectAll("path.".concat(pt)).attr("display",null).attr("transform",((e,n)=>"translate(".concat(this._x(t[n]),", 0)"))).attr("d",(t=>this.resizeHandlePath(t)))}else this._withoutBrushEvents((()=>{this._gBrush.call(this._brush.move,null)})),this._gBrush.selectAll("path.".concat(pt)).attr("display","none");this.fadeDeselectedArea(t)}fadeDeselectedArea(t){}resizeHandlePath(t){const e=+("e"===(t=t.type)),n=e?1:-1,r=this.effectiveHeight()/3;return"M".concat(.5*n,",").concat(r,"A6,6 0 0 ").concat(e," ").concat(6.5*n,",").concat(r+6,"V").concat(2*r-6,"A6,6 0 0 ").concat(e," ").concat(.5*n,",").concat(2*r,"Z")+"M".concat(2.5*n,",").concat(r+8,"V").concat(2*r-8,"M").concat(4.5*n,",").concat(r+8,"V").concat(2*r-8)}_getClipPathId(){return"".concat(this.anchorName().replace(/[ .#=\[\]"]/g,"-"),"-clip")}clipPadding(t){return arguments.length?(this._clipPadding=t,this):this._clipPadding}_generateClipPath(){const t=X.appendOrSelect(this._parent,"defs"),e=this._getClipPathId(),n=X.appendOrSelect(t,"#".concat(e),"clipPath").attr("id",e),r=2*this._clipPadding;X.appendOrSelect(n,"rect").attr("width",this.xAxisLength()+r).attr("height",this.yAxisHeight()+r).attr("transform","translate(-".concat(this._clipPadding,", -").concat(this._clipPadding,")"))}_preprocessData(){}_doRender(){return this.resetSvg(),this._preprocessData(),this._generateG(),this._generateClipPath(),this._drawChart(!0),this._configureMouseZoom(),this}_doRedraw(){return this._preprocessData(),this._drawChart(!1),this._generateClipPath(),this}_drawChart(t){this.isOrdinal()&&(this._brushOn=!1),this._prepareXAxis(this.g(),t),this._prepareYAxis(this.g()),this.plotData(),(this.elasticX()||this._resizing||t)&&this.renderXAxis(this.g()),(this.elasticY()||this._resizing||t)&&this.renderYAxis(this.g()),t?this.renderBrush(this.g(),!1):this.redrawBrush(this.filter(),this._resizing),this.fadeDeselectedArea(this.filter()),this.resizing(!1)}_configureMouseZoom(){this._origX=this._x.copy(),this._mouseZoomable?this._enableMouseZoom():this._hasBeenMouseZoomable&&this._disableMouseZoom()}_enableMouseZoom(){this._hasBeenMouseZoomable=!0;const t=[[0,0],[this.effectiveWidth(),this.effectiveHeight()]];if(this._zoom.scaleExtent(this._zoomScale).extent(t).duration(this.transitionDuration()),this._zoomOutRestrict){const e=Math.max(this._zoomScale[0],1);this._zoom.translateExtent(t).scaleExtent([e,this._zoomScale[1]])}this.root().call(this._zoom),this._updateD3zoomTransform()}_disableMouseZoom(){this.root().call(this._nullZoom)}_zoomHandler(t,e){let n;this._hasRangeSelected(t)?(this.x().domain(t),n=W.RangedFilter(t[0],t[1])):(this.x().domain(this._xOriginalDomain),n=null),this.replaceFilter(n),this.rescale(),this.redraw(),e||(this._rangeChart&&!X.arraysEqual(this.filter(),this._rangeChart.filter())&&H.trigger((()=>{this._rangeChart.replaceFilter(n),this._rangeChart.redraw()})),this._invokeZoomedListener(),H.trigger((()=>{this.redrawGroup()}),w.EVENT_DELAY))}_domainToZoomTransform(t,e,n){const r=(e[1]-e[0])/(t[1]-t[0]),i=-1*n(t[0]);return h.zoomIdentity.scale(r).translate(i,0)}_updateD3zoomTransform(){this._zoom&&this._withoutZoomEvents((()=>{this._zoom.transform(this.root(),this._domainToZoomTransform(this.x().domain(),this._xOriginalDomain,this._origX))}))}_withoutZoomEvents(t){const e=this._ignoreZoomEvents;this._ignoreZoomEvents=!0;try{t()}finally{this._ignoreZoomEvents=e}}_onZoom(t){if(this._ignoreZoomEvents)return;const e=t.transform.rescaleX(this._origX).domain();this.focus(e,!1)}_checkExtents(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}focus(t,e){this._zoomOutRestrict&&(t=this._checkExtents(t,this._xOriginalDomain),this._rangeChart&&(t=this._checkExtents(t,this._rangeChart.x().domain()))),this._zoomHandler(t,e),this._updateD3zoomTransform()}refocused(){return!X.arraysEqual(this.x().domain(),this._xOriginalDomain)}focusChart(t){return arguments.length?(this._focusChart=t,this.on("filtered.dcjs-range-chart",(t=>{t.filter()?X.arraysEqual(t.filter(),this._focusChart.filter())||H.trigger((()=>{this._focusChart.focus(t.filter(),!0)})):H.trigger((()=>{this._focusChart.x().domain(this._focusChart.xOriginalDomain(),!0)}))})),this):this._focusChart}brushOn(t){return arguments.length?(this._brushOn=t,this):this._brushOn}parentBrushOn(t){return arguments.length?(this._parentBrushOn=t,this):this._parentBrushOn}gBrush(){return this._gBrush}_hasRangeSelected(t){return t instanceof Array&&t.length>1}}const vt=function(){let t=1,e=1,n=0;const r=0;let o=null,l=Number,c=yt,u=_t,h=null,d=!1;const p=3;let g=.3,m=.8,v=!1,y=!0,_=!1;function b(b){b.each((function(f,b){f=f.map(l).sort(s.ascending);const x=i.select(this),w=f.length;let S,A;if(0===w)return;const E=f.quartiles=u(f),C=c&&c.call(this,f,b),k=C&&C.map((t=>f[t])),T=C?s.range(0,C[0]).concat(s.range(C[1]+1,w)):s.range(w);y?(S=f[0],A=f[w-1]):(S=f[C[0]],A=f[C[1]]);const M=s.range(C[0],C[1]+1),P=a.scaleLinear().domain(o&&o.call(this,f,b)||[S,A]).range([e,0]),L=this.__chart__||a.scaleLinear().domain([0,1/0]).range(P.range());this.__chart__=P;const O=x.selectAll("line.center").data(k?[k]:[]);O.enter().insert("line","rect").attr("class","center").attr("x1",t/2).attr("y1",(t=>L(t[0]))).attr("x2",t/2).attr("y2",(t=>L(t[1]))).style("opacity",1e-6).transition().duration(n).delay(r).style("opacity",1).attr("y1",(t=>P(t[0]))).attr("y2",(t=>P(t[1]))),O.transition().duration(n).delay(r).style("opacity",1).attr("x1",t/2).attr("x2",t/2).attr("y1",(t=>P(t[0]))).attr("y2",(t=>P(t[1]))),O.exit().transition().duration(n).delay(r).style("opacity",1e-6).attr("y1",(t=>P(t[0]))).attr("y2",(t=>P(t[1]))).remove();const R=x.selectAll("rect.box").data([E]);R.enter().append("rect").attr("class","box").attr("x",0).attr("y",(t=>L(t[2]))).attr("width",t).attr("height",(t=>L(t[0])-L(t[2]))).style("fill-opacity",d?.1:1).transition().duration(n).delay(r).attr("y",(t=>P(t[2]))).attr("height",(t=>P(t[0])-P(t[2]))),R.transition().duration(n).delay(r).attr("width",t).attr("y",(t=>P(t[2]))).attr("height",(t=>P(t[0])-P(t[2])));const D=x.selectAll("line.median").data([E[1]]);D.enter().append("line").attr("class","median").attr("x1",0).attr("y1",L).attr("x2",t).attr("y2",L).transition().duration(n).delay(r).attr("y1",P).attr("y2",P),D.transition().duration(n).delay(r).attr("x1",0).attr("x2",t).attr("y1",P).attr("y2",P);const I=x.selectAll("line.whisker").data(k||[]);if(I.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",L).attr("x2",t).attr("y2",L).style("opacity",1e-6).transition().duration(n).delay(r).attr("y1",P).attr("y2",P).style("opacity",1),I.transition().duration(n).delay(r).attr("x1",0).attr("x2",t).attr("y1",P).attr("y2",P).style("opacity",1),I.exit().transition().duration(n).delay(r).attr("y1",P).attr("y2",P).style("opacity",1e-6).remove(),y){const e=_?"outlierBold":"outlier",i=_?3:5,o=_?function(){return Math.floor(Math.random()*(t*m)+1+(t-t*m)/2)}:function(){return t/2},s=x.selectAll("circle.".concat(e)).data(T,Number);s.enter().insert("circle","text").attr("class",e).attr("r",i).attr("cx",o).attr("cy",(t=>L(f[t]))).style("opacity",1e-6).transition().duration(n).delay(r).attr("cy",(t=>P(f[t]))).style("opacity",.6),v&&(s.selectAll("title").remove(),s.append("title").text((t=>f[t]))),s.transition().duration(n).delay(r).attr("cx",o).attr("cy",(t=>P(f[t]))).style("opacity",.6),s.exit().transition().duration(n).delay(r).attr("cy",0).style("opacity",1e-6).remove()}if(d){const e=x.selectAll("circle.data").data(M);e.enter().insert("circle","text").attr("class","data").attr("r",p).attr("cx",(()=>Math.floor(Math.random()*(t*m)+1+(t-t*m)/2))).attr("cy",(t=>L(f[t]))).style("opacity",1e-6).transition().duration(n).delay(r).attr("cy",(t=>P(f[t]))).style("opacity",g),v&&(e.selectAll("title").remove(),e.append("title").text((t=>f[t]))),e.transition().duration(n).delay(r).attr("cx",(()=>Math.floor(Math.random()*(t*m)+1+(t-t*m)/2))).attr("cy",(t=>P(f[t]))).style("opacity",g),e.exit().transition().duration(n).delay(r).attr("cy",0).style("opacity",1e-6).remove()}const F=h||P.tickFormat(8),N=x.selectAll("text.box").data(E);N.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",((t,e)=>1&e?6:-6)).attr("x",((e,n)=>1&n?t:0)).attr("y",L).attr("text-anchor",((t,e)=>1&e?"start":"end")).text(F).transition().duration(n).delay(r).attr("y",P),N.transition().duration(n).delay(r).text(F).attr("x",((e,n)=>1&n?t:0)).attr("y",P);const j=x.selectAll("text.whisker").data(k||[]);j.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",t).attr("y",L).text(F).style("opacity",1e-6).transition().duration(n).delay(r).attr("y",P).style("opacity",1),j.transition().duration(n).delay(r).text(F).attr("x",t).attr("y",P).style("opacity",1),j.exit().transition().duration(n).delay(r).attr("y",P).style("opacity",1e-6).remove(),delete f.quartiles})),f.timerFlush()}return b.width=function(e){return arguments.length?(t=e,b):t},b.height=function(t){return arguments.length?(e=t,b):e},b.tickFormat=function(t){return arguments.length?(h=t,b):h},b.showOutliers=function(t){return arguments.length?(y=t,b):y},b.boldOutlier=function(t){return arguments.length?(_=t,b):_},b.renderDataPoints=function(t){return arguments.length?(d=t,b):d},b.renderTitle=function(t){return arguments.length?(v=t,b):v},b.dataOpacity=function(t){return arguments.length?(g=t,b):g},b.dataWidthPortion=function(t){return arguments.length?(m=t,b):m},b.duration=function(t){return arguments.length?(n=t,b):n},b.domain=function(t){return arguments.length?(o=null===t||"function"===typeof t?t:X.constant(t),b):o},b.value=function(t){return arguments.length?(l=t,b):l},b.whiskers=function(t){return arguments.length?(c=t,b):c},b.quartiles=function(t){return arguments.length?(u=t,b):u},b};function yt(t){return[0,t.length-1]}function _t(t){return[s.quantile(t,.25),s.quantile(t,.5),s.quantile(t,.75)]}class bt extends mt{constructor(){super(),this._stackLayout=p.stack(),this._stack=[],this._titles={},this._hidableStacks=!1,this._evadeDomainFilter=!1,this.data((()=>{const t=this._stack.filter(this._visibility);if(!t.length)return[];t.forEach(((t,e)=>this._prepareValues(t,e)));const e=t[0].values.map(((e,n)=>{const r={x:e.x};return t.forEach((t=>{r[t.name]=t.values[n].y})),r})),n=t.map((t=>t.name));return this.stackLayout().keys(n)(e).forEach(((e,n)=>{e.forEach(((e,r)=>{t[n].values[r].y0=e[0],t[n].values[r].y1=e[1]}))})),t})),this.colorAccessor((function(t){return this.layer||this.name||t.name||t.layer}))}_prepareValues(t,e){const n=t.accessor||this.valueAccessor();t.name=String(t.name||e);const r=t.group.all().map(((e,r)=>({x:this.keyAccessor()(e,r),y:t.hidden?null:n(e,r),data:e,layer:t.name,hidden:t.hidden})));t.domainValues=r.filter((t=>this._domainFilter()(t))),t.values=this.evadeDomainFilter()?r:t.domainValues}_domainFilter(){if(!this.x())return X.constant(!0);const t=this.x().domain();return this.isOrdinal()||this.elasticX()?()=>!0:e=>e.x>=t[0]&&e.x<=t[t.length-1]}stack(t,e,n){if(!arguments.length)return this._stack;arguments.length<=2&&(n=e);const r={group:t};return"string"===typeof e&&(r.name=e),"function"===typeof n&&(r.accessor=n),this._stack.push(r),this}group(t,e,n){return arguments.length?(this._stack=[],this._titles={},this.stack(t,e),n&&this.valueAccessor(n),super.group(t,e)):super.group()}hidableStacks(t){return arguments.length?(this._hidableStacks=t,this):this._hidableStacks}_findLayerByName(t){const e=this._stack.map(Y("name")).indexOf(t);return this._stack[e]}hideStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!0),this}showStack(t){const e=this._findLayerByName(t);return e&&(e.hidden=!1),this}getValueAccessorByIndex(t){return this._stack[t].accessor||this.valueAccessor()}yAxisMin(){const t=s.min(this._flattenStack(),(t=>t.y<0?t.y+t.y0:t.y0));return X.subtract(t,this.yAxisPadding())}yAxisMax(){const t=s.max(this._flattenStack(),(t=>t.y>0?t.y+t.y0:t.y0));return X.add(t,this.yAxisPadding())}_flattenStack(){const t=this.data().map((t=>t.domainValues));return[].concat(...t)}xAxisMin(){const t=s.min(this._flattenStack(),Y("x"));return X.subtract(t,this.xAxisPadding(),this.xAxisPaddingUnit())}xAxisMax(){const t=s.max(this._flattenStack(),Y("x"));return X.add(t,this.xAxisPadding(),this.xAxisPaddingUnit())}title(t,e){return t?"function"===typeof t?super.title(t):t===this._groupName&&"function"===typeof e?super.title(e):"function"!==typeof e?this._titles[t]||super.title():(this._titles[t]=e,this):super.title()}stackLayout(t){return arguments.length?(this._stackLayout=t,this):this._stackLayout}evadeDomainFilter(t){return arguments.length?(this._evadeDomainFilter=t,this):this._evadeDomainFilter}_visibility(t){return!t.hidden}_ordinalXDomain(){const t=this._flattenStack().map(Y("data"));return this._computeOrderedGroups(t).map(this.keyAccessor())}legendables(){return this._stack.map(((t,e)=>({chart:this,name:t.name,hidden:t.hidden||!1,color:this.getColor.call(t,t.values,e)})))}isLegendableHidden(t){const e=this._findLayerByName(t.name);return!!e&&e.hidden}legendToggle(t){this._hidableStacks&&(this.isLegendableHidden(t)?this.showStack(t.name):this.hideStack(t.name),this.renderGroup())}}const xt=1,wt=2,St=3;class At extends bt{constructor(t,e){super(),this._gap=wt,this._centerBar=!1,this._alwaysUseRounding=!1,this._barWidth=void 0,this.label((t=>X.printSingleValue(t.y0+t.y)),!1),this.anchor(t,e)}outerPadding(t){return arguments.length?this._outerRangeBandPadding(t):this._outerRangeBandPadding()}rescale(){return super.rescale(),this._barWidth=void 0,this}render(){return this.round()&&this._centerBar&&!this._alwaysUseRounding&&A.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),super.render()}plotData(){let t=this.chartBodyG().selectAll("g.stack").data(this.data());this._calculateBarWidth(),t=t.enter().append("g").attr("class",((t,e)=>"stack _".concat(e))).merge(t);const e=t.size()-1;{const n=this;t.each((function(t,r){const o=i.select(this);n._renderBars(o,r,t),n.renderLabel()&&e===r&&n._renderLabels(o,r,t)}))}}_barHeight(t){return X.safeNumber(Math.abs(this.y()(t.y+t.y0)-this.y()(t.y0)))}_labelXPos(t){let e=this.x()(t.x);return this._centerBar||(e+=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),X.safeNumber(e)}_labelYPos(t){let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),X.safeNumber(e-St)}_renderLabels(t,e,n){const r=t.selectAll("text.barLabel").data(n.values,Y("x")),i=r.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",(t=>this._labelXPos(t))).attr("y",(t=>this._labelYPos(t))).merge(r);this.isOrdinal()&&(i.on("click",k.eventHandler((t=>this.onClick(t)))),i.attr("cursor","pointer")),j(i,this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this._labelXPos(t))).attr("y",(t=>this._labelYPos(t))).text((t=>this.label()(t))),j(r.exit(),this.transitionDuration(),this.transitionDelay()).attr("height",0).remove()}_barXPos(t){let e=this.x()(t.x);return this._centerBar&&(e-=this._barWidth/2),this.isOrdinal()&&void 0!==this._gap&&(e+=this._gap/2),X.safeNumber(e)}_renderBars(t,e,n){const r=t.selectAll("rect.bar").data(n.values,Y("x")),i=r.enter().append("rect").attr("class","bar").classed("dc-tabbable",this._keyboardAccessible).attr("fill",Y("data",this.getColor)).attr("x",(t=>this._barXPos(t))).attr("y",this.yAxisHeight()).attr("height",0),o=i.merge(r);this.renderTitle()&&i.append("title").text(Y("data",this.title(n.name))),this.isOrdinal()&&o.on("click",k.eventHandler((t=>this.onClick(t)))),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),j(o,this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this._barXPos(t))).attr("y",(t=>{let e=this.y()(t.y+t.y0);return t.y<0&&(e-=this._barHeight(t)),X.safeNumber(e)})).attr("width",this._barWidth).attr("height",(t=>this._barHeight(t))).attr("fill",Y("data",this.getColor)).select("title").text(Y("data",this.title(n.name))),j(r.exit(),this.transitionDuration(),this.transitionDelay()).attr("x",(t=>this.x()(t.x))).attr("width",.9*this._barWidth).remove()}_calculateBarWidth(){if(void 0===this._barWidth){const t=this.xUnitCount();this.isOrdinal()&&void 0===this._gap?this._barWidth=Math.floor(this.x().bandwidth()):this._gap?this._barWidth=Math.floor((this.xAxisLength()-(t-1)*this._gap)/t):this._barWidth=Math.floor(this.xAxisLength()/(1+this.barPadding())/t),(this._barWidth===1/0||isNaN(this._barWidth)||this._barWidth<xt)&&(this._barWidth=xt)}}fadeDeselectedArea(t){const e=this.chartBodyG().selectAll("rect.bar");if(this.isOrdinal())this.hasFilter()?(e.classed(w.SELECTED_CLASS,(t=>this.hasFilter(t.x))),e.classed(w.DESELECTED_CLASS,(t=>!this.hasFilter(t.x)))):(e.classed(w.SELECTED_CLASS,!1),e.classed(w.DESELECTED_CLASS,!1));else if(this.brushOn()||this.parentBrushOn())if(this.brushIsEmpty(t))e.classed(w.DESELECTED_CLASS,!1);else{const n=t[0],r=t[1];e.classed(w.DESELECTED_CLASS,(t=>t.x<n||t.x>=r))}}centerBar(t){return arguments.length?(this._centerBar=t,this):this._centerBar}onClick(t){super.onClick(t.data)}barPadding(t){return arguments.length?(this._rangeBandPadding(t),this._gap=void 0,this):this._rangeBandPadding()}_useOuterPadding(){return void 0===this._gap}gap(t){return arguments.length?(this._gap=t,this):this._gap}extendBrush(t){return t&&this.round()&&(!this._centerBar||this._alwaysUseRounding)&&(t[0]=this.round()(t[0]),t[1]=this.round()(t[1])),t}alwaysUseRounding(t){return arguments.length?(this._alwaysUseRounding=t,this):this._alwaysUseRounding}legendHighlight(t){const e=(t,e)=>function(){const n=i.select(this).attr("fill")===t;return e?!n:n};this.isLegendableHidden(t)||this.g().selectAll("rect.bar").classed("highlight",e(t.color)).classed("fadeout",e(t.color,!0))}legendReset(){this.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)}xAxisMax(){let t=super.xAxisMax();return"resolution"in this.xUnits()&&(t+=this.xUnits().resolution),t}}const Et=(t,e)=>new At(t,e);function Ct(t){return e=>{const n=e.quartiles[0],r=e.quartiles[2],i=(r-n)*t;let o=-1,s=e.length;do{++o}while(e[o]<n-i);do{--s}while(e[s]>r+i);return[o,s]}}class kt extends mt{constructor(t,e){super(),this._whiskerIqrFactor=1.5,this._whiskersIqr=Ct,this._whiskers=this._whiskersIqr(this._whiskerIqrFactor),this._box=vt(),this._tickFormat=null,this._renderDataPoints=!1,this._dataOpacity=.3,this._dataWidthPortion=.8,this._showOutliers=!0,this._boldOutlier=!1,this._yRangePadding=8,this._boxWidth=(t,e)=>this.isOrdinal()?this.x().bandwidth():t/(1+this.boxPadding())/e,this.x(a.scaleBand()),this.xUnits(Q.ordinal),this.data((t=>t.all().map((t=>(t.map=e=>e.call(t,t),t))).filter((t=>0!==this.valueAccessor()(t).length)))),this.boxPadding(.8),this.outerPadding(.5),this.anchor(t,e)}boxPadding(t){return arguments.length?this._rangeBandPadding(t):this._rangeBandPadding()}outerPadding(t){return arguments.length?this._outerRangeBandPadding(t):this._outerRangeBandPadding()}boxWidth(t){return arguments.length?(this._boxWidth="function"===typeof t?t:X.constant(t),this):this._boxWidth}_boxTransform(t,e){const n=this.x()(this.keyAccessor()(t,e));return"translate(".concat(n,", 0)")}_preprocessData(){this.elasticX()&&this.x().domain([])}plotData(){this._calculatedBoxWidth=this._boxWidth(this.effectiveWidth(),this.xUnitCount()),this._box.whiskers(this._whiskers).width(this._calculatedBoxWidth).height(this.effectiveHeight()).value(this.valueAccessor()).domain(this.y().domain()).duration(this.transitionDuration()).tickFormat(this._tickFormat).renderDataPoints(this._renderDataPoints).dataOpacity(this._dataOpacity).dataWidthPortion(this._dataWidthPortion).renderTitle(this.renderTitle()).showOutliers(this._showOutliers).boldOutlier(this._boldOutlier);const t=this.chartBodyG().selectAll("g.box").data(this.data(),this.keyAccessor()),e=this._renderBoxes(t);this._updateBoxes(e),this._removeBoxes(t),this.fadeDeselectedArea(this.filter())}_renderBoxes(t){const e=t.enter().append("g");return e.attr("class","box").classed("dc-tabbable",this._keyboardAccessible).attr("transform",((t,e)=>this._boxTransform(t,e))).call(this._box).on("click",k.eventHandler((t=>{this.filter(this.keyAccessor()(t)),this.redrawGroup()}))).selectAll("circle").classed("dc-tabbable",this._keyboardAccessible),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),e.merge(t)}_updateBoxes(t){const e=this;j(t,this.transitionDuration(),this.transitionDelay()).attr("transform",((t,e)=>this._boxTransform(t,e))).call(this._box).each((function(t){const n=e.getColor(t,0);i.select(this).select("rect.box").attr("fill",n),i.select(this).selectAll("circle.data").attr("fill",n)}))}_removeBoxes(t){t.exit().remove().call(this._box)}_minDataValue(){return s.min(this.data(),(t=>s.min(this.valueAccessor()(t))))}_maxDataValue(){return s.max(this.data(),(t=>s.max(this.valueAccessor()(t))))}_yAxisRangeRatio(){return(this._maxDataValue()-this._minDataValue())/this.effectiveHeight()}onClick(t){this.filter(this.keyAccessor()(t)),this.redrawGroup()}fadeDeselectedArea(t){const e=this;if(this.hasFilter())if(this.isOrdinal())this.g().selectAll("g.box").each((function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}));else{if(!this.brushOn()&&!this.parentBrushOn())return;const n=t[0],r=t[1];this.g().selectAll("g.box").each((function(t){const i=e.keyAccessor()(t);i<n||i>=r?e.fadeDeselected(this):e.highlightSelected(this)}))}else this.g().selectAll("g.box").each((function(){e.resetHighlight(this)}))}isSelectedNode(t){return this.hasFilter(this.keyAccessor()(t))}yAxisMin(){const t=this._yRangePadding*this._yAxisRangeRatio();return X.subtract(this._minDataValue()-t,this.yAxisPadding())}yAxisMax(){const t=this._yRangePadding*this._yAxisRangeRatio();return X.add(this._maxDataValue()+t,this.yAxisPadding())}tickFormat(t){return arguments.length?(this._tickFormat=t,this):this._tickFormat}yRangePadding(t){return arguments.length?(this._yRangePadding=t,this):this._yRangePadding}renderDataPoints(t){return arguments.length?(this._renderDataPoints=t,this):this._renderDataPoints}dataOpacity(t){return arguments.length?(this._dataOpacity=t,this):this._dataOpacity}dataWidthPortion(t){return arguments.length?(this._dataWidthPortion=t,this):this._dataWidthPortion}showOutliers(t){return arguments.length?(this._showOutliers=t,this):this._showOutliers}boldOutlier(t){return arguments.length?(this._boldOutlier=t,this):this._boldOutlier}}const Tt=(t,e)=>new kt(t,e);class Mt extends(st(mt)){constructor(t,e){super(),this.transitionDuration(750),this.transitionDelay(0),this.anchor(t,e)}_bubbleLocator(t){return"translate(".concat(this._bubbleX(t),",").concat(this._bubbleY(t),")")}plotData(){this.calculateRadiusDomain(),this.r().range([this.MIN_RADIUS,this.xAxisLength()*this.maxBubbleRelativeSize()]);const t=this.data();let e=this.chartBodyG().selectAll("g.".concat(this.BUBBLE_NODE_CLASS)).data(t,(t=>t.key));(this.sortBubbleSize()||this.keyboardAccessible())&&e.order(),this._removeNodes(e),e=this._renderNodes(e),this._updateNodes(e),this.fadeDeselectedArea(this.filter())}_renderNodes(t){const e=t.enter().append("g");return e.attr("class",this.BUBBLE_NODE_CLASS).attr("transform",(t=>this._bubbleLocator(t))).append("circle").attr("class",((t,e)=>"".concat(this.BUBBLE_CLASS," _").concat(e))).on("click",k.eventHandler((t=>this.onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).attr("fill",this.getColor).attr("r",0),t=e.merge(t),j(t,this.transitionDuration(),this.transitionDelay()).select("circle.".concat(this.BUBBLE_CLASS)).attr("r",(t=>this.bubbleR(t))).attr("opacity",(t=>this.bubbleR(t)>0?1:0)),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),this._doRenderLabel(e),this._doRenderTitles(e),t}_updateNodes(t){j(t,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._bubbleLocator(t))).select("circle.".concat(this.BUBBLE_CLASS)).attr("fill",this.getColor).attr("r",(t=>this.bubbleR(t))).attr("opacity",(t=>this.bubbleR(t)>0?1:0)),this.doUpdateLabels(t),this.doUpdateTitles(t)}_removeNodes(t){t.exit().remove()}_bubbleX(t){let e=this.x()(this.keyAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}_bubbleY(t){let e=this.y()(this.valueAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}renderBrush(){}redrawBrush(t,e){this.fadeDeselectedArea(t)}}const Pt=(t,e)=>new Mt(t,e),Lt="bubble-overlay",Ot="node",Rt="bubble";class Dt extends(st(rt)){constructor(t,e){super(),this._g=void 0,this._points=[],this._keyboardAccessible=!1,this.transitionDuration(750),this.transitionDelay(0),this.radiusValueAccessor((t=>t.value)),this.anchor(t,e)}point(t,e,n){return this._points.push({name:t,x:e,y:n}),this}_doRender(){return this._g=this._initOverlayG(),this.r().range([this.MIN_RADIUS,this.width()*this.maxBubbleRelativeSize()]),this._initializeBubbles(),this.fadeDeselectedArea(this.filter()),this}_initOverlayG(){return this._g=this.select("g.".concat(Lt)),this._g.empty()&&(this._g=this.svg().append("g").attr("class",Lt)),this._g}_initializeBubbles(){const t=this._mapData();this.calculateRadiusDomain(),this._points.forEach((e=>{const n=this._getNodeG(e,t);let r=n.select("circle.".concat(Rt));r.empty()&&(r=n.append("circle").attr("class",Rt).classed("dc-tabbable",this._keyboardAccessible).attr("r",0).attr("fill",this.getColor).on("click",k.eventHandler((t=>this.onClick(t))))),this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick),j(r,this.transitionDuration(),this.transitionDelay()).attr("r",(t=>this.bubbleR(t))),this._doRenderLabel(n),this._doRenderTitles(n)}))}_mapData(){const t={};return this.data().forEach((e=>{t[this.keyAccessor()(e)]=e})),t}_getNodeG(t,e){const n="".concat(Ot," ").concat(X.nameToId(t.name));let r=this._g.select("g.".concat(X.nameToId(t.name)));return r.empty()&&(r=this._g.append("g").attr("class",n).attr("transform","translate(".concat(t.x,",").concat(t.y,")"))),r.datum(e[t.name]),r}_doRedraw(){return this._updateBubbles(),this.fadeDeselectedArea(this.filter()),this}_updateBubbles(){const t=this._mapData();this.calculateRadiusDomain(),this._points.forEach((e=>{const n=this._getNodeG(e,t),r=n.select("circle.".concat(Rt));j(r,this.transitionDuration(),this.transitionDelay()).attr("r",(t=>this.bubbleR(t))).attr("fill",this.getColor),this.doUpdateLabels(n),this.doUpdateTitles(n)}))}debug(t){if(t){let t=this.select("g.".concat(w.DEBUG_GROUP_CLASS));t.empty()&&(t=this.svg().append("g").attr("class",w.DEBUG_GROUP_CLASS));const e=t.append("text").attr("x",10).attr("y",20);t.append("rect").attr("width",this.width()).attr("height",this.height()).on("mousemove",k.eventHandler(((n,r)=>{const i=k.pointer(r,t.node()),o="".concat(i[0],", ").concat(i[1]);e.text(o)})))}else this.selectAll(".debug").remove();return this}}const It=(t,e)=>new Dt(t,e),Ft="dc-cbox-group",Nt="dc-cbox-item";class jt extends rt{constructor(t,e){super(),this._cbox=void 0,this._promptText="Select all",this._multiple=!1,this._inputType="radio",this._promptValue=null,this._uniqueId=X.uniqueId(),this.data((t=>t.all().filter(this._filterDisplayed))),this._filterDisplayed=t=>this.valueAccessor()(t)>0,this._order=(t,e)=>this.keyAccessor()(t)>this.keyAccessor()(e)?1:this.keyAccessor()(t)<this.keyAccessor()(e)?-1:0,this.anchor(t,e)}_doRender(){return this._doRedraw()}_doRedraw(){return this.select("ul").remove(),this._cbox=this.root().append("ul").classed(Ft,!0),this._renderOptions(),this.hasFilter()&&this._multiple?this._cbox.selectAll("input").property("checked",(t=>t&&this.filters().indexOf(String(this.keyAccessor()(t)))>=0||!1)):this.hasFilter()&&this._cbox.selectAll("input").property("checked",(t=>!!t&&this.keyAccessor()(t)===this.filter())),this}_renderOptions(){let t=this._cbox.selectAll("li.".concat(Nt)).data(this.data(),(t=>this.keyAccessor()(t)));t.exit().remove(),t=t.enter().append("li").classed(Nt,!0).merge(t),t.append("input").attr("type",this._inputType).attr("value",(t=>this.keyAccessor()(t))).attr("name","domain_".concat(this._uniqueId)).attr("id",((t,e)=>"input_".concat(this._uniqueId,"_").concat(e))),t.append("label").attr("for",((t,e)=>"input_".concat(this._uniqueId,"_").concat(e))).text(this.title());const e=this;if(this._multiple)this._cbox.append("li").append("input").attr("type","reset").text(this._promptText).on("click",k.eventHandler((function(t,n){return e._onChange(t,n,this)})));else{const t=this._cbox.append("li");t.append("input").attr("type",this._inputType).attr("value",this._promptValue).attr("name","domain_".concat(this._uniqueId)).attr("id",((t,e)=>"input_".concat(this._uniqueId,"_all"))).property("checked",!0),t.append("label").attr("for",((t,e)=>"input_".concat(this._uniqueId,"_all"))).text(this._promptText)}return this._cbox.selectAll("li.".concat(Nt)).sort(this._order),this._cbox.on("change",k.eventHandler((function(t,n){return e._onChange(t,n,this)}))),t}_onChange(t,e,n){let r,o;i.select(e.target).datum()?(o=i.select(n).selectAll("input").filter((function(t){if(t)return this.checked})),r=o.nodes().map((t=>t.value)),this._multiple||1!==r.length||(r=r[0])):r=this._promptValue||null,this.onChange(r)}onChange(t){t&&this._multiple?this.replaceFilter([t]):t?this.replaceFilter(t):this.filterAll(),H.trigger((()=>{this.redrawGroup()}))}order(t){return arguments.length?(this._order=t,this):this._order}promptText(t){return arguments.length?(this._promptText=t,this):this._promptText}filterDisplayed(t){return arguments.length?(this._filterDisplayed=t,this):this._filterDisplayed}multiple(t){return arguments.length?(this._multiple=t,this._multiple?this._inputType="checkbox":this._inputType="radio",this):this._multiple}promptValue(t){return arguments.length?(this._promptValue=t,this):this._promptValue}}const zt=(t,e)=>new jt(t,e),Bt="sub",Ut=12;class Vt extends mt{constructor(t,e){super(),this._children=[],this._childOptions={},this._shareColors=!1,this._shareTitle=!0,this._alignYAxes=!1,this._rightYAxis=u.axisRight(),this._rightYAxisLabel=0,this._rightYAxisLabelPadding=Ut,this._rightY=void 0,this._rightAxisGridLines=!1,this._mandatoryAttributes([]),this.transitionDuration(500),this.transitionDelay(0),this.on("filtered.dcjs-composite-chart",(t=>{for(let e=0;e<this._children.length;++e)this._children[e].replaceFilter(this.filter())})),this.anchor(t,e)}_generateG(){const t=super._generateG();for(let e=0;e<this._children.length;++e){const t=this._children[e];this._generateChildG(t,e),t.dimension()||t.dimension(this.dimension()),t.group()||t.group(this.group()),t.chartGroup(this.chartGroup()),t.svg(this.svg()),t.xUnits(this.xUnits()),t.transitionDuration(this.transitionDuration(),this.transitionDelay()),t.parentBrushOn(this.brushOn()),t.brushOn(!1),t.renderTitle(this.renderTitle()),t.elasticX(this.elasticX())}return t}rescale(){return super.rescale(),this._children.forEach((t=>{t.rescale()})),this}resizing(t){return arguments.length?(super.resizing(t),this._children.forEach((e=>{e.resizing(t)})),this):super.resizing()}_prepareYAxis(){const t=0!==this._leftYAxisChildren().length,e=0!==this._rightYAxisChildren().length,n=this._calculateYAxisRanges(t,e);t&&this._prepareLeftYAxis(n),e&&this._prepareRightYAxis(n),this._leftYAxisChildren().length>0&&!this._rightAxisGridLines?this._renderHorizontalGridLinesForAxis(this.g(),this.y(),this.yAxis()):this._rightYAxisChildren().length>0&&this._renderHorizontalGridLinesForAxis(this.g(),this._rightY,this._rightYAxis)}renderYAxis(){0!==this._leftYAxisChildren().length&&(this.renderYAxisAt("y",this.yAxis(),this.margins().left),this.renderYAxisLabel("y",this.yAxisLabel(),-90)),0!==this._rightYAxisChildren().length&&(this.renderYAxisAt("yr",this.rightYAxis(),this.width()-this.margins().right),this.renderYAxisLabel("yr",this.rightYAxisLabel(),90,this.width()-this._rightYAxisLabelPadding))}_calculateYAxisRanges(t,e){let n,r,i,o,s;return t&&(n=this._yAxisMin(),r=this._yAxisMax()),e&&(i=this._rightYAxisMin(),o=this._rightYAxisMax()),this.alignYAxes()&&t&&e&&(s=this._alignYAxisRanges(n,r,i,o)),s||{lyAxisMin:n,lyAxisMax:r,ryAxisMin:i,ryAxisMax:o}}_alignYAxisRanges(t,e,n,r){const i=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/i),lyAxisMax:Math.max(e,r/i),ryAxisMin:Math.min(n,t*i),ryAxisMax:Math.max(r,e*i)}}_prepareRightYAxis(t){const e=void 0===this.rightY()||this.elasticY(),n=e||this.resizing();void 0===this.rightY()&&this.rightY(a.scaleLinear()),e&&this.rightY().domain([t.ryAxisMin,t.ryAxisMax]),n&&this.rightY().rangeRound([this.yAxisHeight(),0]),this.rightY().range([this.yAxisHeight(),0]),this.rightYAxis(this.rightYAxis().scale(this.rightY()))}_prepareLeftYAxis(t){const e=void 0===this.y()||this.elasticY(),n=e||this.resizing();void 0===this.y()&&this.y(a.scaleLinear()),e&&this.y().domain([t.lyAxisMin,t.lyAxisMax]),n&&this.y().rangeRound([this.yAxisHeight(),0]),this.y().range([this.yAxisHeight(),0]),this.yAxis(this.yAxis().scale(this.y()))}_generateChildG(t,e){t._generateG(this.g()),t.g().attr("class","".concat(Bt," _").concat(e))}plotData(){for(let t=0;t<this._children.length;++t){const e=this._children[t];e.g()||this._generateChildG(e,t),this._shareColors&&e.colors(this.colors()),e.x(this.x()),e.xAxis(this.xAxis()),e.useRightYAxis()?(e.y(this.rightY()),e.yAxis(this.rightYAxis())):(e.y(this.y()),e.yAxis(this.yAxis())),e.plotData(),e._activateRenderlets()}}useRightAxisGridLines(t){return arguments?(this._rightAxisGridLines=t,this):this._rightAxisGridLines}childOptions(t){return arguments.length?(this._childOptions=t,this._children.forEach((t=>{t.options(this._childOptions)})),this):this._childOptions}fadeDeselectedArea(t){if(this.brushOn())for(let e=0;e<this._children.length;++e)this._children[e].fadeDeselectedArea(t)}rightYAxisLabel(t,e){return arguments.length?(this._rightYAxisLabel=t,this.margins().right-=this._rightYAxisLabelPadding,this._rightYAxisLabelPadding=void 0===e?Ut:e,this.margins().right+=this._rightYAxisLabelPadding,this):this._rightYAxisLabel}compose(t){return this._children=t,this._children.forEach((t=>{t.height(this.height()),t.width(this.width()),t.margins(this.margins()),this._shareTitle&&t.title(this.title()),t.options(this._childOptions)})),this.rescale(),this}_setChildrenProperty(t,e){this._children.forEach((n=>{n[t](e)}))}height(t){return arguments.length?(super.height(t),this._setChildrenProperty("height",t),this):super.height()}width(t){return arguments.length?(super.width(t),this._setChildrenProperty("width",t),this):super.width()}margins(t){return arguments.length?(super.margins(t),this._setChildrenProperty("margins",t),this):super.margins()}children(){return this._children}shareColors(t){return arguments.length?(this._shareColors=t,this):this._shareColors}shareTitle(t){return arguments.length?(this._shareTitle=t,this):this._shareTitle}rightY(t){return arguments.length?(this._rightY=t,this.rescale(),this):this._rightY}alignYAxes(t){return arguments.length?(this._alignYAxes=t,this.rescale(),this):this._alignYAxes}_leftYAxisChildren(){return this._children.filter((t=>!t.useRightYAxis()))}_rightYAxisChildren(){return this._children.filter((t=>t.useRightYAxis()))}_getYAxisMin(t){return t.map((t=>t.yAxisMin()))}_yAxisMin(){return s.min(this._getYAxisMin(this._leftYAxisChildren()))}_rightYAxisMin(){return s.min(this._getYAxisMin(this._rightYAxisChildren()))}_getYAxisMax(t){return t.map((t=>t.yAxisMax()))}_yAxisMax(){return X.add(s.max(this._getYAxisMax(this._leftYAxisChildren())),this.yAxisPadding())}_rightYAxisMax(){return X.add(s.max(this._getYAxisMax(this._rightYAxisChildren())),this.yAxisPadding())}_getAllXAxisMinFromChildCharts(){return this._children.map((t=>t.xAxisMin()))}xAxisMin(){return X.subtract(s.min(this._getAllXAxisMinFromChildCharts()),this.xAxisPadding(),this.xAxisPaddingUnit())}_getAllXAxisMaxFromChildCharts(){return this._children.map((t=>t.xAxisMax()))}xAxisMax(){return X.add(s.max(this._getAllXAxisMaxFromChildCharts()),this.xAxisPadding(),this.xAxisPaddingUnit())}legendables(){return this._children.reduce(((t,e)=>(this._shareColors&&e.colors(this.colors()),t.push.apply(t,e.legendables()),t)),[])}legendHighlight(t){for(let e=0;e<this._children.length;++e)this._children[e].legendHighlight(t)}legendReset(t){for(let e=0;e<this._children.length;++e)this._children[e].legendReset(t)}legendToggle(){console.log("composite should not be getting legendToggle itself")}rightYAxis(t){return arguments.length?(this._rightYAxis=t,this):this._rightYAxis}yAxisMin(){throw new Error("Not supported for this chart type")}yAxisMax(){throw new Error("Not supported for this chart type")}}const Ht=(t,e)=>new Vt(t,e);class Wt extends rt{constructor(t,e){super(),this._formatNumber=r.format(",d"),this._crossfilter=null,this._groupAll=null,this._html={some:"",all:""},this._mandatoryAttributes(["crossfilter","groupAll"]),this.anchor(t,e)}html(t){return arguments.length?(t.all&&(this._html.all=t.all),t.some&&(this._html.some=t.some),this):this._html}formatNumber(t){return arguments.length?(this._formatNumber=t,this):this._formatNumber}_doRender(){const t=this.crossfilter().size(),e=this.groupAll().value(),n=this._formatNumber(t),r=this._formatNumber(e);return t===e&&""!==this._html.all?this.root().html(this._html.all.replace("%total-count",n).replace("%filter-count",r)):""!==this._html.some?this.root().html(this._html.some.replace("%total-count",n).replace("%filter-count",r)):(this.selectAll(".total-count").text(n),this.selectAll(".filter-count").text(r)),this}_doRedraw(){return this._doRender()}crossfilter(t){return arguments.length?(this._crossfilter=t,this):this._crossfilter}dimension(t){return A.warnOnce("consider using dataCount.crossfilter instead of dataCount.dimension for clarity"),arguments.length?this.crossfilter(t):this.crossfilter()}groupAll(t){return arguments.length?(this._groupAll=t,this):this._groupAll}group(t){return A.warnOnce("consider using dataCount.groupAll instead of dataCount.group for clarity"),arguments.length?this.groupAll(t):this.groupAll()}}const Gt=(t,e)=>new Wt(t,e),Yt="dc-grid-label",Xt="dc-grid-item",qt="dc-grid-section dc-grid-group",Zt="dc-grid-top";class Kt extends rt{constructor(t,e){super(),this._section=null,this._size=999,this._html=function(t){return"you need to provide an html() handling param:  ".concat(JSON.stringify(t))},this._sortBy=function(t){return t},this._order=s.ascending,this._beginSlice=0,this._endSlice=void 0,this._htmlSection=t=>"<div class='".concat(qt,"'><h1 class='").concat(Yt,"'>").concat(this.keyAccessor()(t),"</h1></div>"),this._mandatoryAttributes(["dimension","section"]),this.anchor(t,e)}_doRender(){return this.selectAll("div.".concat(Zt)).remove(),this._renderItems(this._renderSections()),this}_renderSections(){const t=this.root().selectAll("div.".concat(Zt)).data(this._nestEntries(),(t=>this.keyAccessor()(t))),e=t.enter().append("div").attr("class",Zt);return this._htmlSection&&e.html((t=>this._htmlSection(t))),t.exit().remove(),e}_nestEntries(){let t=this.dimension().top(this._size);return t=t.sort(((t,e)=>this._order(this._sortBy(t),this._sortBy(e)))).slice(this._beginSlice,this._endSlice),k.nester({key:this.section(),sortKeys:this._order,entries:t})}_renderItems(t){let e=t.order().selectAll("div.".concat(Xt)).data((t=>t.values));return e.exit().remove(),e=e.enter().append("div").attr("class",Xt).html((t=>this._html(t))).merge(e),e}_doRedraw(){return this._doRender()}section(t){return arguments.length?(this._section=t,this):this._section}group(t){return A.warnOnce("consider using dataGrid.section instead of dataGrid.group for clarity"),arguments.length?this.section(t):this.section()}beginSlice(t){return arguments.length?(this._beginSlice=t,this):this._beginSlice}endSlice(t){return arguments.length?(this._endSlice=t,this):this._endSlice}size(t){return arguments.length?(this._size=t,this):this._size}html(t){return arguments.length?(this._html=t,this):this._html}htmlSection(t){return arguments.length?(this._htmlSection=t,this):this._htmlSection}htmlGroup(t){return A.warnOnce("consider using dataGrid.htmlSection instead of dataGrid.htmlGroup for clarity"),arguments.length?this.htmlSection(t):this.htmlSection()}sortBy(t){return arguments.length?(this._sortBy=t,this):this._sortBy}order(t){return arguments.length?(this._order=t,this):this._order}}const Qt=(t,e)=>new Kt(t,e),Jt="dc-table-label",$t="dc-table-row",te="dc-table-column",ee="dc-table-section dc-table-group",ne="dc-table-head";class re extends rt{constructor(t,e){super(),this._size=25,this._columns=[],this._sortBy=t=>t,this._order=s.ascending,this._beginSlice=0,this._endSlice=void 0,this._showSections=!0,this._section=()=>"",this._mandatoryAttributes(["dimension"]),this.anchor(t,e)}_doRender(){return this.selectAll("tbody").remove(),this._renderRows(this._renderSections()),this}_doColumnValueFormat(t,e){return"function"===typeof t?t(e):"string"===typeof t?e[t]:t.format(e)}_doColumnHeaderFormat(t){return"function"===typeof t?this._doColumnHeaderFnToString(t):"string"===typeof t?this._doColumnHeaderCapitalize(t):String(t.label)}_doColumnHeaderCapitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}_doColumnHeaderFnToString(t){let e=String(t);const n=e.indexOf("return ");if(n>=0){const t=e.lastIndexOf(";");t>=0&&(e=e.substring(n+7,t),e.indexOf("numberFormat")>=0&&(e=e.replace("numberFormat","")))}return e}_renderSections(){let t=!0;if(this._columns.forEach((e=>{t&="function"===typeof e})),!t){let t=this.selectAll("thead").data([0]);t.exit().remove(),t=t.enter().append("thead").merge(t);let e=t.selectAll("tr").data([0]);e.exit().remove(),e=e.enter().append("tr").merge(e);const n=e.selectAll("th").data(this._columns);n.exit().remove(),n.enter().append("th").merge(n).attr("class",ne).html((t=>this._doColumnHeaderFormat(t)))}const e=this.root().selectAll("tbody").data(this._nestEntries(),(t=>this.keyAccessor()(t))),n=e.enter().append("tbody");return!0===this._showSections&&n.append("tr").attr("class",ee).append("td").attr("class",Jt).attr("colspan",this._columns.length).html((t=>this.keyAccessor()(t))),e.exit().remove(),n}_nestEntries(){let t;return t=this._order===s.ascending?this.dimension().bottom(this._size):this.dimension().top(this._size),t=t.sort(((t,e)=>this._order(this._sortBy(t),this._sortBy(e)))).slice(this._beginSlice,this._endSlice),k.nester({key:this.section(),sortKeys:this._order,entries:t})}_renderRows(t){const e=t.order().selectAll("tr.".concat($t)).data((t=>t.values)),n=e.enter().append("tr").attr("class",$t);return this._columns.forEach(((t,e)=>{n.append("td").attr("class","".concat(te," _").concat(e)).html((e=>this._doColumnValueFormat(t,e)))})),e.exit().remove(),e}_doRedraw(){return this._doRender()}section(t){return arguments.length?(this._section=t,this):this._section}group(t){return A.warnOnce("consider using dataTable.section instead of dataTable.group for clarity"),arguments.length?this.section(t):this.section()}size(t){return arguments.length?(this._size=t,this):this._size}beginSlice(t){return arguments.length?(this._beginSlice=t,this):this._beginSlice}endSlice(t){return arguments.length?(this._endSlice=t,this):this._endSlice}columns(t){return arguments.length?(this._columns=t,this):this._columns}sortBy(t){return arguments.length?(this._sortBy=t,this):this._sortBy}order(t){return arguments.length?(this._order=t,this):this._order}showSections(t){return arguments.length?(this._showSections=t,this):this._showSections}showGroups(t){return A.warnOnce("consider using dataTable.showSections instead of dataTable.showGroups for clarity"),arguments.length?this.showSections(t):this.showSections()}}const ie=(t,e)=>new re(t,e);class oe extends(ot(rt)){constructor(t,e){super(),this.colorAccessor((t=>t||0)),this._geoPath=g.geoPath(),this._projectionFlag=void 0,this._projection=void 0,this._geoJsons=[],this.anchor(t,e)}_doRender(){this.resetSvg();for(let t=0;t<this._geoJsons.length;++t){let e=this.svg().append("g").attr("class","layer".concat(t)).selectAll("g.".concat(this._geoJson(t).name)).data(this._geoJson(t).data);e=e.enter().append("g").attr("class",this._geoJson(t).name).merge(e),e.append("path").classed("dc-tabbable",this._keyboardAccessible).attr("fill","white").attr("d",this._getGeoPath()),e.append("title"),this._plotData(t)}this._projectionFlag=!1}_plotData(t){const e=this._generateLayeredData();if(this._isDataLayer(t)){const n=this._renderRegionG(t);this._renderPaths(n,t,e),this._renderTitles(n,t,e)}}_generateLayeredData(){const t={},e=this.data();for(let n=0;n<e.length;++n)t[this.keyAccessor()(e[n])]=this.valueAccessor()(e[n]);return t}_isDataLayer(t){return this._geoJson(t).keyAccessor}_renderRegionG(t){return this.svg().selectAll(this._layerSelector(t)).classed("selected",(e=>this._isSelected(t,e))).classed("deselected",(e=>this._isDeselected(t,e))).attr("class",(e=>{const n=this._geoJson(t).name,r=X.nameToId(this._geoJson(t).keyAccessor(e));let i="".concat(n," ").concat(r);return this._isSelected(t,e)&&(i+=" selected"),this._isDeselected(t,e)&&(i+=" deselected"),i}))}_layerSelector(t){return"g.layer".concat(t," g.").concat(this._geoJson(t).name)}_isSelected(t,e){return this.hasFilter()&&this.hasFilter(this._getKey(t,e))}_isDeselected(t,e){return this.hasFilter()&&!this.hasFilter(this._getKey(t,e))}_getKey(t,e){return this._geoJson(t).keyAccessor(e)}_geoJson(t){return this._geoJsons[t]}_renderPaths(t,e,n){const r=t.select("path").attr("fill",(function(){const t=i.select(this).attr("fill");return t||"none"})).on("click",k.eventHandler((t=>this.onClick(t,e))));this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick,e),j(r,this.transitionDuration(),this.transitionDelay()).attr("fill",((t,r)=>this.getColor(n[this._geoJson(e).keyAccessor(t)],r)))}onClick(t,e){const n=this._geoJson(e).keyAccessor(t);H.trigger((()=>{this.filter(n),this.redrawGroup()}))}_renderTitles(t,e,n){this.renderTitle()&&t.selectAll("title").text((t=>{const r=this._getKey(e,t),i=n[r];return this.title()({key:r,value:i})}))}_doRedraw(){for(let t=0;t<this._geoJsons.length;++t)this._plotData(t),this._projectionFlag&&this.svg().selectAll("g.".concat(this._geoJson(t).name," path")).attr("d",this._getGeoPath());this._projectionFlag=!1}overlayGeoJson(t,e,n){for(let r=0;r<this._geoJsons.length;++r)if(this._geoJsons[r].name===e)return this._geoJsons[r].data=t,this._geoJsons[r].keyAccessor=n,this;return this._geoJsons.push({name:e,data:t,keyAccessor:n}),this}projection(t){return arguments.length?(this._projection=t,this._projectionFlag=!0,this):this._projection}_getGeoPath(){return void 0===this._projection?(A.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),this._geoPath.projection(g.geoAlbersUsa())):this._geoPath.projection(this._projection)}geoJsons(){return this._geoJsons}geoPath(){return this._geoPath}removeGeoJson(t){const e=[];for(let n=0;n<this._geoJsons.length;++n){const r=this._geoJsons[n];r.name!==t&&e.push(r)}return this._geoJsons=e,this}}const se=(t,e)=>new oe(t,e),ae=6.75;class le extends(ot(lt)){constructor(t,e){super(),this._chartBody=void 0,this._cols=void 0,this._rows=void 0,this._colOrdering=s.ascending,this._rowOrdering=s.ascending,this._colScale=a.scaleBand(),this._rowScale=a.scaleBand(),this._xBorderRadius=ae,this._yBorderRadius=ae,this._mandatoryAttributes(["group"]),this.title(this.colorAccessor()),this._colsLabel=t=>t,this._rowsLabel=t=>t,this._xAxisOnClick=t=>{this._filterAxis(0,t)},this._yAxisOnClick=t=>{this._filterAxis(1,t)},this._boxOnClick=t=>{const e=t.key;H.trigger((()=>{this.filter(W.TwoDimensionalFilter(e)),this.redrawGroup()}))},this.anchor(t,e)}colsLabel(t){return arguments.length?(this._colsLabel=t,this):this._colsLabel}rowsLabel(t){return arguments.length?(this._rowsLabel=t,this):this._rowsLabel}_filterAxis(t,e){const n=this.selectAll(".box-group").filter((n=>n.key[t]===e)),r=n.filter((t=>!this.hasFilter(t.key)));H.trigger((()=>{const t=(r.empty()?n:r).data().map((t=>W.TwoDimensionalFilter(t.key)));this.filter([t]),this.redrawGroup()}))}filter(t){const e=t=>(A.warnOnce("heatmap.filter taking a coordinate is deprecated - please pass dc.filters.TwoDimensionalFilter instead"),this._filter(W.TwoDimensionalFilter(t)));return arguments.length?null===t||"TwoDimensionalFilter"===t.filterType||Array.isArray(t)&&Array.isArray(t[0])&&"TwoDimensionalFilter"===t[0][0].filterType?super.filter(t):e(t):super.filter()}rows(t){return arguments.length?(this._rows=t,this):this._rows}rowOrdering(t){return arguments.length?(this._rowOrdering=t,this):this._rowOrdering}cols(t){return arguments.length?(this._cols=t,this):this._cols}colOrdering(t){return arguments.length?(this._colOrdering=t,this):this._colOrdering}_doRender(){return this.resetSvg(),this._chartBody=this.svg().append("g").attr("class","heatmap").attr("transform","translate(".concat(this.margins().left,",").concat(this.margins().top,")")),this._doRedraw()}_doRedraw(){const t=this.data();let e=this.rows()||t.map(this.valueAccessor()),n=this.cols()||t.map(this.keyAccessor());this._rowOrdering&&(e=e.sort(this._rowOrdering)),this._colOrdering&&(n=n.sort(this._colOrdering)),e=this._rowScale.domain(e),n=this._colScale.domain(n);const r=e.domain().length,i=n.domain().length,o=Math.floor(this.effectiveWidth()/i),s=Math.floor(this.effectiveHeight()/r);n.rangeRound([0,this.effectiveWidth()]),e.rangeRound([this.effectiveHeight(),0]);let a=this._chartBody.selectAll("g.box-group").data(this.data(),((t,e)=>"".concat(this.keyAccessor()(t,e),"\0").concat(this.valueAccessor()(t,e))));a.exit().remove();const l=a.enter().append("g").attr("class","box-group");l.append("rect").attr("class","heat-box").classed("dc-tabbable",this._keyboardAccessible).attr("fill","white").attr("x",((t,e)=>n(this.keyAccessor()(t,e)))).attr("y",((t,n)=>e(this.valueAccessor()(t,n)))).on("click",k.eventHandler(this.boxOnClick())),this._keyboardAccessible&&this._makeKeyboardAccessible(this.boxOnClick),a=l.merge(a),this.renderTitle()&&(l.append("title"),a.select("title").text(this.title())),j(a.select("rect"),this.transitionDuration(),this.transitionDelay()).attr("x",((t,e)=>n(this.keyAccessor()(t,e)))).attr("y",((t,n)=>e(this.valueAccessor()(t,n)))).attr("rx",this._xBorderRadius).attr("ry",this._yBorderRadius).attr("fill",this.getColor).attr("width",o).attr("height",s);let c=this._chartBody.select("g.cols");c.empty()&&(c=this._chartBody.append("g").attr("class","cols axis"));let u=c.selectAll("text").data(n.domain());u.exit().remove(),u=u.enter().append("text").attr("x",(t=>n(t)+o/2)).style("text-anchor","middle").attr("y",this.effectiveHeight()).attr("dy",12).on("click",k.eventHandler(this.xAxisOnClick())).text(this.colsLabel()).merge(u),j(u,this.transitionDuration(),this.transitionDelay()).text(this.colsLabel()).attr("x",(t=>n(t)+o/2)).attr("y",this.effectiveHeight());let h=this._chartBody.select("g.rows");h.empty()&&(h=this._chartBody.append("g").attr("class","rows axis"));let d=h.selectAll("text").data(e.domain());if(d.exit().remove(),d=d.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",(t=>e(t)+s/2)).attr("dy",6).on("click",k.eventHandler(this.yAxisOnClick())).text(this.rowsLabel()).merge(d),j(d,this.transitionDuration(),this.transitionDelay()).text(this.rowsLabel()).attr("y",(t=>e(t)+s/2)),this.hasFilter()){const t=this;this.selectAll("g.box-group").each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}))}else{const t=this;this.selectAll("g.box-group").each((function(){t.resetHighlight(this)}))}return this}boxOnClick(t){return arguments.length?(this._boxOnClick=t,this):this._boxOnClick}xAxisOnClick(t){return arguments.length?(this._xAxisOnClick=t,this):this._xAxisOnClick}yAxisOnClick(t){return arguments.length?(this._yAxisOnClick=t,this):this._yAxisOnClick}xBorderRadius(t){return arguments.length?(this._xBorderRadius=t,this):this._xBorderRadius}yBorderRadius(t){return arguments.length?(this._yBorderRadius=t,this):this._yBorderRadius}isSelectedNode(t){return this.hasFilter(t.key)}}const ce=(t,e)=>new le(t,e);class ue{constructor(){this._htmlLegendDivCssClass="dc-html-legend",this._legendItemCssClassHorizontal="dc-legend-item-horizontal",this._legendItemCssClassVertical="dc-legend-item-vertical",this._parent=void 0,this._container=void 0,this._legendText=Y("name"),this._maxItems=void 0,this._horizontal=!1,this._legendItemClass=void 0,this._highlightSelected=!1,this._keyboardAccessible=!1}parent(t){return arguments.length?(this._parent=t,this):this._parent}render(){this._defaultLegendItemCssClass=this._horizontal?this._legendItemCssClassHorizontal:this._legendItemCssClassVertical,this._container.select("div.".concat(this._htmlLegendDivCssClass)).remove();const t=this._container.append("div").attr("class",this._htmlLegendDivCssClass);t.attr("style","max-width:".concat(this._container.nodes()[0].style.width));let e=this._parent.legendables();const n=this._parent.filters();void 0!==this._maxItems&&(e=e.slice(0,this._maxItems));const r=this._legendItemClass?this._legendItemClass:this._defaultLegendItemCssClass,i=t.selectAll("div.".concat(r)).data(e).enter().append("div").classed(r,!0).on("mouseover",k.eventHandler((t=>this._parent.legendHighlight(t)))).on("mouseout",k.eventHandler((t=>this._parent.legendReset(t)))).on("click",k.eventHandler((t=>this._parent.legendToggle(t))));this._highlightSelected&&i.classed(w.SELECTED_CLASS,(t=>-1!==n.indexOf(t.name))),i.append("span").attr("class","dc-legend-item-color").style("background-color",Y("color")),i.append("span").attr("class","dc-legend-item-label").classed("dc-tabbable",this._keyboardAccessible).attr("title",this._legendText).text(this._legendText),this._keyboardAccessible&&this._makeLegendKeyboardAccessible()}container(t){return arguments.length?(this._container=i.select(t),this):this._container}legendItemClass(t){return arguments.length?(this._legendItemClass=t,this):this._legendItemClass}highlightSelected(t){return arguments.length?(this._highlightSelected=t,this):this._highlightSelected}horizontal(t){return arguments.length?(this._horizontal=t,this):this._horizontal}legendText(t){return arguments.length?(this._legendText=t,this):this._legendText}maxItems(t){return arguments.length?(this._maxItems=X.isNumber(t)?t:void 0,this):this._maxItems}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}_makeLegendKeyboardAccessible(){this._parent._svgDescription||(this._parent.svg().append("desc").attr("id","desc-id-".concat(this._parent.__dcFlag__)).html("".concat(this._parent.svgDescription())),this._parent.svg().attr("tabindex","0").attr("role","img").attr("aria-labelledby","desc-id-".concat(this._parent.__dcFlag__))),this.container().selectAll(".dc-legend-item-label.dc-tabbable").attr("tabindex",0).on("keydown",k.eventHandler(((t,e)=>{13===e.keyCode&&"object"===typeof t&&t.chart.legendToggle(t),32===e.keyCode&&"object"===typeof t&&(t.chart.legendToggle(t),e.preventDefault())}))).on("focus",k.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("blur",k.eventHandler((t=>{this._parent.legendReset(t)})))}}const he=()=>new ue,de=2;class fe{constructor(){this._parent=void 0,this._x=0,this._y=0,this._itemHeight=12,this._gap=5,this._horizontal=!1,this._legendWidth=560,this._itemWidth=70,this._autoItemWidth=!1,this._legendText=Y("name"),this._maxItems=void 0,this._highlightSelected=!1,this._keyboardAccessible=!1,this._g=void 0}parent(t){return arguments.length?(this._parent=t,this):this._parent}x(t){return arguments.length?(this._x=t,this):this._x}y(t){return arguments.length?(this._y=t,this):this._y}gap(t){return arguments.length?(this._gap=t,this):this._gap}highlightSelected(t){return arguments.length?(this._highlightSelected=t,this):this._highlightSelected}itemHeight(t){return arguments.length?(this._itemHeight=t,this):this._itemHeight}horizontal(t){return arguments.length?(this._horizontal=t,this):this._horizontal}legendWidth(t){return arguments.length?(this._legendWidth=t,this):this._legendWidth}itemWidth(t){return arguments.length?(this._itemWidth=t,this):this._itemWidth}autoItemWidth(t){return arguments.length?(this._autoItemWidth=t,this):this._autoItemWidth}legendText(t){return arguments.length?(this._legendText=t,this):this._legendText}maxItems(t){return arguments.length?(this._maxItems=X.isNumber(t)?t:void 0,this):this._maxItems}keyboardAccessible(t){return arguments.length?(this._keyboardAccessible=t,this):this._keyboardAccessible}_legendItemHeight(){return this._gap+this._itemHeight}_makeLegendKeyboardAccessible(){this._parent._svgDescription||(this._parent.svg().append("desc").attr("id","desc-id-".concat(this._parent.__dcFlag__)).html("".concat(this._parent.svgDescription())),this._parent.svg().attr("tabindex","0").attr("role","img").attr("aria-labelledby","desc-id-".concat(this._parent.__dcFlag__))),this._parent.svg().selectAll(".dc-legend .dc-tabbable").attr("tabindex",0).on("keydown",k.eventHandler(((t,e)=>{13===e.keyCode&&"object"===typeof t&&t.chart.legendToggle(t),32===e.keyCode&&"object"===typeof t&&(t.chart.legendToggle(t),e.preventDefault())}))).on("focus",k.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("blur",k.eventHandler((t=>{this._parent.legendReset(t)})))}render(){this._parent.svg().select("g.dc-legend").remove(),this._g=this._parent.svg().append("g").attr("class","dc-legend").attr("transform","translate(".concat(this._x,",").concat(this._y,")"));let t=this._parent.legendables();const e=this._parent.filters();void 0!==this._maxItems&&(t=t.slice(0,this._maxItems));const n=this._g.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",k.eventHandler((t=>{this._parent.legendHighlight(t)}))).on("mouseout",k.eventHandler((t=>{this._parent.legendReset(t)}))).on("click",k.eventHandler((t=>{t.chart.legendToggle(t)})));this._highlightSelected&&n.classed(w.SELECTED_CLASS,(t=>-1!==e.indexOf(t.name))),this._g.selectAll("g.dc-legend-item").classed("fadeout",(t=>t.chart.isLegendableHidden(t))),t.some(Y("dashstyle"))?n.append("line").attr("x1",0).attr("y1",this._itemHeight/2).attr("x2",this._itemHeight).attr("y2",this._itemHeight/2).attr("stroke-width",2).attr("stroke-dasharray",Y("dashstyle")).attr("stroke",Y("color")):n.append("rect").attr("width",this._itemHeight).attr("height",this._itemHeight).attr("fill",(t=>t?t.color:"blue"));{const t=this;n.append("text").text(t._legendText).classed("dc-tabbable",this._keyboardAccessible).attr("x",t._itemHeight+de).attr("y",(function(){return t._itemHeight/2+(this.clientHeight?this.clientHeight:13)/2-2})),this._keyboardAccessible&&this._makeLegendKeyboardAccessible()}let r=0,i=0;{const t=this;n.attr("transform",(function(e,n){if(t._horizontal){const e=!0===t._autoItemWidth?this.getBBox().width+t._gap:t._itemWidth;r+e>t._legendWidth&&r>0&&(++i,r=0);const n="translate(".concat(r,",").concat(i*t._legendItemHeight(),")");return r+=e,n}return"translate(0,".concat(n*t._legendItemHeight(),")")}))}}}const pe=()=>new fe,ge=5,me="dc-tooltip",ve="dot",ye="yRef",_e="xRef",be=1e-6,xe=3;class we extends bt{constructor(t,e){super(),this._renderArea=!1,this._dotRadius=ge,this._dataPointRadius=null,this._dataPointFillOpacity=be,this._dataPointStrokeOpacity=be,this._curve=null,this._interpolate=null,this._tension=null,this._defined=void 0,this._dashStyle=void 0,this._xyTipsOn=!0,this.transitionDuration(500),this.transitionDelay(0),this._rangeBandPadding(1),this.label((t=>X.printSingleValue(t.y0+t.y)),!1),this.anchor(t,e)}plotData(){const t=this.chartBodyG();let e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));let n=e.selectAll("g.stack").data(this.data());const r=n.enter().append("g").attr("class",((t,e)=>"stack _".concat(e)));n=r.merge(n),this._drawLine(r,n),this._drawArea(r,n),this._drawDots(t,n),this.renderLabel()&&this._drawLabels(n)}curve(t){return arguments.length?(this._curve=t,this):this._curve}interpolate(t){return A.warnOnce("dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._interpolate=t,this):this._interpolate}tension(t){return A.warnOnce("dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),arguments.length?(this._tension=t,this):this._tension}defined(t){return arguments.length?(this._defined=t,this):this._defined}dashStyle(t){return arguments.length?(this._dashStyle=t,this):this._dashStyle}renderArea(t){return arguments.length?(this._renderArea=t,this):this._renderArea}_getColor(t,e){return this.getColor.call(t,t.values,e)}_getCurveFactory(){let t=null;return this._curve?this._curve:(t="function"===typeof this._interpolate?this._interpolate:{linear:p.curveLinear,"linear-closed":p.curveLinearClosed,step:p.curveStep,"step-before":p.curveStepBefore,"step-after":p.curveStepAfter,basis:p.curveBasis,"basis-open":p.curveBasisOpen,"basis-closed":p.curveBasisClosed,bundle:p.curveBundle,cardinal:p.curveCardinal,"cardinal-open":p.curveCardinalOpen,"cardinal-closed":p.curveCardinalClosed,monotone:p.curveMonotoneX}[this._interpolate],t||(t=p.curveLinear),null!==this._tension&&("function"!==typeof t.tension?A.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(this._tension)),t)}_drawLine(t,e){const n=p.line().x((t=>this.x()(t.x))).y((t=>this.y()(t.y+t.y0))).curve(this._getCurveFactory());this._defined&&n.defined(this._defined);const r=t.append("path").attr("class","line").attr("stroke",((t,e)=>this._getColor(t,e)));this._dashStyle&&r.attr("stroke-dasharray",this._dashStyle),j(e.select("path.line"),this.transitionDuration(),this.transitionDelay()).attr("stroke",((t,e)=>this._getColor(t,e))).attr("d",(t=>this._safeD(n(t.values))))}_drawArea(t,e){if(this._renderArea){const n=p.area().x((t=>this.x()(t.x))).y1((t=>this.y()(t.y+t.y0))).y0((t=>this.y()(t.y0))).curve(this._getCurveFactory());this._defined&&n.defined(this._defined),t.append("path").attr("class","area").attr("fill",((t,e)=>this._getColor(t,e))).attr("d",(t=>this._safeD(n(t.values)))),j(e.select("path.area"),this.transitionDuration(),this.transitionDelay()).attr("fill",((t,e)=>this._getColor(t,e))).attr("d",(t=>this._safeD(n(t.values))))}}_safeD(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}_drawDots(t,e){if("always"===this.xyTipsOn()||!this.brushOn()&&!this.parentBrushOn()&&this.xyTipsOn()){const n="".concat(me,"-list");let r=t.select("g.".concat(n));r.empty()&&(r=t.append("g").attr("class",n)),e.each(((t,e)=>{let n=t.values;this._defined&&(n=n.filter(this._defined));let o=r.select("g.".concat(me,"._").concat(e));o.empty()&&(o=r.append("g").attr("class","".concat(me," _").concat(e))),this._createRefLines(o);const s=o.selectAll("circle.".concat(ve)).data(n,Y("x")),a=this,l=s.enter().append("circle").attr("class",ve).classed("dc-tabbable",this._keyboardAccessible).attr("cx",(t=>X.safeNumber(this.x()(t.x)))).attr("cy",(t=>X.safeNumber(this.y()(t.y+t.y0)))).attr("r",this._getDotRadius()).style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("fill",this.getColor).attr("stroke",this.getColor).on("mousemove",(function(){const t=i.select(this);a._showDot(t),a._showRefLines(t,o)})).on("mouseout",(function(){const t=i.select(this);a._hideDot(t),a._hideRefLines(o)})).merge(s);this._keyboardAccessible&&this._svg.selectAll(".dc-tabbable").attr("tabindex",0).on("focus",(function(){const t=i.select(this);a._showDot(t),a._showRefLines(t,o)})).on("blur",(function(){const t=i.select(this);a._hideDot(t),a._hideRefLines(o)})),l.call((e=>this._doRenderTitle(e,t))),j(l,this.transitionDuration()).attr("cx",(t=>X.safeNumber(this.x()(t.x)))).attr("cy",(t=>X.safeNumber(this.y()(t.y+t.y0)))).attr("fill",this.getColor),s.exit().remove()}))}}_drawLabels(t){const e=this;t.each((function(t,n){const r=i.select(this).selectAll("text.lineLabel").data(t.values,Y("x")),o=r.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(r);j(o,e.transitionDuration()).attr("x",(t=>X.safeNumber(e.x()(t.x)))).attr("y",(t=>{const n=e.y()(t.y+t.y0)-xe;return X.safeNumber(n)})).text((t=>e.label()(t))),j(r.exit(),e.transitionDuration()).attr("height",0).remove()}))}_createRefLines(t){(t.select("path.".concat(ye)).empty()?t.append("path").attr("class",ye):t.select("path.".concat(ye))).style("display","none").attr("stroke-dasharray","5,5"),(t.select("path.".concat(_e)).empty()?t.append("path").attr("class",_e):t.select("path.".concat(_e))).style("display","none").attr("stroke-dasharray","5,5")}_showDot(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",this._dotRadius),t}_showRefLines(t,e){const n=t.attr("cx"),r=t.attr("cy"),i=this._yAxisX()-this.margins().left,o="M".concat(i," ").concat(r,"L").concat(n," ").concat(r),s="M".concat(n," ").concat(this.yAxisHeight(),"L").concat(n," ").concat(r);e.select("path.".concat(ye)).style("display","").attr("d",o),e.select("path.".concat(_e)).style("display","").attr("d",s)}_getDotRadius(){return this._dataPointRadius||this._dotRadius}_hideDot(t){t.style("fill-opacity",this._dataPointFillOpacity).style("stroke-opacity",this._dataPointStrokeOpacity).attr("r",this._getDotRadius())}_hideRefLines(t){t.select("path.".concat(ye)).style("display","none"),t.select("path.".concat(_e)).style("display","none")}_doRenderTitle(t,e){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(Y("data",this.title(e.name))))}xyTipsOn(t){return arguments.length?(this._xyTipsOn=t,this):this._xyTipsOn}dotRadius(t){return arguments.length?(this._dotRadius=t,this):this._dotRadius}renderDataPoints(t){return arguments.length?(t?(this._dataPointFillOpacity=t.fillOpacity||.8,this._dataPointStrokeOpacity=t.strokeOpacity||0,this._dataPointRadius=t.radius||2):(this._dataPointFillOpacity=be,this._dataPointStrokeOpacity=be,this._dataPointRadius=null),this):{fillOpacity:this._dataPointFillOpacity,strokeOpacity:this._dataPointStrokeOpacity,radius:this._dataPointRadius}}_colorFilter(t,e,n){return function(){const r=i.select(this),o=r.attr("stroke")===t&&r.attr("stroke-dasharray")===(e instanceof Array?e.join(","):null)||r.attr("fill")===t;return n?!o:o}}legendHighlight(t){this.isLegendableHidden(t)||this.g().selectAll("path.line, path.area").classed("highlight",this._colorFilter(t.color,t.dashstyle)).classed("fadeout",this._colorFilter(t.color,t.dashstyle,!0))}legendReset(){this.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)}legendables(){const t=super.legendables();return this._dashStyle?t.map((t=>(t.dashstyle=this._dashStyle,t))):t}}const Se=(t,e)=>new we(t,e),Ae="number-display";class Ee extends rt{constructor(t,e){super(),this._formatNumber=r.format(".2s"),this._html={one:"",some:"",none:""},this._lastValue=void 0,this._ariaLiveRegion=!1,this._mandatoryAttributes(["group"]),this.ordering((t=>t.value)),this.data((t=>{const e=t.value?t.value():this._maxBin(t.all());return this.valueAccessor()(e)})),this.transitionDuration(250),this.transitionDelay(0),this.anchor(t,e)}html(t){return arguments.length?(t.none?this._html.none=t.none:t.one?this._html.none=t.one:t.some&&(this._html.none=t.some),t.one?this._html.one=t.one:t.some&&(this._html.one=t.some),t.some?this._html.some=t.some:t.one&&(this._html.some=t.one),this):this._html}value(){return this.data()}_maxBin(t){if(!t.length)return null;const e=this._computeOrderedGroups(t);return e[e.length-1]}_doRender(){const t=this.value();let e=this.selectAll(".".concat(Ae));e.empty()&&(e=e.data([0]).enter().append("span").attr("class",Ae).classed("dc-tabbable",this._keyboardAccessible).merge(e),this._keyboardAccessible&&e.attr("tabindex","0"),this._ariaLiveRegion&&(this.transitionDuration(0),e.attr("aria-live","polite")));{const n=this;e.transition().duration(n.transitionDuration()).delay(n.transitionDelay()).ease(m.easeQuad).tween("text",(function(){const e=isFinite(n._lastValue)?n._lastValue:0,r=l.interpolateNumber(e||0,t);n._lastValue=t;const i=this;return e=>{let o=null;const s=n.formatNumber()(r(e));0===t&&""!==n._html.none?o=n._html.none:1===t&&""!==n._html.one?o=n._html.one:""!==n._html.some&&(o=n._html.some),i.innerHTML=o?o.replace("%number",s):s}}))}}_doRedraw(){return this._doRender()}formatNumber(t){return arguments.length?(this._formatNumber=t,this):this._formatNumber}ariaLiveRegion(t){return arguments.length?(this._ariaLiveRegion=t,this):this._ariaLiveRegion}}const Ce=(t,e)=>new Ee(t,e),ke=.5;class Te extends(at(ot(rt))){constructor(t,e){super(),this._sliceCssClass="pie-slice",this._labelCssClass="pie-label",this._sliceGroupCssClass="pie-slice-group",this._labelGroupCssClass="pie-label-group",this._emptyCssClass="empty-chart",this._emptyTitle="empty",this._radius=void 0,this._givenRadius=void 0,this._innerRadius=0,this._externalRadiusPadding=0,this._g=void 0,this._cx=void 0,this._cy=void 0,this._minAngleForLabel=ke,this._externalLabelRadius=void 0,this._drawPaths=!1,this.colorAccessor((t=>this.cappedKeyAccessor(t))),this.title((t=>"".concat(this.cappedKeyAccessor(t),": ").concat(this.cappedValueAccessor(t)))),this.label((t=>this.cappedKeyAccessor(t))),this.renderLabel(!0),this.transitionDuration(350),this.transitionDelay(0),this.anchor(t,e)}slicesCap(t){return this.cap(t)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.cx(),",").concat(this.cy(),")")),this._g.append("g").attr("class",this._sliceGroupCssClass),this._g.append("g").attr("class",this._labelGroupCssClass),this._drawChart(),this}_drawChart(){const t=s.min([this.width(),this.height()])/2;this._radius=this._givenRadius&&this._givenRadius<t?this._givenRadius:t;const e=this._buildArcs(),n=this._pieLayout();let r;if(s.sum(this.data(),(t=>this.cappedValueAccessor(t)))?(r=n(this.data()),this._g.classed(this._emptyCssClass,!1)):(r=n([{key:this._emptyTitle,value:1,others:[this._emptyTitle]}]),this._g.classed(this._emptyCssClass,!0)),this._g){const t=this._g.select("g.".concat(this._sliceGroupCssClass)).selectAll("g.".concat(this._sliceCssClass)).data(r),n=this._g.select("g.".concat(this._labelGroupCssClass)).selectAll("text.".concat(this._labelCssClass)).data(r);this._removeElements(t,n),this._createElements(t,n,e,r),this._updateElements(r,e),this._highlightFilter(),j(this._g,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(this.cx(),",").concat(this.cy(),")"))}}_createElements(t,e,n,r){const i=this._createSliceNodes(t);this._createSlicePath(i,n),this._createTitles(i),this._createLabels(e,r,n)}_createSliceNodes(t){return t.enter().append("g").attr("class",((t,e)=>"".concat(this._sliceCssClass," _").concat(e))).classed("dc-tabbable",this._keyboardAccessible)}_createSlicePath(t,e){const n=t.append("path").attr("fill",((t,e)=>this._fill(t,e))).on("click",k.eventHandler((t=>this._onClick(t)))).attr("d",((t,n)=>this._safeArc(t,n,e)));this._keyboardAccessible&&this._makeKeyboardAccessible(this._onClick);const r=j(n,this.transitionDuration(),this.transitionDelay());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenPie(e,this)}))}}_createTitles(t){this.renderTitle()&&t.append("title").text((t=>this.title()(t.data)))}_applyLabelText(t){t.text((t=>{const e=t.data;return!this._sliceHasNoData(e)&&!this._sliceTooSmall(t)||this._isSelectedSlice(t)?this.label()(t.data):""}))}_positionLabels(t,e){this._applyLabelText(t),j(t,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._labelPosition(t,e))).attr("text-anchor","middle")}_highlightSlice(t,e){this.select("g.pie-slice._".concat(t)).classed("highlight",e)}_createLabels(t,e,n){if(this.renderLabel()){const r=t.enter().append("text").attr("class",((t,e)=>{let n="".concat(this._sliceCssClass," ").concat(this._labelCssClass," _").concat(e);return this._externalLabelRadius&&(n+=" external"),n})).on("click",k.eventHandler((t=>this._onClick(t)))).on("mouseover",k.eventHandler((t=>{this._highlightSlice(t.index,!0)}))).on("mouseout",k.eventHandler((t=>{this._highlightSlice(t.index,!1)})));this._positionLabels(r,n),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(e,n)}}_updateLabelPaths(t,e){let n=this._g.selectAll("polyline.".concat(this._sliceCssClass)).data(t);n.exit().remove(),n=n.enter().append("polyline").attr("class",((t,e)=>"pie-path _".concat(e," ").concat(this._sliceCssClass))).on("click",k.eventHandler((t=>this._onClick(t)))).on("mouseover",k.eventHandler((t=>{this._highlightSlice(t.index,!0)}))).on("mouseout",k.eventHandler((t=>{this._highlightSlice(t.index,!1)}))).merge(n);const r=p.arc().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding),i=j(n,this.transitionDuration(),this.transitionDelay());i.attrTween?i.attrTween("points",(function(t){let n=this._current||t;n={startAngle:n.startAngle,endAngle:n.endAngle};const i=l.interpolate(n,t);return this._current=i(0),t=>{const n=i(t);return[e.centroid(n),r.centroid(n)]}})):i.attr("points",(t=>[e.centroid(t),r.centroid(t)])),i.style("visibility",(t=>t.endAngle-t.startAngle<1e-4?"hidden":"visible"))}_updateElements(t,e){this._updateSlicePaths(t,e),this._updateLabels(t,e),this._updateTitles(t)}_updateSlicePaths(t,e){const n=this._g.selectAll("g.".concat(this._sliceCssClass)).data(t).select("path").attr("d",((t,n)=>this._safeArc(t,n,e))),r=j(n,this.transitionDuration(),this.transitionDelay());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenPie(e,this)}))}r.attr("fill",((t,e)=>this._fill(t,e)))}_updateLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll("text.".concat(this._labelCssClass)).data(t);this._positionLabels(n,e),this._externalLabelRadius&&this._drawPaths&&this._updateLabelPaths(t,e)}}_updateTitles(t){this.renderTitle()&&this._g.selectAll("g.".concat(this._sliceCssClass)).data(t).select("title").text((t=>this.title()(t.data)))}_removeElements(t,e){t.exit().remove(),e.exit().remove()}_highlightFilter(){const t=this;this.hasFilter()?this.selectAll("g.".concat(this._sliceCssClass)).each((function(e){t._isSelectedSlice(e)?t.highlightSelected(this):t.fadeDeselected(this)})):this.selectAll("g.".concat(this._sliceCssClass)).each((function(){t.resetHighlight(this)}))}externalRadiusPadding(t){return arguments.length?(this._externalRadiusPadding=t,this):this._externalRadiusPadding}innerRadius(t){return arguments.length?(this._innerRadius=t,this):this._innerRadius}radius(t){return arguments.length?(this._givenRadius=t,this):this._givenRadius}cx(t){return arguments.length?(this._cx=t,this):this._cx||this.width()/2}cy(t){return arguments.length?(this._cy=t,this):this._cy||this.height()/2}_buildArcs(){return p.arc().outerRadius(this._radius-this._externalRadiusPadding).innerRadius(this._innerRadius)}_isSelectedSlice(t){return this.hasFilter(this.cappedKeyAccessor(t.data))}_doRedraw(){return this._drawChart(),this}minAngleForLabel(t){return arguments.length?(this._minAngleForLabel=t,this):this._minAngleForLabel}_pieLayout(){return p.pie().sort(null).value((t=>this.cappedValueAccessor(t)))}_sliceTooSmall(t){const e=t.endAngle-t.startAngle;return isNaN(e)||e<this._minAngleForLabel}_sliceHasNoData(t){return 0===this.cappedValueAccessor(t)}_isOffCanvas(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}_fill(t,e){return this.getColor(t.data,e)}_onClick(t){this._g.attr("class")!==this._emptyCssClass&&this.onClick(t.data)}_safeArc(t,e,n){let r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}emptyTitle(t){return 0===arguments.length?this._emptyTitle:(this._emptyTitle=t,this)}externalLabels(t){return 0===arguments.length?this._externalLabelRadius:(this._externalLabelRadius=t||void 0,this)}drawPaths(t){return 0===arguments.length?this._drawPaths:(this._drawPaths=t,this)}_labelPosition(t,e){let n;return n=this._externalLabelRadius?p.arc().outerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).innerRadius(this._radius-this._externalRadiusPadding+this._externalLabelRadius).centroid(t):e.centroid(t),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate(".concat(n,")")}legendables(){return this.data().map(((t,e)=>{const n={name:t.key,data:t.value,others:t.others,chart:this};return n.color=this.getColor(t,e),n}))}legendHighlight(t){this._highlightSliceFromLegendable(t,!0)}legendReset(t){this._highlightSliceFromLegendable(t,!1)}legendToggle(t){this.onClick({key:t.name,others:t.others})}_highlightSliceFromLegendable(t,e){this.selectAll("g.pie-slice").each((function(n){t.name===n.data.key&&i.select(this).classed("highlight",e)}))}_tweenPie(t,e){t.innerRadius=this._innerRadius;let n=e._current;n=this._isOffCanvas(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};const r=l.interpolate(n,t);return e._current=r(0),t=>this._safeArc(r(t),0,this._buildArcs())}}const Me=(t,e)=>new Te(t,e);class Pe extends(at(ot(lt))){constructor(t,e){super(),this._g=void 0,this._labelOffsetX=10,this._labelOffsetY=15,this._hasLabelOffsetY=!1,this._dyOffset="0.35em",this._titleLabelOffsetX=2,this._gap=5,this._fixedBarHeight=!1,this._rowCssClass="row",this._titleRowCssClass="titlerow",this._renderTitleLabel=!1,this._x=void 0,this._elasticX=void 0,this._xAxis=u.axisBottom(),this._rowData=void 0,this.rowsCap=this.cap,this.title((t=>"".concat(this.cappedKeyAccessor(t),": ").concat(this.cappedValueAccessor(t)))),this.label((t=>this.cappedKeyAccessor(t))),this.anchor(t,e)}_calculateAxisScale(){if(!this._x||this._elasticX){const t=s.extent(this._rowData,(t=>this.cappedValueAccessor(t)));t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0),this._x=a.scaleLinear().domain(t).range([0,this.effectiveWidth()])}this._xAxis.scale(this._x)}_drawAxis(){let t=this._g.select("g.axis");this._calculateAxisScale(),t.empty()&&(t=this._g.append("g").attr("class","axis")),t.attr("transform","translate(0, ".concat(this.effectiveHeight(),")")),j(t,this.transitionDuration(),this.transitionDelay()).call(this._xAxis)}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.margins().left,",").concat(this.margins().top,")")),this._drawChart(),this}x(t){return arguments.length?(this._x=t,this):this._x}_drawGridLines(){this._g.selectAll("g.tick").select("line.grid-line").remove(),this._g.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(()=>-this.effectiveHeight()))}_drawChart(){this._rowData=this.data(),this._drawAxis(),this._drawGridLines();let t=this._g.selectAll("g.".concat(this._rowCssClass)).data(this._rowData);this._removeElements(t),t=this._createElements(t).merge(t),this._updateElements(t)}_createElements(t){const e=t.enter().append("g").attr("class",((t,e)=>"".concat(this._rowCssClass," _").concat(e)));return e.append("rect").attr("width",0),this._createLabels(e),e}_removeElements(t){t.exit().remove()}_rootValue(){const t=this._x(0);return t===-1/0||t!==t?this._x(1):t}_updateElements(t){const e=this._rowData.length;let n;n=this._fixedBarHeight?this._fixedBarHeight:(this.effectiveHeight()-(e+1)*this._gap)/e,this._hasLabelOffsetY||(this._labelOffsetY=n/2);const r=t.attr("transform",((t,e)=>"translate(0,".concat((e+1)*this._gap+e*n,")"))).select("rect").attr("height",n).attr("fill",this.getColor).on("click",k.eventHandler((t=>this._onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).classed("deselected",(t=>!!this.hasFilter()&&!this._isSelectedRow(t))).classed("selected",(t=>!!this.hasFilter()&&this._isSelectedRow(t)));this._keyboardAccessible&&this._makeKeyboardAccessible((t=>this._onClick(t))),j(r,this.transitionDuration(),this.transitionDelay()).attr("width",(t=>Math.abs(this._rootValue()-this._x(this.cappedValueAccessor(t))))).attr("transform",(t=>this._translateX(t))),this._createTitles(t),this._updateLabels(t)}_createTitles(t){this.renderTitle()&&(t.select("title").remove(),t.append("title").text(this.title()))}_createLabels(t){this.renderLabel()&&t.append("text").on("click",k.eventHandler((t=>this._onClick(t)))),this.renderTitleLabel()&&t.append("text").attr("class",this._titleRowCssClass).on("click",k.eventHandler((t=>this._onClick(t))))}_updateLabels(t){if(this.renderLabel()){const e=t.select("text").attr("x",this._labelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).on("click",k.eventHandler((t=>this._onClick(t)))).attr("class",((t,e)=>"".concat(this._rowCssClass," _").concat(e))).text((t=>this.label()(t)));j(e,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._translateX(t)))}if(this.renderTitleLabel()){const e=t.select(".".concat(this._titleRowCssClass)).attr("x",this.effectiveWidth()-this._titleLabelOffsetX).attr("y",this._labelOffsetY).attr("dy",this._dyOffset).attr("text-anchor","end").on("click",k.eventHandler((t=>this._onClick(t)))).attr("class",((t,e)=>"".concat(this._titleRowCssClass," _").concat(e))).text((t=>this.title()(t)));j(e,this.transitionDuration(),this.transitionDelay()).attr("transform",(t=>this._translateX(t)))}}renderTitleLabel(t){return arguments.length?(this._renderTitleLabel=t,this):this._renderTitleLabel}_onClick(t){this.onClick(t)}_translateX(t){const e=this._x(this.cappedValueAccessor(t)),n=this._rootValue();return"translate(".concat(e>n?n:e,",0)")}_doRedraw(){return this._drawChart(),this}xAxis(t){return arguments.length?(this._xAxis=t,this):this._xAxis}fixedBarHeight(t){return arguments.length?(this._fixedBarHeight=t,this):this._fixedBarHeight}gap(t){return arguments.length?(this._gap=t,this):this._gap}elasticX(t){return arguments.length?(this._elasticX=t,this):this._elasticX}labelOffsetX(t){return arguments.length?(this._labelOffsetX=t,this):this._labelOffsetX}labelOffsetY(t){return arguments.length?(this._labelOffsetY=t,this._hasLabelOffsetY=!0,this):this._labelOffsetY}titleLabelOffsetX(t){return arguments.length?(this._titleLabelOffsetX=t,this):this._titleLabelOffsetX}_isSelectedRow(t){return this.hasFilter(this.cappedKeyAccessor(t))}}const Le=(t,e)=>new Pe(t,e);class Oe extends mt{constructor(t,e){super(),this._symbol=p.symbol(),this._existenceAccessor=t=>t.value;const n=this.keyAccessor();this.keyAccessor((t=>n(t)[0])),this.valueAccessor((t=>n(t)[1])),this.colorAccessor((()=>this._groupName)),this.title((t=>"".concat(this.keyAccessor()(t),",").concat(this.valueAccessor()(t),": ").concat(this.existenceAccessor()(t)))),this._highlightedSize=7,this._symbolSize=5,this._excludedSize=3,this._excludedColor=null,this._excludedOpacity=1,this._emptySize=0,this._emptyOpacity=0,this._nonemptyOpacity=1,this._emptyColor=null,this._filtered=[],this._canvas=null,this._context=null,this._useCanvas=!1,this.brush(d.brush()),this._symbol.size(((t,e)=>this._elementSize(t,e))),this.anchor(t,e)}_canvasElementSize(t,e){return this._existenceAccessor(t)?e?this._symbolSize/Math.sqrt(Math.PI):this._excludedSize/Math.sqrt(Math.PI):this._emptySize/Math.sqrt(Math.PI)}_elementSize(t,e){return this._existenceAccessor(t)?this._filtered[e]?Math.pow(this._symbolSize,2):Math.pow(this._excludedSize,2):Math.pow(this._emptySize,2)}_locator(t){return"translate(".concat(this.x()(this.keyAccessor()(t)),",").concat(this.y()(this.valueAccessor()(t)),")")}filter(t){return arguments.length?super.filter(W.RangedTwoDimensionalFilter(t)):super.filter()}resetSvg(){if(this._useCanvas){super.resetSvg(),this.select("canvas").remove();const t=this.svg();this.root().style("position","relative"),t.style("position","relative");const e=isNaN(parseInt(t.style("left"),10))?0:parseInt(t.style("left"),10),n=isNaN(parseInt(t.style("top"),10))?0:parseInt(t.style("top"),10),r=this.effectiveWidth(),i=this.effectiveHeight(),o=this.margins(),s=window.devicePixelRatio||1;return this._canvas=this.root().append("canvas").attr("x",0).attr("y",0).attr("width",r*s).attr("height",i*s).style("width","".concat(r,"px")).style("height","".concat(i,"px")).style("position","absolute").style("top","".concat(o.top+n,"px")).style("left","".concat(o.left+e,"px")).style("z-index",-1).style("pointer-events","none"),this._context=this._canvas.node().getContext("2d"),this._context.scale(s,s),this._context.rect(0,0,r,i),this._context.clip(),this._context.imageSmoothingQuality="high",this.svg()}return super.resetSvg()}_resizeCanvas(){const t=this.effectiveWidth(),e=this.effectiveHeight(),n=window.devicePixelRatio||1;this._canvas.attr("width",t*n).attr("height",e*n).style("width","".concat(t,"px")).style("height","".concat(e,"px")),this._context.scale(n,n)}useCanvas(t){return arguments.length?(this._useCanvas=t,this):this._useCanvas}canvas(t){return arguments.length?(this._canvas=t,this):this._canvas}context(){return this._context}_plotOnCanvas(t){this._resizeCanvas();const e=this.context();e.clearRect(0,0,1*(e.canvas.width+2),1*(e.canvas.height+2)),this.data().forEach(((n,r)=>{const i=!this.filter()||this.filter().isFiltered([n.key[0],n.key[1]]);let o=1;o=this._existenceAccessor(n)?i?this._nonemptyOpacity:this.excludedOpacity():this._emptyOpacity;let s=null;s=this._emptyColor&&!this._existenceAccessor(n)?this._emptyColor:this.excludedColor()&&!i?this.excludedColor():this.getColor(n);let a=this._canvasElementSize(n,i);if(t){const e=s===t.color,n=.1;e||(o=n),e&&(a=this._highlightedSize/Math.sqrt(Math.PI))}e.save(),e.globalAlpha=o,e.beginPath(),e.arc(this.x()(this.keyAccessor()(n)),this.y()(this.valueAccessor()(n)),a,0,2*Math.PI,!0),e.fillStyle=s,e.fill(),e.restore()}))}_plotOnSVG(){const t=this.data();this._keyboardAccessible&&t.sort(((t,e)=>s.ascending(this.keyAccessor()(t),this.keyAccessor()(e))));let e=this.chartBodyG().selectAll("path.symbol").data(t);j(e.exit(),this.transitionDuration(),this.transitionDelay()).attr("opacity",0).remove(),e=e.enter().append("path").attr("class","symbol").classed("dc-tabbable",this._keyboardAccessible).attr("opacity",0).attr("fill",this.getColor).attr("transform",(t=>this._locator(t))).merge(e),this._keyboardAccessible&&(this._makeKeyboardAccessible(),e.order()),e.call((e=>this._renderTitles(e,t))),e.each(((t,e)=>{this._filtered[e]=!this.filter()||this.filter().isFiltered([this.keyAccessor()(t),this.valueAccessor()(t)])})),j(e,this.transitionDuration(),this.transitionDelay()).attr("opacity",((t,e)=>this._existenceAccessor(t)?this._filtered[e]?this._nonemptyOpacity:this.excludedOpacity():this._emptyOpacity)).attr("fill",((t,e)=>this._emptyColor&&!this._existenceAccessor(t)?this._emptyColor:this.excludedColor()&&!this._filtered[e]?this.excludedColor():this.getColor(t))).attr("transform",(t=>this._locator(t))).attr("d",this._symbol)}plotData(){this._useCanvas?this._plotOnCanvas():this._plotOnSVG()}_renderTitles(t,e){this.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text((t=>this.title()(t))))}existenceAccessor(t){return arguments.length?(this._existenceAccessor=t,this):this._existenceAccessor}symbol(t){return arguments.length?(this._symbol.type(t),this):this._symbol.type()}customSymbol(t){return arguments.length?(this._symbol=t,this._symbol.size(((t,e)=>this._elementSize(t,e))),this):this._symbol}symbolSize(t){return arguments.length?(this._symbolSize=t,this):this._symbolSize}highlightedSize(t){return arguments.length?(this._highlightedSize=t,this):this._highlightedSize}excludedSize(t){return arguments.length?(this._excludedSize=t,this):this._excludedSize}excludedColor(t){return arguments.length?(this._excludedColor=t,this):this._excludedColor}excludedOpacity(t){return arguments.length?(this._excludedOpacity=t,this):this._excludedOpacity}emptySize(t){return arguments.length?(this._emptySize=t,this):this._emptySize}hiddenSize(t){return arguments.length?this.emptySize(t):this.emptySize()}emptyColor(t){return arguments.length?(this._emptyColor=t,this):this._emptyColor}emptyOpacity(t){return arguments.length?(this._emptyOpacity=t,this):this._emptyOpacity}nonemptyOpacity(t){return arguments.length?(this._nonemptyOpacity=t,this):this._emptyOpacity}legendables(){return[{chart:this,name:this._groupName,color:this.getColor()}]}legendHighlight(t){this._useCanvas?this._plotOnCanvas(t):(this._resizeSymbolsWhere((e=>e.attr("fill")===t.color),this._highlightedSize),this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return i.select(this).attr("fill")!==t.color})).classed("fadeout",!0))}legendReset(t){this._useCanvas?this._plotOnCanvas(t):(this._resizeSymbolsWhere((e=>e.attr("fill")===t.color),this._symbolSize),this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return i.select(this).attr("fill")!==t.color})).classed("fadeout",!1))}_resizeSymbolsWhere(t,e){const n=this.chartBodyG().selectAll(".chart-body path.symbol").filter((function(){return t(i.select(this))})),r=this._symbol.size();this._symbol.size(Math.pow(e,2)),j(n,this.transitionDuration(),this.transitionDelay()).attr("d",this._symbol),this._symbol.size(r)}createBrushHandlePaths(){}extendBrush(t){return this.round()&&(t[0]=t[0].map(this.round()),t[1]=t[1].map(this.round())),t}brushIsEmpty(t){return!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]}_brushing(t){if(this._ignoreBrushEvents)return;let e=t.selection,n=this.brushIsEmpty(e);e&&(e=e.map((t=>t.map(((t,e)=>(0===e?this.x():this.y()).invert(t))))),e=this.extendBrush(e),n=n&&this.brushIsEmpty(e)),this.redrawBrush(e,!1);const r=n?null:W.RangedTwoDimensionalFilter(e);H.trigger((()=>{this.replaceFilter(r),this.redrawGroup()}),w.EVENT_DELAY)}redrawBrush(t,e){if(this._gBrush=this.gBrush(),this.brushOn()&&this._gBrush)if(this.resizing()&&this.setBrushExtents(e),t){t=t.map((t=>t.map(((t,e)=>(0===e?this.x():this.y())(t)))));const n=z(e,this.transitionDuration(),this.transitionDelay())(this._gBrush);this._withoutBrushEvents((()=>{n.call(this.brush().move,t)}))}else this._withoutBrushEvents((()=>{this._gBrush.call(this.brush().move,t)}));this.fadeDeselectedArea(t)}}const Re=(t,e)=>new Oe(t,e),De="dc-select-menu",Ie="dc-select-option";class Fe extends rt{constructor(t,e){super(),this._select=void 0,this._promptText="Select all",this._multiple=!1,this._promptValue=null,this._numberVisible=null,this.data((t=>t.all().filter(this._filterDisplayed))),this._filterDisplayed=t=>this.valueAccessor()(t)>0,this._order=(t,e)=>this.keyAccessor()(t)>this.keyAccessor()(e)?1:this.keyAccessor()(t)<this.keyAccessor()(e)?-1:0,this.anchor(t,e)}_doRender(){return this.select("select").remove(),this._select=this.root().append("select").classed(De,!0),this._select.append("option").text(this._promptText).attr("value",""),this._doRedraw(),this}_doRedraw(){return this._setAttributes(),this._renderOptions(),this.hasFilter()&&this._multiple?this._select.selectAll("option").property("selected",(t=>"undefined"!==typeof t&&this.filters().indexOf(String(this.keyAccessor()(t)))>=0)):this.hasFilter()?this._select.property("value",this.filter()):this._select.property("value",""),this}_renderOptions(){const t=this._select.selectAll("option.".concat(Ie)).data(this.data(),(t=>this.keyAccessor()(t)));t.exit().remove(),t.enter().append("option").classed(Ie,!0).attr("value",(t=>this.keyAccessor()(t))).merge(t).text(this.title()),this._select.selectAll("option.".concat(Ie)).sort(this._order),this._select.on("change",k.eventHandler(((t,e)=>this._onChange(t,e))))}_onChange(t,e){let n;const r=e.target;n=r.selectedOptions?Array.prototype.slice.call(r.selectedOptions).map((t=>t.value)):[].slice.call(e.target.options).filter((t=>t.selected)).map((t=>t.value)),1===n.length&&""===n[0]?n=this._promptValue||null:this._multiple||1!==n.length||(n=n[0]),this.onChange(n)}onChange(t){t&&this._multiple?this.replaceFilter([t]):t?this.replaceFilter(t):this.filterAll(),H.trigger((()=>{this.redrawGroup()}))}_setAttributes(){this._multiple?this._select.attr("multiple",!0):this._select.attr("multiple",null),null!==this._numberVisible?this._select.attr("size",this._numberVisible):this._select.attr("size",null)}order(t){return arguments.length?(this._order=t,this):this._order}promptText(t){return arguments.length?(this._promptText=t,this):this._promptText}filterDisplayed(t){return arguments.length?(this._filterDisplayed=t,this):this._filterDisplayed}multiple(t){return arguments.length?(this._multiple=t,this):this._multiple}promptValue(t){return arguments.length?(this._promptValue=t,this):this._promptValue}numberVisible(t){return arguments.length?(this._numberVisible=t,this):this._numberVisible}size(t){return A.warnOnce("selectMenu.size is ambiguous - use selectMenu.numberVisible instead"),arguments.length?this.numberVisible(t):this.numberVisible()}}const Ne=(t,e)=>new Fe(t,e);class je extends Vt{constructor(t,e){super(t,e),this._keySort=(t,e)=>s.ascending(this.keyAccessor()(t),this.keyAccessor()(e)),this._charts={},this._chartFunction=Se,this._chartGroup=e,this._seriesAccessor=void 0,this._seriesSort=s.ascending,this._valueSort=this._keySort,this._mandatoryAttributes().push("seriesAccessor","chart"),this.shareColors(!0)}_compose(t){super.compose(t)}compose(t){throw new Error("Not supported for this chart type")}_preprocessData(){const t=[];let e;const n=k.nester({key:this._seriesAccessor,sortKeys:this._seriesSort,sortValues:this._valueSort,entries:this.data()}).map(((n,r)=>{const i=this._charts[n.key]||this._chartFunction(this,this._chartGroup,n.key,r);return this._charts[n.key]||(e=!0),this._charts[n.key]=i,t.push(n.key),i.dimension(this.dimension()).group({all:"function"===typeof n.values?n.values:X.constant(n.values)},n.key).keyAccessor(this.keyAccessor()).valueAccessor(this.valueAccessor()).brushOn(!1)}));Object.keys(this._charts).filter((e=>-1===t.indexOf(e))).forEach((t=>{this._clearChart(t),e=!0})),this._compose(n),e&&this.legend()&&this.legend().render()}_clearChart(t){this._charts[t].g()&&this._charts[t].g().remove(),delete this._charts[t]}_resetChildren(){Object.keys(this._charts).map(this._clearChart.bind(this)),this._charts={}}chart(t){return arguments.length?(this._chartFunction=t,this._resetChildren(),this):this._chartFunction}seriesAccessor(t){return arguments.length?(this._seriesAccessor=t,this._resetChildren(),this):this._seriesAccessor}seriesSort(t){return arguments.length?(this._seriesSort=t,this._resetChildren(),this):this._seriesSort}valueSort(t){return arguments.length?(this._valueSort=t,this._resetChildren(),this):this._valueSort}}const ze=(t,e)=>new je(t,e),Be=.5;class Ue extends(ot(rt)){constructor(t,e){super(),this._sliceCssClass="pie-slice",this._emptyCssClass="empty-chart",this._emptyTitle="empty",this._radius=void 0,this._givenRadius=void 0,this._innerRadius=0,this._ringSizes=null,this._g=void 0,this._cx=void 0,this._cy=void 0,this._minAngleForLabel=Be,this._externalLabelRadius=void 0,this.colorAccessor((t=>this.keyAccessor()(t))),this.ordering(Y("key")),this.title((t=>"".concat(this.keyAccessor()(t),": ").concat(this._extendedValueAccessor(t)))),this.label((t=>this.keyAccessor()(t))),this.renderLabel(!0),this.transitionDuration(350),this.anchor(t,e)}_extendedValueAccessor(t){return t.path?t.value:this.valueAccessor()(t)}_scaleRadius(t,e){if(0===t)return this._innerRadius;{const n=s.sum(this.ringSizes().relativeRingSizes.slice(0,t)),r=t*(1/this.ringSizes().relativeRingSizes.length)/n,i=(e-this.ringSizes().rootOffset)/(1-this.ringSizes().rootOffset)*(this._radius-this._innerRadius);return this._innerRadius+i/r}}_doRender(){return this.resetSvg(),this._g=this.svg().append("g").attr("transform","translate(".concat(this.cx(),",").concat(this.cy(),")")),this._drawChart(),this}_drawChart(){const t=s.min([this.width(),this.height()])/2;this._radius=this._givenRadius&&this._givenRadius<t?this._givenRadius:t;const e=this._buildArcs();let n,r;if(s.sum(this.data(),this.valueAccessor())?(r=X.toHierarchy(this.data(),this.valueAccessor()),n=this._partitionNodes(r),n.nodes.shift(),this._g.classed(this._emptyCssClass,!1)):(r=X.toHierarchy([],(t=>t.value)),n=this._partitionNodes(r),this._g.classed(this._emptyCssClass,!0)),this.ringSizes().rootOffset=n.rootOffset,this.ringSizes().relativeRingSizes=n.relativeRingSizes,this._g){const t=this._g.selectAll("g.".concat(this._sliceCssClass)).data(n.nodes);this._createElements(t,e,n.nodes),this._updateElements(n.nodes,e),this._removeElements(t),this._highlightFilter(),j(this._g,this.transitionDuration(),this.transitionDelay()).attr("transform","translate(".concat(this.cx(),",").concat(this.cy(),")"))}}_createElements(t,e,n){const r=this._createSliceNodes(t);this._createSlicePath(r,e),this._createTitles(r),this._createLabels(n,e)}_createSliceNodes(t){return t.enter().append("g").attr("class",((t,e)=>"".concat(this._sliceCssClass," _").concat(e," ").concat(this._sliceCssClass,"-level-").concat(t.depth)))}_createSlicePath(t,e){const n=t.append("path").attr("fill",((t,e)=>this._fill(t,e))).on("click",k.eventHandler((t=>this.onClick(t)))).classed("dc-tabbable",this._keyboardAccessible).attr("d",(t=>this._safeArc(e,t)));this._keyboardAccessible&&this._makeKeyboardAccessible(this.onClick);const r=j(n,this.transitionDuration());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenSlice(e,this)}))}}_createTitles(t){this.renderTitle()&&t.append("title").text((t=>this.title()(t)))}_positionLabels(t,e){j(t,this.transitionDuration()).attr("transform",(t=>this._labelPosition(t,e))).attr("text-anchor","middle").text((t=>this._sliceHasNoData(t)||this._sliceTooSmall(t)?"":this.label()(t)))}_createLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll("text.".concat(this._sliceCssClass)).data(t);n.exit().remove();const r=n.enter().append("text").attr("class",((t,e)=>{let n="".concat(this._sliceCssClass," _").concat(e);return this._externalLabelRadius&&(n+=" external"),n})).on("click",k.eventHandler((t=>this.onClick(t))));this._positionLabels(r,e)}}_updateElements(t,e){this._updateSlicePaths(t,e),this._updateLabels(t,e),this._updateTitles(t)}_updateSlicePaths(t,e){const n=this._g.selectAll("g.".concat(this._sliceCssClass)).data(t).select("path").attr("d",((t,n)=>this._safeArc(e,t))),r=j(n,this.transitionDuration());if(r.attrTween){const t=this;r.attrTween("d",(function(e){return t._tweenSlice(e,this)}))}r.attr("fill",((t,e)=>this._fill(t,e)))}_updateLabels(t,e){if(this.renderLabel()){const n=this._g.selectAll("text.".concat(this._sliceCssClass)).data(t);this._positionLabels(n,e)}}_updateTitles(t){this.renderTitle()&&this._g.selectAll("g.".concat(this._sliceCssClass)).data(t).select("title").text((t=>this.title()(t)))}_removeElements(t){t.exit().remove()}_highlightFilter(){const t=this;t.hasFilter()?t.selectAll("g.".concat(t._sliceCssClass)).each((function(e){t._isSelectedSlice(e)?t.highlightSelected(this):t.fadeDeselected(this)})):t.selectAll("g.".concat(t._sliceCssClass)).each((function(e){t.resetHighlight(this)}))}innerRadius(t){return arguments.length?(this._innerRadius=t,this):this._innerRadius}radius(t){return arguments.length?(this._givenRadius=t,this):this._givenRadius}cx(t){return arguments.length?(this._cx=t,this):this._cx||this.width()/2}cy(t){return arguments.length?(this._cy=t,this):this._cy||this.height()/2}minAngleForLabel(t){return arguments.length?(this._minAngleForLabel=t,this):this._minAngleForLabel}emptyTitle(t){return 0===arguments.length?this._emptyTitle:(this._emptyTitle=t,this)}externalLabels(t){return 0===arguments.length?this._externalLabelRadius:(this._externalLabelRadius=t||void 0,this)}defaultRingSizes(){return{partitionDy:()=>this._radius*this._radius,scaleInnerRadius:t=>t.data.path&&1===t.data.path.length?this._innerRadius:Math.sqrt(t.y0),scaleOuterRadius:t=>Math.sqrt(t.y1),relativeRingSizesFunction:()=>[]}}equalRingSizes(){return this.relativeRingSizes((t=>{const e=[];for(let n=0;n<t;n++)e.push(1/t);return e}))}relativeRingSizes(t){function e(t,e){if(!Array.isArray(t))throw new x("relativeRingSizes function must return an array");const n=s.sum(t);if(Math.abs(n-1)>w.NEGLIGIBLE_NUMBER)throw new x("relativeRingSizes : portions must add up to 1, but sum was ".concat(n));if(t.length!==e)throw new x("relativeRingSizes : number of values must match number of rings (".concat(e,") but was ").concat(t.length))}return{partitionDy:()=>1,scaleInnerRadius:t=>this._scaleRadius(t.data.path.length-1,t.y0),scaleOuterRadius:t=>this._scaleRadius(t.data.path.length,t.y1),relativeRingSizesFunction:n=>{const r=t(n);return e(r,n),r}}}ringSizes(t){return arguments.length?(this._ringSizes=t,this):(this._ringSizes||(this._ringSizes=this.defaultRingSizes()),this._ringSizes)}_buildArcs(){return p.arc().startAngle((t=>t.x0)).endAngle((t=>t.x1)).innerRadius((t=>this.ringSizes().scaleInnerRadius(t))).outerRadius((t=>this.ringSizes().scaleOuterRadius(t)))}_isSelectedSlice(t){return this._isPathFiltered(t.path)}_isPathFiltered(t){for(let e=0;e<this.filters().length;e++)if(this.filters()[e].isFiltered(t))return!0;return!1}_filtersForPath(t){const e=W.HierarchyFilter(t),n=[];for(let r=0;r<this.filters().length;r++){const i=this.filters()[r];(i.isFiltered(t)||e.isFiltered(i))&&n.push(i)}return n}_doRedraw(){return this._drawChart(),this}_partitionNodes(t){const e=function(t){return{key:t.data.key,value:t.value}},n=v.hierarchy(t).sum((t=>t.children?0:this._extendedValueAccessor(t))).sort(((t,n)=>s.ascending(this.ordering()(e(t)),this.ordering()(e(n)))));v.partition().size([2*Math.PI,this.ringSizes().partitionDy()])(n);const r=n.descendants().map((t=>(t.key=t.data.key,t.path=t.data.path,t))),i=this.ringSizes().relativeRingSizesFunction(n.height);return{nodes:r,rootOffset:n.y1,relativeRingSizes:i}}_sliceTooSmall(t){const e=t.x1-t.x0;return isNaN(e)||e<this._minAngleForLabel}_sliceHasNoData(t){return 0===this._extendedValueAccessor(t)}_isOffCanvas(t){return!t||isNaN(t.x0)||isNaN(t.y0)}_fill(t,e){return this.getColor(t.data,e)}onClick(t){if(this._g.attr("class")===this._emptyCssClass)return;const e=t.path||t.key,n=W.HierarchyFilter(e),r=this._filtersForPath(e);let i=!1;for(let o=r.length-1;o>=0;o--){const t=r[o];X.arraysIdentical(t,e)&&(i=!0),this.filter(r[o])}H.trigger((()=>{i||this.filter(n),this.redrawGroup()}))}_safeArc(t,e){let n=t(e);return n.indexOf("NaN")>=0&&(n="M0,0"),n}_labelPosition(t,e){let n;return n=this._externalLabelRadius?p.arc().outerRadius(this._radius+this._externalLabelRadius).innerRadius(this._radius+this._externalLabelRadius).centroid(t):e.centroid(t),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate(".concat(n,")")}legendables(){return this.data().map(((t,e)=>{const n={name:t.key,data:t.value,others:t.others,chart:this};return n.color=this.getColor(t,e),n}))}legendHighlight(t){this._highlightSliceFromLegendable(t,!0)}legendReset(t){this._highlightSliceFromLegendable(t,!1)}legendToggle(t){this.onClick({key:t.name,others:t.others})}_highlightSliceFromLegendable(t,e){this.selectAll("g.pie-slice").each((function(n){t.name===n.key&&i.select(this).classed("highlight",e)}))}_tweenSlice(t,e){let n=e._current;this._isOffCanvas(n)&&(n={x0:0,x1:0,y0:0,y1:0});const r={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1},i=l.interpolate(n,r);return e._current=i(0),e=>this._safeArc(this._buildArcs(),Object.assign({},t,i(e)))}}const Ve=(t,e)=>new Ue(t,e),He="dc-text-filter-input";class We extends rt{constructor(t,e){super(),this._normalize=t=>t.toLowerCase(),this._filterFunctionFactory=t=>(t=this._normalize(t),e=>-1!==this._normalize(e).indexOf(t)),this._placeHolder="search",this.group((()=>{throw"the group function on textFilterWidget should never be called, please report the issue"})),this.anchor(t,e)}_doRender(){this.select("input").remove(),this._input=this.root().append("input").classed(He,!0);const t=this;return this._input.on("input",(function(){t.dimension().filterFunction(t._filterFunctionFactory(this.value)),H.trigger((()=>{t.redrawGroup()}),w.EVENT_DELAY)})),this._doRedraw(),this}_doRedraw(){return this.root().selectAll("input").attr("placeholder",this._placeHolder),this}normalize(t){return arguments.length?(this._normalize=t,this):this._normalize}placeHolder(t){return arguments.length?(this._placeHolder=t,this):this._placeHolder}filterFunctionFactory(t){return arguments.length?(this._filterFunctionFactory=t,this):this._filterFunctionFactory}}const Ge=(t,e)=>new We(t,e);+y.version[0]<6&&Object.assign(k,{eventHandler:t=>function(e,n){t.call(this,e,i.event)},callHandler:function(t,e,n,r){t.call(e,r)},nester:t=>{let{key:e,sortKeys:n,sortValues:r,entries:i}=t;const o=_.nest().key(e);return n&&o.sortKeys(n),r&&o.sortValues(r),o.entries(i)},pointer:(t,e)=>i.mouse(e)}),+y.version[0]>5&&Object.assign(k,{eventHandler:t=>function(e,n){t.call(this,n,e)},callHandler:function(t,e,n,r){t.call(e,n,r)},nester:t=>{let{key:e,sortKeys:n,sortValues:r,entries:i}=t;r&&(i=[...i].sort(r));let o=s.groups(i,e);return n&&(o=o.sort(n)),o.map((t=>({key:"".concat(t[0]),values:t[1]})))},pointer:i.pointer}),t.BadArgumentException=x,t.BarChart=At,t.BaseMixin=rt,t.BoxPlot=kt,t.BubbleChart=Mt,t.BubbleMixin=st,t.BubbleOverlay=Dt,t.CapMixin=at,t.CboxMenu=jt,t.ColorMixin=ot,t.CompositeChart=Vt,t.Config=E,t.CoordinateGridMixin=mt,t.DataCount=Wt,t.DataGrid=Kt,t.DataTable=re,t.GeoChoroplethChart=oe,t.HeatMap=le,t.HtmlLegend=ue,t.InvalidStateException=G,t.Legend=fe,t.LineChart=we,t.Logger=S,t.MarginMixin=lt,t.NumberDisplay=Ee,t.PieChart=Te,t.RowChart=Pe,t.ScatterPlot=Oe,t.SelectMenu=Fe,t.SeriesChart=je,t.StackMixin=bt,t.SunburstChart=Ue,t.TextFilterWidget=We,t.afterTransition=B,t.barChart=Et,t.baseMixin=it,t.boxPlot=Tt,t.bubbleChart=Pt,t.bubbleOverlay=It,t.cboxMenu=zt,t.chartRegistry=M,t.compositeChart=Ht,t.config=C,t.constants=w,t.d3Box=vt,t.d3compat=k,t.dataCount=Gt,t.dataGrid=Qt,t.dataTable=ie,t.deregisterAllCharts=R,t.deregisterChart=L,t.events=H,t.filterAll=D,t.filters=W,t.geoChoroplethChart=se,t.hasChart=O,t.heatMap=ce,t.htmlLegend=he,t.instanceOfChart=V,t.legend=pe,t.lineChart=Se,t.logger=A,t.numberDisplay=Ce,t.optionalTransition=z,t.pieChart=Me,t.pluck=Y,t.printers=K,t.redrawAll=N,t.refocusAll=I,t.registerChart=P,t.renderAll=F,t.renderlet=U,t.rowChart=Le,t.scatterPlot=Re,t.selectMenu=Ne,t.seriesChart=ze,t.sunburstChart=Ve,t.textFilterWidget=Ge,t.transition=j,t.units=Q,t.utils=X,t.version=b,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98),n(98))},98:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Adder:()=>S,Delaunay:()=>bs,FormatSpecifier:()=>El,InternMap:()=>C.L,InternSet:()=>C.H,Voronoi:()=>ps,active:()=>Xr,arc:()=>Gx,area:()=>$x,areaRadial:()=>lw,ascending:()=>i,autoType:()=>Qs,axisBottom:()=>qt,axisLeft:()=>Zt,axisRight:()=>Xt,axisTop:()=>Yt,bin:()=>K,bisect:()=>h,bisectCenter:()=>u,bisectLeft:()=>c,bisectRight:()=>l,bisector:()=>o,blob:()=>Oa,brush:()=>Ai,brushSelection:()=>xi,brushX:()=>wi,brushY:()=>Si,buffer:()=>Da,chord:()=>Fi,chordDirected:()=>ji,chordTranspose:()=>Ni,cluster:()=>jf,color:()=>Sn.ZP,contourDensity:()=>Jo,contours:()=>Yo,count:()=>d,create:()=>yx,creator:()=>nn,cross:()=>v,csv:()=>za,csvFormat:()=>js,csvFormatBody:()=>zs,csvFormatRow:()=>Us,csvFormatRows:()=>Bs,csvFormatValue:()=>Vs,csvParse:()=>Fs,csvParseRows:()=>Ns,cubehelix:()=>Fo,cumsum:()=>y,curveBasis:()=>Uw,curveBasisClosed:()=>Hw,curveBasisOpen:()=>Gw,curveBumpX:()=>Xw,curveBumpY:()=>qw,curveBundle:()=>Kw,curveCardinal:()=>$w,curveCardinalClosed:()=>eS,curveCardinalOpen:()=>rS,curveCatmullRom:()=>sS,curveCatmullRomClosed:()=>lS,curveCatmullRomOpen:()=>uS,curveLinear:()=>Zx,curveLinearClosed:()=>dS,curveMonotoneX:()=>bS,curveMonotoneY:()=>xS,curveNatural:()=>AS,curveStep:()=>CS,curveStepAfter:()=>TS,curveStepBefore:()=>kS,descending:()=>_,deviation:()=>x,difference:()=>Pt,disjoint:()=>Lt,dispatch:()=>ne,drag:()=>ks,dragDisable:()=>xn,dragEnable:()=>wn,dsv:()=>ja,dsvFormat:()=>Ds,easeBack:()=>Ca,easeBackIn:()=>Aa,easeBackInOut:()=>Ca,easeBackOut:()=>Ea,easeBounce:()=>xa,easeBounceIn:()=>ba,easeBounceInOut:()=>wa,easeBounceOut:()=>xa,easeCircle:()=>va,easeCircleIn:()=>ga,easeCircleInOut:()=>va,easeCircleOut:()=>ma,easeCubic:()=>Hr,easeCubicIn:()=>Ur,easeCubicInOut:()=>Hr,easeCubicOut:()=>Vr,easeElastic:()=>Ma,easeElasticIn:()=>Ta,easeElasticInOut:()=>Pa,easeElasticOut:()=>Ma,easeExp:()=>pa,easeExpIn:()=>da,easeExpInOut:()=>pa,easeExpOut:()=>fa,easeLinear:()=>$s,easePoly:()=>oa,easePolyIn:()=>ra,easePolyInOut:()=>oa,easePolyOut:()=>ia,easeQuad:()=>na,easeQuadIn:()=>ta,easeQuadInOut:()=>na,easeQuadOut:()=>ea,easeSin:()=>ua,easeSinIn:()=>la,easeSinInOut:()=>ua,easeSinOut:()=>ca,every:()=>At,extent:()=>w,fcumsum:()=>E,filter:()=>Ct,forceCenter:()=>qa,forceCollide:()=>al,forceLink:()=>ul,forceManyBody:()=>ml,forceRadial:()=>vl,forceSimulation:()=>gl,forceX:()=>yl,forceY:()=>_l,format:()=>Pl,formatDefaultLocale:()=>Il,formatLocale:()=>Dl,formatPrefix:()=>Ll,formatSpecifier:()=>Al,fsum:()=>A,geoAlbers:()=>Jd,geoAlbersUsa:()=>$d,geoArea:()=>zc,geoAzimuthalEqualArea:()=>rf,geoAzimuthalEqualAreaRaw:()=>nf,geoAzimuthalEquidistant:()=>sf,geoAzimuthalEquidistantRaw:()=>of,geoBounds:()=>bu,geoCentroid:()=>Ou,geoCircle:()=>Hu,geoClipAntimeridian:()=>th,geoClipCircle:()=>eh,geoClipExtent:()=>ch,geoClipRectangle:()=>lh,geoConicConformal:()=>df,geoConicConformalRaw:()=>hf,geoConicEqualArea:()=>Qd,geoConicEqualAreaRaw:()=>Kd,geoConicEquidistant:()=>mf,geoConicEquidistantRaw:()=>gf,geoContains:()=>Ch,geoDistance:()=>vh,geoEqualEarth:()=>Sf,geoEqualEarthRaw:()=>wf,geoEquirectangular:()=>pf,geoEquirectangularRaw:()=>ff,geoGnomonic:()=>Ef,geoGnomonicRaw:()=>Af,geoGraticule:()=>Mh,geoGraticule10:()=>Ph,geoIdentity:()=>Cf,geoInterpolate:()=>Lh,geoLength:()=>ph,geoMercator:()=>lf,geoMercatorRaw:()=>af,geoNaturalEarth1:()=>Tf,geoNaturalEarth1Raw:()=>kf,geoOrthographic:()=>Pf,geoOrthographicRaw:()=>Mf,geoPath:()=>Dd,geoProjection:()=>Xd,geoProjectionMutator:()=>qd,geoRotation:()=>Bu,geoStereographic:()=>Of,geoStereographicRaw:()=>Lf,geoStream:()=>gc,geoTransform:()=>Id,geoTransverseMercator:()=>Df,geoTransverseMercatorRaw:()=>Rf,gray:()=>go,greatest:()=>gt,greatestIndex:()=>mt,group:()=>T,groupSort:()=>j,groups:()=>M,hcl:()=>Ao,hierarchy:()=>Bf,histogram:()=>K,hsl:()=>Sn.Ym,html:()=>Ya,image:()=>Ua,index:()=>O,indexes:()=>R,interpolate:()=>Dn,interpolateArray:()=>kn,interpolateBasis:()=>jp.Z,interpolateBasisClosed:()=>zp.Z,interpolateBlues:()=>Gb,interpolateBrBG:()=>rb,interpolateBuGn:()=>xb,interpolateBuPu:()=>Sb,interpolateCividis:()=>nx,interpolateCool:()=>ox,interpolateCubehelix:()=>tg,interpolateCubehelixDefault:()=>rx,interpolateCubehelixLong:()=>eg,interpolateDate:()=>Mn,interpolateDiscrete:()=>Bp,interpolateGnBu:()=>Eb,interpolateGreens:()=>Xb,interpolateGreys:()=>Zb,interpolateHcl:()=>Qp,interpolateHclLong:()=>Jp,interpolateHsl:()=>Xp,interpolateHslLong:()=>qp,interpolateHue:()=>Vp,interpolateInferno:()=>mx,interpolateLab:()=>Zp,interpolateMagma:()=>gx,interpolateNumber:()=>Pn.Z,interpolateNumberArray:()=>En,interpolateObject:()=>Ln,interpolateOrRd:()=>kb,interpolateOranges:()=>ex,interpolatePRGn:()=>ob,interpolatePiYG:()=>ab,interpolatePlasma:()=>vx,interpolatePuBu:()=>Lb,interpolatePuBuGn:()=>Mb,interpolatePuOr:()=>cb,interpolatePuRd:()=>Rb,interpolatePurples:()=>Qb,interpolateRainbow:()=>ax,interpolateRdBu:()=>hb,interpolateRdGy:()=>fb,interpolateRdPu:()=>Ib,interpolateRdYlBu:()=>gb,interpolateRdYlGn:()=>vb,interpolateReds:()=>$b,interpolateRgb:()=>An.ZP,interpolateRgbBasis:()=>An.hD,interpolateRgbBasisClosed:()=>An.YD,interpolateRound:()=>Hp,interpolateSinebow:()=>hx,interpolateSpectral:()=>_b,interpolateString:()=>On.Z,interpolateTransformCss:()=>cr.Y,interpolateTransformSvg:()=>cr.w,interpolateTurbo:()=>dx,interpolateViridis:()=>px,interpolateWarm:()=>ix,interpolateYlGn:()=>zb,interpolateYlGnBu:()=>Nb,interpolateYlOrBr:()=>Ub,interpolateYlOrRd:()=>Hb,interpolateZoom:()=>Gp,interrupt:()=>lr,intersection:()=>Rt,interval:()=>KS,isoFormat:()=>XS,isoParse:()=>ZS,json:()=>Ha,lab:()=>mo,lch:()=>So,least:()=>ft,leastIndex:()=>pt,line:()=>Jx,lineRadial:()=>aw,linkHorizontal:()=>mw,linkRadial:()=>yw,linkVertical:()=>vw,local:()=>bx,map:()=>kt,matcher:()=>le,max:()=>Q,maxIndex:()=>ot,mean:()=>st,median:()=>at,merge:()=>lt,min:()=>J,minIndex:()=>ct,namespace:()=>Se,namespaces:()=>we,nice:()=>q,now:()=>Xn,pack:()=>hp,packEnclose:()=>Yf,packSiblings:()=>op,pairs:()=>ut,partition:()=>vp,path:()=>Yi,permute:()=>F,pie:()=>nw,piecewise:()=>ng,pointRadial:()=>cw,pointer:()=>Fn,pointers:()=>wx,polygonArea:()=>ig,polygonCentroid:()=>og,polygonContains:()=>ug,polygonHull:()=>cg,polygonLength:()=>hg,precisionFixed:()=>Fl,precisionPrefix:()=>Nl,precisionRound:()=>jl,quadtree:()=>$a,quantile:()=>et,quantileSorted:()=>nt,quantize:()=>rg,quickselect:()=>$,radialArea:()=>lw,radialLine:()=>aw,randomBates:()=>yg,randomBernoulli:()=>xg,randomBeta:()=>Ag,randomBinomial:()=>Eg,randomCauchy:()=>kg,randomExponential:()=>_g,randomGamma:()=>Sg,randomGeometric:()=>wg,randomInt:()=>pg,randomIrwinHall:()=>vg,randomLcg:()=>Rg,randomLogNormal:()=>mg,randomLogistic:()=>Tg,randomNormal:()=>gg,randomPareto:()=>bg,randomPoisson:()=>Mg,randomUniform:()=>fg,randomWeibull:()=>Cg,range:()=>dt,reduce:()=>Tt,reverse:()=>Mt,rgb:()=>Sn.B8,ribbon:()=>ro,ribbonArrow:()=>io,rollup:()=>P,rollups:()=>L,scaleBand:()=>jg,scaleDiverging:()=>z_,scaleDivergingLog:()=>B_,scaleDivergingPow:()=>V_,scaleDivergingSqrt:()=>H_,scaleDivergingSymlog:()=>U_,scaleIdentity:()=>$g,scaleImplicit:()=>Fg,scaleLinear:()=>Jg,scaleLog:()=>lm,scaleOrdinal:()=>Ng,scalePoint:()=>Bg,scalePow:()=>vm,scaleQuantile:()=>wm,scaleQuantize:()=>Sm,scaleRadial:()=>xm,scaleSequential:()=>O_,scaleSequentialLog:()=>R_,scaleSequentialPow:()=>I_,scaleSequentialQuantile:()=>N_,scaleSequentialSqrt:()=>F_,scaleSequentialSymlog:()=>D_,scaleSqrt:()=>ym,scaleSymlog:()=>dm,scaleThreshold:()=>Am,scaleTime:()=>T_,scaleUtc:()=>M_,scan:()=>vt,schemeAccent:()=>Y_,schemeBlues:()=>Wb,schemeBrBG:()=>nb,schemeBuGn:()=>bb,schemeBuPu:()=>wb,schemeCategory10:()=>G_,schemeDark2:()=>X_,schemeGnBu:()=>Ab,schemeGreens:()=>Yb,schemeGreys:()=>qb,schemeOrRd:()=>Cb,schemeOranges:()=>tx,schemePRGn:()=>ib,schemePaired:()=>q_,schemePastel1:()=>Z_,schemePastel2:()=>K_,schemePiYG:()=>sb,schemePuBu:()=>Pb,schemePuBuGn:()=>Tb,schemePuOr:()=>lb,schemePuRd:()=>Ob,schemePurples:()=>Kb,schemeRdBu:()=>ub,schemeRdGy:()=>db,schemeRdPu:()=>Db,schemeRdYlBu:()=>pb,schemeRdYlGn:()=>mb,schemeReds:()=>Jb,schemeSet1:()=>Q_,schemeSet2:()=>J_,schemeSet3:()=>$_,schemeSpectral:()=>yb,schemeTableau10:()=>tb,schemeYlGn:()=>jb,schemeYlGnBu:()=>Fb,schemeYlOrBr:()=>Bb,schemeYlOrRd:()=>Vb,select:()=>yn,selectAll:()=>Sx,selection:()=>vn,selector:()=>ie,selectorAll:()=>ae,shuffle:()=>yt,shuffler:()=>_t,some:()=>Et,sort:()=>N,stack:()=>RS,stackOffsetDiverging:()=>IS,stackOffsetExpand:()=>DS,stackOffsetNone:()=>MS,stackOffsetSilhouette:()=>FS,stackOffsetWiggle:()=>NS,stackOrderAppearance:()=>jS,stackOrderAscending:()=>BS,stackOrderDescending:()=>VS,stackOrderInsideOut:()=>HS,stackOrderNone:()=>PS,stackOrderReverse:()=>WS,stratify:()=>wp,style:()=>De,subset:()=>It,sum:()=>bt,superset:()=>Dt,svg:()=>Xa,symbol:()=>Nw,symbolCircle:()=>_w,symbolCross:()=>bw,symbolDiamond:()=>Sw,symbolSquare:()=>Tw,symbolStar:()=>kw,symbolTriangle:()=>Pw,symbolWye:()=>Iw,symbols:()=>Fw,text:()=>Fa,thresholdFreedmanDiaconis:()=>rt,thresholdScott:()=>it,thresholdSturges:()=>Z,tickFormat:()=>Kg,tickIncrement:()=>Y,tickStep:()=>X,ticks:()=>G,timeDay:()=>qm,timeDays:()=>Zm,timeFormat:()=>ry,timeFormatDefaultLocale:()=>A_,timeFormatLocale:()=>ey,timeFriday:()=>nv,timeFridays:()=>cv,timeHour:()=>Gm,timeHours:()=>Ym,timeInterval:()=>Dm,timeMillisecond:()=>Fm,timeMilliseconds:()=>Nm,timeMinute:()=>Vm,timeMinutes:()=>Hm,timeMonday:()=>Jm,timeMondays:()=>ov,timeMonth:()=>dv,timeMonths:()=>fv,timeParse:()=>iy,timeSaturday:()=>rv,timeSaturdays:()=>uv,timeSecond:()=>zm,timeSeconds:()=>Bm,timeSunday:()=>Qm,timeSundays:()=>iv,timeThursday:()=>ev,timeThursdays:()=>lv,timeTickInterval:()=>Qv,timeTicks:()=>Kv,timeTuesday:()=>$m,timeTuesdays:()=>sv,timeWednesday:()=>tv,timeWednesdays:()=>av,timeWeek:()=>Qm,timeWeeks:()=>iv,timeYear:()=>gv,timeYears:()=>mv,timeout:()=>er,timer:()=>Kn,timerFlush:()=>Qn,transition:()=>jr,transpose:()=>xt,tree:()=>Mp,treemap:()=>Dp,treemapBinary:()=>Ip,treemapDice:()=>mp,treemapResquarify:()=>Np,treemapSlice:()=>Pp,treemapSliceDice:()=>Fp,treemapSquarify:()=>Rp,tsv:()=>Ba,tsvFormat:()=>Ys,tsvFormatBody:()=>Xs,tsvFormatRow:()=>Zs,tsvFormatRows:()=>qs,tsvFormatValue:()=>Ks,tsvParse:()=>Ws,tsvParseRows:()=>Gs,union:()=>Ft,utcDay:()=>Av,utcDays:()=>Ev,utcFormat:()=>oy,utcFriday:()=>Ov,utcFridays:()=>zv,utcHour:()=>xv,utcHours:()=>wv,utcMillisecond:()=>Fm,utcMilliseconds:()=>Nm,utcMinute:()=>yv,utcMinutes:()=>_v,utcMonday:()=>Tv,utcMondays:()=>Iv,utcMonth:()=>Vv,utcMonths:()=>Hv,utcParse:()=>sy,utcSaturday:()=>Rv,utcSaturdays:()=>Bv,utcSecond:()=>zm,utcSeconds:()=>Bm,utcSunday:()=>kv,utcSundays:()=>Dv,utcThursday:()=>Lv,utcThursdays:()=>jv,utcTickInterval:()=>Zv,utcTicks:()=>qv,utcTuesday:()=>Mv,utcTuesdays:()=>Fv,utcWednesday:()=>Pv,utcWednesdays:()=>Nv,utcWeek:()=>kv,utcWeeks:()=>Dv,utcYear:()=>Gv,utcYears:()=>Yv,variance:()=>b,version:()=>r,window:()=>Pe,xml:()=>Ga,zip:()=>St,zoom:()=>uA,zoomIdentity:()=>tA,zoomTransform:()=>eA});var r="6.7.0";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function o(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>i(t(e),n)}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const s=r(t,n,i,o-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}}function s(t){return null===t?NaN:+t}const a=o(i),l=a.right,c=a.left,u=o(s).center,h=l;function d(t,e){let n=0;if(void 0===e)for(let r of t)null!=r&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function f(t){return 0|t.length}function p(t){return!(t>0)}function g(t){return"object"!==typeof t||"length"in t?t:Array.from(t)}function m(t){return e=>t(...e)}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r="function"===typeof e[e.length-1]&&m(e.pop()),i=(e=e.map(g)).map(f),o=e.length-1,s=new Array(o+1).fill(0),a=[];if(o<0||i.some(p))return a;for(;;){a.push(s.map(((t,n)=>e[n][t])));let t=o;for(;++s[t]===i[t];){if(0===t)return r?a.map(r):a;s[t--]=0}}}function y(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function _(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function b(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let s of t)null!=s&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i))}if(r>1)return o/(r-1)}function x(t,e){const n=b(t,e);return n?Math.sqrt(n):n}function w(t,e){let n,r;if(void 0===e)for(const i of t)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class S{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,s=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);s&&(e[n++]=s),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function A(t,e){const n=new S;if(void 0===e)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function E(t,e){const n=new S;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}var C=n(855);function k(t){return t}function T(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return I(t,k,k,n)}function M(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return I(t,Array.from,k,n)}function P(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return I(t,k,e,r)}function L(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return I(t,Array.from,e,r)}function O(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return I(t,k,D,n)}function R(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return I(t,Array.from,D,n)}function D(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function I(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const s=new C.L,a=r[o++];let l=-1;for(const e of i){const t=a(e,++l,i),n=s.get(t);n?n.push(e):s.set(t,[e])}for(const[e,n]of s)s.set(e,t(n,o));return e(s)}(t,0)}function F(t,e){return Array.from(e,(e=>t[e]))}function N(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("function"!==typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[o=i]=n;if(1===o.length||n.length>1){const e=Uint32Array.from(t,((t,e)=>e));return n.length>1?(n=n.map((e=>t.map(e))),e.sort(((t,e)=>{for(const r of n){const n=i(r[t],r[e]);if(n)return n}}))):(o=t.map(o),e.sort(((t,e)=>i(o[t],o[e])))),F(t,e)}return t.sort(o)}function j(t,e,n){return(1===e.length?N(P(t,e,n),((t,e)=>{let[n,r]=t,[o,s]=e;return i(r,s)||i(n,o)})):N(T(t,n),((t,n)=>{let[r,o]=t,[s,a]=n;return e(o,a)||i(r,s)}))).map((t=>{let[e]=t;return e}))}var z=Array.prototype,B=z.slice;z.map;function U(t){return function(){return t}}var V=Math.sqrt(50),H=Math.sqrt(10),W=Math.sqrt(2);function G(t,e,n){var r,i,o,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=Y(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),r=Math.round(e/s);for(n*s<t&&++n,r*s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),r=Math.round(e*s);for(n/s<t&&++n,r/s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)/s}return r&&o.reverse(),o}function Y(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=V?10:o>=H?5:o>=W?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=V?10:o>=H?5:o>=W?2:1)}function X(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=V?i*=10:o>=H?i*=5:o>=W&&(i*=2),e<t?-i:i}function q(t,e,n){let r;for(;;){const i=Y(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Z(t){return Math.ceil(Math.log(d(t))/Math.LN2)+1}function K(){var t=k,e=w,n=Z;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,s=r.length,a=new Array(s);for(i=0;i<s;++i)a[i]=t(r[i],i,r);var l=e(a),c=l[0],u=l[1],d=n(a,c,u);if(!Array.isArray(d)){const t=u,n=+d;if(e===w&&([c,u]=q(c,u,n)),(d=G(c,u,n))[d.length-1]>=u)if(t>=u&&e===w){const t=Y(c,u,n);isFinite(t)&&(t>0?u=(Math.floor(u/t)+1)*t:t<0&&(u=(Math.ceil(u*-t)+1)/-t))}else d.pop()}for(var f=d.length;d[0]<=c;)d.shift(),--f;for(;d[f-1]>u;)d.pop(),--f;var p,g=new Array(f+1);for(i=0;i<=f;++i)(p=g[i]=[]).x0=i>0?d[i-1]:c,p.x1=i<f?d[i]:u;for(i=0;i<s;++i)c<=(o=a[i])&&o<=u&&g[h(d,o,0,f)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"===typeof e?e:U(e),r):t},r.domain=function(t){return arguments.length?(e="function"===typeof t?t:U([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?U(B.call(t)):U(t),r):n},r}function Q(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function J(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function $(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;for(;r>n;){if(r-n>600){const i=r-n+1,s=e-n+1,a=Math.log(i),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(i-l)/i)*(s-i/2<0?-1:1);$(t,e,Math.max(n,Math.floor(e-s*l/i+c)),Math.min(r,Math.floor(e+(i-s)*l/i+c)),o)}const i=t[e];let s=n,a=r;for(tt(t,n,e),o(t[r],i)>0&&tt(t,n,r);s<a;){for(tt(t,s,a),++s,--a;o(t[s],i)<0;)++s;for(;o(t[a],i)>0;)--a}0===o(t[n],i)?tt(t,n,a):(++a,tt(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function tt(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function et(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),r=t.length){if((e=+e)<=0||r<2)return J(t);if(e>=1)return Q(t);var r,i=(r-1)*e,o=Math.floor(i),s=Q($(t,o).subarray(0,o+1));return s+(J(t.subarray(o+1))-s)*(i-o)}}function nt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(i-o)}}function rt(t,e,n){return Math.ceil((n-e)/(2*(et(t,.75)-et(t,.25))*Math.pow(d(t),-1/3)))}function it(t,e,n){return Math.ceil((n-e)/(3.5*x(t)*Math.pow(d(t),-1/3)))}function ot(t,e){let n,r=-1,i=-1;if(void 0===e)for(const o of t)++i,null!=o&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function st(t,e){let n=0,r=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function at(t,e){return et(t,.5,e)}function lt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function ct(t,e){let n,r=-1,i=-1;if(void 0===e)for(const o of t)++i,null!=o&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function ut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht;const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function ht(t,e){return[t,e]}function dt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function ft(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=!1;if(1===n.length){let o;for(const s of t){const t=n(s);(r?i(t,o)<0:0===i(t,t))&&(e=s,o=t,r=!0)}}else for(const i of t)(r?n(i,e)<0:0===n(i,i))&&(e=i,r=!0);return e}function pt(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(1===n.length)return ct(t,n);let r=-1,o=-1;for(const i of t)++o,(r<0?0===n(i,i):n(i,e)<0)&&(e=i,r=o);return r}function gt(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=!1;if(1===n.length){let o;for(const s of t){const t=n(s);(r?i(t,o)>0:0===i(t,t))&&(e=s,o=t,r=!0)}}else for(const i of t)(r?n(i,e)>0:0===n(i,i))&&(e=i,r=!0);return e}function mt(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(1===n.length)return ot(t,n);let r=-1,o=-1;for(const i of t)++o,(r<0?0===n(i,i):n(i,e)>0)&&(e=i,r=o);return r}function vt(t,e){const n=pt(t,e);return n<0?void 0:n}const yt=_t(Math.random);function _t(t){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function bt(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function xt(t){if(!(i=t.length))return[];for(var e=-1,n=J(t,wt),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r}function wt(t){return t.length}function St(){return xt(arguments)}function At(t,e){if("function"!==typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Et(t,e){if("function"!==typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Ct(t,e){if("function"!==typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function kt(t,e){if("function"!==typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!==typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Tt(t,e,n){if("function"!==typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,s=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++s}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++s,t);return n}function Mt(t){if("function"!==typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Pt(t){t=new Set(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e of i)t.delete(e);return t}function Lt(t,e){const n=e[Symbol.iterator](),r=new Set;for(const i of t){if(r.has(i))return!1;let t,e;for(;({value:t,done:e}=n.next())&&!e;){if(Object.is(i,t))return!1;r.add(t)}}return!0}function Ot(t){return t instanceof Set?t:new Set(t)}function Rt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t=new Set(t),n=n.map(Ot);t:for(const i of t)for(const e of n)if(!e.has(i)){t.delete(i);continue t}return t}function Dt(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){if(r.has(i))continue;let t,e;for(;({value:t,done:e}=n.next());){if(e)return!1;if(r.add(t),Object.is(i,t))break}}return!0}function It(t,e){return Dt(e,t)}function Ft(){const t=new Set;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)for(const e of i)t.add(e);return t}var Nt=Array.prototype.slice;function jt(t){return t}var zt=1e-6;function Bt(t){return"translate("+t+",0)"}function Ut(t){return"translate(0,"+t+")"}function Vt(t){return e=>+t(e)}function Ht(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Wt(){return!this.__axis}function Gt(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,l="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",h=1===t||3===t?Bt:Ut;function d(d){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):jt:i,g=Math.max(o,0)+a,m=e.range(),v=+m[0]+l,y=+m[m.length-1]+l,_=(e.bandwidth?Ht:Vt)(e.copy(),l),b=d.selection?d.selection():d,x=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(f,e).order(),S=w.exit(),A=w.enter().append("g").attr("class","tick"),E=w.select("line"),C=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(A),E=E.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),C=C.merge(A.append("text").attr("fill","currentColor").attr(u,c*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==b&&(x=x.transition(d),w=w.transition(d),E=E.transition(d),C=C.transition(d),S=S.transition(d).attr("opacity",zt).attr("transform",(function(t){return isFinite(t=_(t))?h(t+l):this.getAttribute("transform")})),A.attr("opacity",zt).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:_(t))+l)}))),S.remove(),x.attr("d",4===t||2===t?s?"M"+c*s+","+v+"H"+l+"V"+y+"H"+c*s:"M"+l+","+v+"V"+y:s?"M"+v+","+c*s+"V"+l+"H"+y+"V"+c*s:"M"+v+","+l+"H"+y),w.attr("opacity",1).attr("transform",(function(t){return h(_(t)+l)})),E.attr(u+"2",c*o),C.attr(u,c*g).text(p),b.filter(Wt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=_}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Nt.call(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Nt.call(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(r=null==t?null:Nt.call(t),d):r&&r.slice()},d.tickFormat=function(t){return arguments.length?(i=t,d):i},d.tickSize=function(t){return arguments.length?(o=s=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(a=+t,d):a},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function Yt(t){return Gt(1,t)}function Xt(t){return Gt(2,t)}function qt(t){return Gt(3,t)}function Zt(t){return Gt(4,t)}var Kt={value:()=>{}};function Qt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Jt(r)}function Jt(t){this._=t}function $t(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function te(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ee(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Kt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Jt.prototype=Qt.prototype={constructor:Jt,on:function(t,e){var n,r=this._,i=$t(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=ee(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ee(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=te(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Jt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const ne=Qt;function re(){}function ie(t){return null==t?re:function(){return this.querySelector(t)}}function oe(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function se(){return[]}function ae(t){return null==t?se:function(){return this.querySelectorAll(t)}}function le(t){return function(){return this.matches(t)}}function ce(t){return function(e){return e.matches(t)}}var ue=Array.prototype.find;function he(){return this.firstElementChild}var de=Array.prototype.filter;function fe(){return this.children}function pe(t){return new Array(t.length)}function ge(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function me(t){return function(){return t}}function ve(t,e,n,r,i,o){for(var s,a=0,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new ge(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function ye(t,e,n,r,i,o,s){var a,l,c,u=new Map,h=e.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(f[a]=c=s.call(l,l.__data__,a,e)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(t,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new ge(t,o[a]);for(a=0;a<h;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function _e(t){return t.__data__}function be(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}ge.prototype={constructor:ge,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var xe="http://www.w3.org/1999/xhtml";const we={svg:"http://www.w3.org/2000/svg",xhtml:xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Se(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),we.hasOwnProperty(e)?{space:we[e],local:t}:t}function Ae(t){return function(){this.removeAttribute(t)}}function Ee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ce(t,e){return function(){this.setAttribute(t,e)}}function ke(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Te(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Me(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Le(t){return function(){this.style.removeProperty(t)}}function Oe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Re(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function De(t,e){return t.style.getPropertyValue(e)||Pe(t).getComputedStyle(t,null).getPropertyValue(e)}function Ie(t){return function(){delete this[t]}}function Fe(t,e){return function(){this[t]=e}}function Ne(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function je(t){return t.trim().split(/^|\s+/)}function ze(t){return t.classList||new Be(t)}function Be(t){this._node=t,this._names=je(t.getAttribute("class")||"")}function Ue(t,e){for(var n=ze(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ve(t,e){for(var n=ze(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function He(t){return function(){Ue(this,t)}}function We(t){return function(){Ve(this,t)}}function Ge(t,e){return function(){(e.apply(this,arguments)?Ue:Ve)(this,t)}}function Ye(){this.textContent=""}function Xe(t){return function(){this.textContent=t}}function qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ze(){this.innerHTML=""}function Ke(t){return function(){this.innerHTML=t}}function Qe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Je(){this.nextSibling&&this.parentNode.appendChild(this)}function $e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xe&&e.documentElement.namespaceURI===xe?e.createElement(t):e.createElementNS(n,t)}}function en(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nn(t){var e=Se(t);return(e.local?en:tn)(e)}function rn(){return null}function on(){var t=this.parentNode;t&&t.removeChild(this)}function sn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function an(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ln(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function cn(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function un(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function hn(t,e,n){var r=Pe(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dn(t,e){return function(){return hn(this,t,e)}}function fn(t,e){return function(){return hn(this,t,e.apply(this,arguments))}}Be.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var pn=[null];function gn(t,e){this._groups=t,this._parents=e}function mn(){return new gn([[document.documentElement]],pn)}gn.prototype=mn.prototype={constructor:gn,select:function(t){"function"!==typeof t&&(t=ie(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new gn(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:oe(e)}}(t):ae(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),i.push(s));return new gn(r,i)},selectChild:function(t){return this.select(null==t?he:function(t){return function(){return ue.call(this.children,t)}}("function"===typeof t?t:ce(t)))},selectChildren:function(t){return this.selectAll(null==t?fe:function(t){return function(){return de.call(this.children,t)}}("function"===typeof t?t:ce(t)))},filter:function(t){"function"!==typeof t&&(t=le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new gn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,_e);var n=e?ye:ve,r=this._parents,i=this._groups;"function"!==typeof t&&(t=me(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,f=oe(t.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p),v=l[c]=new Array(d);n(u,h,g,m,v,f,e);for(var y,_,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<p;);y._next=_||null}}return(s=new gn(s,r))._enter=a,s._exit=l,s},enter:function(){return new gn(this._enter||this._groups.map(pe),this._parents)},exit:function(){return new gn(this._exit||this._groups.map(pe),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof gn))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=e[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=e[a];return new gn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=be);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new gn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=Se(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Ee:Ae:"function"===typeof e?n.local?Me:Te:n.local?ke:Ce)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Le:"function"===typeof e?Re:Oe)(t,e,null==n?"":n)):De(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ie:"function"===typeof e?Ne:Fe)(t,e)):this.node()[t]},classed:function(t,e){var n=je(t+"");if(arguments.length<2){for(var r=ze(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?Ge:e?He:We)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ye:("function"===typeof t?qe:Xe)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ze:("function"===typeof t?Qe:Ke)(t)):this.node().innerHTML},raise:function(){return this.each(Je)},lower:function(){return this.each($e)},append:function(t){var e="function"===typeof t?t:nn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:nn(t),r=null==e?rn:"function"===typeof e?e:ie(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(on)},clone:function(t){return this.select(t?an:sn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=ln(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?un:cn,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?fn:dn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const vn=mn;function yn(t){return"string"===typeof t?new gn([[document.querySelector(t)]],[document.documentElement]):new gn([[t]],pn)}function _n(t){t.stopImmediatePropagation()}function bn(t){t.preventDefault(),t.stopImmediatePropagation()}function xn(t){var e=t.document.documentElement,n=yn(t).on("dragstart.drag",bn,!0);"onselectstart"in e?n.on("selectstart.drag",bn,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function wn(t,e){var n=t.document.documentElement,r=yn(t).on("dragstart.drag",null);e&&(r.on("click.drag",bn,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Sn=n(419),An=n(211);function En(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Cn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kn(t,e){return(Cn(e)?En:Tn)(t,e)}function Tn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=Dn(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}function Mn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}var Pn=n(765);function Ln(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Dn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var On=n(514),Rn=n(453);function Dn(t,e){var n,r=typeof e;return null==e||"boolean"===r?(0,Rn.Z)(e):("number"===r?Pn.Z:"string"===r?(n=(0,Sn.ZP)(e))?(e=n,An.ZP):On.Z:e instanceof Sn.ZP?An.ZP:e instanceof Date?Mn:Cn(e)?En:Array.isArray(e)?Tn:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Ln:Pn.Z)(t,e)}function In(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Fn(t,e){if(t=In(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var Nn,jn,zn=0,Bn=0,Un=0,Vn=0,Hn=0,Wn=0,Gn="object"===typeof performance&&performance.now?performance:Date,Yn="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xn(){return Hn||(Yn(qn),Hn=Gn.now()+Wn)}function qn(){Hn=0}function Zn(){this._call=this._time=this._next=null}function Kn(t,e,n){var r=new Zn;return r.restart(t,e,n),r}function Qn(){Xn(),++zn;for(var t,e=Nn;e;)(t=Hn-e._time)>=0&&e._call.call(null,t),e=e._next;--zn}function Jn(){Hn=(Vn=Gn.now())+Wn,zn=Bn=0;try{Qn()}finally{zn=0,function(){var t,e,n=Nn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Nn=e);jn=t,tr(r)}(),Hn=0}}function $n(){var t=Gn.now(),e=t-Vn;e>1e3&&(Wn-=e,Vn=t)}function tr(t){zn||(Bn&&(Bn=clearTimeout(Bn)),t-Hn>24?(t<1/0&&(Bn=setTimeout(Jn,t-Gn.now()-Wn)),Un&&(Un=clearInterval(Un))):(Un||(Vn=Gn.now(),Un=setInterval($n,1e3)),zn=1,Yn(Jn)))}function er(t,e,n){var r=new Zn;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Zn.prototype=Kn.prototype={constructor:Zn,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Xn():+n)+(null==e?0:+e),this._next||jn===this||(jn?jn._next=this:Nn=this,jn=this),this._call=t,this._time=n,tr()},stop:function(){this._call&&(this._call=null,this._time=1/0,tr())}};var nr=ne("start","end","cancel","interrupt"),rr=[];function ir(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var c,u,h,d;if(1!==n.state)return l();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return er(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(er((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Kn(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:nr,tween:rr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function or(t,e){var n=ar(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function sr(t,e){var n=ar(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ar(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lr(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}var cr=n(97);function ur(t,e){var n,r;return function(){var i=sr(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function hr(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=sr(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function dr(t,e,n){var r=t._id;return t.each((function(){var t=sr(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return ar(t,r).value[e]}}function fr(t,e){var n;return("number"===typeof e?Pn.Z:e instanceof Sn.ZP?An.ZP:(n=(0,Sn.ZP)(e))?(e=n,An.ZP):On.Z)(t,e)}function pr(t){return function(){this.removeAttribute(t)}}function gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mr(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function vr(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function yr(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttribute(t)}}function _r(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttributeNS(t.space,t.local)}}function br(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&xr(t,i)),n}return i._value=e,i}function Sr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&br(t,i)),n}return i._value=e,i}function Ar(t,e){return function(){or(this,t).delay=+e.apply(this,arguments)}}function Er(t,e){return e=+e,function(){or(this,t).delay=e}}function Cr(t,e){return function(){sr(this,t).duration=+e.apply(this,arguments)}}function kr(t,e){return e=+e,function(){sr(this,t).duration=e}}function Tr(t,e){if("function"!==typeof e)throw new Error;return function(){sr(this,t).ease=e}}function Mr(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?or:sr;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var Pr=vn.prototype.constructor;function Lr(t){return function(){this.style.removeProperty(t)}}function Or(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Rr(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Or(t,o,n)),r}return o._value=e,o}function Dr(t){return function(e){this.textContent=t.call(this,e)}}function Ir(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Dr(r)),e}return r._value=t,r}var Fr=0;function Nr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function jr(t){return vn().transition(t)}function zr(){return++Fr}var Br=vn.prototype;function Ur(t){return t*t*t}function Vr(t){return--t*t*t+1}function Hr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Nr.prototype=jr.prototype={constructor:Nr,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=ie(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=t.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,ir(h[d],e,n,d,h,ar(a,n)));return new Nr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=ae(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=t.call(l,l.__data__,h,c),p=ar(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&ir(d,e,n,g,f,p);o.push(f),s.push(l)}return new Nr(o,s,e,n)},filter:function(t){"function"!==typeof t&&(t=le(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new Nr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=e[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=e[a];return new Nr(s,this._parents,this._name,this._id)},selection:function(){return new Pr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=zr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=ar(s,e);ir(s,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nr(r,this._parents,t,n)},call:Br.call,nodes:Br.nodes,node:Br.node,size:Br.size,empty:Br.empty,each:Br.each,on:function(t,e){var n=this._id;return arguments.length<2?ar(this.node(),n).on.on(t):this.each(Mr(n,t,e))},attr:function(t,e){var n=Se(t),r="transform"===n?cr.w:fr;return this.attrTween(t,"function"===typeof e?(n.local?_r:yr)(n,r,dr(this,"attr."+t,e)):null==e?(n.local?gr:pr)(n):(n.local?vr:mr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=Se(t);return this.tween(n,(r.local?wr:Sr)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?cr.Y:fr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=De(this,t),s=(this.style.removeProperty(t),De(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,Lr(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=De(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=De(this,t)),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}(t,r,dr(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var l=sr(this,t),c=l.on,u=null==l.value[s]?o||(o=Lr(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=De(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,Rr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(dr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,Ir(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ar(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ur:hr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Ar:Er)(e,t)):ar(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Cr:kr)(e,t)):ar(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Tr(e,t)):ar(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;sr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each((function(){var n=sr(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Br[Symbol.iterator]};var Wr={time:null,delay:0,duration:250,ease:Hr};function Gr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}vn.prototype.interrupt=function(t){return this.each((function(){lr(this,t)}))},vn.prototype.transition=function(t){var e,n;t instanceof Nr?(e=t._id,t=t._name):(e=zr(),(n=Wr).time=Xn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&ir(s,t,e,c,a,n||Gr(s,e));return new Nr(r,this._parents,t,e)};var Yr=[null];function Xr(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new Nr([[t]],Yr,e,+r);return null}const qr=t=>()=>t;function Zr(t,e){let{sourceEvent:n,target:r,selection:i,mode:o,dispatch:s}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function Kr(t){t.stopImmediatePropagation()}function Qr(t){t.preventDefault(),t.stopImmediatePropagation()}var Jr={name:"drag"},$r={name:"space"},ti={name:"handle"},ei={name:"center"};const{abs:ni,max:ri,min:ii}=Math;function oi(t){return[+t[0],+t[1]]}function si(t){return[oi(t[0]),oi(t[1])]}var ai={name:"x",handles:["w","e"].map(gi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},li={name:"y",handles:["n","s"].map(gi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ci={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gi),input:function(t){return null==t?null:si(t)},output:function(t){return t}},ui={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},di={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},pi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gi(t){return{type:t}}function mi(t){return!t.ctrlKey&&!t.button}function vi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function yi(){return navigator.maxTouchPoints||"ontouchstart"in this}function _i(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function bi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function xi(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function wi(){return Ei(ai)}function Si(){return Ei(li)}function Ai(){return Ei(ci)}function Ei(t){var e,n=vi,r=mi,i=yi,o=!0,s=ne("start","brush","end"),a=6;function l(e){var n=e.property("__brush",g).selectAll(".overlay").data([gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ui.overlay).merge(n).each((function(){var t=_i(this).extent;yn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ui.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return ui[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=yn(this),e=_i(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new h(t,e,n):r}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,s,a,l,h,d,f,p,g,m,v,y=this,_=n.target.__data__.type,b="selection"===(o&&n.metaKey?_="overlay":_)?Jr:o&&n.altKey?ei:ti,x=t===li?null:fi[_],w=t===ai?null:pi[_],S=_i(y),A=S.extent,E=S.selection,C=A[0][0],k=A[0][1],T=A[1][0],M=A[1][1],P=0,L=0,O=x&&w&&o&&n.shiftKey,R=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=Fn(t,y)).point0=t.slice(),t.identifier=e,t}));if("overlay"===_){E&&(g=!0);const e=[R[0],R[1]||R[0]];S.selection=E=[[i=t===li?C:ii(e[0][0],e[1][0]),a=t===ai?k:ii(e[0][1],e[1][1])],[h=t===li?T:ri(e[0][0],e[1][0]),f=t===ai?M:ri(e[0][1],e[1][1])]],R.length>1&&z()}else i=E[0][0],a=E[0][1],h=E[1][0],f=E[1][1];s=i,l=a,d=h,p=f;var D=yn(y).attr("pointer-events","none"),I=D.selectAll(".overlay").attr("cursor",ui[_]);lr(y);var F=u(y,arguments,!0).beforestart();if(n.touches)F.moved=j,F.ended=B;else{var N=yn(n.view).on("mousemove.brush",j,!0).on("mouseup.brush",B,!0);o&&N.on("keydown.brush",U,!0).on("keyup.brush",V,!0),xn(n.view)}c.call(y),F.start(n,b.name)}function j(t){for(const e of t.changedTouches||[t])for(const t of R)t.identifier===e.identifier&&(t.cur=Fn(e,y));if(O&&!m&&!v&&1===R.length){const t=R[0];ni(t.cur[0]-t[0])>ni(t.cur[1]-t[1])?v=!0:m=!0}for(const e of R)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);g=!0,Qr(t),z(t)}function z(t){const e=R[0],n=e.point0;var r;switch(P=e[0]-n[0],L=e[1]-n[1],b){case $r:case Jr:x&&(P=ri(C-i,ii(T-h,P)),s=i+P,d=h+P),w&&(L=ri(k-a,ii(M-f,L)),l=a+L,p=f+L);break;case ti:R[1]?(x&&(s=ri(C,ii(T,R[0][0])),d=ri(C,ii(T,R[1][0])),x=1),w&&(l=ri(k,ii(M,R[0][1])),p=ri(k,ii(M,R[1][1])),w=1)):(x<0?(P=ri(C-i,ii(T-i,P)),s=i+P,d=h):x>0&&(P=ri(C-h,ii(T-h,P)),s=i,d=h+P),w<0?(L=ri(k-a,ii(M-a,L)),l=a+L,p=f):w>0&&(L=ri(k-f,ii(M-f,L)),l=a,p=f+L));break;case ei:x&&(s=ri(C,ii(T,i-P*x)),d=ri(C,ii(T,h+P*x))),w&&(l=ri(k,ii(M,a-L*w)),p=ri(k,ii(M,f+L*w)))}d<s&&(x*=-1,r=i,i=h,h=r,r=s,s=d,d=r,_ in hi&&I.attr("cursor",ui[_=hi[_]])),p<l&&(w*=-1,r=a,a=f,f=r,r=l,l=p,p=r,_ in di&&I.attr("cursor",ui[_=di[_]])),S.selection&&(E=S.selection),m&&(s=E[0][0],d=E[1][0]),v&&(l=E[0][1],p=E[1][1]),E[0][0]===s&&E[0][1]===l&&E[1][0]===d&&E[1][1]===p||(S.selection=[[s,l],[d,p]],c.call(y),F.brush(t,b.name))}function B(t){if(Kr(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else wn(t.view,g),N.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),I.attr("cursor",ui.overlay),S.selection&&(E=S.selection),bi(E)&&(S.selection=null,c.call(y)),F.end(t,b.name)}function U(t){switch(t.keyCode){case 16:O=x&&w;break;case 18:b===ti&&(x&&(h=d-P*x,i=s+P*x),w&&(f=p-L*w,a=l+L*w),b=ei,z());break;case 32:b!==ti&&b!==ei||(x<0?h=d-P:x>0&&(i=s-P),w<0?f=p-L:w>0&&(a=l-L),b=$r,I.attr("cursor",ui.selection),z());break;default:return}Qr(t)}function V(t){switch(t.keyCode){case 16:O&&(m=v=O=!1,z());break;case 18:b===ei&&(x<0?h=d:x>0&&(i=s),w<0?f=p:w>0&&(a=l),b=ti,z());break;case 32:b===$r&&(t.altKey?(x&&(h=d-P*x,i=s+P*x),w&&(f=p-L*w,a=l+L*w),b=ei):(x<0?h=d:x>0&&(i=s),w<0?f=p:w>0&&(a=l),b=ti),I.attr("cursor",ui[_]),z());break;default:return}Qr(t)}}function f(t){u(this,arguments).moved(t)}function p(t){u(this,arguments).ended(t)}function g(){var e=this.__brush||{selection:null};return e.extent=si(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n){e.tween?e.on("start.brush",(function(t){u(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){u(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=u(e,arguments),o=r.selection,s=t.input("function"===typeof n?n.apply(this,arguments):n,r.extent),a=Dn(o,s);function l(t){r.selection=1===t&&null===s?null:a(t),c.call(e),i.brush()}return null!==o&&null!==s?l:l(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"===typeof n?n.apply(e,r):n,i.extent),s=u(e,r).beforestart();lr(e),i.selection=null===o?null:o,c.call(e),s.start().brush().end()}))},l.clear=function(t){l.move(t,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=yn(this.that).datum();s.call(e,this.that,new Zr(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:r,dispatch:s}),i)}},l.extent=function(t){return arguments.length?(n="function"===typeof t?t:qr(si(t)),l):n},l.filter=function(t){return arguments.length?(r="function"===typeof t?t:qr(!!t),l):r},l.touchable=function(t){return arguments.length?(i="function"===typeof t?t:qr(!!t),l):i},l.handleSize=function(t){return arguments.length?(a=+t,l):a},l.keyModifiers=function(t){return arguments.length?(o=!!t,l):o},l.on=function(){var t=s.on.apply(s,arguments);return t===s?l:t},l}var Ci=Math.abs,ki=Math.cos,Ti=Math.sin,Mi=Math.PI,Pi=Mi/2,Li=2*Mi,Oi=Math.max,Ri=1e-12;function Di(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function Ii(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Fi(){return zi(!1,!1)}function Ni(){return zi(!1,!0)}function ji(){return zi(!0,!1)}function zi(t,e){var n=0,r=null,i=null,o=null;function s(s){var a,l=s.length,c=new Array(l),u=Di(0,l),h=new Array(l*l),d=new Array(l),f=0;s=Float64Array.from({length:l*l},e?(t,e)=>s[e%l][e/l|0]:(t,e)=>s[e/l|0][e%l]);for(let e=0;e<l;++e){let n=0;for(let r=0;r<l;++r)n+=s[e*l+r]+t*s[r*l+e];f+=c[e]=n}a=(f=Oi(0,Li-n*l)/f)?n:Li/l;{let e=0;r&&u.sort(((t,e)=>r(c[t],c[e])));for(const n of u){const r=e;if(t){const t=Di(1+~l,l).filter((t=>t<0?s[~t*l+n]:s[n*l+t]));i&&t.sort(((t,e)=>i(t<0?-s[~t*l+n]:s[n*l+t],e<0?-s[~e*l+n]:s[n*l+e])));for(const r of t)if(r<0){(h[~r*l+n]||(h[~r*l+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=s[~r*l+n]*f,value:s[~r*l+n]}}else{(h[n*l+r]||(h[n*l+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=s[n*l+r]*f,value:s[n*l+r]}}d[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}else{const t=Di(0,l).filter((t=>s[n*l+t]||s[t*l+n]));i&&t.sort(((t,e)=>i(s[n*l+t],s[n*l+e])));for(const r of t){let t;if(n<r?(t=h[n*l+r]||(h[n*l+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=s[n*l+r]*f,value:s[n*l+r]}):(t=h[r*l+n]||(h[r*l+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=s[n*l+r]*f,value:s[n*l+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}d[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}e+=a}}return(h=Object.values(h)).groups=d,o?h.sort(o):h}return s.padAngle=function(t){return arguments.length?(n=Oi(0,t),s):n},s.sortGroups=function(t){return arguments.length?(r=t,s):r},s.sortSubgroups=function(t){return arguments.length?(i=t,s):i},s.sortChords=function(t){return arguments.length?(null==t?o=null:(o=Ii(t))._=t,s):o&&o._},s}const Bi=Math.PI,Ui=2*Bi,Vi=1e-6,Hi=Ui-Vi;function Wi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Gi(){return new Wi}Wi.prototype=Gi.prototype={constructor:Wi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,l=r-e,c=o-t,u=s-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Vi)if(Math.abs(u*a-l*c)>Vi&&i){var d=n-o,f=r-s,p=a*a+l*l,g=d*d+f*f,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((Bi-Math.acos((p+h-g)/(2*m*v)))/2),_=y/v,b=y/m;Math.abs(_-1)>Vi&&(this._+="L"+(t+_*c)+","+(e+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+s,c=e+a,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Vi||Math.abs(this._y1-c)>Vi)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%Ui+Ui),h>Hi?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>Vi&&(this._+="A"+n+","+n+",0,"+ +(h>=Bi)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Yi=Gi;var Xi=Array.prototype.slice;function qi(t){return function(){return t}}function Zi(t){return t.source}function Ki(t){return t.target}function Qi(t){return t.radius}function Ji(t){return t.startAngle}function $i(t){return t.endAngle}function to(){return 0}function eo(){return 10}function no(t){var e=Zi,n=Ki,r=Qi,i=Qi,o=Ji,s=$i,a=to,l=null;function c(){var c,u=e.apply(this,arguments),h=n.apply(this,arguments),d=a.apply(this,arguments)/2,f=Xi.call(arguments),p=+r.apply(this,(f[0]=u,f)),g=o.apply(this,f)-Pi,m=s.apply(this,f)-Pi,v=+i.apply(this,(f[0]=h,f)),y=o.apply(this,f)-Pi,_=s.apply(this,f)-Pi;if(l||(l=c=Yi()),d>Ri&&(Ci(m-g)>2*d+Ri?m>g?(g+=d,m-=d):(g-=d,m+=d):g=m=(g+m)/2,Ci(_-y)>2*d+Ri?_>y?(y+=d,_-=d):(y-=d,_+=d):y=_=(y+_)/2),l.moveTo(p*ki(g),p*Ti(g)),l.arc(0,0,p,g,m),g!==y||m!==_)if(t){var b=+t.apply(this,arguments),x=v-b,w=(y+_)/2;l.quadraticCurveTo(0,0,x*ki(y),x*Ti(y)),l.lineTo(v*ki(w),v*Ti(w)),l.lineTo(x*ki(_),x*Ti(_))}else l.quadraticCurveTo(0,0,v*ki(y),v*Ti(y)),l.arc(0,0,v,y,_);if(l.quadraticCurveTo(0,0,p*ki(g),p*Ti(g)),l.closePath(),c)return l=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"===typeof e?e:qi(+e),c):t}),c.radius=function(t){return arguments.length?(r=i="function"===typeof t?t:qi(+t),c):r},c.sourceRadius=function(t){return arguments.length?(r="function"===typeof t?t:qi(+t),c):r},c.targetRadius=function(t){return arguments.length?(i="function"===typeof t?t:qi(+t),c):i},c.startAngle=function(t){return arguments.length?(o="function"===typeof t?t:qi(+t),c):o},c.endAngle=function(t){return arguments.length?(s="function"===typeof t?t:qi(+t),c):s},c.padAngle=function(t){return arguments.length?(a="function"===typeof t?t:qi(+t),c):a},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}function ro(){return no()}function io(){return no(eo)}var oo=n(814);const so=Math.PI/180,ao=180/Math.PI,lo=.96422,co=.82521,uo=4/29,ho=6/29,fo=3*ho*ho;function po(t){if(t instanceof vo)return new vo(t.l,t.a,t.b,t.opacity);if(t instanceof Eo)return Co(t);t instanceof Sn.Ss||(t=(0,Sn.SU)(t));var e,n,r=xo(t.r),i=xo(t.g),o=xo(t.b),s=yo((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=s:(e=yo((.4360747*r+.3850649*i+.1430804*o)/lo),n=yo((.0139322*r+.0971045*i+.7141733*o)/co)),new vo(116*s-16,500*(e-s),200*(s-n),t.opacity)}function go(t,e){return new vo(t,0,0,null==e?1:e)}function mo(t,e,n,r){return 1===arguments.length?po(t):new vo(t,e,n,null==r?1:r)}function vo(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function yo(t){return t>.008856451679035631?Math.pow(t,1/3):t/fo+uo}function _o(t){return t>ho?t*t*t:fo*(t-uo)}function bo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function xo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wo(t){if(t instanceof Eo)return new Eo(t.h,t.c,t.l,t.opacity);if(t instanceof vo||(t=po(t)),0===t.a&&0===t.b)return new Eo(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ao;return new Eo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function So(t,e,n,r){return 1===arguments.length?wo(t):new Eo(n,e,t,null==r?1:r)}function Ao(t,e,n,r){return 1===arguments.length?wo(t):new Eo(t,e,n,null==r?1:r)}function Eo(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Co(t){if(isNaN(t.h))return new vo(t.l,0,0,t.opacity);var e=t.h*so;return new vo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}(0,oo.Z)(vo,mo,(0,oo.l)(Sn.Il,{brighter:function(t){return new vo(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new vo(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=lo*_o(e),t=1*_o(t),n=co*_o(n),new Sn.Ss(bo(3.1338561*e-1.6168667*t-.4906146*n),bo(-.9787684*e+1.9161415*t+.033454*n),bo(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),(0,oo.Z)(Eo,Ao,(0,oo.l)(Sn.Il,{brighter:function(t){return new Eo(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Eo(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Co(this).rgb()}}));var ko=-.14861,To=1.78277,Mo=-.29227,Po=-.90649,Lo=1.97294,Oo=Lo*Po,Ro=Lo*To,Do=To*Mo-Po*ko;function Io(t){if(t instanceof No)return new No(t.h,t.s,t.l,t.opacity);t instanceof Sn.Ss||(t=(0,Sn.SU)(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Do*r+Oo*e-Ro*n)/(Do+Oo-Ro),o=r-i,s=(Lo*(n-i)-Mo*o)/Po,a=Math.sqrt(s*s+o*o)/(Lo*i*(1-i)),l=a?Math.atan2(s,o)*ao-120:NaN;return new No(l<0?l+360:l,a,i,t.opacity)}function Fo(t,e,n,r){return 1===arguments.length?Io(t):new No(t,e,n,null==r?1:r)}function No(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}(0,oo.Z)(No,Fo,(0,oo.l)(Sn.Il,{brighter:function(t){return t=null==t?Sn.J5:Math.pow(Sn.J5,t),new No(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Sn.xV:Math.pow(Sn.xV,t),new No(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*so,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Sn.Ss(255*(e+n*(ko*r+To*i)),255*(e+n*(Mo*r+Po*i)),255*(e+n*(Lo*r)),this.opacity)}}));var jo=Array.prototype.slice;function zo(t,e){return t-e}const Bo=t=>()=>t;function Uo(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Vo(t,e[r]))return n;return 0}function Vo(t,e){for(var n=e[0],r=e[1],i=-1,o=0,s=t.length,a=s-1;o<s;a=o++){var l=t[o],c=l[0],u=l[1],h=t[a],d=h[0],f=h[1];if(Ho(l,h,e))return 0;u>r!==f>r&&n<(d-c)*(r-u)/(f-u)+c&&(i=-i)}return i}function Ho(t,e,n){var r;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[r=+(t[0]===e[0])],n[r],e[r])}function Wo(){}var Go=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Yo(){var t=1,e=1,n=Z,r=a;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(zo);else{var r=w(t),i=r[0],s=r[1];e=X(i,s,e),e=dt(Math.floor(i/e)*e,Math.floor(s/e)*e,e)}return e.map((function(e){return o(t,e)}))}function o(n,i){var o=[],a=[];return function(n,r,i){var o,a,l,c,u,h,d=new Array,f=new Array;o=a=-1,c=n[0]>=r,Go[c<<1].forEach(p);for(;++o<t-1;)l=c,c=n[o+1]>=r,Go[l|c<<1].forEach(p);Go[c<<0].forEach(p);for(;++a<e-1;){for(o=-1,c=n[a*t+t]>=r,u=n[a*t]>=r,Go[c<<1|u<<2].forEach(p);++o<t-1;)l=c,c=n[a*t+t+o+1]>=r,h=u,u=n[a*t+o+1]>=r,Go[l|c<<1|u<<2|h<<3].forEach(p);Go[c|u<<3].forEach(p)}o=-1,u=n[a*t]>=r,Go[u<<2].forEach(p);for(;++o<t-1;)h=u,u=n[a*t+o+1]>=r,Go[u<<2|h<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+a],l=[t[1][0]+o,t[1][1]+a],c=s(r),u=s(l);(e=f[c])?(n=d[u])?(delete f[e.end],delete d[n.start],e===n?(e.ring.push(l),i(e.ring)):d[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(l),f[e.end=u]=e):(e=d[u])?(n=f[c])?(delete d[e.start],delete f[n.end],e===n?(e.ring.push(l),i(e.ring)):d[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(r),d[e.start=c]=e):d[c]=f[u]={start:c,end:u,ring:[r,l]}}Go[u<<3].forEach(p)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):a.push(t)})),a.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==Uo((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function s(e){return 2*e[0]+e[1]*(t+1)*4}function a(n,r,i){n.forEach((function(n){var o,s=n[0],a=n[1],l=0|s,c=0|a,u=r[c*t+l];s>0&&s<t&&l===s&&(o=r[c*t+l-1],n[0]=s+(i-o)/(u-o)-.5),a>0&&a<e&&c===a&&(o=r[(c-1)*t+l],n[1]=a+(i-o)/(u-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?Bo(jo.call(t)):Bo(t),i):n},i.smooth=function(t){return arguments.length?(r=t?a:Wo,i):r===a},i}function Xo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),s=0;s<i;++s)for(var a=0,l=0;a<r+n;++a)a<r&&(l+=t.data[a+s*r]),a>=n&&(a>=o&&(l-=t.data[a-o+s*r]),e.data[a-n+s*r]=l/Math.min(a+1,r-1+o-a,o))}function qo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),s=0;s<r;++s)for(var a=0,l=0;a<i+n;++a)a<i&&(l+=t.data[s+a*r]),a>=n&&(a>=o&&(l-=t.data[s+(a-o)*r]),e.data[s+(a-n)*r]=l/Math.min(a+1,i-1+o-a,o))}function Zo(t){return t[0]}function Ko(t){return t[1]}function Qo(){return 1}function Jo(){var t=Zo,e=Ko,n=Qo,r=960,i=500,o=20,s=2,a=3*o,l=r+2*a>>s,c=i+2*a>>s,u=Bo(20);function h(r){var i=new Float32Array(l*c),h=new Float32Array(l*c);r.forEach((function(r,o,u){var h=+t(r,o,u)+a>>s,d=+e(r,o,u)+a>>s,f=+n(r,o,u);h>=0&&h<l&&d>=0&&d<c&&(i[h+d*l]+=f)})),Xo({width:l,height:c,data:i},{width:l,height:c,data:h},o>>s),qo({width:l,height:c,data:h},{width:l,height:c,data:i},o>>s),Xo({width:l,height:c,data:i},{width:l,height:c,data:h},o>>s),qo({width:l,height:c,data:h},{width:l,height:c,data:i},o>>s),Xo({width:l,height:c,data:i},{width:l,height:c,data:h},o>>s),qo({width:l,height:c,data:h},{width:l,height:c,data:i},o>>s);var f=u(i);if(!Array.isArray(f)){var p=Q(i);f=X(0,p,f),(f=dt(0,Math.floor(p/f)*f,f)).shift()}return Yo().thresholds(f).size([l,c])(i).map(d)}function d(t){return t.value*=Math.pow(2,-2*s),t.coordinates.forEach(f),t}function f(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,s)-a,t[1]=t[1]*Math.pow(2,s)-a}function m(){return l=r+2*(a=3*o)>>s,c=i+2*a>>s,h}return h.x=function(e){return arguments.length?(t="function"===typeof e?e:Bo(+e),h):t},h.y=function(t){return arguments.length?(e="function"===typeof t?t:Bo(+t),h):e},h.weight=function(t){return arguments.length?(n="function"===typeof t?t:Bo(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,m()},h.cellSize=function(t){if(!arguments.length)return 1<<s;if(!((t=+t)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(t)/Math.LN2),m()},h.thresholds=function(t){return arguments.length?(u="function"===typeof t?t:Array.isArray(t)?Bo(jo.call(t)):Bo(t),h):u},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),m()},h}const $o=Math.pow(2,-52),ts=new Uint32Array(512);class es{static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:us;const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new es(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let s=1/0,a=1/0,l=-1/0,c=-1/0;for(let E=0;E<o;E++){const e=t[2*E],n=t[2*E+1];e<s&&(s=e),n<a&&(a=n),e>l&&(l=e),n>c&&(c=n),this._ids[E]=E}const u=(s+l)/2,h=(a+c)/2;let d,f,p,g=1/0;for(let E=0;E<o;E++){const e=ns(u,h,t[2*E],t[2*E+1]);e<g&&(d=E,g=e)}const m=t[2*d],v=t[2*d+1];g=1/0;for(let E=0;E<o;E++){if(E===d)continue;const e=ns(m,v,t[2*E],t[2*E+1]);e<g&&e>0&&(f=E,g=e)}let y=t[2*f],_=t[2*f+1],b=1/0;for(let E=0;E<o;E++){if(E===d||E===f)continue;const e=ss(m,v,y,_,t[2*E],t[2*E+1]);e<b&&(p=E,b=e)}let x=t[2*p],w=t[2*p+1];if(b===1/0){for(let r=0;r<o;r++)this._dists[r]=t[2*r]-t[0]||t[2*r+1]-t[1];as(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(is(m,v,y,_,x,w)){const t=f,e=y,n=_;f=p,y=x,_=w,p=t,x=e,w=n}const S=function(t,e,n,r,i,o){const s=n-t,a=r-e,l=i-t,c=o-e,u=s*s+a*a,h=l*l+c*c,d=.5/(s*c-a*l);return{x:t+(c*u-a*h)*d,y:e+(s*h-l*u)*d}}(m,v,y,_,x,w);this._cx=S.x,this._cy=S.y;for(let E=0;E<o;E++)this._dists[E]=ns(t[2*E],t[2*E+1],S.x,S.y);as(this._ids,this._dists,0,o-1),this._hullStart=d;let A=3;n[d]=e[p]=f,n[f]=e[d]=p,n[p]=e[f]=d,r[d]=0,r[f]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,v)]=d,i[this._hashKey(y,_)]=f,i[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let E,C,k=0;k<this._ids.length;k++){const o=this._ids[k],s=t[2*o],a=t[2*o+1];if(k>0&&Math.abs(s-E)<=$o&&Math.abs(a-C)<=$o)continue;if(E=s,C=a,o===d||o===f||o===p)continue;let l=0;for(let t=0,e=this._hashKey(s,a);t<this._hashSize&&(l=i[(e+t)%this._hashSize],-1===l||l===n[l]);t++);l=e[l];let c,u=l;for(;c=n[u],!is(s,a,t[2*u],t[2*u+1],t[2*c],t[2*c+1]);)if(u=c,u===l){u=-1;break}if(-1===u)continue;let h=this._addTriangle(u,o,n[u],-1,-1,r[u]);r[o]=this._legalize(h+2),r[u]=h,A++;let g=n[u];for(;c=n[g],is(s,a,t[2*g],t[2*g+1],t[2*c],t[2*c+1]);)h=this._addTriangle(g,o,c,r[o],-1,r[g]),r[o]=this._legalize(h+2),n[g]=g,A--,g=c;if(u===l)for(;c=e[u],is(s,a,t[2*c],t[2*c+1],t[2*u],t[2*u+1]);)h=this._addTriangle(c,o,u,-1,r[u],r[c]),this._legalize(h+2),r[c]=h,n[u]=u,A--,u=c;this._hullStart=e[o]=u,n[u]=e[g]=o,n[o]=g,i[this._hashKey(s,a)]=o,i[this._hashKey(t[2*u],t[2*u+1])]=u}this.hull=new Uint32Array(A);for(let E=0,C=this._hullStart;E<A;E++)this.hull[E]=C,C=n[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const s=n[t],a=t-t%3;if(o=a+(t+2)%3,-1===s){if(0===i)break;t=ts[--i];continue}const l=s-s%3,c=a+(t+1)%3,u=l+(s+2)%3,h=e[o],d=e[t],f=e[c],p=e[u];if(os(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1])){e[t]=p,e[s]=h;const r=n[u];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(s,n[o]),this._link(o,u);const a=l+(s+1)%3;i<ts.length&&(ts[i++]=a)}else{if(0===i)break;t=ts[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,r),this._link(s+1,i),this._link(s+2,o),this.trianglesLen+=3,s}}function ns(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function rs(t,e,n,r,i,o){const s=(r-e)*(i-t),a=(n-t)*(o-e);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function is(t,e,n,r,i,o){return(rs(i,o,t,e,n,r)||rs(t,e,n,r,i,o)||rs(n,r,i,o,t,e))<0}function os(t,e,n,r,i,o,s,a){const l=t-s,c=e-a,u=n-s,h=r-a,d=i-s,f=o-a,p=u*u+h*h,g=d*d+f*f;return l*(h*g-p*f)-c*(u*g-p*d)+(l*l+c*c)*(u*f-h*d)<0}function ss(t,e,n,r,i,o){const s=n-t,a=r-e,l=i-t,c=o-e,u=s*s+a*a,h=l*l+c*c,d=.5/(s*c-a*l),f=(c*u-a*h)*d,p=(s*h-l*u)*d;return f*f+p*p}function as(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let s=i-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=r}else{let i=n+1,o=r;ls(t,n+r>>1,i),e[t[n]]>e[t[r]]&&ls(t,n,r),e[t[i]]>e[t[r]]&&ls(t,i,r),e[t[n]]>e[t[i]]&&ls(t,n,i);const s=t[i],a=e[s];for(;;){do{i++}while(e[t[i]]<a);do{o--}while(e[t[o]]>a);if(o<i)break;ls(t,i,o)}t[n+1]=t[o],t[o]=s,r-i+1>=o-n?(as(t,e,i,r),as(t,e,n,o-1)):(as(t,e,n,o-1),as(t,e,i,r))}}function ls(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function cs(t){return t[0]}function us(t){return t[1]}const hs=1e-6;class ds{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>hs||Math.abs(this._y1-i)>hs)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(t-n,",").concat(e,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}rect(t,e,n,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}value(){return this._||null}}class fs{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class ps{constructor(t){let[e,n,r,i]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500];if(!((r=+r)>=(e=+e))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d,f,p=0,g=0,m=n.length;p<m;p+=3,g+=2){const e=2*n[p],r=2*n[p+1],o=2*n[p+2],s=t[e],a=t[e+1],l=t[r],c=t[r+1],u=t[o],h=t[o+1],m=l-s,v=c-a,y=u-s,_=h-a,b=m*m+v*v,x=y*y+_*_,w=2*(m*_-v*y);if(w)if(Math.abs(w)<1e-8)d=(s+u)/2,f=(a+h)/2;else{const t=1/w;d=s+(_*b-v*x)*t,f=a+(m*x-y*b)*t}else d=(s+u)/2-1e8*_,f=(a+h)/2+1e8*y;i[g]=d,i[g+1]=f}let o,s,a,l=e[e.length-1],c=4*l,u=t[2*l],h=t[2*l+1];r.fill(0);for(let d=0;d<e.length;++d)l=e[d],o=c,s=u,a=h,c=4*l,u=t[2*l],h=t[2*l+1],r[o+2]=r[c]=a-h,r[o+3]=r[c+1]=u-s}render(t){const e=null==t?t=new ds:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:s}=this;if(i.length<=1)return null;for(let c=0,u=n.length;c<u;++c){const e=n[c];if(e<c)continue;const r=2*Math.floor(c/3),i=2*Math.floor(e/3),s=o[r],a=o[r+1],l=o[i],u=o[i+1];this._renderSegment(s,a,l,u,t)}let a,l=i[i.length-1];for(let c=0;c<i.length;++c){a=l,l=i[c];const e=2*Math.floor(r[l]/3),n=o[e],u=o[e+1],h=4*a,d=this._project(n,u,s[h+2],s[h+3]);d&&this._renderSegment(n,u,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new ds:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new ds:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||e.lineTo(r[o],r[o+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new fs;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const s=this._regioncode(t,e),a=this._regioncode(n,r);0===s&&0===a?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,s,a))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)===e&&(n=+n)===n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,s=t.length;o<s;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+s-2)%s]&&e[(r+3)%i]==t[(o+s-1)%s]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const s=[];let a=o;do{const n=Math.floor(a/3);if(s.push(e[2*n],e[2*n+1]),a=a%3===2?a-2:a+1,i[a]!==t)break;a=r[a]}while(a!==o&&-1!==a);return s}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,s,a,l=null,c=e[n-2],u=e[n-1],h=this._regioncode(c,u);for(let d=0;d<n;d+=2)if(r=c,i=u,c=e[d],u=e[d+1],o=h,h=this._regioncode(c,u),0===o&&0===h)s=a,a=0,l?l.push(c,u):l=[c,u];else{let e,n,d,f,p;if(0===o){if(null===(e=this._clipSegment(r,i,c,u,o,h)))continue;[n,d,f,p]=e}else{if(null===(e=this._clipSegment(c,u,r,i,h,o)))continue;[f,p,n,d]=e,s=a,a=this._edgecode(n,d),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(n,d):l=[n,d]}s=a,a=this._edgecode(f,p),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(f,p):l=[f,p]}if(l)s=a,a=this._edgecode(l[0],l[1]),s&&a&&this._edge(t,s,a,l,l.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let s,a,l=i||o;8&l?(s=t+(n-t)*(this.ymax-e)/(r-e),a=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(r-e),a=this.ymin):2&l?(a=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(a=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=a,i=this._regioncode(t,e)):(n=s,r=a,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let s,a=Array.from(e);if((s=this._project(a[0],a[1],n,r))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(s[0],s[1]),a=this._clipFinite(t,a))for(let l,c=0,u=a.length,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)l=h,h=this._edgecode(a[c],a[c+1]),l&&h&&(c=this._edge(t,l,h,a,c),u=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const t=(o+2)%r.length,e=(o+4)%r.length;(r[o]===r[t]&&r[t]===r[e]||r[o+1]===r[t+1]&&r[t+1]===r[e+1])&&(r.splice(t,2),o-=2)}return i}_project(t,e,n,r){let i,o,s,a=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<a&&(s=this.ymin,o=t+(a=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<a&&(s=this.ymax,o=t+(a=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<a&&(o=this.xmax,s=e+(a=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<a&&(o=this.xmin,s=e+(a=i)*r)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const gs=2*Math.PI,ms=Math.pow;function vs(t){return t[0]}function ys(t){return t[1]}function _s(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class bs{static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ys,r=arguments.length>3?arguments[3]:void 0;return new bs("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let s=0;s<i;++s){const i=t[s];o[2*s]=e.call(r,i,s,t),o[2*s+1]=n.call(r,i,s,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new es(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const t=2*e[r],i=2*e[r+1],o=2*e[r+2];if((n[o]-n[t])*(n[i+1]-n[t+1])-(n[i]-n[t])*(n[o+1]-n[t+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,s=e.length/2;o<s;++o){const t=_s(e[2*o],e[2*o+1],i);e[2*o]=t[0],e[2*o+1]=t[1]}this._delaunator=new es(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let a=0,l=n.length;a<l;++a){const t=i[a%3===2?a-2:a+1];-1!==n[a]&&-1!==o[t]||(o[t]=a)}for(let a=0,l=r.length;a<l;++a)s[r[a]]=a;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new ps(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:s}=this;if(s){const e=s.indexOf(t);return e>0&&(yield s[e-1]),void(e<s.length-1&&(yield s[e+1]))}const a=e[t];if(-1===a)return;let l=a,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=i[l],-1===l){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(l!==a)}find(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:s,triangles:a,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let c=t,u=ms(e-l[2*t],2)+ms(n-l[2*t+1],2);const h=r[t];let d=h;do{let r=a[d];const h=ms(e-l[2*r],2)+ms(n-l[2*r+1],2);if(h<u&&(u=h,c=r),d=d%3===2?d-2:d+1,a[d]!==t)break;if(d=s[d],-1===d){if(d=i[(o[t]+1)%i.length],d!==r&&ms(e-l[2*d],2)+ms(n-l[2*d+1],2)<u)return d;break}}while(d!==h);return c}render(t){const e=null==t?t=new ds:void 0,{points:n,halfedges:r,triangles:i}=this;for(let o=0,s=r.length;o<s;++o){const e=r[o];if(e<o)continue;const s=2*i[o],a=2*i[e];t.moveTo(n[s],n[s+1]),t.lineTo(n[a],n[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=null==t?t=new ds:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];t.moveTo(n+e,o),t.arc(n,o,e,0,gs)}return n&&n.value()}renderHull(t){const e=null==t?t=new ds:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let s=1;s<o;++s){const e=2*n[s];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new fs;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new ds:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],s=2*i[t+1],a=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.lineTo(r[a],r[a+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new fs;return this.renderTriangle(t,e),e.value()}}const xs=t=>()=>t;function ws(t,e){let{sourceEvent:n,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:h}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Ss(t){return!t.ctrlKey&&!t.button}function As(){return this.parentNode}function Es(t,e){return null==e?{x:t.x,y:t.y}:e}function Cs(){return navigator.maxTouchPoints||"ontouchstart"in this}function ks(){var t,e,n,r,i=Ss,o=As,s=Es,a=Cs,l={},c=ne("start","drag","end"),u=0,h=0;function d(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",m).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&i.call(this,s,a)){var l=_(this,o.call(this,s,a),s,a,"mouse");l&&(yn(s.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),xn(s.view),_n(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(r){if(bn(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>h}l.mouse("drag",r)}function g(t){yn(t.view).on("mousemove.drag mouseup.drag",null),wn(t.view,n),bn(t),l.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,r,s=t.changedTouches,a=o.call(this,t,e),l=s.length;for(n=0;n<l;++n)(r=_(this,a,t,e,s[n].identifier,s[n]))&&(_n(t),r("start",t,s[n]))}}function v(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=l[r[e].identifier])&&(bn(t),n("drag",t,r[e]))}function y(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=l[i[e].identifier])&&(_n(t),n("end",t,i[e]))}function _(t,e,n,r,i,o){var a,h,f,p=c.copy(),g=Fn(o||n,e);if(null!=(f=s.call(t,new ws("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-g[0]||0,h=f.y-g[1]||0,function n(o,s,c){var m,v=g;switch(o){case"start":l[i]=n,m=u++;break;case"end":delete l[i],--u;case"drag":g=Fn(c||s,e),m=u}p.call(o,t,new ws(o,{sourceEvent:s,subject:f,target:d,identifier:i,active:m,x:g[0]+a,y:g[1]+h,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return d.filter=function(t){return arguments.length?(i="function"===typeof t?t:xs(!!t),d):i},d.container=function(t){return arguments.length?(o="function"===typeof t?t:xs(t),d):o},d.subject=function(t){return arguments.length?(s="function"===typeof t?t:xs(t),d):s},d.touchable=function(t){return arguments.length?(a="function"===typeof t?t:xs(!!t),d):a},d.on=function(){var t=c.on.apply(c,arguments);return t===c?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}ws.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ts={},Ms={};function Ps(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Ls(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Os(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Rs(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Os(-t,6):t>9999?"+"+Os(t,6):Os(t,4)}(t.getUTCFullYear())+"-"+Os(t.getUTCMonth()+1,2)+"-"+Os(t.getUTCDate(),2)+(i?"T"+Os(e,2)+":"+Os(n,2)+":"+Os(r,2)+"."+Os(i,3)+"Z":r?"T"+Os(e,2)+":"+Os(n,2)+":"+Os(r,2)+"Z":n||e?"T"+Os(e,2)+":"+Os(n,2)+"Z":"")}function Ds(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,s=0,a=0,l=o<=0,c=!1;function u(){if(l)return Ms;if(c)return c=!1,Ts;var e,r,i=s;if(34===t.charCodeAt(i)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?l=!0:10===(r=t.charCodeAt(s++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(r=t.charCodeAt(e=s++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==Ms;){for(var h=[];r!==Ts&&r!==Ms;)h.push(r),r=u();e&&null==(h=e(h,a++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?Rs(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ps(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ps(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Ls(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ls(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}}var Is=Ds(","),Fs=Is.parse,Ns=Is.parseRows,js=Is.format,zs=Is.formatBody,Bs=Is.formatRows,Us=Is.formatRow,Vs=Is.formatValue,Hs=Ds("\t"),Ws=Hs.parse,Gs=Hs.parseRows,Ys=Hs.format,Xs=Hs.formatBody,qs=Hs.formatRows,Zs=Hs.formatRow,Ks=Hs.formatValue;function Qs(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Js&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Js=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),$s=t=>+t;function ta(t){return t*t}function ea(t){return t*(2-t)}function na(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var ra=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),ia=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),oa=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),sa=Math.PI,aa=sa/2;function la(t){return 1===+t?1:1-Math.cos(t*aa)}function ca(t){return Math.sin(t*aa)}function ua(t){return(1-Math.cos(sa*t))/2}function ha(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function da(t){return ha(1-+t)}function fa(t){return 1-ha(t)}function pa(t){return((t*=2)<=1?ha(1-t):2-ha(t-1))/2}function ga(t){return 1-Math.sqrt(1-t*t)}function ma(t){return Math.sqrt(1- --t*t)}function va(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ya=4/11,_a=7.5625;function ba(t){return 1-xa(1-t)}function xa(t){return(t=+t)<ya?_a*t*t:t<.7272727272727273?_a*(t-=.5454545454545454)*t+.75:t<.9090909090909091?_a*(t-=.8181818181818182)*t+.9375:_a*(t-=.9545454545454546)*t+.984375}function wa(t){return((t*=2)<=1?1-xa(1-t):xa(t-1)+1)/2}var Sa=1.70158,Aa=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(Sa),Ea=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(Sa),Ca=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Sa),ka=2*Math.PI,Ta=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ka);function i(t){return e*ha(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*ka)},i.period=function(n){return t(e,n)},i}(1,.3),Ma=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ka);function i(t){return 1-e*ha(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*ka)},i.period=function(n){return t(e,n)},i}(1,.3),Pa=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ka);function i(t){return((t=2*t-1)<0?e*ha(-t)*Math.sin((r-t)/n):2-e*ha(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*ka)},i.period=function(n){return t(e,n)},i}(1,.3);function La(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Oa(t,e){return fetch(t,e).then(La)}function Ra(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Da(t,e){return fetch(t,e).then(Ra)}function Ia(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Fa(t,e){return fetch(t,e).then(Ia)}function Na(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),Fa(e,n).then((function(e){return t(e,r)}))}}function ja(t,e,n,r){3===arguments.length&&"function"===typeof n&&(r=n,n=void 0);var i=Ds(t);return Fa(e,n).then((function(t){return i.parse(t,r)}))}var za=Na(Fs),Ba=Na(Ws);function Ua(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function Va(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Ha(t,e){return fetch(t,e).then(Va)}function Wa(t){return(e,n)=>Fa(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const Ga=Wa("application/xml");var Ya=Wa("text/html"),Xa=Wa("image/svg+xml");function qa(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,l=0;for(i=0;i<s;++i)a+=(o=n[i]).x,l+=o.y;for(a=(a/s-t)*r,l=(l/s-e)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Za(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,l,c,u,h,d,f=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(o=(g+v)/2))?g=o:v=o,(u=n>=(s=(m+y)/2))?m=s:y=s,i=f,!(f=f[h=u<<1|c]))return i[h]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(u=n>=(s=(m+y)/2))?m=s:y=s}while((h=u<<1|c)===(d=(l>=s)<<1|a>=o));return i[d]=f,i[h]=p,t}function Ka(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Qa(t){return t[0]}function Ja(t){return t[1]}function $a(t,e,n){var r=new tl(null==e?Qa:e,null==n?Ja:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function tl(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function el(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var nl=$a.prototype=tl.prototype;function rl(t){return function(){return t}}function il(t){return 1e-6*(t()-.5)}function ol(t){return t.x+t.vx}function sl(t){return t.y+t.vy}function al(t){var e,n,r,i=1,o=1;function s(){for(var t,s,l,c,u,h,d,f=e.length,p=0;p<o;++p)for(s=$a(e,ol,sl).visitAfter(a),t=0;t<f;++t)l=e[t],h=n[l.index],d=h*h,c=l.x+l.vx,u=l.y+l.vy,s.visit(g);function g(t,e,n,o,s){var a=t.data,f=t.r,p=h+f;if(!a)return e>c+p||o<c-p||n>u+p||s<u-p;if(a.index>l.index){var g=c-a.x-a.vx,m=u-a.y-a.vy,v=g*g+m*m;v<p*p&&(0===g&&(v+=(g=il(r))*g),0===m&&(v+=(m=il(r))*m),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(g*=v)*(p=(f*=f)/(d+f)),l.vy+=(m*=v)*p,a.vx-=g*(p=1-p),a.vy-=m*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=rl(null==t?1:+t)),s.initialize=function(t,n){e=t,r=n,l()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"===typeof e?e:rl(+e),l(),s):t},s}function ll(t){return t.index}function cl(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function ul(t){var e,n,r,i,o,s,a=ll,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=rl(30),u=1;function h(r){for(var i=0,a=t.length;i<u;++i)for(var l,c,h,d,f,p,g,m=0;m<a;++m)c=(l=t[m]).source,d=(h=l.target).x+h.vx-c.x-c.vx||il(s),f=h.y+h.vy-c.y-c.vy||il(s),d*=p=((p=Math.sqrt(d*d+f*f))-n[m])/p*r*e[m],f*=p,h.vx-=d*(g=o[m]),h.vy-=f*g,c.vx+=d*(g=1-g),c.vy+=f*g}function d(){if(r){var s,l,c=r.length,u=t.length,h=new Map(r.map(((t,e)=>[a(t,e,r),t])));for(s=0,i=new Array(c);s<u;++s)(l=t[s]).index=s,"object"!==typeof l.source&&(l.source=cl(h,l.source)),"object"!==typeof l.target&&(l.target=cl(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,o=new Array(u);s<u;++s)l=t[s],o[s]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(u),f(),n=new Array(u),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,s=e,d()},h.links=function(e){return arguments.length?(t=e,d(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(u=+t,h):u},h.strength=function(t){return arguments.length?(l="function"===typeof t?t:rl(+t),f(),h):l},h.distance=function(t){return arguments.length?(c="function"===typeof t?t:rl(+t),p(),h):c},h}nl.copy=function(){var t,e,n=new tl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=el(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=el(e));return n},nl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Za(this.cover(e,n),e,n,t)},nl.addAll=function(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<o;++n)Za(this,s[n],a[n],t[n]);return this},nl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},nl.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},nl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nl.find=function(t,e,n){var r,i,o,s,a,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Ka(g,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>d||(o=l.y0)>f||(s=l.x1)<u||(a=l.y1)<h))if(g.length){var m=(i+s)/2,v=(o+a)/2;p.push(new Ka(g[3],m,v,s,a),new Ka(g[2],i,v,m,a),new Ka(g[1],m,o,s,v),new Ka(g[0],i,o,m,v)),(c=(e>=v)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),b=y*y+_*_;if(b<n){var x=Math.sqrt(n=b);u=t-x,h=e-x,d=t+x,f=e+x,r=g.data}}return r},nl.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u,h,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(a=(p+m)/2))?p=a:m=a,(u=s>=(l=(g+v)/2))?g=l:v=l,e=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},nl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},nl.root=function(){return this._root},nl.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},nl.visit=function(t){var e,n,r,i,o,s,a=[],l=this._root;for(l&&a.push(new Ka(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(r+o)/2,u=(i+s)/2;(n=l[3])&&a.push(new Ka(n,c,u,o,s)),(n=l[2])&&a.push(new Ka(n,r,u,c,s)),(n=l[1])&&a.push(new Ka(n,c,i,o,u)),(n=l[0])&&a.push(new Ka(n,r,i,c,u))}return this},nl.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Ka(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.x1,c=e.y1,u=(s+l)/2,h=(a+c)/2;(o=i[0])&&n.push(new Ka(o,s,a,u,h)),(o=i[1])&&n.push(new Ka(o,u,a,l,h)),(o=i[2])&&n.push(new Ka(o,s,h,u,c)),(o=i[3])&&n.push(new Ka(o,u,h,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},nl.x=function(t){return arguments.length?(this._x=t,this):this._x},nl.y=function(t){return arguments.length?(this._y=t,this):this._y};const hl=4294967296;function dl(t){return t.x}function fl(t){return t.y}var pl=Math.PI*(3-Math.sqrt(5));function gl(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Kn(h),c=ne("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%hl)/hl}();function h(){d(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function d(r){var l,c,u=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,a.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*pl;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(u=t,a.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(s=(i=e-(a=t[c]).x)*i+(o=n-a.y)*o)<r&&(l=a,r=s);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function ml(){var t,e,n,r,i,o=rl(-30),s=1,a=1/0,l=.81;function c(n){var i,o=t.length,s=$a(t,dl,fl).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],s.visit(d)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,s,a=0,l=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function d(t,o,c,u){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=u-o,p=h*h+d*d;if(f*f/l<p)return p<a&&(0===h&&(p+=(h=il(n))*h),0===d&&(p+=(d=il(n))*d),p<s&&(p=Math.sqrt(s*p)),e.vx+=h*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(p+=(h=il(n))*h),0===d&&(p+=(d=il(n))*d),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=i[t.data.index]*r/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(o="function"===typeof t?t:rl(+t),u(),c):o},c.distanceMin=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.distanceMax=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}function vl(t,e,n){var r,i,o,s=rl(.1);function a(t){for(var s=0,a=r.length;s<a;++s){var l=r[s],c=l.x-e||1e-6,u=l.y-n||1e-6,h=Math.sqrt(c*c+u*u),d=(o[s]-h)*i[s]*t/h;l.vx+=c*d,l.vy+=u*d}}function l(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+s(r[e],e,r)}}return"function"!==typeof t&&(t=rl(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){r=t,l()},a.strength=function(t){return arguments.length?(s="function"===typeof t?t:rl(+t),l(),a):s},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:rl(+e),l(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a}function yl(t){var e,n,r,i=rl(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=rl(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:rl(+t),s(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:rl(+e),s(),o):t},o}function _l(t){var e,n,r,i=rl(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=rl(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:rl(+t),s(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:rl(+e),s(),o):t},o}function bl(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xl(t){return(t=bl(Math.abs(t)))?t[1]:NaN}var wl,Sl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Al(t){if(!(e=Sl.exec(t)))throw new Error("invalid format: "+t);var e;return new El({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function El(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Cl(t,e){var n=bl(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Al.prototype=El.prototype,El.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const kl={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cl(100*t,e),r:Cl,s:function(t,e){var n=bl(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(wl=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+bl(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Tl(t){return t}var Ml,Pl,Ll,Ol=Array.prototype.map,Rl=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Dl(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Tl:(e=Ol.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Tl:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ol.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"\u2212":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Al(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):kl[y]||(void 0===m&&(m=12),v=!0,y="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?o:/[%p]/.test(y)?l:"",x=kl[y],w=/[defgprs%]/.test(y);function S(t){var i,o,l,d=_,S=b;if("c"===y)S=x(t)+S,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0===+t&&"+"!==h&&(A=!1),d=(A?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===y?Rl[8+wl/3]:"")+S+(A&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){S=(46===l?s+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}g&&!f&&(t=r(t,1/0));var E=d.length+t.length+S.length,C=E<p?new Array(p-E+1).join(e):"";switch(g&&f&&(t=r(C+t,C.length?p-S.length:1/0),C=""),n){case"<":t=d+t+S+C;break;case"=":t=d+C+t+S;break;case"^":t=C.slice(0,E=C.length>>1)+d+t+S+C.slice(E);break;default:t=C+d+t+S}return a(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Al(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(xl(e)/3))),i=Math.pow(10,-r),o=Rl[8+r/3];return function(t){return n(i*t)+o}}}}function Il(t){return Ml=Dl(t),Pl=Ml.format,Ll=Ml.formatPrefix,Ml}function Fl(t){return Math.max(0,-xl(Math.abs(t)))}function Nl(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xl(e)/3)))-xl(Math.abs(t)))}function jl(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xl(e)-xl(t))+1}Il({thousands:",",grouping:[3],currency:["$",""]});var zl=1e-6,Bl=1e-12,Ul=Math.PI,Vl=Ul/2,Hl=Ul/4,Wl=2*Ul,Gl=180/Ul,Yl=Ul/180,Xl=Math.abs,ql=Math.atan,Zl=Math.atan2,Kl=Math.cos,Ql=Math.ceil,Jl=Math.exp,$l=(Math.floor,Math.hypot),tc=Math.log,ec=Math.pow,nc=Math.sin,rc=Math.sign||function(t){return t>0?1:t<0?-1:0},ic=Math.sqrt,oc=Math.tan;function sc(t){return t>1?0:t<-1?Ul:Math.acos(t)}function ac(t){return t>1?Vl:t<-1?-Vl:Math.asin(t)}function lc(t){return(t=nc(t/2))*t}function cc(){}function uc(t,e){t&&dc.hasOwnProperty(t.type)&&dc[t.type](t,e)}var hc={Feature:function(t,e){uc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)uc(n[r].geometry,e)}},dc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fc(n[r],e,0)},Polygon:function(t,e){pc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pc(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)uc(n[r],e)}};function fc(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function pc(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fc(t[n],e,1);e.polygonEnd()}function gc(t,e){t&&hc.hasOwnProperty(t.type)?hc[t.type](t,e):uc(t,e)}var mc,vc,yc,_c,bc,xc,wc,Sc,Ac,Ec,Cc,kc,Tc,Mc,Pc,Lc,Oc=new S,Rc=new S,Dc={point:cc,lineStart:cc,lineEnd:cc,polygonStart:function(){Oc=new S,Dc.lineStart=Ic,Dc.lineEnd=Fc},polygonEnd:function(){var t=+Oc;Rc.add(t<0?Wl+t:t),this.lineStart=this.lineEnd=this.point=cc},sphere:function(){Rc.add(Wl)}};function Ic(){Dc.point=Nc}function Fc(){jc(mc,vc)}function Nc(t,e){Dc.point=jc,mc=t,vc=e,yc=t*=Yl,_c=Kl(e=(e*=Yl)/2+Hl),bc=nc(e)}function jc(t,e){var n=(t*=Yl)-yc,r=n>=0?1:-1,i=r*n,o=Kl(e=(e*=Yl)/2+Hl),s=nc(e),a=bc*s,l=_c*o+a*Kl(i),c=a*r*nc(i);Oc.add(Zl(c,l)),yc=t,_c=o,bc=s}function zc(t){return Rc=new S,gc(t,Dc),2*Rc}function Bc(t){return[Zl(t[1],t[0]),ac(t[2])]}function Uc(t){var e=t[0],n=t[1],r=Kl(n);return[r*Kl(e),r*nc(e),nc(n)]}function Vc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Gc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Yc(t){var e=ic(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Xc,qc,Zc,Kc,Qc,Jc,$c,tu,eu,nu,ru,iu,ou,su,au,lu,cu={point:uu,lineStart:du,lineEnd:fu,polygonStart:function(){cu.point=pu,cu.lineStart=gu,cu.lineEnd=mu,Mc=new S,Dc.polygonStart()},polygonEnd:function(){Dc.polygonEnd(),cu.point=uu,cu.lineStart=du,cu.lineEnd=fu,Oc<0?(xc=-(Sc=180),wc=-(Ac=90)):Mc>zl?Ac=90:Mc<-1e-6&&(wc=-90),Lc[0]=xc,Lc[1]=Sc},sphere:function(){xc=-(Sc=180),wc=-(Ac=90)}};function uu(t,e){Pc.push(Lc=[xc=t,Sc=t]),e<wc&&(wc=e),e>Ac&&(Ac=e)}function hu(t,e){var n=Uc([t*Yl,e*Yl]);if(Tc){var r=Hc(Tc,n),i=Hc([r[1],-r[0],0],r);Yc(i),i=Bc(i);var o,s=t-Ec,a=s>0?1:-1,l=i[0]*Gl*a,c=Xl(s)>180;c^(a*Ec<l&&l<a*t)?(o=i[1]*Gl)>Ac&&(Ac=o):c^(a*Ec<(l=(l+360)%360-180)&&l<a*t)?(o=-i[1]*Gl)<wc&&(wc=o):(e<wc&&(wc=e),e>Ac&&(Ac=e)),c?t<Ec?vu(xc,t)>vu(xc,Sc)&&(Sc=t):vu(t,Sc)>vu(xc,Sc)&&(xc=t):Sc>=xc?(t<xc&&(xc=t),t>Sc&&(Sc=t)):t>Ec?vu(xc,t)>vu(xc,Sc)&&(Sc=t):vu(t,Sc)>vu(xc,Sc)&&(xc=t)}else Pc.push(Lc=[xc=t,Sc=t]);e<wc&&(wc=e),e>Ac&&(Ac=e),Tc=n,Ec=t}function du(){cu.point=hu}function fu(){Lc[0]=xc,Lc[1]=Sc,cu.point=uu,Tc=null}function pu(t,e){if(Tc){var n=t-Ec;Mc.add(Xl(n)>180?n+(n>0?360:-360):n)}else Cc=t,kc=e;Dc.point(t,e),hu(t,e)}function gu(){Dc.lineStart()}function mu(){pu(Cc,kc),Dc.lineEnd(),Xl(Mc)>zl&&(xc=-(Sc=180)),Lc[0]=xc,Lc[1]=Sc,Tc=null}function vu(t,e){return(e-=t)<0?e+360:e}function yu(t,e){return t[0]-e[0]}function _u(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function bu(t){var e,n,r,i,o,s,a;if(Ac=Sc=-(xc=wc=1/0),Pc=[],gc(t,cu),n=Pc.length){for(Pc.sort(yu),e=1,o=[r=Pc[0]];e<n;++e)_u(r,(i=Pc[e])[0])||_u(r,i[1])?(vu(r[0],i[1])>vu(r[0],r[1])&&(r[1]=i[1]),vu(i[0],r[1])>vu(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(a=vu(r[1],i[0]))>s&&(s=a,xc=i[0],Sc=r[1])}return Pc=Lc=null,xc===1/0||wc===1/0?[[NaN,NaN],[NaN,NaN]]:[[xc,wc],[Sc,Ac]]}var xu={sphere:cc,point:wu,lineStart:Au,lineEnd:ku,polygonStart:function(){xu.lineStart=Tu,xu.lineEnd=Mu},polygonEnd:function(){xu.lineStart=Au,xu.lineEnd=ku}};function wu(t,e){t*=Yl;var n=Kl(e*=Yl);Su(n*Kl(t),n*nc(t),nc(e))}function Su(t,e,n){++Xc,Zc+=(t-Zc)/Xc,Kc+=(e-Kc)/Xc,Qc+=(n-Qc)/Xc}function Au(){xu.point=Eu}function Eu(t,e){t*=Yl;var n=Kl(e*=Yl);su=n*Kl(t),au=n*nc(t),lu=nc(e),xu.point=Cu,Su(su,au,lu)}function Cu(t,e){t*=Yl;var n=Kl(e*=Yl),r=n*Kl(t),i=n*nc(t),o=nc(e),s=Zl(ic((s=au*o-lu*i)*s+(s=lu*r-su*o)*s+(s=su*i-au*r)*s),su*r+au*i+lu*o);qc+=s,Jc+=s*(su+(su=r)),$c+=s*(au+(au=i)),tu+=s*(lu+(lu=o)),Su(su,au,lu)}function ku(){xu.point=wu}function Tu(){xu.point=Pu}function Mu(){Lu(iu,ou),xu.point=wu}function Pu(t,e){iu=t,ou=e,t*=Yl,e*=Yl,xu.point=Lu;var n=Kl(e);su=n*Kl(t),au=n*nc(t),lu=nc(e),Su(su,au,lu)}function Lu(t,e){t*=Yl;var n=Kl(e*=Yl),r=n*Kl(t),i=n*nc(t),o=nc(e),s=au*o-lu*i,a=lu*r-su*o,l=su*i-au*r,c=$l(s,a,l),u=ac(c),h=c&&-u/c;eu.add(h*s),nu.add(h*a),ru.add(h*l),qc+=u,Jc+=u*(su+(su=r)),$c+=u*(au+(au=i)),tu+=u*(lu+(lu=o)),Su(su,au,lu)}function Ou(t){Xc=qc=Zc=Kc=Qc=Jc=$c=tu=0,eu=new S,nu=new S,ru=new S,gc(t,xu);var e=+eu,n=+nu,r=+ru,i=$l(e,n,r);return i<Bl&&(e=Jc,n=$c,r=tu,qc<zl&&(e=Zc,n=Kc,r=Qc),(i=$l(e,n,r))<Bl)?[NaN,NaN]:[Zl(n,e)*Gl,ac(r/i)*Gl]}function Ru(t){return function(){return t}}function Du(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Iu(t,e){return[Xl(t)>Ul?t+Math.round(-t/Wl)*Wl:t,e]}function Fu(t,e,n){return(t%=Wl)?e||n?Du(ju(t),zu(e,n)):ju(t):e||n?zu(e,n):Iu}function Nu(t){return function(e,n){return[(e+=t)>Ul?e-Wl:e<-Ul?e+Wl:e,n]}}function ju(t){var e=Nu(t);return e.invert=Nu(-t),e}function zu(t,e){var n=Kl(t),r=nc(t),i=Kl(e),o=nc(e);function s(t,e){var s=Kl(e),a=Kl(t)*s,l=nc(t)*s,c=nc(e),u=c*n+a*r;return[Zl(l*i-u*o,a*n-c*r),ac(u*i+l*o)]}return s.invert=function(t,e){var s=Kl(e),a=Kl(t)*s,l=nc(t)*s,c=nc(e),u=c*i-l*o;return[Zl(l*i+c*o,a*n+u*r),ac(u*n-a*r)]},s}function Bu(t){function e(e){return(e=t(e[0]*Yl,e[1]*Yl))[0]*=Gl,e[1]*=Gl,e}return t=Fu(t[0]*Yl,t[1]*Yl,t.length>2?t[2]*Yl:0),e.invert=function(e){return(e=t.invert(e[0]*Yl,e[1]*Yl))[0]*=Gl,e[1]*=Gl,e},e}function Uu(t,e,n,r,i,o){if(n){var s=Kl(e),a=nc(e),l=r*n;null==i?(i=e+r*Wl,o=e-l/2):(i=Vu(s,i),o=Vu(s,o),(r>0?i<o:i>o)&&(i+=r*Wl));for(var c,u=i;r>0?u>o:u<o;u-=l)c=Bc([s,-a*Kl(u),-a*nc(u)]),t.point(c[0],c[1])}}function Vu(t,e){(e=Uc(e))[0]-=t,Yc(e);var n=sc(-e[1]);return((-e[2]<0?-n:n)+Wl-zl)%Wl}function Hu(){var t,e,n=Ru([0,0]),r=Ru(90),i=Ru(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Gl,n[1]*=Gl}};function s(){var s=n.apply(this,arguments),a=r.apply(this,arguments)*Yl,l=i.apply(this,arguments)*Yl;return t=[],e=Fu(-s[0]*Yl,-s[1]*Yl,0).invert,Uu(o,a,l,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(n="function"===typeof t?t:Ru([+t[0],+t[1]]),s):n},s.radius=function(t){return arguments.length?(r="function"===typeof t?t:Ru(+t),s):r},s.precision=function(t){return arguments.length?(i="function"===typeof t?t:Ru(+t),s):i},s}function Wu(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:cc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Gu(t,e){return Xl(t[0]-e[0])<zl&&Xl(t[1]-e[1])<zl}function Yu(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xu(t,e,n,r,i){var o,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Gu(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s[0]+=2e-6}a.push(n=new Yu(r,t,null,!0)),l.push(n.o=new Yu(r,null,n,!1)),a.push(n=new Yu(s,t,null,!1)),l.push(n.o=new Yu(s,null,n,!0))}})),a.length){for(l.sort(e),qu(a),qu(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var c,u,h=a[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((u=c[o])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(f)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,f=!f}while(!d.v);i.lineEnd()}}}function qu(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Zu(t){return Xl(t[0])<=Ul?t[0]:rc(t[0])*((Xl(t[0])+Ul)%Wl-Ul)}function Ku(t,e){var n=Zu(e),r=e[1],i=nc(r),o=[nc(n),-Kl(n),0],s=0,a=0,l=new S;1===i?r=Vl+zl:-1===i&&(r=-Vl-zl);for(var c=0,u=t.length;c<u;++c)if(d=(h=t[c]).length)for(var h,d,f=h[d-1],p=Zu(f),g=f[1]/2+Hl,m=nc(g),v=Kl(g),y=0;y<d;++y,p=b,m=w,v=A,f=_){var _=h[y],b=Zu(_),x=_[1]/2+Hl,w=nc(x),A=Kl(x),E=b-p,C=E>=0?1:-1,k=C*E,T=k>Ul,M=m*w;if(l.add(Zl(M*C*nc(k),v*A+M*Kl(k))),s+=T?E+C*Wl:E,T^p>=n^b>=n){var P=Hc(Uc(f),Uc(_));Yc(P);var L=Hc(o,P);Yc(L);var O=(T^E>=0?-1:1)*ac(L[2]);(r>O||r===O&&(P[0]||P[1]))&&(a+=T^E>=0?1:-1)}}return(s<-1e-6||s<zl&&l<-1e-12)^1&a}function Qu(t,e,n,r){return function(i){var o,s,a,l=e(i),c=Wu(),u=e(c),h=!1,d={point:f,lineStart:g,lineEnd:m,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=_,s=[],o=[]},polygonEnd:function(){d.point=f,d.lineStart=g,d.lineEnd=m,s=lt(s);var t=Ku(o,r);s.length?(h||(i.polygonStart(),h=!0),Xu(s,$u,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function g(){d.point=p,l.lineStart()}function m(){d.point=f,l.lineEnd()}function v(t,e){a.push([t,e]),u.point(t,e)}function y(){u.lineStart(),a=[]}function _(){v(a[0][0],a[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),d=c.result(),f=d.length;if(a.pop(),o.push(a),a=null,f)if(1&l){if((e=(n=d[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else f>1&&2&l&&d.push(d.pop().concat(d.shift())),s.push(d.filter(Ju))}return d}}function Ju(t){return t.length>1}function $u(t,e){return((t=t.x)[0]<0?t[1]-Vl-zl:Vl-t[1])-((e=e.x)[0]<0?e[1]-Vl-zl:Vl-e[1])}Iu.invert=Iu;const th=Qu((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Ul:-Ul,l=Xl(o-n);Xl(l-Ul)<zl?(t.point(n,r=(r+s)/2>0?Vl:-Vl),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&l>=Ul&&(Xl(n-i)<zl&&(n-=i*zl),Xl(o-a)<zl&&(o-=a*zl),r=function(t,e,n,r){var i,o,s=nc(t-n);return Xl(s)>zl?ql((nc(e)*(o=Kl(r))*nc(n)-nc(r)*(i=Kl(e))*nc(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Vl,r.point(-Ul,i),r.point(0,i),r.point(Ul,i),r.point(Ul,0),r.point(Ul,-i),r.point(0,-i),r.point(-Ul,-i),r.point(-Ul,0),r.point(-Ul,i);else if(Xl(t[0]-e[0])>zl){var o=t[0]<e[0]?Ul:-Ul;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Ul,-Vl]);function eh(t){var e=Kl(t),n=6*Yl,r=e>0,i=Xl(e)>zl;function o(t,n){return Kl(t)*Kl(n)>e}function s(t,n,r){var i=[1,0,0],o=Hc(Uc(t),Uc(n)),s=Vc(o,o),a=o[0],l=s-a*a;if(!l)return!r&&t;var c=e*s/l,u=-e*a/l,h=Hc(i,o),d=Gc(i,c);Wc(d,Gc(o,u));var f=h,p=Vc(d,f),g=Vc(f,f),m=p*p-g*(Vc(d,d)-1);if(!(m<0)){var v=ic(m),y=Gc(f,(-p-v)/g);if(Wc(y,d),y=Bc(y),!r)return y;var _,b=t[0],x=n[0],w=t[1],S=n[1];x<b&&(_=b,b=x,x=_);var A=x-b,E=Xl(A-Ul)<zl;if(!E&&S<w&&(_=w,w=S,S=_),E||A<zl?E?w+S>0^y[1]<(Xl(y[0]-b)<zl?w:S):w<=y[1]&&y[1]<=S:A>Ul^(b<=y[0]&&y[0]<=x)){var C=Gc(f,(-p+v)/g);return Wc(C,d),[y,Bc(C)]}}}function a(e,n){var i=r?t:Ul-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Qu(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var f,p=[h,d],g=o(h,d),m=r?g?0:a(h,d):g?a(h+(h<0?Ul:-Ul),d):0;if(!e&&(c=l=g)&&t.lineStart(),g!==l&&(!(f=s(e,p))||Gu(e,f)||Gu(p,f))&&(p[2]=1),g!==l)u=0,g?(t.lineStart(),f=s(p,e),t.point(f[0],f[1])):(f=s(e,p),t.point(f[0],f[1],2),t.lineEnd()),e=f;else if(i&&e&&r^g){var v;m&n||!(v=s(p,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&Gu(e,p)||t.point(p[0],p[1]),e=p,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,o){Uu(o,t,n,i,e,r)}),r?[0,-t]:[-Ul,t-Ul])}var nh,rh,ih,oh,sh=1e9,ah=-sh;function lh(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var u=0,h=0;if(null==i||(u=s(i,a))!==(h=s(o,a))||l(i,o)<0^a>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+a+4)%4)!==h);else c.point(o[0],o[1])}function s(r,i){return Xl(r[0]-t)<zl?i>0?0:3:Xl(r[0]-n)<zl?i>0?2:1:Xl(r[1]-e)<zl?i>0?1:0:i>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,c,u,h,d,f,p,g,m,v,y,_=s,b=Wu(),x={point:w,lineStart:function(){x.point=S,c&&c.push(u=[]);v=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(S(h,d),f&&m&&b.rejoin(),l.push(b.result()));x.point=w,m&&_.lineEnd()},polygonStart:function(){_=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,s,a=c[n],l=1,u=a.length,h=a[0],d=h[0],f=h[1];l<u;++l)o=d,s=f,d=(h=a[l])[0],f=h[1],s<=r?f>r&&(d-o)*(r-s)>(f-s)*(t-o)&&++e:f<=r&&(d-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=y&&e,i=(l=lt(l)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Xu(l,a,e,o,s),s.polygonEnd());_=s,l=c=u=null}};function w(t,e){i(t,e)&&_.point(t,e)}function S(o,s){var a=i(o,s);if(c&&u.push([o,s]),v)h=o,d=s,f=a,v=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&m)_.point(o,s);else{var l=[p=Math.max(ah,Math.min(sh,p)),g=Math.max(ah,Math.min(sh,g))],b=[o=Math.max(ah,Math.min(sh,o)),s=Math.max(ah,Math.min(sh,s))];!function(t,e,n,r,i,o){var s,a=t[0],l=t[1],c=0,u=1,h=e[0]-a,d=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<c)return;s<u&&(u=s)}else if(h>0){if(s>u)return;s>c&&(c=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>u)return;s>c&&(c=s)}else if(h>0){if(s<c)return;s<u&&(u=s)}if(s=r-l,d||!(s>0)){if(s/=d,d<0){if(s<c)return;s<u&&(u=s)}else if(d>0){if(s>u)return;s>c&&(c=s)}if(s=o-l,d||!(s<0)){if(s/=d,d<0){if(s>u)return;s>c&&(c=s)}else if(d>0){if(s<c)return;s<u&&(u=s)}return c>0&&(t[0]=a+c*h,t[1]=l+c*d),u<1&&(e[0]=a+u*h,e[1]=l+u*d),!0}}}}}(l,b,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),y=!1):(m||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),a||_.lineEnd(),y=!1)}p=o,g=s,m=a}return x}}function ch(){var t,e,n,r=0,i=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=lh(r,i,o,s)(e=n)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[r,i],[o,s]]}}}var uh={sphere:cc,point:cc,lineStart:function(){uh.point=dh,uh.lineEnd=hh},lineEnd:cc,polygonStart:cc,polygonEnd:cc};function hh(){uh.point=uh.lineEnd=cc}function dh(t,e){rh=t*=Yl,ih=nc(e*=Yl),oh=Kl(e),uh.point=fh}function fh(t,e){t*=Yl;var n=nc(e*=Yl),r=Kl(e),i=Xl(t-rh),o=Kl(i),s=r*nc(i),a=oh*n-ih*r*o,l=ih*n+oh*r*o;nh.add(Zl(ic(s*s+a*a),l)),rh=t,ih=n,oh=r}function ph(t){return nh=new S,gc(t,uh),+nh}var gh=[null,null],mh={type:"LineString",coordinates:gh};function vh(t,e){return gh[0]=t,gh[1]=e,ph(mh)}var yh={Feature:function(t,e){return bh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(bh(n[r].geometry,e))return!0;return!1}},_h={Sphere:function(){return!0},Point:function(t,e){return xh(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(xh(n[r],e))return!0;return!1},LineString:function(t,e){return wh(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(wh(n[r],e))return!0;return!1},Polygon:function(t,e){return Sh(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Sh(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(bh(n[r],e))return!0;return!1}};function bh(t,e){return!(!t||!_h.hasOwnProperty(t.type))&&_h[t.type](t,e)}function xh(t,e){return 0===vh(t,e)}function wh(t,e){for(var n,r,i,o=0,s=t.length;o<s;o++){if(0===(r=vh(t[o],e)))return!0;if(o>0&&(i=vh(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Bl*i)return!0;n=r}return!1}function Sh(t,e){return!!Ku(t.map(Ah),Eh(e))}function Ah(t){return(t=t.map(Eh)).pop(),t}function Eh(t){return[t[0]*Yl,t[1]*Yl]}function Ch(t,e){return(t&&yh.hasOwnProperty(t.type)?yh[t.type]:bh)(t,e)}function kh(t,e,n){var r=dt(t,e-zl,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Th(t,e,n){var r=dt(t,e-zl,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Mh(){var t,e,n,r,i,o,s,a,l,c,u,h,d=10,f=d,p=90,g=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return dt(Ql(r/p)*p,n,p).map(u).concat(dt(Ql(a/g)*g,s,g).map(h)).concat(dt(Ql(e/d)*d,t,d).filter((function(t){return Xl(t%p)>zl})).map(l)).concat(dt(Ql(o/f)*f,i,f).filter((function(t){return Xl(t%g)>zl})).map(c))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(h(s).slice(1),u(n).reverse().slice(1),h(a).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],a=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),a>s&&(t=a,a=s,s=t),v.precision(m)):[[r,a],[n,s]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),v.precision(m)):[[e,o],[t,i]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],v):[p,g]},v.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],v):[d,f]},v.precision=function(d){return arguments.length?(m=+d,l=kh(o,i,90),c=Th(e,t,m),u=kh(a,s,90),h=Th(r,n,m),v):m},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ph(){return Mh()()}function Lh(t,e){var n=t[0]*Yl,r=t[1]*Yl,i=e[0]*Yl,o=e[1]*Yl,s=Kl(r),a=nc(r),l=Kl(o),c=nc(o),u=s*Kl(n),h=s*nc(n),d=l*Kl(i),f=l*nc(i),p=2*ac(ic(lc(o-r)+s*l*lc(i-n))),g=nc(p),m=p?function(t){var e=nc(t*=p)/g,n=nc(p-t)/g,r=n*u+e*d,i=n*h+e*f,o=n*a+e*c;return[Zl(i,r)*Gl,Zl(o,ic(r*r+i*i))*Gl]}:function(){return[n*Gl,r*Gl]};return m.distance=p,m}const Oh=t=>t;var Rh,Dh,Ih,Fh,Nh=new S,jh=new S,zh={point:cc,lineStart:cc,lineEnd:cc,polygonStart:function(){zh.lineStart=Bh,zh.lineEnd=Hh},polygonEnd:function(){zh.lineStart=zh.lineEnd=zh.point=cc,Nh.add(Xl(jh)),jh=new S},result:function(){var t=Nh/2;return Nh=new S,t}};function Bh(){zh.point=Uh}function Uh(t,e){zh.point=Vh,Rh=Ih=t,Dh=Fh=e}function Vh(t,e){jh.add(Fh*t-Ih*e),Ih=t,Fh=e}function Hh(){Vh(Rh,Dh)}const Wh=zh;var Gh=1/0,Yh=Gh,Xh=-Gh,qh=Xh,Zh={point:function(t,e){t<Gh&&(Gh=t);t>Xh&&(Xh=t);e<Yh&&(Yh=e);e>qh&&(qh=e)},lineStart:cc,lineEnd:cc,polygonStart:cc,polygonEnd:cc,result:function(){var t=[[Gh,Yh],[Xh,qh]];return Xh=qh=-(Yh=Gh=1/0),t}};const Kh=Zh;var Qh,Jh,$h,td,ed=0,nd=0,rd=0,id=0,od=0,sd=0,ad=0,ld=0,cd=0,ud={point:hd,lineStart:dd,lineEnd:gd,polygonStart:function(){ud.lineStart=md,ud.lineEnd=vd},polygonEnd:function(){ud.point=hd,ud.lineStart=dd,ud.lineEnd=gd},result:function(){var t=cd?[ad/cd,ld/cd]:sd?[id/sd,od/sd]:rd?[ed/rd,nd/rd]:[NaN,NaN];return ed=nd=rd=id=od=sd=ad=ld=cd=0,t}};function hd(t,e){ed+=t,nd+=e,++rd}function dd(){ud.point=fd}function fd(t,e){ud.point=pd,hd($h=t,td=e)}function pd(t,e){var n=t-$h,r=e-td,i=ic(n*n+r*r);id+=i*($h+t)/2,od+=i*(td+e)/2,sd+=i,hd($h=t,td=e)}function gd(){ud.point=hd}function md(){ud.point=yd}function vd(){_d(Qh,Jh)}function yd(t,e){ud.point=_d,hd(Qh=$h=t,Jh=td=e)}function _d(t,e){var n=t-$h,r=e-td,i=ic(n*n+r*r);id+=i*($h+t)/2,od+=i*(td+e)/2,sd+=i,ad+=(i=td*t-$h*e)*($h+t),ld+=i*(td+e),cd+=3*i,hd($h=t,td=e)}const bd=ud;function xd(t){this._context=t}xd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Wl)}},result:cc};var wd,Sd,Ad,Ed,Cd,kd=new S,Td={point:cc,lineStart:function(){Td.point=Md},lineEnd:function(){wd&&Pd(Sd,Ad),Td.point=cc},polygonStart:function(){wd=!0},polygonEnd:function(){wd=null},result:function(){var t=+kd;return kd=new S,t}};function Md(t,e){Td.point=Pd,Sd=Ed=t,Ad=Cd=e}function Pd(t,e){Ed-=t,Cd-=e,kd.add(ic(Ed*Ed+Cd*Cd)),Ed=t,Cd=e}const Ld=Td;function Od(){this._string=[]}function Rd(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Dd(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),gc(t,n(r))),r.result()}return o.area=function(t){return gc(t,n(Wh)),Wh.result()},o.measure=function(t){return gc(t,n(Ld)),Ld.result()},o.bounds=function(t){return gc(t,n(Kh)),Kh.result()},o.centroid=function(t){return gc(t,n(bd)),bd.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Oh):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Od):new xd(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}function Id(t){return{stream:Fd(t)}}function Fd(t){return function(e){var n=new Nd;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Nd(){}function jd(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),gc(n,t.stream(Kh)),e(Kh.result()),null!=r&&t.clipExtent(r),t}function zd(t,e,n){return jd(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])}),n)}function Bd(t,e,n){return zd(t,[[0,0],e],n)}function Ud(t,e,n){return jd(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];t.scale(150*i).translate([o,s])}),n)}function Vd(t,e,n){return jd(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,s])}),n)}Od.prototype={_radius:4.5,_circle:Rd(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Rd(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Nd.prototype={constructor:Nd,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Hd=Kl(30*Yl);function Wd(t,e){return+e?function(t,e){function n(r,i,o,s,a,l,c,u,h,d,f,p,g,m){var v=c-r,y=u-i,_=v*v+y*y;if(_>4*e&&g--){var b=s+d,x=a+f,w=l+p,S=ic(b*b+x*x+w*w),A=ac(w/=S),E=Xl(Xl(w)-1)<zl||Xl(o-h)<zl?(o+h)/2:Zl(x,b),C=t(E,A),k=C[0],T=C[1],M=k-r,P=T-i,L=y*M-v*P;(L*L/_>e||Xl((v*M+y*P)/_-.5)>.3||s*d+a*f+l*p<Hd)&&(n(r,i,o,s,a,l,k,T,E,b/=S,x/=S,w,g,m),m.point(k,T),n(k,T,E,b,x,w,c,u,h,d,f,p,g,m))}}return function(e){var r,i,o,s,a,l,c,u,h,d,f,p,g={point:m,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,g.point=y,e.lineStart()}function y(r,i){var o=Uc([r,i]),s=t(r,i);n(u,h,c,d,f,p,u=s[0],h=s[1],c=r,d=o[0],f=o[1],p=o[2],16,e),e.point(u,h)}function _(){g.point=m,e.lineEnd()}function b(){v(),g.point=x,g.lineEnd=w}function x(t,e){y(r=t,e),i=u,o=h,s=d,a=f,l=p,g.point=y}function w(){n(u,h,c,d,f,p,i,o,r,s,a,l,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return Fd({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Gd=Fd({point:function(t,e){this.stream.point(t*Yl,e*Yl)}});function Yd(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,s){return[e+t*(o*=r),n-t*(s*=i)]}return o.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},o}(t,e,n,r,i);var s=Kl(o),a=nc(o),l=s*t,c=a*t,u=s/t,h=a/t,d=(a*n-s*e)/t,f=(a*e+s*n)/t;function p(t,o){return[l*(t*=r)-c*(o*=i)+e,n-c*t-l*o]}return p.invert=function(t,e){return[r*(u*t-h*e+d),i*(f-h*t-u*e)]},p}function Xd(t){return qd((function(){return t}))()}function qd(t){var e,n,r,i,o,s,a,l,c,u,h=150,d=480,f=250,p=0,g=0,m=0,v=0,y=0,_=0,b=1,x=1,w=null,S=th,A=null,E=Oh,C=.5;function k(t){return l(t[0]*Yl,t[1]*Yl)}function T(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Gl,t[1]*Gl]}function M(){var t=Yd(h,0,0,b,x,_).apply(null,e(p,g)),r=Yd(h,d-t[0],f-t[1],b,x,_);return n=Fu(m,v,y),a=Du(e,r),l=Du(n,a),s=Wd(a,C),P()}function P(){return c=u=null,k}return k.stream=function(t){return c&&u===t?c:c=Gd(function(t){return Fd({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(S(s(E(u=t)))))},k.preclip=function(t){return arguments.length?(S=t,w=void 0,P()):S},k.postclip=function(t){return arguments.length?(E=t,A=r=i=o=null,P()):E},k.clipAngle=function(t){return arguments.length?(S=+t?eh(w=t*Yl):(w=null,th),P()):w*Gl},k.clipExtent=function(t){return arguments.length?(E=null==t?(A=r=i=o=null,Oh):lh(A=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),P()):null==A?null:[[A,r],[i,o]]},k.scale=function(t){return arguments.length?(h=+t,M()):h},k.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],M()):[d,f]},k.center=function(t){return arguments.length?(p=t[0]%360*Yl,g=t[1]%360*Yl,M()):[p*Gl,g*Gl]},k.rotate=function(t){return arguments.length?(m=t[0]%360*Yl,v=t[1]%360*Yl,y=t.length>2?t[2]%360*Yl:0,M()):[m*Gl,v*Gl,y*Gl]},k.angle=function(t){return arguments.length?(_=t%360*Yl,M()):_*Gl},k.reflectX=function(t){return arguments.length?(b=t?-1:1,M()):b<0},k.reflectY=function(t){return arguments.length?(x=t?-1:1,M()):x<0},k.precision=function(t){return arguments.length?(s=Wd(a,C=t*t),P()):ic(C)},k.fitExtent=function(t,e){return zd(k,t,e)},k.fitSize=function(t,e){return Bd(k,t,e)},k.fitWidth=function(t,e){return Ud(k,t,e)},k.fitHeight=function(t,e){return Vd(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&T,M()}}function Zd(t){var e=0,n=Ul/3,r=qd(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Yl,n=t[1]*Yl):[e*Gl,n*Gl]},i}function Kd(t,e){var n=nc(t),r=(n+nc(e))/2;if(Xl(r)<zl)return function(t){var e=Kl(t);function n(t,n){return[t*e,nc(n)/e]}return n.invert=function(t,n){return[t/e,ac(n*e)]},n}(t);var i=1+n*(2*r-n),o=ic(i)/r;function s(t,e){var n=ic(i-2*r*nc(e))/r;return[n*nc(t*=r),o-n*Kl(t)]}return s.invert=function(t,e){var n=o-e,s=Zl(t,Xl(n))*rc(n);return n*r<0&&(s-=Ul*rc(t)*rc(n)),[s/r,ac((i-(t*t+n*n)*r*r)/(2*r))]},s}function Qd(){return Zd(Kd).scale(155.424).center([0,33.6442])}function Jd(){return Qd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function $d(){var t,e,n,r,i,o,s=Jd(),a=Qd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Qd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],s=t[1];return o=null,n.point(e,s),o||(r.point(e,s),o)||(i.point(e,s),o)}function h(){return t=e=null,u}return u.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:s).invert(t)},u.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([s.stream(e=n),a.stream(n),l.stream(n)])},u.precision=function(t){return arguments.length?(s.precision(t),a.precision(t),l.precision(t),h()):s.precision()},u.scale=function(t){return arguments.length?(s.scale(t),a.scale(.35*t),l.scale(t),u.translate(s.translate())):s.scale()},u.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],u=+t[1];return n=s.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),r=a.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+zl,u+.12*e+zl],[o-.214*e-zl,u+.234*e-zl]]).stream(c),i=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+zl,u+.166*e+zl],[o-.115*e-zl,u+.234*e-zl]]).stream(c),h()},u.fitExtent=function(t,e){return zd(u,t,e)},u.fitSize=function(t,e){return Bd(u,t,e)},u.fitWidth=function(t,e){return Ud(u,t,e)},u.fitHeight=function(t,e){return Vd(u,t,e)},u.scale(1070)}function tf(t){return function(e,n){var r=Kl(e),i=Kl(n),o=t(r*i);return o===1/0?[2,0]:[o*i*nc(e),o*nc(n)]}}function ef(t){return function(e,n){var r=ic(e*e+n*n),i=t(r),o=nc(i),s=Kl(i);return[Zl(e*o,r*s),ac(r&&n*o/r)]}}var nf=tf((function(t){return ic(2/(1+t))}));function rf(){return Xd(nf).scale(124.75).clipAngle(179.999)}nf.invert=ef((function(t){return 2*ac(t/2)}));var of=tf((function(t){return(t=sc(t))&&t/nc(t)}));function sf(){return Xd(of).scale(79.4188).clipAngle(179.999)}function af(t,e){return[t,tc(oc((Vl+e)/2))]}function lf(){return cf(af).scale(961/Wl)}function cf(t){var e,n,r,i=Xd(t),o=i.center,s=i.scale,a=i.translate,l=i.clipExtent,c=null;function u(){var o=Ul*s(),a=i(Bu(i.rotate()).invert([0,0]));return l(null==c?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===af?[[Math.max(a[0]-o,c),e],[Math.min(a[0]+o,n),r]]:[[c,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,r)]])}return i.scale=function(t){return arguments.length?(s(t),u()):s()},i.translate=function(t){return arguments.length?(a(t),u()):a()},i.center=function(t){return arguments.length?(o(t),u()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[n,r]]},u()}function uf(t){return oc((Vl+t)/2)}function hf(t,e){var n=Kl(t),r=t===e?nc(t):tc(n/Kl(e))/tc(uf(e)/uf(t)),i=n*ec(uf(t),r)/r;if(!r)return af;function o(t,e){i>0?e<-Vl+zl&&(e=-Vl+zl):e>Vl-zl&&(e=Vl-zl);var n=i/ec(uf(e),r);return[n*nc(r*t),i-n*Kl(r*t)]}return o.invert=function(t,e){var n=i-e,o=rc(r)*ic(t*t+n*n),s=Zl(t,Xl(n))*rc(n);return n*r<0&&(s-=Ul*rc(t)*rc(n)),[s/r,2*ql(ec(i/o,1/r))-Vl]},o}function df(){return Zd(hf).scale(109.5).parallels([30,30])}function ff(t,e){return[t,e]}function pf(){return Xd(ff).scale(152.63)}function gf(t,e){var n=Kl(t),r=t===e?nc(t):(n-Kl(e))/(e-t),i=n/r+t;if(Xl(r)<zl)return ff;function o(t,e){var n=i-e,o=r*t;return[n*nc(o),i-n*Kl(o)]}return o.invert=function(t,e){var n=i-e,o=Zl(t,Xl(n))*rc(n);return n*r<0&&(o-=Ul*rc(t)*rc(n)),[o/r,i-rc(r)*ic(t*t+n*n)]},o}function mf(){return Zd(gf).scale(131.154).center([0,13.9389])}of.invert=ef((function(t){return t})),af.invert=function(t,e){return[t,2*ql(Jl(e))-Vl]},ff.invert=ff;var vf=1.340264,yf=-.081106,_f=893e-6,bf=.003796,xf=ic(3)/2;function wf(t,e){var n=ac(xf*nc(e)),r=n*n,i=r*r*r;return[t*Kl(n)/(xf*(vf+3*yf*r+i*(7*_f+9*bf*r))),n*(vf+yf*r+i*(_f+bf*r))]}function Sf(){return Xd(wf).scale(177.158)}function Af(t,e){var n=Kl(e),r=Kl(t)*n;return[n*nc(t)/r,nc(e)/r]}function Ef(){return Xd(Af).scale(144.049).clipAngle(60)}function Cf(){var t,e,n,r,i,o,s,a=1,l=0,c=0,u=1,h=1,d=0,f=null,p=1,g=1,m=Fd({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),v=Oh;function y(){return p=a*u,g=a*h,o=s=null,_}function _(n){var r=n[0]*p,i=n[1]*g;if(d){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+l,i+c]}return _.invert=function(n){var r=n[0]-l,i=n[1]-c;if(d){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},_.stream=function(t){return o&&s===t?o:o=m(v(s=t))},_.postclip=function(t){return arguments.length?(v=t,f=n=r=i=null,y()):v},_.clipExtent=function(t){return arguments.length?(v=null==t?(f=n=r=i=null,Oh):lh(f=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==f?null:[[f,n],[r,i]]},_.scale=function(t){return arguments.length?(a=+t,y()):a},_.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],y()):[l,c]},_.angle=function(n){return arguments.length?(e=nc(d=n%360*Yl),t=Kl(d),y()):d*Gl},_.reflectX=function(t){return arguments.length?(u=t?-1:1,y()):u<0},_.reflectY=function(t){return arguments.length?(h=t?-1:1,y()):h<0},_.fitExtent=function(t,e){return zd(_,t,e)},_.fitSize=function(t,e){return Bd(_,t,e)},_.fitWidth=function(t,e){return Ud(_,t,e)},_.fitHeight=function(t,e){return Vd(_,t,e)},_}function kf(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Tf(){return Xd(kf).scale(175.295)}function Mf(t,e){return[Kl(e)*nc(t),nc(e)]}function Pf(){return Xd(Mf).scale(249.5).clipAngle(90.000001)}function Lf(t,e){var n=Kl(e),r=1+Kl(t)*n;return[n*nc(t)/r,nc(e)/r]}function Of(){return Xd(Lf).scale(250).clipAngle(142)}function Rf(t,e){return[tc(oc((Vl+e)/2)),-t]}function Df(){var t=cf(Rf),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function If(t,e){return t.parent===e.parent?1:2}function Ff(t,e){return t+e.x}function Nf(t,e){return Math.max(t,e.y)}function jf(){var t=If,e=1,n=1,r=!1;function i(i){var o,s=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Ff,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Nf,0)}(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)}));var a=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=a.x-t(a,l)/2,u=l.x+t(l,a)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function zf(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Bf(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Vf)):void 0===e&&(e=Uf);for(var n,r,i,o,s,a=new Gf(t),l=[a];n=l.pop();)if((i=e(n.data))&&(s=(i=Array.from(i)).length))for(n.children=i,o=s-1;o>=0;--o)l.push(r=i[o]=new Gf(i[o])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(Wf)}function Uf(t){return t.children}function Vf(t){return Array.isArray(t)?t[1]:null}function Hf(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Wf(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Gf(t){this.data=t,this.depth=this.height=0,this.parent=null}function Yf(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&Zf(n,e)?++r:(n=Qf(o=Xf(o,e)),r=0);return n}function Xf(t,e){var n,r;if(Kf(e,t))return[e];for(n=0;n<t.length;++n)if(qf(e,t[n])&&Kf(Jf(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(qf(Jf(t[n],t[r]),e)&&qf(Jf(t[n],e),t[r])&&qf(Jf(t[r],e),t[n])&&Kf($f(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function qf(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Zf(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Kf(t,e){for(var n=0;n<e.length;++n)if(!Zf(t,e[n]))return!1;return!0}function Qf(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Jf(t[0],t[1]);case 3:return $f(t[0],t[1],t[2])}}function Jf(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,s=e.y,a=e.r,l=o-n,c=s-r,u=a-i,h=Math.sqrt(l*l+c*c);return{x:(n+o+l/h*u)/2,y:(r+s+c/h*u)/2,r:(h+i+a)/2}}function $f(t,e,n){var r=t.x,i=t.y,o=t.r,s=e.x,a=e.y,l=e.r,c=n.x,u=n.y,h=n.r,d=r-s,f=r-c,p=i-a,g=i-u,m=l-o,v=h-o,y=r*r+i*i-o*o,_=y-s*s-a*a+l*l,b=y-c*c-u*u+h*h,x=f*p-d*g,w=(p*b-g*_)/(2*x)-r,S=(g*m-p*v)/x,A=(f*_-d*b)/(2*x)-i,E=(d*v-f*m)/x,C=S*S+E*E-1,k=2*(o+w*S+A*E),T=w*w+A*A-o*o,M=-(C?(k+Math.sqrt(k*k-4*C*T))/(2*C):T/k);return{x:r+w+S*M,y:i+A+E*M,r:M}}function tp(t,e,n){var r,i,o,s,a=t.x-e.x,l=t.y-e.y,c=a*a+l*l;c?(i=e.r+n.r,i*=i,s=t.r+n.r,i>(s*=s)?(r=(c+s-i)/(2*c),o=Math.sqrt(Math.max(0,s/c-r*r)),n.x=t.x-r*a-o*l,n.y=t.y-r*l+o*a):(r=(c+i-s)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*a-o*l,n.y=e.y+r*l+o*a)):(n.x=e.x+n.r,n.y=e.y)}function ep(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function np(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function rp(t){this._=t,this.next=null,this.previous=null}function ip(t){if(!(i=(t=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,r,i,o,s,a,l,c,u,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;tp(n,e,r=t[2]),e=new rp(e),n=new rp(n),r=new rp(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(a=3;a<i;++a){tp(e._,n._,r=t[a]),r=new rp(r),l=n.next,c=e.previous,u=n._.r,h=e._.r;do{if(u<=h){if(ep(l._,r._)){n=l,e.next=n,n.previous=e,--a;continue t}u+=l._.r,l=l.next}else{if(ep(c._,r._)){(e=c).next=n,n.previous=e,--a;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=np(e);(r=r.next)!==n;)(s=np(r))<o&&(e=r,o=s);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Yf(e),a=0;a<i;++a)(e=t[a]).x-=r.x,e.y-=r.y;return r.r}function op(t){return ip(t),t}function sp(t){return null==t?null:ap(t)}function ap(t){if("function"!==typeof t)throw new Error;return t}function lp(){return 0}function cp(t){return function(){return t}}function up(t){return Math.sqrt(t.value)}function hp(){var t=null,e=1,n=1,r=lp;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(dp(t)).eachAfter(fp(r,.5)).eachBefore(pp(1)):i.eachBefore(dp(up)).eachAfter(fp(lp,1)).eachAfter(fp(r,i.r/Math.min(e,n))).eachBefore(pp(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=sp(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:cp(+t),i):r},i}function dp(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function fp(t,e){return function(n){if(r=n.children){var r,i,o,s=r.length,a=t(n)*e||0;if(a)for(i=0;i<s;++i)r[i].r+=a;if(o=ip(r),a)for(i=0;i<s;++i)r[i].r-=a;n.r=o+a}}}function pp(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function gp(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function mp(t,e,n,r,i){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(r-e)/t.value;++a<l;)(o=s[a]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function vp(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&mp(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,s=r.x1-n,a=r.y1-n;s<i&&(i=s=(i+s)/2),a<o&&(o=a=(o+a)/2),r.x0=i,r.y0=o,r.x1=s,r.y1=a}}(e,o)),r&&i.eachBefore(gp),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}wf.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,s=0;s<12&&(o=(i=(r-=n=(r*(vf+yf*i+o*(_f+bf*i))-e)/(vf+3*yf*i+o*(7*_f+9*bf*i)))*r)*i*i,!(Xl(n)<Bl));++s);return[xf*t*(vf+3*yf*i+o*(7*_f+9*bf*i))/Kl(r),ac(nc(r)/xf)]},Af.invert=ef(ql),kf.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Xl(n)>zl&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Mf.invert=ef(ac),Lf.invert=ef((function(t){return 2*ql(t)})),Rf.invert=function(t,e){return[-e,2*ql(Jl(t))-Vl]},Gf.prototype=Bf.prototype={constructor:Gf,count:function(){return this.eachAfter(zf)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,s=[o],a=[],l=-1;o=s.pop();)if(a.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)s.push(n[r]);for(;o=a.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],s=-1;i=o.pop();)if(t.call(e,i,++s,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Bf(this).eachBefore(Hf)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var yp={depth:-1},_p={};function bp(t){return t.id}function xp(t){return t.parentId}function wp(){var t=bp,e=xp;function n(n){var r,i,o,s,a,l,c,u=Array.from(n),h=u.length,d=new Map;for(i=0;i<h;++i)r=u[i],a=u[i]=new Gf(r),null!=(l=t(r,i,n))&&(l+="")&&(c=a.id=l,d.set(c,d.has(c)?_p:a)),null!=(l=e(r,i,n))&&(l+="")&&(a.parent=l);for(i=0;i<h;++i)if(l=(a=u[i]).parent){if(!(s=d.get(l)))throw new Error("missing: "+l);if(s===_p)throw new Error("ambiguous: "+l);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=yp,o.eachBefore((function(t){t.depth=t.parent.depth+1,--h})).eachBefore(Wf),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=ap(e),n):t},n.parentId=function(t){return arguments.length?(e=ap(t),n):e},n}function Sp(t,e){return t.parent===e.parent?1:2}function Ap(t){var e=t.children;return e?e[0]:t.t}function Ep(t){var e=t.children;return e?e[e.length-1]:t.t}function Cp(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function kp(t,e,n){return t.a.parent===e.parent?t.a:n}function Tp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Mp(){var t=Sp,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,o,s=new Tp(t,0),a=[s];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(n=e.children[i]=new Tp(r[i],i)),n.parent=e;return(s.parent=new Tp(null,0)).children=[s],s}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(s),r)i.eachBefore(a);else{var c=i,u=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)}));var d=c===u?1:t(c,u)/2,f=d-c.x,p=e/(u.x+d+f),g=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,s=e,a=n,l=o.parent.children[0],c=o.m,u=s.m,h=a.m,d=l.m;a=Ep(a),o=Ap(o),a&&o;)l=Ap(l),(s=Ep(s)).a=e,(i=a.z+h-o.z-c+t(a._,o._))>0&&(Cp(kp(a,e,r),e,i),c+=i,u+=i),h+=a.m,c+=o.m,d+=l.m,u+=s.m;a&&!Ep(s)&&(s.t=a,s.m+=h-u),o&&!Ap(l)&&(l.t=o,l.m+=c-d,r=e)}return r}(e,i,e.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Pp(t,e,n,r,i){for(var o,s=t.children,a=-1,l=s.length,c=t.value&&(i-n)/t.value;++a<l;)(o=s[a]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}Tp.prototype=Object.create(Gf.prototype);var Lp=(1+Math.sqrt(5))/2;function Op(t,e,n,r,i,o){for(var s,a,l,c,u,h,d,f,p,g,m,v=[],y=e.children,_=0,b=0,x=y.length,w=e.value;_<x;){l=i-n,c=o-r;do{u=y[b++].value}while(!u&&b<x);for(h=d=u,m=u*u*(g=Math.max(c/l,l/c)/(w*t)),p=Math.max(d/m,m/h);b<x;++b){if(u+=a=y[b].value,a<h&&(h=a),a>d&&(d=a),m=u*u*g,(f=Math.max(d/m,m/h))>p){u-=a;break}p=f}v.push(s={value:u,dice:l<c,children:y.slice(_,b)}),s.dice?mp(s,n,r,i,w?r+=c*u/w:o):Pp(s,n,r,w?n+=l*u/w:i,o),w-=u,_=b}return v}const Rp=function t(e){function n(t,n,r,i,o){Op(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Lp);function Dp(){var t=Rp,e=!1,n=1,r=1,i=[0],o=lp,s=lp,a=lp,l=lp,c=lp;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(gp),t}function h(e){var n=i[e.depth],r=e.x0+n,u=e.y0+n,h=e.x1-n,d=e.y1-n;h<r&&(r=h=(r+h)/2),d<u&&(u=d=(u+d)/2),e.x0=r,e.y0=u,e.x1=h,e.y1=d,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,u+=s(e)-n,(h-=a(e)-n)<r&&(r=h=(r+h)/2),(d-=l(e)-n)<u&&(u=d=(u+d)/2),t(e,r,u,h,d))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.tile=function(e){return arguments.length?(t=ap(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:cp(+t),u):o},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(s="function"===typeof t?t:cp(+t),u):s},u.paddingRight=function(t){return arguments.length?(a="function"===typeof t?t:cp(+t),u):a},u.paddingBottom=function(t){return arguments.length?(l="function"===typeof t?t:cp(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:cp(+t),u):c},u}function Ip(t,e,n,r,i){var o,s,a=t.children,l=a.length,c=new Array(l+1);for(c[0]=s=o=0;o<l;++o)c[o+1]=s+=a[o].value;!function t(e,n,r,i,o,s,l){if(e>=n-1){var u=a[e];return u.x0=i,u.y0=o,u.x1=s,void(u.y1=l)}var h=c[e],d=r/2+h,f=e+1,p=n-1;for(;f<p;){var g=f+p>>>1;c[g]<d?f=g+1:p=g}d-c[f-1]<c[f]-d&&e+1<f&&--f;var m=c[f]-h,v=r-m;if(s-i>l-o){var y=r?(i*v+s*m)/r:s;t(e,f,m,i,o,y,l),t(f,n,v,y,o,s,l)}else{var _=r?(o*v+l*m)/r:l;t(e,f,m,i,o,s,_),t(f,n,v,i,_,s,l)}}(0,l,t.value,e,n,r,i)}function Fp(t,e,n,r,i){(1&t.depth?Pp:mp)(t,e,n,r,i)}const Np=function t(e){function n(t,n,r,i,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,l,c,u,h=-1,d=s.length,f=t.value;++h<d;){for(l=(a=s[h]).children,c=a.value=0,u=l.length;c<u;++c)a.value+=l[c].value;a.dice?mp(a,n,r,i,f?r+=(o-r)*a.value/f:o):Pp(a,n,r,f?n+=(i-n)*a.value/f:i,o),f-=a.value}else t._squarify=s=Op(e,t,n,r,i,o),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Lp);var jp=n(986),zp=n(313);function Bp(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Up=n(412);function Vp(t,e){var n=(0,Up.wx)(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function Hp(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Wp(t){return((t=Math.exp(t))+1/t)/2}const Gp=function t(e,n,r){function i(t,i){var o,s,a=t[0],l=t[1],c=t[2],u=i[0],h=i[1],d=i[2],f=u-a,p=h-l,g=f*f+p*p;if(g<1e-12)s=Math.log(d/c)/e,o=function(t){return[a+t*f,l+t*p,c*Math.exp(e*t*s)]};else{var m=Math.sqrt(g),v=(d*d-c*c+r*g)/(2*c*n*m),y=(d*d-c*c-r*g)/(2*d*n*m),_=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-_)/e,o=function(t){var r=t*s,i=Wp(_),o=c/(n*m)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+_)-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[a+o*f,l+o*p,c*i/Wp(e*r+_)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function Yp(t){return function(e,n){var r=t((e=(0,Sn.Ym)(e)).h,(n=(0,Sn.Ym)(n)).h),i=(0,Up.ZP)(e.s,n.s),o=(0,Up.ZP)(e.l,n.l),s=(0,Up.ZP)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=s(t),e+""}}}const Xp=Yp(Up.wx);var qp=Yp(Up.ZP);function Zp(t,e){var n=(0,Up.ZP)((t=mo(t)).l,(e=mo(e)).l),r=(0,Up.ZP)(t.a,e.a),i=(0,Up.ZP)(t.b,e.b),o=(0,Up.ZP)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Kp(t){return function(e,n){var r=t((e=Ao(e)).h,(n=Ao(n)).h),i=(0,Up.ZP)(e.c,n.c),o=(0,Up.ZP)(e.l,n.l),s=(0,Up.ZP)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=s(t),e+""}}}const Qp=Kp(Up.wx);var Jp=Kp(Up.ZP);function $p(t){return function e(n){function r(e,r){var i=t((e=Fo(e)).h,(r=Fo(r)).h),o=(0,Up.ZP)(e.s,r.s),s=(0,Up.ZP)(e.l,r.l),a=(0,Up.ZP)(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,r.gamma=e,r}(1)}const tg=$p(Up.wx);var eg=$p(Up.ZP);function ng(t,e){void 0===e&&(e=t,t=Dn);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function rg(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function ig(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function og(t){for(var e,n,r=-1,i=t.length,o=0,s=0,a=t[i-1],l=0;++r<i;)e=a,a=t[r],l+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o/(l*=3),s/l]}function sg(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function ag(t,e){return t[0]-e[0]||t[1]-e[1]}function lg(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&sg(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function cg(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(ag),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=lg(r),s=lg(i),a=s[0]===o[0],l=s[s.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+a;e<s.length-l;++e)c.push(t[r[s[e]][2]]);return c}function ug(t,e){for(var n,r,i=t.length,o=t[i-1],s=e[0],a=e[1],l=o[0],c=o[1],u=!1,h=0;h<i;++h)n=(o=t[h])[0],(r=o[1])>a!==c>a&&s<(l-n)*(a-r)/(c-r)+n&&(u=!u),l=n,c=r;return u}function hg(t){for(var e,n,r=-1,i=t.length,o=t[i-1],s=o[0],a=o[1],l=0;++r<i;)e=s,n=a,e-=s=(o=t[r])[0],n-=a=o[1],l+=Math.hypot(e,n);return l}const dg=Math.random,fg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(dg),pg=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(dg),gg=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(dg),mg=function t(e){var n=gg.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(dg),vg=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(dg),yg=function t(e){var n=vg.source(e);function r(t){if(0===(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(dg),_g=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(dg),bg=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(dg),xg=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(dg),wg=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(dg),Sg=function t(e){var n=gg.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),s=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),a=1+o*t}while(a<=0);a*=a*a;var l=1-e()}while(l>=1-.0331*t*t*t*t&&Math.log(l)>=.5*t*t+i*(1-a+Math.log(a)));return i*a*s()*r}}return r.source=t,r}(dg),Ag=function t(e){var n=Sg.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(dg),Eg=function t(e){var n=wg.source(e),r=Ag.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,s=e;o*s>16&&o*(1-s)>16;){var a=Math.floor((o+1)*s),l=r(a,o-a+1)();l<=s?(i+=a,o-=a,s=(s-l)/(1-l)):(o=a-1,s/=l)}for(var c=s<.5,u=n(c?s:1-s),h=u(),d=0;h<=o;++d)h+=u();return i+(c?d:o-d)}}return i.source=t,i}(dg),Cg=function t(e){function n(t,n,r){var i;return 0===(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(dg),kg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(dg),Tg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(dg),Mg=function t(e){var n=Sg.source(e),r=Eg.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var s=Math.floor(.875*o),a=n(s)();if(a>o)return i+r(s-1,o/a)();i+=s,o-=a}for(var l=-Math.log1p(-e()),c=0;l<=o;++c)l-=Math.log1p(-e());return i+c}}return i.source=t,i}(dg),Pg=1664525,Lg=1013904223,Og=1/4294967296;function Rg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random(),e=0|(0<=t&&t<1?t/Og:Math.abs(t));return()=>(e=Pg*e+Lg|0,Og*(e>>>0))}function Dg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ig(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e)}return this}const Fg=Symbol("implicit");function Ng(){var t=new Map,e=[],n=[],r=Fg;function i(i){var o=i+"",s=t.get(o);if(!s){if(r!==Fg)return r;t.set(o,s=e.push(i))}return n[(s-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ng(e,n).unknown(r)},Dg.apply(i,arguments),i}function jg(){var t,e,n=Ng().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,a=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=s<o,d=h?s:o,f=h?o:s;t=(f-d)/Math.max(1,n-l+2*c),a&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*u,e=t*(1-l),a&&(d=Math.round(d),e=Math.round(e));var p=dt(n).map((function(e){return d+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,s]=t,o=+o,s=+s,h()):[o,s]},n.rangeRound=function(t){return[o,s]=t,o=+o,s=+s,a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return jg(r(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Dg.apply(h(),arguments)}function zg(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return zg(e())},t}function Bg(){return zg(jg.apply(null,arguments).paddingInner(1))}function Ug(t){return+t}var Vg=[0,1];function Hg(t){return t}function Wg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Gg(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Wg(i,r),o=n(s,o)):(r=Wg(r,i),o=n(o,s)),function(t){return o(r(t))}}function Yg(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Wg(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=h(t,e,1,r)-1;return o[n](i[n](e))}}function Xg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qg(){var t,e,n,r,i,o,s=Vg,a=Vg,l=Dn,c=Hg;function u(){var t=Math.min(s.length,a.length);return c!==Hg&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(s[0],s[t-1])),r=t>2?Yg:Gg,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),a,l)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(a,s.map(t),Pn.Z)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Ug),u()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),u()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=Hp,u()},h.clamp=function(t){return arguments.length?(c=!!t||Hg,u()):c!==Hg},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Zg(){return qg()(Hg,Hg)}function Kg(t,e,n,r){var i,o=X(t,e,n);switch((r=Al(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Nl(o,s))||(r.precision=i),Ll(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=jl(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Fl(o))||(r.precision=i-2*("%"===r.type))}return Pl(r)}function Qg(t){var e=t.domain;return t.ticks=function(t){var n=e();return G(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Kg(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),s=0,a=o.length-1,l=o[s],c=o[a],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=a,a=i);u-- >0;){if((i=Y(l,c,n))===r)return o[s]=l,o[a]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Jg(){var t=Zg();return t.copy=function(){return Xg(t,Jg())},Dg.apply(t,arguments),Qg(t)}function $g(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Ug),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return $g(t).unknown(e)},t=arguments.length?Array.from(t,Ug):[0,1],Qg(n)}function tm(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],s=t[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function em(t){return Math.log(t)}function nm(t){return Math.exp(t)}function rm(t){return-Math.log(-t)}function im(t){return-Math.exp(-t)}function om(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sm(t){return function(e){return-t(-e)}}function am(t){var e,n,r=t(em,nm),i=r.domain,o=10;function s(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?om:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=sm(e),n=sm(n),t(rm,im)):t(em,nm),r}return r.base=function(t){return arguments.length?(o=+t,s()):o},r.domain=function(t){return arguments.length?(i(t),s()):i()},r.ticks=function(t){var r,s=i(),a=s[0],l=s[s.length-1];(r=l<a)&&(d=a,a=l,l=d);var c,u,h,d=e(a),f=e(l),p=null==t?10:+t,g=[];if(!(o%1)&&f-d<p){if(d=Math.floor(d),f=Math.ceil(f),a>0){for(;d<=f;++d)for(u=1,c=n(d);u<o;++u)if(!((h=c*u)<a)){if(h>l)break;g.push(h)}}else for(;d<=f;++d)for(u=o-1,c=n(d);u>=1;--u)if(!((h=c*u)<a)){if(h>l)break;g.push(h)}2*g.length<p&&(g=G(a,l,p))}else g=G(d,f,Math.min(f-d,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=Pl(i)),t===1/0)return i;null==t&&(t=10);var s=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=s?i(t):""}},r.nice=function(){return i(tm(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function lm(){var t=am(qg()).domain([1,10]);return t.copy=function(){return Xg(t,lm()).base(t.base())},Dg.apply(t,arguments),t}function cm(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function um(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function hm(t){var e=1,n=t(cm(e),um(e));return n.constant=function(n){return arguments.length?t(cm(e=+n),um(e)):e},Qg(n)}function dm(){var t=hm(qg());return t.copy=function(){return Xg(t,dm()).constant(t.constant())},Dg.apply(t,arguments)}function fm(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function pm(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function gm(t){return t<0?-t*t:t*t}function mm(t){var e=t(Hg,Hg),n=1;function r(){return 1===n?t(Hg,Hg):.5===n?t(pm,gm):t(fm(n),fm(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Qg(e)}function vm(){var t=mm(qg());return t.copy=function(){return Xg(t,vm()).exponent(t.exponent())},Dg.apply(t,arguments),t}function ym(){return vm.apply(null,arguments).exponent(.5)}function _m(t){return Math.sign(t)*t*t}function bm(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xm(){var t,e=Zg(),n=[0,1],r=!1;function i(n){var i=bm(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(_m(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,Ug)).map(_m)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return xm(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Dg.apply(i,arguments),Qg(i)}function wm(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=nt(e,t/i);return s}function s(e){return null==e||isNaN(e=+e)?t:n[h(r,e)]}return s.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(i),o()},s.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return r.slice()},s.copy=function(){return wm().domain(e).range(n).unknown(t)},Dg.apply(s,arguments)}function Sm(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function s(e){return null!=e&&e<=e?o[h(i,e,0,r)]:t}function a(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return s}return s.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,a()):[e,n]},s.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,a()):o.slice()},s.invertExtent=function(t){var s=o.indexOf(t);return s<0?[NaN,NaN]:s<1?[e,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return Sm().domain([e,n]).range(o).unknown(t)},Dg.apply(Qg(s),arguments)}function Am(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[h(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Am().domain(e).range(n).unknown(t)},Dg.apply(i,arguments)}const Em=1e3,Cm=6e4,km=36e5,Tm=864e5,Mm=6048e5,Pm=2592e6,Lm=31536e6;var Om=new Date,Rm=new Date;function Dm(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var s,a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=function(n){return Dm((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Om.setTime(+e),Rm.setTime(+r),t(Om),t(Rm),Math.floor(n(Om,Rm))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var Im=Dm((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Im.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Dm((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Im:null};const Fm=Im;var Nm=Im.range,jm=Dm((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Em)}),(function(t,e){return(e-t)/Em}),(function(t){return t.getUTCSeconds()}));const zm=jm;var Bm=jm.range,Um=Dm((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Em)}),(function(t,e){t.setTime(+t+e*Cm)}),(function(t,e){return(e-t)/Cm}),(function(t){return t.getMinutes()}));const Vm=Um;var Hm=Um.range,Wm=Dm((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Em-t.getMinutes()*Cm)}),(function(t,e){t.setTime(+t+e*km)}),(function(t,e){return(e-t)/km}),(function(t){return t.getHours()}));const Gm=Wm;var Ym=Wm.range,Xm=Dm((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cm)/Tm),(t=>t.getDate()-1));const qm=Xm;var Zm=Xm.range;function Km(t){return Dm((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cm)/Mm}))}var Qm=Km(0),Jm=Km(1),$m=Km(2),tv=Km(3),ev=Km(4),nv=Km(5),rv=Km(6),iv=Qm.range,ov=Jm.range,sv=$m.range,av=tv.range,lv=ev.range,cv=nv.range,uv=rv.range,hv=Dm((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const dv=hv;var fv=hv.range,pv=Dm((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));pv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Dm((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const gv=pv;var mv=pv.range,vv=Dm((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Cm)}),(function(t,e){return(e-t)/Cm}),(function(t){return t.getUTCMinutes()}));const yv=vv;var _v=vv.range,bv=Dm((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*km)}),(function(t,e){return(e-t)/km}),(function(t){return t.getUTCHours()}));const xv=bv;var wv=bv.range,Sv=Dm((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Tm}),(function(t){return t.getUTCDate()-1}));const Av=Sv;var Ev=Sv.range;function Cv(t){return Dm((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Mm}))}var kv=Cv(0),Tv=Cv(1),Mv=Cv(2),Pv=Cv(3),Lv=Cv(4),Ov=Cv(5),Rv=Cv(6),Dv=kv.range,Iv=Tv.range,Fv=Mv.range,Nv=Pv.range,jv=Lv.range,zv=Ov.range,Bv=Rv.range,Uv=Dm((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const Vv=Uv;var Hv=Uv.range,Wv=Dm((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Wv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Dm((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const Gv=Wv;var Yv=Wv.range;function Xv(t,e,n,r,i,s){const a=[[zm,1,Em],[zm,5,5e3],[zm,15,15e3],[zm,30,3e4],[s,1,Cm],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,km],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Tm],[r,2,1728e5],[n,1,Mm],[e,1,Pm],[e,3,7776e6],[t,1,Lm]];function l(e,n,r){const i=Math.abs(n-e)/r,s=o((t=>{let[,,e]=t;return e})).right(a,i);if(s===a.length)return t.every(X(e/Lm,n/Lm,r));if(0===s)return Fm.every(Math.max(X(e,n,r),1));const[l,c]=a[i/a[s-1][2]<a[s][2]/i?s-1:s];return l.every(c)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"===typeof n.range?n:l(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},l]}const[qv,Zv]=Xv(Gv,Vv,kv,Av,xv,yv),[Kv,Qv]=Xv(gv,dv,Qm,qm,Gm,Vm);function Jv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $v(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ty(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ey(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=fy(i),u=py(i),h=fy(o),d=py(o),f=fy(s),p=py(s),g=fy(a),m=py(a),v=fy(l),y=py(l),_={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Iy,e:Iy,f:By,g:Qy,G:$y,H:Fy,I:Ny,j:jy,L:zy,m:Uy,M:Vy,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:w_,s:S_,S:Hy,u:Wy,U:Gy,V:Xy,w:qy,W:Zy,x:null,X:null,y:Ky,Y:Jy,Z:t_,"%":x_},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:e_,e:e_,f:s_,g:v_,G:__,H:n_,I:r_,j:i_,L:o_,m:a_,M:l_,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:w_,s:S_,S:c_,u:u_,U:h_,V:f_,w:p_,W:g_,x:null,X:null,y:m_,Y:y_,Z:b_,"%":x_},x={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:Ey,e:Ey,f:Ly,g:xy,G:by,H:ky,I:ky,j:Cy,L:Py,m:Ay,M:Ty,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Sy,Q:Ry,s:Dy,S:My,u:my,U:vy,V:yy,w:gy,W:_y,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:xy,Y:by,Z:wy,"%":Oy};function w(t,e){return function(n){var r,i,o,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(i=ay[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),l=a+1);return s.push(t.slice(l,a)),s.join("")}}function S(t,e){return function(n){var r,i,o=ty(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=$v(ty(o.y,0,1))).getUTCDay(),r=i>4||0===i?Tv.ceil(r):Tv(r),r=Av.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Jv(ty(o.y,0,1))).getDay(),r=i>4||0===i?Jm.ceil(r):Jm(r),r=qm.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?$v(ty(o.y,0,1)).getUTCDay():Jv(ty(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,$v(o)):Jv(o)}}function A(t,e,n,r){for(var i,o,s=0,a=e.length,l=n.length;s<a;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=x[i in ay?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(e,_),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}var ny,ry,iy,oy,sy,ay={"-":"",_:" ",0:"0"},ly=/^\s*\d+/,cy=/^%/,uy=/[\\^$*+?|[\]().{}]/g;function hy(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function dy(t){return t.replace(uy,"\\$&")}function fy(t){return new RegExp("^(?:"+t.map(dy).join("|")+")","i")}function py(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function gy(t,e,n){var r=ly.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function my(t,e,n){var r=ly.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vy(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yy(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _y(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function by(t,e,n){var r=ly.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function xy(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wy(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Sy(t,e,n){var r=ly.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Ay(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ey(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Cy(t,e,n){var r=ly.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ky(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ty(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function My(t,e,n){var r=ly.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Py(t,e,n){var r=ly.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ly(t,e,n){var r=ly.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Oy(t,e,n){var r=cy.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ry(t,e,n){var r=ly.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dy(t,e,n){var r=ly.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Iy(t,e){return hy(t.getDate(),e,2)}function Fy(t,e){return hy(t.getHours(),e,2)}function Ny(t,e){return hy(t.getHours()%12||12,e,2)}function jy(t,e){return hy(1+qm.count(gv(t),t),e,3)}function zy(t,e){return hy(t.getMilliseconds(),e,3)}function By(t,e){return zy(t,e)+"000"}function Uy(t,e){return hy(t.getMonth()+1,e,2)}function Vy(t,e){return hy(t.getMinutes(),e,2)}function Hy(t,e){return hy(t.getSeconds(),e,2)}function Wy(t){var e=t.getDay();return 0===e?7:e}function Gy(t,e){return hy(Qm.count(gv(t)-1,t),e,2)}function Yy(t){var e=t.getDay();return e>=4||0===e?ev(t):ev.ceil(t)}function Xy(t,e){return t=Yy(t),hy(ev.count(gv(t),t)+(4===gv(t).getDay()),e,2)}function qy(t){return t.getDay()}function Zy(t,e){return hy(Jm.count(gv(t)-1,t),e,2)}function Ky(t,e){return hy(t.getFullYear()%100,e,2)}function Qy(t,e){return hy((t=Yy(t)).getFullYear()%100,e,2)}function Jy(t,e){return hy(t.getFullYear()%1e4,e,4)}function $y(t,e){var n=t.getDay();return hy((t=n>=4||0===n?ev(t):ev.ceil(t)).getFullYear()%1e4,e,4)}function t_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+hy(e/60|0,"0",2)+hy(e%60,"0",2)}function e_(t,e){return hy(t.getUTCDate(),e,2)}function n_(t,e){return hy(t.getUTCHours(),e,2)}function r_(t,e){return hy(t.getUTCHours()%12||12,e,2)}function i_(t,e){return hy(1+Av.count(Gv(t),t),e,3)}function o_(t,e){return hy(t.getUTCMilliseconds(),e,3)}function s_(t,e){return o_(t,e)+"000"}function a_(t,e){return hy(t.getUTCMonth()+1,e,2)}function l_(t,e){return hy(t.getUTCMinutes(),e,2)}function c_(t,e){return hy(t.getUTCSeconds(),e,2)}function u_(t){var e=t.getUTCDay();return 0===e?7:e}function h_(t,e){return hy(kv.count(Gv(t)-1,t),e,2)}function d_(t){var e=t.getUTCDay();return e>=4||0===e?Lv(t):Lv.ceil(t)}function f_(t,e){return t=d_(t),hy(Lv.count(Gv(t),t)+(4===Gv(t).getUTCDay()),e,2)}function p_(t){return t.getUTCDay()}function g_(t,e){return hy(Tv.count(Gv(t)-1,t),e,2)}function m_(t,e){return hy(t.getUTCFullYear()%100,e,2)}function v_(t,e){return hy((t=d_(t)).getUTCFullYear()%100,e,2)}function y_(t,e){return hy(t.getUTCFullYear()%1e4,e,4)}function __(t,e){var n=t.getUTCDay();return hy((t=n>=4||0===n?Lv(t):Lv.ceil(t)).getUTCFullYear()%1e4,e,4)}function b_(){return"+0000"}function x_(){return"%"}function w_(t){return+t}function S_(t){return Math.floor(+t/1e3)}function A_(t){return ny=ey(t),ry=ny.format,iy=ny.parse,oy=ny.utcFormat,sy=ny.utcParse,ny}function E_(t){return new Date(t)}function C_(t){return t instanceof Date?+t:+new Date(+t)}function k_(t,e,n,r,i,o,s,a,l,c){var u=Zg(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),_=c("%B"),b=c("%Y");function x(t){return(l(t)<t?f:a(t)<t?p:s(t)<t?g:o(t)<t?m:r(t)<t?i(t)<t?v:y:n(t)<t?_:b)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,C_)):d().map(E_)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?x:c(e)},u.nice=function(t){var n=d();return t&&"function"===typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(tm(n,t)):u},u.copy=function(){return Xg(u,k_(t,e,n,r,i,o,s,a,l,c))},u}function T_(){return Dg.apply(k_(Kv,Qv,gv,dv,Qm,qm,Gm,Vm,zm,ry).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function M_(){return Dg.apply(k_(qv,Zv,Gv,Vv,kv,Av,xv,yv,zm,oy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function P_(){var t,e,n,r,i,o=0,s=1,a=Hg,l=!1;function c(e){return null==e||isNaN(e=+e)?i:a(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,a=t(n,r),c):[a(0),a(1)]}}return c.domain=function(i){return arguments.length?([o,s]=i,t=r(o=+o),e=r(s=+s),n=t===e?0:1/(e-t),c):[o,s]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(a=t,c):a},c.range=u(Dn),c.rangeRound=u(Hp),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(s),n=t===e?0:1/(e-t),c}}function L_(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function O_(){var t=Qg(P_()(Hg));return t.copy=function(){return L_(t,O_())},Ig.apply(t,arguments)}function R_(){var t=am(P_()).domain([1,10]);return t.copy=function(){return L_(t,R_()).base(t.base())},Ig.apply(t,arguments)}function D_(){var t=hm(P_());return t.copy=function(){return L_(t,D_()).constant(t.constant())},Ig.apply(t,arguments)}function I_(){var t=mm(P_());return t.copy=function(){return L_(t,I_()).exponent(t.exponent())},Ig.apply(t,arguments)}function F_(){return I_.apply(null,arguments).exponent(.5)}function N_(){var t=[],e=Hg;function n(n){if(null!=n&&!isNaN(n=+n))return e((h(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>et(t,r/e)))},n.copy=function(){return N_(e).domain(t)},Ig.apply(n,arguments)}function j_(){var t,e,n,r,i,o,s,a=0,l=.5,c=1,u=1,h=Hg,d=!1;function f(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),h(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=ng(t,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(s){return arguments.length?([a,l,c]=s,t=o(a=+a),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,f):[a,l,c]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(h=t,f):h},f.range=p(Dn),f.rangeRound=p(Hp),f.unknown=function(t){return arguments.length?(s=t,f):s},function(s){return o=s,t=s(a),e=s(l),n=s(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,f}}function z_(){var t=Qg(j_()(Hg));return t.copy=function(){return L_(t,z_())},Ig.apply(t,arguments)}function B_(){var t=am(j_()).domain([.1,1,10]);return t.copy=function(){return L_(t,B_()).base(t.base())},Ig.apply(t,arguments)}function U_(){var t=hm(j_());return t.copy=function(){return L_(t,U_()).constant(t.constant())},Ig.apply(t,arguments)}function V_(){var t=mm(j_());return t.copy=function(){return L_(t,V_()).exponent(t.exponent())},Ig.apply(t,arguments)}function H_(){return V_.apply(null,arguments).exponent(.5)}function W_(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}A_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const G_=W_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Y_=W_("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),X_=W_("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),q_=W_("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Z_=W_("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),K_=W_("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Q_=W_("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),J_=W_("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),$_=W_("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),tb=W_("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),eb=t=>(0,An.hD)(t[t.length-1]);var nb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(W_);const rb=eb(nb);var ib=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(W_);const ob=eb(ib);var sb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(W_);const ab=eb(sb);var lb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(W_);const cb=eb(lb);var ub=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(W_);const hb=eb(ub);var db=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(W_);const fb=eb(db);var pb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(W_);const gb=eb(pb);var mb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(W_);const vb=eb(mb);var yb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(W_);const _b=eb(yb);var bb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(W_);const xb=eb(bb);var wb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(W_);const Sb=eb(wb);var Ab=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(W_);const Eb=eb(Ab);var Cb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(W_);const kb=eb(Cb);var Tb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(W_);const Mb=eb(Tb);var Pb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(W_);const Lb=eb(Pb);var Ob=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(W_);const Rb=eb(Ob);var Db=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(W_);const Ib=eb(Db);var Fb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(W_);const Nb=eb(Fb);var jb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(W_);const zb=eb(jb);var Bb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(W_);const Ub=eb(Bb);var Vb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(W_);const Hb=eb(Vb);var Wb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(W_);const Gb=eb(Wb);var Yb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(W_);const Xb=eb(Yb);var qb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(W_);const Zb=eb(qb);var Kb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(W_);const Qb=eb(Kb);var Jb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(W_);const $b=eb(Jb);var tx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(W_);const ex=eb(tx);function nx(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const rx=eg(Fo(300,.5,0),Fo(-240,.5,1));var ix=eg(Fo(-100,.75,.35),Fo(80,1.5,.8)),ox=eg(Fo(260,.75,.35),Fo(80,1.5,.8)),sx=Fo();function ax(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return sx.h=360*t-100,sx.s=1.5-1.5*e,sx.l=.8-.9*e,sx+""}var lx=(0,Sn.B8)(),cx=Math.PI/3,ux=2*Math.PI/3;function hx(t){var e;return t=(.5-t)*Math.PI,lx.r=255*(e=Math.sin(t))*e,lx.g=255*(e=Math.sin(t+cx))*e,lx.b=255*(e=Math.sin(t+ux))*e,lx+""}function dx(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function fx(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const px=fx(W_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var gx=fx(W_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),mx=fx(W_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),vx=fx(W_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function yx(t){return yn(nn(t).call(document.documentElement))}var _x=0;function bx(){return new xx}function xx(){this._="@"+(++_x).toString(36)}function wx(t,e){return t.target&&(t=In(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Fn(t,e)))}function Sx(t){return"string"===typeof t?new gn([document.querySelectorAll(t)],[document.documentElement]):new gn([null==t?[]:oe(t)],pn)}function Ax(t){return function(){return t}}xx.prototype=bx.prototype={constructor:xx,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Ex=Math.abs,Cx=Math.atan2,kx=Math.cos,Tx=Math.max,Mx=Math.min,Px=Math.sin,Lx=Math.sqrt,Ox=1e-12,Rx=Math.PI,Dx=Rx/2,Ix=2*Rx;function Fx(t){return t>1?0:t<-1?Rx:Math.acos(t)}function Nx(t){return t>=1?Dx:t<=-1?-Dx:Math.asin(t)}function jx(t){return t.innerRadius}function zx(t){return t.outerRadius}function Bx(t){return t.startAngle}function Ux(t){return t.endAngle}function Vx(t){return t&&t.padAngle}function Hx(t,e,n,r,i,o,s,a){var l=n-t,c=r-e,u=s-i,h=a-o,d=h*l-u*c;if(!(d*d<Ox))return[t+(d=(u*(e-o)-h*(t-i))/d)*l,e+d*c]}function Wx(t,e,n,r,i,o,s){var a=t-n,l=e-r,c=(s?o:-o)/Lx(a*a+l*l),u=c*l,h=-c*a,d=t+u,f=e+h,p=n+u,g=r+h,m=(d+p)/2,v=(f+g)/2,y=p-d,_=g-f,b=y*y+_*_,x=i-o,w=d*g-p*f,S=(_<0?-1:1)*Lx(Tx(0,x*x*b-w*w)),A=(w*_-y*S)/b,E=(-w*y-_*S)/b,C=(w*_+y*S)/b,k=(-w*y+_*S)/b,T=A-m,M=E-v,P=C-m,L=k-v;return T*T+M*M>P*P+L*L&&(A=C,E=k),{cx:A,cy:E,x01:-u,y01:-h,x11:A*(i/x-1),y11:E*(i/x-1)}}function Gx(){var t=jx,e=zx,n=Ax(0),r=null,i=Bx,o=Ux,s=Vx,a=null;function l(){var l,c,u=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-Dx,f=o.apply(this,arguments)-Dx,p=Ex(f-d),g=f>d;if(a||(a=l=Yi()),h<u&&(c=h,h=u,u=c),h>Ox)if(p>Ix-Ox)a.moveTo(h*kx(d),h*Px(d)),a.arc(0,0,h,d,f,!g),u>Ox&&(a.moveTo(u*kx(f),u*Px(f)),a.arc(0,0,u,f,d,g));else{var m,v,y=d,_=f,b=d,x=f,w=p,S=p,A=s.apply(this,arguments)/2,E=A>Ox&&(r?+r.apply(this,arguments):Lx(u*u+h*h)),C=Mx(Ex(h-u)/2,+n.apply(this,arguments)),k=C,T=C;if(E>Ox){var M=Nx(E/u*Px(A)),P=Nx(E/h*Px(A));(w-=2*M)>Ox?(b+=M*=g?1:-1,x-=M):(w=0,b=x=(d+f)/2),(S-=2*P)>Ox?(y+=P*=g?1:-1,_-=P):(S=0,y=_=(d+f)/2)}var L=h*kx(y),O=h*Px(y),R=u*kx(x),D=u*Px(x);if(C>Ox){var I,F=h*kx(_),N=h*Px(_),j=u*kx(b),z=u*Px(b);if(p<Rx&&(I=Hx(L,O,j,z,F,N,R,D))){var B=L-I[0],U=O-I[1],V=F-I[0],H=N-I[1],W=1/Px(Fx((B*V+U*H)/(Lx(B*B+U*U)*Lx(V*V+H*H)))/2),G=Lx(I[0]*I[0]+I[1]*I[1]);k=Mx(C,(u-G)/(W-1)),T=Mx(C,(h-G)/(W+1))}}S>Ox?T>Ox?(m=Wx(j,z,L,O,h,T,g),v=Wx(F,N,R,D,h,T,g),a.moveTo(m.cx+m.x01,m.cy+m.y01),T<C?a.arc(m.cx,m.cy,T,Cx(m.y01,m.x01),Cx(v.y01,v.x01),!g):(a.arc(m.cx,m.cy,T,Cx(m.y01,m.x01),Cx(m.y11,m.x11),!g),a.arc(0,0,h,Cx(m.cy+m.y11,m.cx+m.x11),Cx(v.cy+v.y11,v.cx+v.x11),!g),a.arc(v.cx,v.cy,T,Cx(v.y11,v.x11),Cx(v.y01,v.x01),!g))):(a.moveTo(L,O),a.arc(0,0,h,y,_,!g)):a.moveTo(L,O),u>Ox&&w>Ox?k>Ox?(m=Wx(R,D,F,N,u,-k,g),v=Wx(L,O,j,z,u,-k,g),a.lineTo(m.cx+m.x01,m.cy+m.y01),k<C?a.arc(m.cx,m.cy,k,Cx(m.y01,m.x01),Cx(v.y01,v.x01),!g):(a.arc(m.cx,m.cy,k,Cx(m.y01,m.x01),Cx(m.y11,m.x11),!g),a.arc(0,0,u,Cx(m.cy+m.y11,m.cx+m.x11),Cx(v.cy+v.y11,v.cx+v.x11),g),a.arc(v.cx,v.cy,k,Cx(v.y11,v.x11),Cx(v.y01,v.x01),!g))):a.arc(0,0,u,x,b,g):a.lineTo(R,D)}else a.moveTo(0,0);if(a.closePath(),l)return a=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Rx/2;return[kx(r)*n,Px(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Ax(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Ax(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:Ax(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Ax(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:Ax(+t),l):i},l.endAngle=function(t){return arguments.length?(o="function"===typeof t?t:Ax(+t),l):o},l.padAngle=function(t){return arguments.length?(s="function"===typeof t?t:Ax(+t),l):s},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l}var Yx=Array.prototype.slice;function Xx(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function qx(t){this._context=t}function Zx(t){return new qx(t)}function Kx(t){return t[0]}function Qx(t){return t[1]}function Jx(t,e){var n=Ax(!0),r=null,i=Zx,o=null;function s(s){var a,l,c,u=(s=Xx(s)).length,h=!1;for(null==r&&(o=i(c=Yi())),a=0;a<=u;++a)!(a<u&&n(l=s[a],a,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,a,s),+e(l,a,s));if(c)return o=null,c+""||null}return t="function"===typeof t?t:void 0===t?Kx:Ax(t),e="function"===typeof e?e:void 0===e?Qx:Ax(e),s.x=function(e){return arguments.length?(t="function"===typeof e?e:Ax(+e),s):t},s.y=function(t){return arguments.length?(e="function"===typeof t?t:Ax(+t),s):e},s.defined=function(t){return arguments.length?(n="function"===typeof t?t:Ax(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function $x(t,e,n){var r=null,i=Ax(!0),o=null,s=Zx,a=null;function l(l){var c,u,h,d,f,p=(l=Xx(l)).length,g=!1,m=new Array(p),v=new Array(p);for(null==o&&(a=s(f=Yi())),c=0;c<=p;++c){if(!(c<p&&i(d=l[c],c,l))===g)if(g=!g)u=c,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=c-1;h>=u;--h)a.point(m[h],v[h]);a.lineEnd(),a.areaEnd()}g&&(m[c]=+t(d,c,l),v[c]=+e(d,c,l),a.point(r?+r(d,c,l):m[c],n?+n(d,c,l):v[c]))}if(f)return a=null,f+""||null}function c(){return Jx().defined(i).curve(s).context(o)}return t="function"===typeof t?t:void 0===t?Kx:Ax(+t),e="function"===typeof e?e:Ax(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?Qx:Ax(+n),l.x=function(e){return arguments.length?(t="function"===typeof e?e:Ax(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"===typeof e?e:Ax(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:Ax(+t),l):r},l.y=function(t){return arguments.length?(e="function"===typeof t?t:Ax(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"===typeof t?t:Ax(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:Ax(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"===typeof t?t:Ax(!!t),l):i},l.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),l):s},l.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),l):o},l}function tw(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ew(t){return t}function nw(){var t=ew,e=tw,n=null,r=Ax(0),i=Ax(Ix),o=Ax(0);function s(s){var a,l,c,u,h,d=(s=Xx(s)).length,f=0,p=new Array(d),g=new Array(d),m=+r.apply(this,arguments),v=Math.min(Ix,Math.max(-Ix,i.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),_=y*(v<0?-1:1);for(a=0;a<d;++a)(h=g[p[a]=a]=+t(s[a],a,s))>0&&(f+=h);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(s[t],s[e])})),a=0,c=f?(v-d*_)/f:0;a<d;++a,m=u)l=p[a],u=m+((h=g[l])>0?h*c:0)+_,g[l]={data:s[l],index:a,value:h,startAngle:m,endAngle:u,padAngle:y};return g}return s.value=function(e){return arguments.length?(t="function"===typeof e?e:Ax(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(r="function"===typeof t?t:Ax(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"===typeof t?t:Ax(+t),s):i},s.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:Ax(+t),s):o},s}qx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var rw=ow(Zx);function iw(t){this._curve=t}function ow(t){function e(e){return new iw(t(e))}return e._curve=t,e}function sw(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(ow(t)):e()._curve},t}function aw(){return sw(Jx().curve(rw))}function lw(){var t=$x().curve(rw),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return sw(n())},delete t.lineX0,t.lineEndAngle=function(){return sw(r())},delete t.lineX1,t.lineInnerRadius=function(){return sw(i())},delete t.lineY0,t.lineOuterRadius=function(){return sw(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(ow(t)):e()._curve},t}function cw(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function uw(t){return t.source}function hw(t){return t.target}function dw(t){var e=uw,n=hw,r=Kx,i=Qx,o=null;function s(){var s,a=Yx.call(arguments),l=e.apply(this,a),c=n.apply(this,a);if(o||(o=s=Yi()),t(o,+r.apply(this,(a[0]=l,a)),+i.apply(this,a),+r.apply(this,(a[0]=c,a)),+i.apply(this,a)),s)return o=null,s+""||null}return s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(n=t,s):n},s.x=function(t){return arguments.length?(r="function"===typeof t?t:Ax(+t),s):r},s.y=function(t){return arguments.length?(i="function"===typeof t?t:Ax(+t),s):i},s.context=function(t){return arguments.length?(o=null==t?null:t,s):o},s}function fw(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function pw(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function gw(t,e,n,r,i){var o=cw(e,n),s=cw(e,n=(n+i)/2),a=cw(r,n),l=cw(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],l[0],l[1])}function mw(){return dw(fw)}function vw(){return dw(pw)}function yw(){var t=dw(gw);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}iw.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};const _w={draw:function(t,e){var n=Math.sqrt(e/Rx);t.moveTo(n,0),t.arc(0,0,n,0,Ix)}},bw={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var xw=Math.sqrt(1/3),ww=2*xw;const Sw={draw:function(t,e){var n=Math.sqrt(e/ww),r=n*xw;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var Aw=Math.sin(Rx/10)/Math.sin(7*Rx/10),Ew=Math.sin(Ix/10)*Aw,Cw=-Math.cos(Ix/10)*Aw;const kw={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Ew*n,i=Cw*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var s=Ix*o/5,a=Math.cos(s),l=Math.sin(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},Tw={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var Mw=Math.sqrt(3);const Pw={draw:function(t,e){var n=-Math.sqrt(e/(3*Mw));t.moveTo(0,2*n),t.lineTo(-Mw*n,-n),t.lineTo(Mw*n,-n),t.closePath()}};var Lw=-.5,Ow=Math.sqrt(3)/2,Rw=1/Math.sqrt(12),Dw=3*(Rw/2+1);const Iw={draw:function(t,e){var n=Math.sqrt(e/Dw),r=n/2,i=n*Rw,o=r,s=n*Rw+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(Lw*r-Ow*i,Ow*r+Lw*i),t.lineTo(Lw*o-Ow*s,Ow*o+Lw*s),t.lineTo(Lw*a-Ow*l,Ow*a+Lw*l),t.lineTo(Lw*r+Ow*i,Lw*i-Ow*r),t.lineTo(Lw*o+Ow*s,Lw*s-Ow*o),t.lineTo(Lw*a+Ow*l,Lw*l-Ow*a),t.closePath()}};var Fw=[_w,bw,Sw,Tw,kw,Pw,Iw];function Nw(t,e){var n=null;function r(){var r;if(n||(n=r=Yi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"===typeof t?t:Ax(t||_w),e="function"===typeof e?e:Ax(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"===typeof e?e:Ax(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:Ax(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function jw(){}function zw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Bw(t){this._context=t}function Uw(t){return new Bw(t)}function Vw(t){this._context=t}function Hw(t){return new Vw(t)}function Ww(t){this._context=t}function Gw(t){return new Ww(t)}Bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Vw.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:zw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:zw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class Yw{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function Xw(t){return new Yw(t,!0)}function qw(t){return new Yw(t,!1)}function Zw(t,e){this._basis=new Bw(t),this._beta=e}Zw.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],s=t[n]-i,a=e[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*s),this._beta*e[l]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Kw=function t(e){function n(t){return 1===e?new Bw(t):new Zw(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Qw(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Jw(t,e){this._context=t,this._k=(1-e)/6}Jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qw(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Qw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const $w=function t(e){function n(t){return new Jw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function tS(t,e){this._context=t,this._k=(1-e)/6}tS.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Qw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const eS=function t(e){function n(t){return new tS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function nS(t,e){this._context=t,this._k=(1-e)/6}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const rS=function t(e){function n(t){return new nS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function iS(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>Ox){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Ox){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function oS(t,e){this._context=t,this._alpha=e}oS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:iS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const sS=function t(e){function n(t){return e?new oS(t,e):new Jw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function aS(t,e){this._context=t,this._alpha=e}aS.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:iS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const lS=function t(e){function n(t){return e?new aS(t,e):new tS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function cS(t,e){this._context=t,this._alpha=e}cS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const uS=function t(e){function n(t){return e?new cS(t,e):new nS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function hS(t){this._context=t}function dS(t){return new hS(t)}function fS(t){return t<0?-1:1}function pS(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(fS(o)+fS(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function gS(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function mS(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function vS(t){this._context=t}function yS(t){this._context=new _S(t)}function _S(t){this._context=t}function bS(t){return new vS(t)}function xS(t){return new yS(t)}function wS(t){this._context=t}function SS(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function AS(t){return new wS(t)}function ES(t,e){this._context=t,this._t=e}function CS(t){return new ES(t,.5)}function kS(t){return new ES(t,0)}function TS(t){return new ES(t,1)}function MS(t,e){if((i=t.length)>1)for(var n,r,i,o=1,s=t[e[0]],a=s.length;o<i;++o)for(r=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function PS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function LS(t,e){return t[e]}function OS(t){const e=[];return e.key=t,e}function RS(){var t=Ax([]),e=PS,n=MS,r=LS;function i(i){var o,s,a=Array.from(t.apply(this,arguments),OS),l=a.length,c=-1;for(const t of i)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(t,a[o].key,c,i)]).data=t;for(o=0,s=Xx(e(a));o<l;++o)a[s[o]].index=o;return n(a,s),a}return i.keys=function(e){return arguments.length?(t="function"===typeof e?e:Ax(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"===typeof t?t:Ax(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?PS:"function"===typeof t?t:Ax(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?MS:t,i):n},i}function DS(t,e){if((r=t.length)>0){for(var n,r,i,o=0,s=t[0].length;o<s;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}MS(t,e)}}function IS(t,e){if((a=t.length)>0)for(var n,r,i,o,s,a,l=0,c=t[e[0]].length;l<c;++l)for(o=s=0,n=0;n<a;++n)(i=(r=t[e[n]][l])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=s,r[0]=s+=i):(r[0]=0,r[1]=i)}function FS(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var s=0,a=0;s<n;++s)a+=t[s][r][1]||0;i[r][1]+=i[r][0]=-a/2}MS(t,e)}}function NS(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,s=1;s<r;++s){for(var a=0,l=0,c=0;a<i;++a){for(var u=t[e[a]],h=u[s][1]||0,d=(h-(u[s-1][1]||0))/2,f=0;f<a;++f){var p=t[e[f]];d+=(p[s][1]||0)-(p[s-1][1]||0)}l+=h,c+=d*h}n[s-1][1]+=n[s-1][0]=o,l&&(o-=c/l)}n[s-1][1]+=n[s-1][0]=o,MS(t,e)}}function jS(t){var e=t.map(zS);return PS(t).sort((function(t,n){return e[t]-e[n]}))}function zS(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function BS(t){var e=t.map(US);return PS(t).sort((function(t,n){return e[t]-e[n]}))}function US(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function VS(t){return BS(t).reverse()}function HS(t){var e,n,r=t.length,i=t.map(US),o=jS(t),s=0,a=0,l=[],c=[];for(e=0;e<r;++e)n=o[e],s<a?(s+=i[n],l.push(n)):(a+=i[n],c.push(n));return c.reverse().concat(l)}function WS(t){return PS(t).reverse()}hS.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},vS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mS(this,this._t0,gS(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,mS(this,gS(this,n=pS(this,t,e)),n);break;default:mS(this,this._t0,n=pS(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(yS.prototype=Object.create(vS.prototype)).point=function(t,e){vS.prototype.point.call(this,e,t)},_S.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},wS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=SS(t),i=SS(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},ES.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var GS="%Y-%m-%dT%H:%M:%S.%LZ";var YS=Date.prototype.toISOString?function(t){return t.toISOString()}:oy(GS);const XS=YS;var qS=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:sy(GS);const ZS=qS;function KS(t,e,n){var r=new Zn,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Xn():+n,r._restart((function o(s){s+=i,r._restart(o,i+=e,n),t(s)}),e,n)},r.restart(t,e,n),r)}const QS=t=>()=>t;function JS(t,e){let{sourceEvent:n,target:r,transform:i,dispatch:o}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function $S(t,e,n){this.k=t,this.x=e,this.y=n}$S.prototype={constructor:$S,scale:function(t){return 1===t?this:new $S(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new $S(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tA=new $S(1,0,0);function eA(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tA;return t.__zoom}function nA(t){t.stopImmediatePropagation()}function rA(t){t.preventDefault(),t.stopImmediatePropagation()}function iA(t){return(!t.ctrlKey||"wheel"===t.type)&&!t.button}function oA(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function sA(){return this.__zoom||tA}function aA(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function lA(){return navigator.maxTouchPoints||"ontouchstart"in this}function cA(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function uA(){var t,e,n,r=iA,i=oA,o=cA,s=aA,a=lA,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Gp,d=ne("start","zoom","end"),f=500,p=0,g=10;function m(t){t.property("__zoom",sA).on("wheel.zoom",S).on("mousedown.zoom",A).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new $S(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new $S(t.k,r,i)}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,r){t.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,s=x(t,o).event(r),a=i.apply(t,o),l=null==n?_(a):"function"===typeof n?n.apply(t,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=t.__zoom,d="function"===typeof e?e.apply(t,o):e,f=h(u.invert(l).concat(c/u.k),d.invert(l).concat(c/d.k));return function(t){if(1===t)t=d;else{var e=f(t),n=c/e[2];t=new $S(n,l[0]-e[0]*n,l[1]-e[1]*n)}s.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function S(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var a=x(this,n).event(t),u=this.__zoom,h=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,s.apply(this,arguments)))),d=Fn(t);if(a.wheel)a.mouse[0][0]===d[0]&&a.mouse[0][1]===d[1]||(a.mouse[1]=u.invert(a.mouse[0]=d)),clearTimeout(a.wheel);else{if(u.k===h)return;a.mouse=[d,u.invert(d)],lr(this),a.start()}rA(t),a.wheel=setTimeout(f,150),a.zoom("mouse",o(y(v(u,h),a.mouse[0],a.mouse[1]),a.extent,c))}function f(){a.wheel=null,a.end()}}function A(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];if(!n&&r.apply(this,arguments)){var a=x(this,i,!0).event(t),l=yn(t.view).on("mousemove.zoom",g,!0).on("mouseup.zoom",m,!0),u=Fn(t,h),h=t.currentTarget,d=t.clientX,f=t.clientY;xn(t.view),nA(t),a.mouse=[u,this.__zoom.invert(u)],lr(this),a.start()}function g(t){if(rA(t),!a.moved){var e=t.clientX-d,n=t.clientY-f;a.moved=e*e+n*n>p}a.event(t).zoom("mouse",o(y(a.that.__zoom,a.mouse[0]=Fn(t,h),a.mouse[1]),a.extent,c))}function m(t){l.on("mousemove.zoom mouseup.zoom",null),wn(t.view,a.moved),rA(t),a.event(t).end()}}function E(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];if(r.apply(this,arguments)){var a=this.__zoom,l=Fn(t.changedTouches?t.changedTouches[0]:t,this),h=a.invert(l),d=a.k*(t.shiftKey?.5:2),f=o(y(v(a,d),l,h),i.apply(this,n),c);rA(t),u>0?yn(this).transition().duration(u).call(b,f,l,t):yn(this).call(m.transform,f,l,t)}}function C(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r.apply(this,arguments)){var a,l,c,u,h=n.touches,d=h.length,p=x(this,o,n.changedTouches.length===d).event(n);for(nA(n),l=0;l<d;++l)u=[u=Fn(c=h[l],this),this.__zoom.invert(u),c.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,a=!0,p.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(p.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),f)),lr(this),p.start())}}function k(t){if(this.__zooming){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,s,a,l,u=x(this,n).event(t),h=t.changedTouches,d=h.length;for(rA(t),i=0;i<d;++i)a=Fn(s=h[i],this),u.touch0&&u.touch0[2]===s.identifier?u.touch0[0]=a:u.touch1&&u.touch1[2]===s.identifier&&(u.touch1[0]=a);if(s=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],g=u.touch1[0],m=u.touch1[1],_=(_=g[0]-f[0])*_+(_=g[1]-f[1])*_,b=(b=m[0]-p[0])*b+(b=m[1]-p[1])*b;s=v(s,Math.sqrt(_/b)),a=[(f[0]+g[0])/2,(f[1]+g[1])/2],l=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!u.touch0)return;a=u.touch0[0],l=u.touch0[1]}u.zoom("touch",o(y(s,a,l),u.extent,c))}}function T(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var s,a,l=x(this,i).event(t),c=t.changedTouches,u=c.length;for(nA(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),s=0;s<u;++s)a=c[s],l.touch0&&l.touch0[2]===a.identifier?delete l.touch0:l.touch1&&l.touch1[2]===a.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(a=Fn(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<g)){var h=yn(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return m.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",sA),t!==i?b(t,e,n,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"===typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e,n,r){m.scaleTo(t,(function(){var t=this.__zoom.k,n="function"===typeof e?e.apply(this,arguments):e;return t*n}),n,r)},m.scaleTo=function(t,e,n,r){m.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,s=null==n?_(t):"function"===typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"===typeof e?e.apply(this,arguments):e;return o(y(v(r,l),s,a),t,c)}),n,r)},m.translateBy=function(t,e,n,r){m.transform(t,(function(){return o(this.__zoom.translate("function"===typeof e?e.apply(this,arguments):e,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},m.translateTo=function(t,e,n,r,s){m.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==r?_(t):"function"===typeof r?r.apply(this,arguments):r;return o(tA.translate(a[0],a[1]).scale(s.k).translate("function"===typeof e?-e.apply(this,arguments):-e,"function"===typeof n?-n.apply(this,arguments):-n),t,c)}),r,s)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=yn(this.that).datum();d.call(t,this.that,new JS(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:d}),e)}},m.wheelDelta=function(t){return arguments.length?(s="function"===typeof t?t:QS(+t),m):s},m.filter=function(t){return arguments.length?(r="function"===typeof t?t:QS(!!t),m):r},m.touchable=function(t){return arguments.length?(a="function"===typeof t?t:QS(!!t),m):a},m.extent=function(t){return arguments.length?(i="function"===typeof t?t:QS([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):i},m.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],m):[l[0],l[1]]},m.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(t){return arguments.length?(o=t,m):o},m.duration=function(t){return arguments.length?(u=+t,m):u},m.interpolate=function(t){return arguments.length?(h=t,m):h},m.on=function(){var t=d.on.apply(d,arguments);return t===d?m:t},m.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,m):Math.sqrt(p)},m.tapDistance=function(t){return arguments.length?(g=+t,m):g},m}eA.prototype=$S.prototype},938:(t,e,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(x(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=v((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function S(t,e){return t===a?e:t}function A(t,e,n){m(T(e),(function(e){t.addEventListener(e,n,!1)}))}function E(t,e,n){m(T(e),(function(e){t.removeEventListener(e,n,!1)}))}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function k(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function L(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function O(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var R=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var I="ontouchstart"in i,F=O(i,"PointerEvent")!==a,N=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",z="mouse",B=24,U=["x","y"],V=["clientX","clientY"];function H(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function W(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i===0,s=12&e&&r-i===0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=G(e));i>1&&!n.firstMultiple?n.firstMultiple=G(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=Y(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=K(l,c),e.distance=Z(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=q(e.deltaX,e.deltaY);var u=X(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=d(u.x)>d(u.y)?u.x:u.y,e.scale=s?(h=s.pointers,p=r,Z(p[0],p[1],V)/Z(h[0],h[1],V)):1,e.rotation=s?function(t,e){return K(e[1],e[0],V)+K(t[1],t[0],V)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=X(l,c,u);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=q(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,p;var g=t.element;C(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function G(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:Y(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Y(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function X(t,e,n){return{x:e/t||0,y:n/t||0}}function q(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function Z(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function K(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}H.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(D(this.element),this.evWin,this.domHandler)}};var Q={mousedown:1,mousemove:2,mouseup:4},J="mousedown",$="mousemove mouseup";function tt(){this.evEl=J,this.evWin=$,this.pressed=!1,H.apply(this,arguments)}b(tt,H,{handler:function(t){var e=Q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:z,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},nt={2:j,3:"pen",4:z,5:"kinect"},rt="pointerdown",it="pointermove pointerup pointercancel";function ot(){this.evEl=rt,this.evWin=it,H.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(rt="MSPointerDown",it="MSPointerMove MSPointerUp MSPointerCancel"),b(ot,H,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=et[r],o=nt[t.pointerType]||t.pointerType,s=o==j,a=M(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",lt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=at,this.evWin=lt,this.started=!1,H.apply(this,arguments)}function ut(t,e){var n=P(t.touches),r=P(t.changedTouches);return 12&e&&(n=L(n.concat(r),"identifier",!0)),[n,r]}b(ct,H,{handler:function(t){var e=st[t.type];if(1===e&&(this.started=!0),this.started){var n=ut.call(this,t,e);12&e&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var ht={touchstart:1,touchmove:2,touchend:4,touchcancel:8},dt="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=dt,this.targetIds={},H.apply(this,arguments)}function pt(t,e){var n=P(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=P(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return C(t.target,l)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[L(o.concat(a),"identifier",!0),a]:void 0}b(ft,H,{handler:function(t){var e=ht[t.type],n=pt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}});function gt(){H.apply(this,arguments);var t=x(this.handler,this);this.touch=new ft(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,vt.call(this,e)):12&t&&vt.call(this,e)}function vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function yt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}b(gt,H,{handler:function(t,e,n){var r=n.pointerType==j,i=n.pointerType==z;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)mt.call(this,e,n);else if(i&&yt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=O(u.style,"touchAction"),bt=_t!==a,xt="compute",wt="auto",St="manipulation",At="none",Et="pan-x",Ct="pan-y",kt=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Tt(t,e){this.manager=t,this.set(e)}Tt.prototype={set:function(t){t==xt&&(t=this.compute()),bt&&this.manager.element.style&&kt[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(k(t,At))return At;var e=k(t,Et),n=k(t,Ct);if(e&&n)return At;if(e||n)return e?Et:Ct;if(k(t,St))return St;return wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=k(r,At)&&!kt.none,o=k(r,Ct)&&!kt["pan-y"],s=k(r,Et)&&!kt["pan-x"];if(i){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return i||o&&6&n||s&&n&B?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Mt=32;function Pt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Lt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Ot(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Rt(t,e){var n=e.manager;return n?n.get(t):t}function Dt(){Pt.apply(this,arguments)}function It(){Dt.apply(this,arguments),this.pX=null,this.pY=null}function Ft(){Dt.apply(this,arguments)}function Nt(){Pt.apply(this,arguments),this._timer=null,this._input=null}function jt(){Dt.apply(this,arguments)}function zt(){Dt.apply(this,arguments)}function Bt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ut(t,e){return(e=e||{}).recognizers=S(e.recognizers,Ut.defaults.preset),new Vt(t,e)}Pt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Rt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=Rt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Rt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Rt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Lt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Lt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Mt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Dt,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Mt}}),b(It,Dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Ct),t&B&&e.push(Et),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Dt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ot(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Ft,Dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Nt,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Mt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(jt,Dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(zt,Dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return It.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&B&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Ot(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Bt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[St]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||Z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Mt},failTimeout:function(){return this._timer=p((function(){this.state=Mt}),this.options.interval,this),Mt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ut.VERSION="2.0.7",Ut.defaults={domEvents:!1,touchAction:xt,enable:!0,inputTarget:null,inputClass:null,preset:[[jt,{enable:!1}],[Ft,{enable:!1},["rotate"]],[zt,{direction:6}],[It,{direction:6},["swipe"]],[Bt],[Bt,{event:"doubletap",taps:2},["tap"]],[Nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Vt(t,e){var n;this.options=l({},Ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(F?ot:N?ft:I?gt:tt))(n,W),this.touchAction=new Tt(this,this.options.touchAction),Ht(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Ht(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,(function(i,o){n=O(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Vt.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return m(T(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return m(T(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ut,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Mt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:B,DIRECTION_ALL:30,Manager:Vt,Input:H,TouchAction:Tt,TouchInput:ft,MouseInput:tt,PointerEventInput:ot,TouchMouseInput:gt,SingleTouchInput:ct,Recognizer:Pt,AttrRecognizer:Dt,Tap:Bt,Pan:It,Swipe:zt,Pinch:Ft,Rotate:jt,Press:Nt,on:A,off:E,each:m,merge:_,extend:y,assign:l,inherit:b,bindFn:x,prefixed:O}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=Ut,(r=function(){return Ut}.call(e,n,e,t))===a||(t.exports=r)}(window,document)},110:(t,e,n)=>{"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!o[v]&&(!r||!r[v])&&(!g||!g[v])&&(!a||!a[v])){var y=d(n,v);try{c(e,v,y)}catch(_){}}}}return e}},746:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case c:case d:case m:case g:case l:return t;default:return e}}case i:return e}}}function w(t){return x(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return w(t)||x(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===c},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===m},e.isMemo=function(t){return x(t)===g},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===a},e.isStrictMode=function(t){return x(t)===s},e.isSuspense=function(t){return x(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===a||t===s||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===y||t.$$typeof===_||t.$$typeof===b||t.$$typeof===v)},e.typeOf=x},309:(t,e,n)=>{"use strict";t.exports=n(746)},855:(t,e,n)=>{"use strict";n.d(e,{H:()=>i,L:()=>r});class r extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(o(this,t))}has(t){return super.has(o(this,t))}set(t,e){return super.set(s(this,t),e)}delete(t){return super.delete(a(this,t))}}class i extends Set{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(o(this,t))}add(t){return super.add(s(this,t))}delete(t){return super.delete(a(this,t))}}function o(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):e}function s(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):(n.set(i,e),e)}function a(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)&&(e=n.get(e),n.delete(i)),e}function l(t){return null!==t&&"object"===typeof t?t.valueOf():t}},176:t=>{"use strict";t.exports=function(t,e,n,r,i,o,s,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(e.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},888:(t,e,n)=>{"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:(t,e,n)=>{t.exports=n(888)()},47:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(t,e,n)=>{"use strict";var r=n(791),i=n(296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function I(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=D&&t[D]||t["@@iterator"])?t:null}var F,N=Object.assign;function j(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var z=!1;function B(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function U(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case k:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Y(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function J(t,e){Q(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,At=null;function Et(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),wt(t.stateNode,t.type,e))}}function Ct(t){St?At?At.push(t):At=[t]:St=t}function kt(){if(St){var t=St,e=At;if(At=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Tt(t,e){return t(e)}function Mt(){}var Pt=!1;function Lt(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return Tt(t,e,n)}finally{Pt=!1,(null!==St||null!==At)&&(Mt(),kt())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Rt=!1;if(u)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(ut){Rt=!1}function It(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ft=!1,Nt=null,jt=!1,zt=null,Bt={onError:function(t){Ft=!0,Nt=t}};function Ut(t,e,n,r,i,o,s,a,l){Ft=!1,Nt=null,It.apply(Bt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Vt(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wt(i),t;if(s===r)return Wt(i),e;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Yt(t):null}function Yt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Yt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,Zt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Qt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,$t=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=he(a):0!==(o&=s)&&(r=he(o))}else 0!==(s=n&~i)?r=he(s):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,we,Se,Ae,Ee,Ce=!1,ke=[],Te=null,Me=null,Pe=null,Le=new Map,Oe=new Map,Re=[],De="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ie(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Me=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Fe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ne(t){var e=yi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function ze(t,e,n){je(t)&&n.delete(e)}function Be(){Ce=!1,null!==Te&&je(Te)&&(Te=null),null!==Me&&je(Me)&&(Me=null),null!==Pe&&je(Pe)&&(Pe=null),Le.forEach(ze),Oe.forEach(ze)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Ce||(Ce=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function Ve(t){function e(e){return Ue(e,t)}if(0<ke.length){Ue(ke[0],t);for(var n=1;n<ke.length;n++){var r=ke[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Te&&Ue(Te,t),null!==Me&&Ue(Me,t),null!==Pe&&Ue(Pe,t),Le.forEach(e),Oe.forEach(e),n=0;n<Re.length;n++)(r=Re[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Re.length&&null===(n=Re[0]).blockedOn;)Ne(n),null===n.blockedOn&&Re.shift()}var He=b.ReactCurrentBatchConfig,We=!0;function Ge(t,e,n,r){var i=_e,o=He.transition;He.transition=null;try{_e=1,Xe(t,e,n,r)}finally{_e=i,He.transition=o}}function Ye(t,e,n,r){var i=_e,o=He.transition;He.transition=null;try{_e=4,Xe(t,e,n,r)}finally{_e=i,He.transition=o}}function Xe(t,e,n,r){if(We){var i=Ze(t,e,n,r);if(null===i)Wr(t,e,r,qe,n),Ie(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Te=Fe(Te,t,e,n,r,i),!0;case"dragenter":return Me=Fe(Me,t,e,n,r,i),!0;case"mouseover":return Pe=Fe(Pe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Le.set(o,Fe(Le.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Oe.set(o,Fe(Oe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ie(t,r),4&e&&-1<De.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&xe(o),null===(o=Ze(t,e,n,r))&&Wr(t,e,r,qe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var qe=null;function Ze(t,e,n,r){if(qe=null,null!==(t=yi(t=xt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,$e=null;function tn(){if($e)return $e;var t,e,n=Je,r=n.length,i="value"in Qe?Qe.value:Qe.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return $e=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=N({},cn,{view:0,detail:0}),dn=on(hn),fn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),gn=on(N({},fn,{dataTransfer:0})),mn=on(N({},hn,{relatedTarget:0})),vn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(N({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return An}var Cn=N({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),kn=on(Cn),Tn=on(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=N({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Ln),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var Fn=u&&"TextEvent"in window&&!In,Nn=u&&(!Dn||In&&8<In&&11>=In),jn=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Rn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Gn(t,e,n,r){Ct(r),0<(e=Yr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yn=null,Xn=null;function qn(t){jr(t,0)}function Zn(t){if(X(bi(t)))return t}function Kn(t,e){if("change"===t)return e}var Qn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),$n="function"===typeof tr.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(t){if("value"===t.propertyName&&Zn(Xn)){var e=[];Gn(e,Xn,t,xt(t)),Lt(qn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Yn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Zn(Xn)}function or(t,e){if("click"===t)return Zn(e)}function sr(t,e){if("input"===t||"change"===t)return Zn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,_r=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Yr(vr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Ar={};function Er(t){if(Sr[t])return Sr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ar)return Sr[t]=n[e];return t}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Er("animationend"),kr=Er("animationiteration"),Tr=Er("animationstart"),Mr=Er("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){Pr.set(t,e),l(e,[t])}for(var Rr=0;Rr<Lr.length;Rr++){var Dr=Lr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(kr,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Mr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Nr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,a,l,c){if(Ut.apply(this,arguments),Ft){if(!Ft)throw Error(o(198));var u=Nt;Ft=!1,Nt=null,jt||(jt=!0,zt=u)}}(r,e,void 0,t),t.currentTarget=null}function jr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,a,c),o=l}}}if(jt)throw t=zt,jt=!1,zt=null,t}function zr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Hr(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Hr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,s.forEach((function(e){"selectionchange"!==e&&(Fr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,Br("selectionchange",!1,e))}}function Hr(t,e,n,r){switch(Ke(e)){case 1:var i=Ge;break;case 4:i=Ye;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Rt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}Lt((function(){var r=o,i=xt(n),s=[];t:{var a=Pr.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Cr:case kr:case Tr:l=vn;break;case Mr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ot(p,d))&&u.push(Gr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===bt||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Xr(f))p++;for(f=0,g=d;g;g=Xr(g))f++;for(;0<p-f;)u=Xr(u),p--;for(;0<f-p;)d=Xr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Xr(u),d=Xr(d)}u=null}else u=null;null!==l&&qr(s,a,l,u,!1),null!==c&&null!==h&&qr(s,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kn;else if(Wn(a))if(Qn)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(t,r))?Gn(s,m,n,i):(v&&v(t,a,r),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&tt(a,"number",a.value)),v=r?bi(r):window,t){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Dn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Vn?Bn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(y=tn()):(Je="value"in(Qe=i)?Qe.value:Qe.textContent,Vn=!0)),0<(v=Yr(r,_)).length&&(_=new bn(_,t,null,n,i),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Un(n))&&(_.data=y))),(y=Fn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(zn=!0,jn);case"textInput":return(t=e.data)===jn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Dn&&Bn(t,e)?(t=tn(),$e=Je=Qe=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}jr(s,e)}))}function Gr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ot(t,n))&&r.unshift(Gr(t,o,i)),null!=(o=Ot(t,e))&&r.push(Gr(t,o,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qr(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ot(n,o))&&s.unshift(Gr(n,l,a)):i||null!=(l=Ot(n,o))&&s.push(Gr(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var Zr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(t){return("string"===typeof t?t:""+t).replace(Zr,"\n").replace(Kr,"")}function Jr(t,e,n){if(e=Qr(e),Qr(t)!==e&&n)throw Error(o(425))}function $r(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[di])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[fi]||null}var wi=[],Si=-1;function Ai(t){return{current:t}}function Ei(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function Ci(t,e){Si++,wi[Si]=t.current,t.current=e}var ki={},Ti=Ai(ki),Mi=Ai(!1),Pi=ki;function Li(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Ri(){Ei(Mi),Ei(Ti)}function Di(t,e,n){if(Ti.current!==ki)throw Error(o(168));Ci(Ti,e),Ci(Mi,n)}function Ii(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return N({},n,r)}function Fi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,Pi=Ti.current,Ci(Ti,t),Ci(Mi,Mi.current),!0}function Ni(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ii(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ei(Mi),Ei(Ti),Ci(Ti,t)):Ei(Mi),Ci(Mi,n)}var ji=null,zi=!1,Bi=!1;function Ui(t){null===ji?ji=[t]:ji.push(t)}function Vi(){if(!Bi&&null!==ji){Bi=!0;var t=0,e=_e;try{var n=ji;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}ji=null,zi=!1}catch(i){throw null!==ji&&(ji=ji.slice(t+1)),Xt($t,Vi),i}finally{_e=e,Bi=!1}}return null}var Hi=[],Wi=0,Gi=null,Yi=0,Xi=[],qi=0,Zi=null,Ki=1,Qi="";function Ji(t,e){Hi[Wi++]=Yi,Hi[Wi++]=Gi,Gi=t,Yi=e}function $i(t,e,n){Xi[qi++]=Ki,Xi[qi++]=Qi,Xi[qi++]=Zi,Zi=t;var r=Ki;t=Qi;var i=32-se(r)-1;r&=~(1<<i),n+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-se(e)+i|n<<i|r,Qi=o+t}else Ki=1<<o|n<<i|r,Qi=t}function to(t){null!==t.return&&(Ji(t,1),$i(t,1,0))}function eo(t){for(;t===Gi;)Gi=Hi[--Wi],Hi[Wi]=null,Yi=Hi[--Wi],Hi[Wi]=null;for(;t===Zi;)Zi=Xi[--qi],Xi[qi]=null,Qi=Xi[--qi],Xi[qi]=null,Ki=Xi[--qi],Xi[qi]=null}var no=null,ro=null,io=!1,oo=null;function so(t,e){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Zi?{id:Ki,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(io){var e=ro;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ci(n.nextSibling);var r=no;e&&ao(t,e)?so(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=ci(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ci(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ci(t.nextSibling)}function po(){ro=no=null,io=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=b.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var yo=Ai(null),_o=null,bo=null,xo=null;function wo(){xo=bo=_o=null}function So(t){var e=yo.current;Ei(yo),t._currentValue=e}function Ao(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){_o=t,xo=bo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ba=!0),t.firstContext=null)}function Co(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===bo){if(null===_o)throw Error(o(308));bo=t,_o.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var ko=null;function To(t){null===ko?ko=[t]:ko.push(t)}function Mo(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,To(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Do(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(t,n)}return null===(i=r.interleaved)?(e.next=e,To(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(t,n)}function Fo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function No(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jo(t,e,n,r){var i=t.updateQueue;Lo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=N({},h,d);break t;case 2:Lo=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Fl|=s,t.lanes=s,t.memoizedState=h}}function zo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function Uo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),o=Do(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Io(t,o,i))&&(nc(e,t,i,r),Fo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),o=Do(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Io(t,o,i))&&(nc(e,t,i,r),Fo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),r=ec(t),i=Do(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Io(t,i,r))&&(nc(e,t,r,n),Fo(e,t,r))}};function Ho(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(t,e,n){var r=!1,i=ki,o=e.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Oi(e)?Pi:Ti.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Li(t,i):ki),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Go(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function Yo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Bo,Oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Oi(e)?Pi:Ti.current,i.context=Li(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),jo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===Bo&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zo(t){return(0,t._init)(t._payload)}function Ko(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Rc(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Nc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Zo(o)===e.type)?((r=i(e,n.props)).ref=Xo(t,e,n),r.return=t,r):((r=Dc(n.type,n.key,n.props,null,t.mode,r)).ref=Xo(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=jc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Ic(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Nc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Dc(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case w:return(e=jc(e,t.mode,n)).return=t,e;case O:return d(t,(0,e._init)(e._payload),n)}if(et(e)||I(e))return(e=Ic(e,t.mode,n,null)).return=t,e;qo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(t,e,n,r):null;case w:return n.key===i?u(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||I(n))return null!==i?null:h(t,e,n,r,null);qo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||I(r))return h(e,t=t.get(n)||null,r,i,null);qo(e,r)}return null}function g(i,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(i,h),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),io&&Ji(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(i,t)})),io&&Ji(i,g),c}function m(i,a,l,c){var u=I(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(i,g,y.value,c);if(null===_){null===g&&(g=v);break}t&&g&&null===_.alternate&&e(i,g),a=s(_,a,m),null===h?u=_:h.sibling=_,h=_,g=v}if(y.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return io&&Ji(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(i,t)})),io&&Ji(i,m),u}return function t(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:t:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Zo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Xo(r,u,s),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}s.type===S?((o=Ic(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=Xo(r,o,s),l.return=r,r=l)}return a(r);case w:t:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=jc(s,r.mode,l)).return=r,r=o}return a(r);case O:return t(r,o,(u=s._init)(s._payload),l)}if(et(s))return g(r,o,s,l);if(I(s))return m(r,o,s,l);qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Nc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Qo=Ko(!0),Jo=Ko(!1),$o={},ts=Ai($o),es=Ai($o),ns=Ai($o);function rs(t){if(t===$o)throw Error(o(174));return t}function is(t,e){switch(Ci(ns,e),Ci(es,t),Ci(ts,$o),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(ts),Ci(ts,e)}function os(){Ei(ts),Ei(es),Ei(ns)}function ss(t){rs(ns.current);var e=rs(ts.current),n=lt(e,t.type);e!==n&&(Ci(es,t),Ci(ts,n))}function as(t){es.current===t&&(Ei(ts),Ei(es))}var ls=Ai(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function hs(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var ds=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,ys=!1,_s=!1,bs=0,xs=0;function ws(){throw Error(o(321))}function Ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function As(t,e,n,r,i,s){if(ps=s,gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ds.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),_s){s=0;do{if(_s=!1,bs=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,e.updateQueue=null,ds.current=ca,t=n(r,i)}while(_s)}if(ds.current=sa,e=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,ys=!1,e)throw Error(o(300));return t}function Es(){var t=0!==bs;return bs=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=t:vs=vs.next=t,vs}function ks(){if(null===ms){var t=gs.alternate;t=null!==t?t.memoizedState:null}else t=ms.next;var e=null===vs?gs.memoizedState:vs.next;if(null!==e)vs=e,ms=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ms=t).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=t:vs=vs.next=t}return vs}function Ts(t,e){return"function"===typeof e?e(t):e}function Ms(t){var e=ks(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,gs.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,e.memoizedState)||(ba=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,gs.lanes|=s,Fl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ps(t){var e=ks(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ar(s,e.memoizedState)||(ba=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ls(){}function Os(t,e){var n=gs,r=ks(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ws(Is.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,zs(9,Ds.bind(null,n,r,i,e),void 0,null),null===Ml)throw Error(o(349));0!==(30&ps)||Rs(n,e,i)}return i}function Rs(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ds(t,e,n,r){e.value=n,e.getSnapshot=r,Fs(e)&&Ns(t)}function Is(t,e,n){return n((function(){Fs(e)&&Ns(t)}))}function Fs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Ns(t){var e=Po(t,1);null!==e&&nc(e,t,1,-1)}function js(t){var e=Cs();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,gs,t),[e.memoizedState,t]}function zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Bs(){return ks().memoizedState}function Us(t,e,n,r){var i=Cs();gs.flags|=t,i.memoizedState=zs(1|e,n,void 0,void 0===r?null:r)}function Vs(t,e,n,r){var i=ks();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=zs(e,n,o,r))}gs.flags|=t,i.memoizedState=zs(1|e,n,o,r)}function Hs(t,e){return Us(8390656,8,t,e)}function Ws(t,e){return Vs(2048,8,t,e)}function Gs(t,e){return Vs(4,2,t,e)}function Ys(t,e){return Vs(4,4,t,e)}function Xs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4,4,Xs.bind(null,e,t),n)}function Zs(){}function Ks(t,e){var n=ks();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qs(t,e){var n=ks();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Js(t,e,n){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,ba=!0),t.memoizedState=n):(ar(n,e)||(n=ge(),gs.lanes|=n,Fl|=n,t.baseState=!0),e)}function $s(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=fs.transition;fs.transition={};try{t(!1),e()}finally{_e=n,fs.transition=r}}function ta(){return ks().memoizedState}function ea(t,e,n){var r=ec(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t))ia(e,n);else if(null!==(n=Mo(t,e,n,r))){nc(n,t,r,tc()),oa(n,e,r)}}function na(t,e,n){var r=ec(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=e.interleaved;return null===l?(i.next=i,To(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=Mo(t,e,i,r))&&(nc(n,t,r,i=tc()),oa(n,e,r))}}function ra(t){var e=t.alternate;return t===gs||null!==e&&e===gs}function ia(t,e){_s=ys=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var sa={readContext:Co,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},aa={readContext:Co,useCallback:function(t,e){return Cs().memoizedState=[t,void 0===e?null:e],t},useContext:Co,useEffect:Hs,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Us(4194308,4,Xs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cs();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,gs,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Cs().memoizedState=t},useState:js,useDebugValue:Zs,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=js(!1),e=t[0];return t=$s.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gs,i=Cs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Ml)throw Error(o(349));0!==(30&ps)||Rs(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Hs(Is.bind(null,r,s,t),[t]),r.flags|=2048,zs(9,Ds.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cs(),e=Ml.identifierPrefix;if(io){var n=Qi;e=":"+e+"R"+(n=(Ki&~(1<<32-se(Ki)-1)).toString(32)+n),0<(n=bs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=xs++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Co,useCallback:Ks,useContext:Co,useEffect:Ws,useImperativeHandle:qs,useInsertionEffect:Gs,useLayoutEffect:Ys,useMemo:Qs,useReducer:Ms,useRef:Bs,useState:function(){return Ms(Ts)},useDebugValue:Zs,useDeferredValue:function(t){return Js(ks(),ms.memoizedState,t)},useTransition:function(){return[Ms(Ts)[0],ks().memoizedState]},useMutableSource:Ls,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:Ks,useContext:Co,useEffect:Ws,useImperativeHandle:qs,useInsertionEffect:Gs,useLayoutEffect:Ys,useMemo:Qs,useReducer:Ps,useRef:Bs,useState:function(){return Ps(Ts)},useDebugValue:Zs,useDeferredValue:function(t){var e=ks();return null===ms?e.memoizedState=t:Js(e,ms.memoizedState,t)},useTransition:function(){return[Ps(Ts)[0],ks().memoizedState]},useMutableSource:Ls,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),da(0,e)},n}function ga(t,e,n){(n=Do(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){da(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,e),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ec.bind(null,t,e,n),e.then(t,t))}function va(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Do(-1,1)).tag=2,Io(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _a=b.ReactCurrentOwner,ba=!1;function xa(t,e,n,r){e.child=null===t?Jo(e,null,n,r):Qo(e,t.child,n,r)}function wa(t,e,n,r,i){n=n.render;var o=e.ref;return Eo(e,i),r=As(t,e,n,r,o,i),n=Es(),null===t||ba?(io&&n&&to(e),e.flags|=1,xa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wa(t,e,i))}function Sa(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Dc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Aa(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&t.ref===e.ref)return Wa(t,e,i)}return e.flags|=1,(t=Rc(o,r)).ref=e.ref,t.return=e,e.child=t}function Aa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(ba=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Wa(t,e,i);0!==(131072&t.flags)&&(ba=!0)}}return ka(t,e,n,r,i)}function Ea(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ci(Rl,Ol),Ol|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Rl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ci(Rl,Ol),Ol|=r;return xa(t,e,i,n),e.child}function Ca(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ka(t,e,n,r,i){var o=Oi(n)?Pi:Ti.current;return o=Li(e,o),Eo(e,i),n=As(t,e,n,r,o,i),r=Es(),null===t||ba?(io&&r&&to(e),e.flags|=1,xa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wa(t,e,i))}function Ta(t,e,n,r,i){if(Oi(n)){var o=!0;Fi(e)}else o=!1;if(Eo(e,i),null===e.stateNode)Ha(t,e),Wo(e,n,r),Yo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Li(e,c=Oi(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Go(e,s,r,c),Lo=!1;var d=e.memoizedState;s.state=d,jo(e,r,s,i),l=e.memoizedState,a!==r||d!==l||Mi.current||Lo?("function"===typeof u&&(Uo(e,n,u,r),l=e.memoizedState),(a=Lo||Ho(e,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Ro(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:vo(e.type,a),s.props=c,h=e.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Li(e,l=Oi(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Go(e,s,r,l),Lo=!1,d=e.memoizedState,s.state=d,jo(e,r,s,i);var p=e.memoizedState;a!==h||d!==p||Mi.current||Lo?("function"===typeof f&&(Uo(e,n,f,r),p=e.memoizedState),(c=Lo||Ho(e,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ma(t,e,n,r,o,i)}function Ma(t,e,n,r,i,o){Ca(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&Ni(e,n,!1),Wa(t,e,o);r=e.stateNode,_a.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,a,o)):xa(t,e,a,o),e.memoizedState=r.state,i&&Ni(e,n,!0),e.child}function Pa(t){var e=t.stateNode;e.pendingContext?Di(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Di(0,e.context,!1),is(t,e.containerInfo)}function La(t,e,n,r,i){return po(),go(i),e.flags|=256,xa(t,e,n,r),e.child}var Oa,Ra,Da,Ia={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Na(t,e,n){var r,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ci(ls,1&s),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),t=Ic(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=Ia,t):ja(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,za(t,e,a,r=ha(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Ic(s,i,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&Qo(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=Ia,s);if(0===(1&e.mode))return za(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(t,e,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&t.childLanes),ba||l){if(null!==(r=Ml)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(t,i),nc(r,t,i,-1))}return gc(),za(t,e,a,r=ha(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=kc.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ro=ci(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Xi[qi++]=Ki,Xi[qi++]=Qi,Xi[qi++]=Zi,Ki=t.id,Qi=t.overflow,Zi=e),(e=ja(e,r.children)).flags|=4096,e)}(t,e,l,i,r,s,n);if(a){a=i.fallback,l=e.mode,r=(s=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Rc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Rc(r,a):(a=Ic(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ia,i}return t=(a=t.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ja(t,e){return(e=Fc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function za(t,e,n,r){return null!==r&&go(r),Qo(e,t.child,null,n),(t=ja(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ba(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Ao(t.return,e,n)}function Ua(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Va(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xa(t,e,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ba(t,n,e);else if(19===t.tag)Ba(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ci(ls,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ua(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===cs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ua(e,!0,n,null,o);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ha(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Rc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ga(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xa(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return Oi(e.type)&&Ri(),Ya(e),null;case 3:return r=e.stateNode,os(),Ei(Mi),Ei(Ti),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ya(e),null;case 5:as(e);var i=rs(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ra(t,e,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ya(e),null}if(t=rs(ts.current),ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[di]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":it(r,s),zr("invalid",r)}for(var l in yt(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":Y(r),$(r,s,!0);break;case"textarea":Y(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[fi]=r,Oa(t,e),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":zr("cancel",t),zr("close",t),i=r;break;case"iframe":case"object":case"embed":zr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],t);i=r;break;case"source":zr("error",t),i=r;break;case"img":case"image":case"link":zr("error",t),zr("load",t),i=r;break;case"details":zr("toggle",t),i=r;break;case"input":K(t,r),i=Z(t,r),zr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),zr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),zr("invalid",t)}for(s in yt(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?mt(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",t):null!=u&&_(t,s,u,l))}switch(n){case"input":Y(t),$(t,r,!1);break;case"textarea":Y(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)Da(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(ts.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(s=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Ya(e),null;case 13:if(Ei(ls),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Dl&&(Dl=3):gc())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return os(),null===t&&Vr(e.stateNode.containerInfo),Ya(e),null;case 10:return So(e.type._context),Ya(e),null;case 19:if(Ei(ls),null===(s=e.memoizedState))return Ya(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)Ga(s,!1);else{if(0!==Dl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,Ga(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ci(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&Qt()>Vl&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=cs(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ya(e),null}else 2*Qt()-s.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=ls.current,Ci(ls,r?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ol)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function qa(t,e){switch(eo(e),e.tag){case 1:return Oi(e.type)&&Ri(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Ei(Mi),Ei(Ti),hs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ei(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(ls),null;case 4:return os(),null;case 10:return So(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Oa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(ts.current);var o,s=null;switch(n){case"input":i=Z(t,i),r=Z(t,r),s=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=$r)}for(u in yt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},Da=function(t,e,n,r){n!==r&&(e.flags|=4)};var Za=!1,Ka=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function $a(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(t,e,r)}else n.current=null}function tl(t,e,n){try{n()}catch(r){Ac(t,e,r)}}var el=!1;function nl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(e,n,o)}i=i.next}while(i!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[gi],delete e[mi],delete e[vi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$r));else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:Ka||$a(n,e);case 6:var r=ul,i=hl;ul=null,dl(t,e,n),hl=i,null!==(ul=r)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ka&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,e,s),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!Ka&&($a(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ka=(r=Ka)||null!==n.memoizedState,dl(t,e,n),Ka=r):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qa),e.forEach((function(e){var r=Tc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&r){try{nl(3,t,t.return),rl(3,t)}catch(m){Ac(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Ac(t,t.return,m)}}break;case 1:gl(e,t),vl(t),512&r&&null!==n&&$a(n,n.return);break;case 5:if(gl(e,t),vl(t),512&r&&null!==n&&$a(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(m){Ac(t,t.return,m)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),_t(l,a);var u=_t(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?mt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):_(i,h,d,u)}switch(l){case"input":J(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Ac(t,t.return,m)}}break;case 6:if(gl(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ac(t,t.return,m)}}break;case 3:if(gl(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(m){Ac(t,t.return,m)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Qt())),4&r&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ka=(u=Ka)||h,gl(e,t),Ka=u):gl(e,t),vl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Ja=t,h=t.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$a(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ac(r,n,m)}}break;case 5:$a(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Ja=p):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Ac(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ac(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),vl(t),4&r&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),cl(t,al(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(t,al(t),s);break;default:throw Error(o(161))}}catch(a){Ac(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Ja=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Za;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ka;a=Za;var c=Ka;if(Za=s,(Ka=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,Ja=l):wl(i);for(;null!==o;)Ja=o,_l(o,e,n),o=o.sibling;Ja=i,Za=a,Ka=c}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):bl(t)}}function bl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ka||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ka)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&zo(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}zo(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(o(163))}Ka||512&e.flags&&il(e)}catch(f){Ac(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ja=n;break}Ja=e.return}}function xl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ja=n;break}Ja=e.return}}function wl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Ac(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ac(e,i,l)}}var o=e.return;try{il(e)}catch(l){Ac(e,o,l)}break;case 5:var s=e.return;try{il(e)}catch(l){Ac(e,s,l)}}}catch(l){Ac(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var Sl,Al=Math.ceil,El=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Tl=0,Ml=null,Pl=null,Ll=0,Ol=0,Rl=Ai(0),Dl=0,Il=null,Fl=0,Nl=0,jl=0,zl=null,Bl=null,Ul=0,Vl=1/0,Hl=null,Wl=!1,Gl=null,Yl=null,Xl=!1,ql=null,Zl=0,Kl=0,Ql=null,Jl=-1,$l=0;function tc(){return 0!==(6&Tl)?Qt():-1!==Jl?Jl:Jl=Qt()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Tl)&&0!==Ll?Ll&-Ll:null!==mo.transition?(0===$l&&($l=ge()),$l):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nc(t,e,n,r){if(50<Kl)throw Kl=0,Ql=null,Error(o(185));ve(t,n,r),0!==(2&Tl)&&t===Ml||(t===Ml&&(0===(2&Tl)&&(Nl|=n),4===Dl&&ac(t,Ll)),rc(t,r),1===n&&0===Tl&&0===(1&e.mode)&&(Vl=Qt()+500,zi&&Vi()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=de(t,t===Ml?Ll:0);if(0===r)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){zi=!0,Ui(t)}(lc.bind(null,t)):Ui(lc.bind(null,t)),si((function(){0===(6&Tl)&&Vi()})),n=null;else{switch(be(r)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Mc(n,ic.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ic(t,e){if(Jl=-1,$l=0,0!==(6&Tl))throw Error(o(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var r=de(t,t===Ml?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=mc(t,r);else{e=r;var i=Tl;Tl|=2;var s=pc();for(Ml===t&&Ll===e||(Hl=null,Vl=Qt()+500,dc(t,e));;)try{yc();break}catch(l){fc(t,l)}wo(),El.current=s,Tl=i,null!==Pl?e=0:(Ml=null,Ll=0,e=Dl)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=oc(t,i))),1===e)throw n=Il,dc(t,0),ac(t,r),rc(t,Qt()),n;if(6===e)ac(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=mc(t,r))&&(0!==(s=pe(t))&&(r=s,e=oc(t,s))),1===e))throw n=Il,dc(t,0),ac(t,r),rc(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:xc(t,Bl,Hl);break;case 3:if(ac(t,r),(130023424&r)===r&&10<(e=Ul+500-Qt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tc(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(xc.bind(null,t,Bl,Hl),e);break}xc(t,Bl,Hl);break;case 4:if(ac(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){t.timeoutHandle=ri(xc.bind(null,t,Bl,Hl),r);break}xc(t,Bl,Hl);break;default:throw Error(o(329))}}}return rc(t,Qt()),t.callbackNode===n?ic.bind(null,t):null}function oc(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=Bl,Bl=n,null!==e&&sc(e)),t}function sc(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function ac(t,e){for(e&=~jl,e&=~Nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function lc(t){if(0!==(6&Tl))throw Error(o(327));wc();var e=de(t,0);if(0===(1&e))return rc(t,Qt()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=oc(t,r))}if(1===n)throw n=Il,dc(t,0),ac(t,e),rc(t,Qt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Bl,Hl),rc(t,Qt()),null}function cc(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(Vl=Qt()+500,zi&&Vi())}}function uc(t){null!==ql&&0===ql.tag&&0===(6&Tl)&&wc();var e=Tl;Tl|=1;var n=kl.transition,r=_e;try{if(kl.transition=null,_e=1,t)return t()}finally{_e=r,kl.transition=n,0===(6&(Tl=e))&&Vi()}}function hc(){Ol=Rl.current,Ei(Rl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:os(),Ei(Mi),Ei(Ti),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ei(ls);break;case 10:So(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ml=t,Pl=t=Rc(t.current,null),Ll=Ol=e,Dl=0,Il=null,jl=Nl=Fl=0,Bl=zl=null,null!==ko){for(e=0;e<ko.length;e++)if(null!==(r=(n=ko[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}ko=null}return t}function fc(t,e){for(;;){var n=Pl;try{if(wo(),ds.current=sa,ys){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=ms=gs=null,_s=!1,bs=0,Cl.current=null,null===n||null===n.return){Dl=1,Il=e,Pl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,e),1&p.mode&&ma(s,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(s,u,e),gc();break t}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,e),go(ua(c,l));break t}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,No(s,pa(0,c,e));break t;case 1:l=c;var y=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e,No(s,ga(s,l,e));break t}}s=s.return}while(null!==s)}bc(n)}catch(b){e=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var t=El.current;return El.current=sa,null===t?sa:t}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ml||0===(268435455&Fl)&&0===(268435455&Nl)||ac(Ml,Ll)}function mc(t,e){var n=Tl;Tl|=2;var r=pc();for(Ml===t&&Ll===e||(Hl=null,dc(t,e));;)try{vc();break}catch(i){fc(t,i)}if(wo(),Tl=n,El.current=r,null!==Pl)throw Error(o(261));return Ml=null,Ll=0,Dl}function vc(){for(;null!==Pl;)_c(Pl)}function yc(){for(;null!==Pl&&!Zt();)_c(Pl)}function _c(t){var e=Sl(t.alternate,t,Ol);t.memoizedProps=t.pendingProps,null===e?bc(t):Pl=e,Cl.current=null}function bc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xa(n,e,Ol)))return void(Pl=n)}else{if(null!==(n=qa(n,e)))return n.flags&=32767,void(Pl=n);if(null===t)return Dl=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Dl&&(Dl=5)}function xc(t,e,n){var r=_e,i=kl.transition;try{kl.transition=null,_e=1,function(t,e,n,r){do{wc()}while(null!==ql);if(0!==(6&Tl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,s),t===Ml&&(Pl=Ml=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Mc(ee,(function(){return wc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=kl.transition,kl.transition=null;var a=_e;_e=1;var l=Tl;Tl|=4,Cl.current=null,function(t,e){if(ti=We,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Ac(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}g=el,el=!1}(t,n),ml(n,t),pr(ei),We=!!ti,ei=ti=null,t.current=n,yl(n,t,i),Kt(),Tl=l,_e=a,kl.transition=s}else t.current=n;if(Xl&&(Xl=!1,ql=t,Zl=i),0===(s=t.pendingLanes)&&(Yl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,Qt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,t=Gl,Gl=null,t;0!==(1&Zl)&&0!==t.tag&&wc(),0!==(1&(s=t.pendingLanes))?t===Ql?Kl++:(Kl=0,Ql=t):Kl=0,Vi()}(t,e,n,r)}finally{kl.transition=i,_e=r}return null}function wc(){if(null!==ql){var t=be(Zl),e=kl.transition,n=_e;try{if(kl.transition=null,_e=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,Zl=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Ja=t.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(ol(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ja=y;break t}Ja=s.return}}var _=t.current;for(Ja=_;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else t:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Ac(l,l.return,w)}if(l===a){Ja=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break t}Ja=l.return}}if(Tl=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{_e=n,kl.transition=e}}return!1}function Sc(t,e,n){t=Io(t,e=pa(0,e=ua(n,e),1),1),e=tc(),null!==t&&(ve(t,1,e),rc(t,e))}function Ac(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){e=Io(e,t=ga(e,t=ua(n,t),1),1),t=tc(),null!==e&&(ve(e,1,t),rc(e,t));break}}e=e.return}}function Ec(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Ml===t&&(Ll&n)===n&&(4===Dl||3===Dl&&(130023424&Ll)===Ll&&500>Qt()-Ul?dc(t,0):jl|=n),rc(t,e)}function Cc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Po(t,e))&&(ve(t,e,n),rc(t,n))}function kc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Cc(t,n)}function Tc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Cc(t,n)}function Mc(t,e){return Xt(t,e)}function Pc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(t,e,n,r){return new Pc(t,e,n,r)}function Oc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rc(t,e){var n=t.alternate;return null===n?((n=Lc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dc(t,e,n,r,i,s){var a=2;if(r=t,"function"===typeof t)Oc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Ic(n.children,i,s,e);case A:a=8,i|=8;break;case E:return(t=Lc(12,n,e,2|i)).elementType=E,t.lanes=s,t;case M:return(t=Lc(13,n,e,i)).elementType=M,t.lanes=s,t;case P:return(t=Lc(19,n,e,i)).elementType=P,t.lanes=s,t;case R:return Fc(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:a=10;break t;case k:a=9;break t;case T:a=11;break t;case L:a=14;break t;case O:a=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Lc(a,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Ic(t,e,n,r){return(t=Lc(7,t,r,e)).lanes=n,t}function Fc(t,e,n,r){return(t=Lc(22,t,r,e)).elementType=R,t.lanes=n,t.stateNode={isHidden:!1},t}function Nc(t,e,n){return(t=Lc(6,t,null,e)).lanes=n,t}function jc(t,e,n){return(e=Lc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(t,e,n,r,i,o,s,a,l){return t=new zc(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Lc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),t}function Uc(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Vc(t){if(!t)return ki;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Oi(n))return Ii(t,n,e)}return e}function Hc(t,e,n,r,i,o,s,a,l){return(t=Bc(n,r,!0,t,0,o,0,a,l)).context=Vc(null),n=t.current,(o=Do(r=tc(),i=ec(n))).callback=void 0!==e&&null!==e?e:null,Io(n,o,i),t.current.lanes=i,ve(t,i,r),rc(t,r),t}function Wc(t,e,n,r){var i=e.current,o=tc(),s=ec(i);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Do(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Io(i,e,s))&&(nc(t,i,s,o),Fo(t,i,s)),s}function Gc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Yc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xc(t,e){Yc(t,e),(t=t.alternate)&&Yc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Mi.current)ba=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return ba=!1,function(t,e,n){switch(e.tag){case 3:Pa(e),po();break;case 5:ss(e);break;case 1:Oi(e.type)&&Fi(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ci(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Na(t,e,n):(Ci(ls,1&ls.current),null!==(t=Wa(t,e,n))?t.sibling:null);Ci(ls,1&ls.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Va(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,n)}return Wa(t,e,n)}(t,e,n);ba=0!==(131072&t.flags)}else ba=!1,io&&0!==(1048576&e.flags)&&$i(e,Yi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ha(t,e),t=e.pendingProps;var i=Li(e,Ti.current);Eo(e,n),i=As(null,e,r,t,i,n);var s=Es();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(s=!0,Fi(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,Yo(e,r,t,n),e=Ma(null,e,r,!0,s,n)):(e.tag=0,io&&s&&to(e),xa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ha(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Oc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===L)return 14}return 2}(r),t=vo(r,t),i){case 0:e=ka(null,e,r,t,n);break t;case 1:e=Ta(null,e,r,t,n);break t;case 11:e=wa(null,e,r,t,n);break t;case 14:e=Sa(null,e,r,vo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,ka(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ta(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 3:t:{if(Pa(e),null===t)throw Error(o(387));r=e.pendingProps,i=(s=e.memoizedState).element,Ro(t,e),jo(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=La(t,e,r,n,i=ua(Error(o(423)),e));break t}if(r!==i){e=La(t,e,r,n,i=ua(Error(o(424)),e));break t}for(ro=ci(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Jo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Wa(t,e,n);break t}xa(t,e,r,n)}e=e.child}return e;case 5:return ss(e),null===t&&co(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(e.flags|=32),Ca(t,e),xa(t,e,a,n),e.child;case 6:return null===t&&co(e),null;case 13:return Na(t,e,n);case 4:return is(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Qo(e,null,r,n):xa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,wa(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ci(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Mi.current){e=Wa(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Do(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Eo(e,n),r=r(i=Co(i)),e.flags|=1,xa(t,e,r,n),e.child;case 14:return i=vo(r=e.type,e.pendingProps),Sa(t,e,r,i=vo(r.type,i),n);case 15:return Aa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),Ha(t,e),e.tag=1,Oi(r)?(t=!0,Fi(e)):t=!1,Eo(e,n),Wo(e,r,i),Yo(e,r,i,n),Ma(null,e,r,!0,t,n);case 19:return Va(t,e,n);case 22:return Ea(t,e,n)}throw Error(o(156,e.tag))};var qc="function"===typeof reportError?reportError:function(t){console.error(t)};function Zc(t){this._internalRoot=t}function Kc(t){this._internalRoot=t}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $c(){}function tu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Gc(s);a.call(t)}}Wc(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Gc(s);o.call(t)}}var s=Hc(e,r,t,0,null,!1,0,"",$c);return t._reactRootContainer=s,t[pi]=s.current,Vr(8===t.nodeType?t.parentNode:t),uc(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Gc(l);a.call(t)}}var l=Bc(t,0,!1,null,0,!1,0,"",$c);return t._reactRootContainer=l,t[pi]=l.current,Vr(8===t.nodeType?t.parentNode:t),uc((function(){Wc(e,l,n,r)})),l}(n,e,t,i,r);return Gc(s)}Kc.prototype.render=Zc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wc(t,e,null,null)},Kc.prototype.unmount=Zc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc((function(){Wc(null,t,null,null)})),e[pi]=null}},Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ae();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Re.length&&0!==e&&e<Re[n].priority;n++);Re.splice(n,0,t),0===n&&Ne(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),rc(e,Qt()),0===(6&Tl)&&(Vl=Qt()+500,Vi()))}break;case 13:uc((function(){var e=Po(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}})),Xc(t,1)}},we=function(t){if(13===t.tag){var e=Po(t,134217728);if(null!==e)nc(e,t,134217728,tc());Xc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),n=Po(t,e);if(null!==n)nc(n,t,e,tc());Xc(t,e)}},Ae=function(){return _e},Ee=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xi(r);if(!i)throw Error(o(90));X(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=cc,Mt=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,xi,Ct,kt,cc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),oe=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(e))throw Error(o(200));return Uc(t,e,null,n)},e.createRoot=function(t,e){if(!Qc(t))throw Error(o(299));var n=!1,r="",i=qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Bc(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Zc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qc(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Hc(e,null,t,1,null!=n?n:null,i,0,s,a),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(o(40));return!!t._reactRootContainer&&(uc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},250:(t,e,n)=>{"use strict";var r=n(164);e.s=r.createRoot,r.hydrateRoot},164:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(463)},372:(t,e)=>{"use strict";var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,l=60110,c=60112,u=60113,h=60120,d=60115,f=60116,p=60121,g=60122,m=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),o=_("react.strict_mode"),s=_("react.profiler"),a=_("react.provider"),l=_("react.context"),c=_("react.forward_ref"),u=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),f=_("react.lazy"),p=_("react.block"),g=_("react.server.block"),m=_("react.fundamental"),v=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case i:case s:case o:case u:case h:return t;default:switch(t=t&&t.$$typeof){case l:case c:case f:case d:case a:return t;default:return e}}case r:return e}}}e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===i||t===s||t===v||t===o||t===u||t===h||t===y||"object"===typeof t&&null!==t&&(t.$$typeof===f||t.$$typeof===d||t.$$typeof===a||t.$$typeof===l||t.$$typeof===c||t.$$typeof===m||t.$$typeof===p||t[0]===g)},e.typeOf=b},441:(t,e,n)=>{"use strict";t.exports=n(372)},374:(t,e,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},117:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function _(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,g(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)w.call(e,i)&&!A.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:S.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var k=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function M(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=t),t=""===o?"."+T(l,0):o,x(s)?(i="",null!=t&&(i=t.replace(k,"$&/")+"/"),M(s,e,i,"",(function(t){return t}))):null!=s&&(C(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",x(t))for(var c=0;c<t.length;c++){var u=o+T(a=t[c],c);l+=M(a,e,i,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=M(a=a.value,e,i,u=o+T(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var r=[],i=0;return M(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=s,e.PureComponent=_,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=R.transition;R.transition={};try{t()}finally{R.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},791:(t,e,n)=>{"use strict";t.exports=n(117)},184:(t,e,n)=>{"use strict";t.exports=n(374)},813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],c=a+1,u=t[c];if(0>o(l,n))c<i&&0>o(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function x(t){if(m=!1,b(t),!g)if(null!==r(c))g=!0,R(w);else{var e=r(u);null!==e&&D(x,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var o=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||t&&!M());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,E=null,C=-1,k=5,T=-1;function M(){return!(e.unstable_now()-T<k)}function P(){if(null!==E){var t=e.unstable_now();T=t;var n=!0;try{n=E(!0,t)}finally{n?S():(A=!1,E=null)}}else A=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function R(t){E=t,A||(A=!0,S())}function D(t,n){C=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,R(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(u,t),null===r(c)&&t===r(u)&&(m?(y(C),C=-1):m=!0,D(x,o-s))):(t.sortIndex=a,n(c,t),g||p||(g=!0,R(w))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},296:(t,e,n)=>{"use strict";t.exports=n(813)},613:t=>{t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=t[c],h=e[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},391:t=>{"use strict";var e=function(){};t.exports=e},521:()=>{},214:()=>{}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>r[t]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".4cf9c906.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="ncc-cas:";n.l=(r,i,o,s)=>{if(t[r])t[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+o),a.src=r),t[r]=[i];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/ncc-cas-dev/",(()=>{var t={179:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(e),a=new Error;n.l(s,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(e&&e(r);c<s.length;c++)o=s[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunkncc_cas=self.webpackChunkncc_cas||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";var t=n(791),e=n(250),r=n(694),i=n.n(r);const o=t.createContext(null);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n(176);function l(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function c(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}function u(e,n){return Object.keys(n).reduce((function(r,i){var o,u=r,h=u[l(i)],d=u[i],f=a(u,[l(i),i].map(c)),p=n[i],g=function(e,n,r){var i=(0,t.useRef)(void 0!==e),o=(0,t.useState)(n),s=o[0],a=o[1],l=void 0!==e,c=i.current;return i.current=l,!l&&c&&s!==n&&a(n),[l?e:s,(0,t.useCallback)((function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[t].concat(n)),a(t)}),[r])]}(d,h,e[p]),m=g[0],v=g[1];return s({},f,((o={})[i]=m,o[p]=v,o))}),e)}function h(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function d(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function f(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}h.__suppressDeprecationWarning=!0,d.__suppressDeprecationWarning=!0,f.__suppressDeprecationWarning=!0;var p=/-(.)/g;var g=n(184);const m=["xxl","xl","lg","md","sm","xs"],v=t.createContext({prefixes:{},breakpoints:m}),{Consumer:y,Provider:_}=v;function b(e,n){const{prefixes:r}=(0,t.useContext)(v);return e||r[n]||n}const x=t=>t[0].toUpperCase()+function(t){return t.replace(p,(function(t,e){return e.toUpperCase()}))}(t).slice(1);function w(e){let{displayName:n=x(e),Component:r,defaultProps:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t.forwardRef(((t,n)=>{let{className:o,bsPrefix:s,as:a=r||"div",...l}=t;const c=b(s,e);return(0,g.jsx)(a,{ref:n,className:i()(o,c),...l})}));return s.defaultProps=o,s.displayName=n,s}const S=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,as:o,...s}=t;n=b(n,"navbar-brand");const a=o||(s.href?"a":"span");return(0,g.jsx)(a,{...s,ref:e,className:i()(r,n)})}));S.displayName="NavbarBrand";const A=S;function E(t){return t&&t.ownerDocument||document}function C(t,e){return function(t){var e=E(t);return e&&e.defaultView||window}(t).getComputedStyle(t,e)}var k=/([A-Z])/g;var T=/^ms-/;function M(t){return function(t){return t.replace(k,"-$1").toLowerCase()}(t).replace(T,"-ms-")}var P=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const L=function(t,e){var n="",r="";if("string"===typeof e)return t.style.getPropertyValue(M(e))||C(t).getPropertyValue(M(e));Object.keys(e).forEach((function(i){var o=e[i];o||0===o?!function(t){return!(!t||!P.test(t))}(i)?n+=M(i)+": "+o+";":r+=i+"("+o+") ":t.style.removeProperty(M(i))})),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n};function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function R(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,O(t,e)}var D=n(164);const I=!1,F=t.createContext(null);var N="unmounted",j="exited",z="entering",B="entered",U="exiting",V=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=j,r.appearStatus=z):i=B:i=t.unmountOnExit||t.mountOnEnter?N:j,r.state={status:i},r.nextCallback=null,r}R(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===N?{status:j}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==z&&n!==B&&(e=z):n!==z&&n!==B||(e=U)}this.updateStatus(!1,e)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},r.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===z?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===j&&this.setState({status:N})},r.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[D.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!t&&!n||I?this.safeSetState({status:B},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:z},(function(){e.props.onEntering(o,s),e.onTransitionEnd(l,(function(){e.safeSetState({status:B},(function(){e.props.onEntered(o,s)}))}))})))},r.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:D.findDOMNode(this);e&&!I?(this.props.onExit(r),this.safeSetState({status:U},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:j},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:j},(function(){t.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},r.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:D.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===N)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,a(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(F.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function H(){}V.contextType=F,V.propTypes={},V.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:H,onEntering:H,onEntered:H,onExit:H,onExiting:H,onExited:H},V.UNMOUNTED=N,V.EXITED=j,V.ENTERING=z,V.ENTERED=B,V.EXITING=U;const W=V,G=!("undefined"===typeof window||!window.document||!window.document.createElement);var Y=!1,X=!1;try{var q={get passive(){return Y=!0},get once(){return X=Y=!0}};G&&(window.addEventListener("test",q,q),window.removeEventListener("test",q,!0))}catch(Gk){}const Z=function(t,e,n,r){if(r&&"boolean"!==typeof r&&!X){var i=r.once,o=r.capture,s=n;!X&&i&&(s=n.__once||function t(r){this.removeEventListener(e,t,o),n.call(this,r)},n.__once=s),t.addEventListener(e,s,Y?r:o)}t.addEventListener(e,n,r)};const K=function(t,e,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)};const Q=function(t,e,n,r){return Z(t,e,n,r),function(){K(t,e,n,r)}};function J(t,e,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}(t,"transitionend",!0)}),e+n),o=Q(t,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function $(t,e,n,r){null==n&&(n=function(t){var e=L(t,"transitionDuration")||"",n=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*n}(t)||0);var i=J(t,n,r),o=Q(t,"transitionend",e);return function(){i(),o()}}function tt(t,e){const n=L(t,e)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function et(t,e){const n=tt(t,"transitionDuration"),r=tt(t,"transitionDelay"),i=$(t,(n=>{n.target===t&&(i(),e(n))}),n+r)}const nt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((t=>null!=t)).reduce(((t,e)=>{if("function"!==typeof e)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),null)};function rt(t){t.offsetHeight}var it=function(t){return t&&"function"!==typeof t?function(e){t.current=e}:t};const ot=function(e,n){return(0,t.useMemo)((function(){return function(t,e){var n=it(t),r=it(e);return function(t){n&&n(t),r&&r(t)}}(e,n)}),[e,n])};const st=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:s,onExiting:a,onExited:l,addEndListener:c,children:u,childRef:h,...d}=e;const f=(0,t.useRef)(null),p=ot(f,h),m=t=>{var e;p((e=t)&&"setState"in e?D.findDOMNode(e):null!=e?e:null)},v=t=>e=>{t&&f.current&&t(f.current,e)},y=(0,t.useCallback)(v(r),[r]),_=(0,t.useCallback)(v(i),[i]),b=(0,t.useCallback)(v(o),[o]),x=(0,t.useCallback)(v(s),[s]),w=(0,t.useCallback)(v(a),[a]),S=(0,t.useCallback)(v(l),[l]),A=(0,t.useCallback)(v(c),[c]);return(0,g.jsx)(W,{ref:n,...d,onEnter:y,onEntered:b,onEntering:_,onExit:x,onExited:S,onExiting:w,addEndListener:A,nodeRef:f,children:"function"===typeof u?(t,e)=>u(t,{...e,ref:m}):t.cloneElement(u,{ref:m})})})),at=st,lt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ct(t,e){const n=e["offset".concat(t[0].toUpperCase()).concat(t.slice(1))],r=lt[t];return n+parseInt(L(e,r[0]),10)+parseInt(L(e,r[1]),10)}const ut={[j]:"collapse",[U]:"collapsing",[z]:"collapsing",[B]:"collapse show"},ht={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:ct},dt=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:o,onEntered:s,onExit:a,onExiting:l,className:c,children:u,dimension:h="height",getDimensionValue:d=ct,...f}=e;const p="function"===typeof h?h():h,m=(0,t.useMemo)((()=>nt((t=>{t.style[p]="0"}),r)),[p,r]),v=(0,t.useMemo)((()=>nt((t=>{const e="scroll".concat(p[0].toUpperCase()).concat(p.slice(1));t.style[p]="".concat(t[e],"px")}),o)),[p,o]),y=(0,t.useMemo)((()=>nt((t=>{t.style[p]=null}),s)),[p,s]),_=(0,t.useMemo)((()=>nt((t=>{t.style[p]="".concat(d(p,t),"px"),rt(t)}),a)),[a,d,p]),b=(0,t.useMemo)((()=>nt((t=>{t.style[p]=null}),l)),[p,l]);return(0,g.jsx)(at,{ref:n,addEndListener:et,...f,"aria-expanded":f.role?f.in:null,onEnter:m,onEntering:v,onEntered:y,onExit:_,onExiting:b,childRef:u.ref,children:(e,n)=>t.cloneElement(u,{...n,className:i()(c,u.props.className,ut[e],"width"===p&&"collapse-horizontal")})})}));dt.defaultProps=ht;const ft=dt,pt=t.createContext(null);pt.displayName="NavbarContext";const gt=pt,mt=t.forwardRef(((e,n)=>{let{children:r,bsPrefix:i,...o}=e;i=b(i,"navbar-collapse");const s=(0,t.useContext)(gt);return(0,g.jsx)(ft,{in:!(!s||!s.expanded),...o,children:(0,g.jsx)("div",{ref:n,className:i,children:r})})}));mt.displayName="NavbarCollapse";const vt=mt;const yt=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function _t(e){var n=yt(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}const bt=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,children:s,label:a,as:l="button",onClick:c,...u}=e;r=b(r,"navbar-toggler");const{onToggle:h,expanded:d}=(0,t.useContext)(gt)||{},f=_t((t=>{c&&c(t),h&&h()}));return"button"===l&&(u.type="button"),(0,g.jsx)(l,{...u,ref:n,onClick:f,"aria-label":a,className:i()(o,r,!d&&"collapsed"),children:s||(0,g.jsx)("span",{className:"".concat(r,"-icon")})})}));bt.displayName="NavbarToggle",bt.defaultProps={label:"Toggle navigation"};const xt=bt;var wt="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;const St="undefined"!==typeof document||wt?t.useLayoutEffect:t.useEffect;var At=new WeakMap,Et=function(t,e){if(t&&e){var n=At.get(e)||new Map;At.set(e,n);var r=n.get(t);return r||((r=e.matchMedia(t)).refCount=0,n.set(r.media,r)),r}};function Ct(e,n){void 0===n&&(n="undefined"===typeof window?void 0:window);var r=Et(e,n),i=(0,t.useState)((function(){return!!r&&r.matches})),o=i[0],s=i[1];return St((function(){var t=Et(e,n);if(!t)return s(!1);var r=At.get(n),i=function(){s(t.matches)};return t.refCount++,t.addListener(i),i(),function(){t.removeListener(i),t.refCount--,t.refCount<=0&&(null==r||r.delete(t.media)),t=void 0}}),[e]),o}const kt=function(e){var n=Object.keys(e);function r(t,e){return t===e?e:t?t+" and "+e:e}function i(t){var r=function(t){return n[Math.min(n.indexOf(t)+1,n.length-1)]}(t),i=e[r];return"(max-width: "+(i="number"===typeof i?i-.2+"px":"calc("+i+" - 0.2px)")+")"}return function(n,o,s){var a,l;"object"===typeof n?(a=n,s=o,o=!0):((l={})[n]=o=o||!0,a=l);var c=(0,t.useMemo)((function(){return Object.entries(a).reduce((function(t,n){var o=n[0],s=n[1];return"up"!==s&&!0!==s||(t=r(t,function(t){var n=e[t];return"number"===typeof n&&(n+="px"),"(min-width: "+n+")"}(o))),"down"!==s&&!0!==s||(t=r(t,i(o))),t}),"")}),[JSON.stringify(a)]);return Ct(c,s)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function Tt(t){void 0===t&&(t=E());try{var e=t.activeElement;return e&&e.nodeName?e:null}catch(Gk){return t.body}}function Mt(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(16&t.compareDocumentPosition(e)):void 0}function Pt(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}const Lt=function(t){return"".concat("data-rr-ui-").concat(t)}("modal-open");const Ot=class{constructor(){let{ownerDocument:t,handleContainerOverflow:e=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=e,this.isRTL=n,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[n]:r.style[n]},t.scrollBarWidth&&(e[n]="".concat(parseInt(L(r,n)||"0",10)+t.scrollBarWidth,"px")),r.setAttribute(Lt,""),L(r,e)}reset(){[...this.modals].forEach((t=>this.remove(t)))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(Lt),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return-1!==e?e:(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),0!==e||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e)}remove(t){const e=this.modals.indexOf(t);-1!==e&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}},Rt=(0,t.createContext)(G?window:void 0);Rt.Provider;function Dt(){return(0,t.useContext)(Rt)}const It=(t,e)=>{var n;return G?null==t?(e||E()).body:("function"===typeof t&&(t=t()),t&&"current"in t&&(t=t.current),null!=(n=t)&&n.nodeType&&t||null):null};const Ft=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let Nt;function jt(e){const n=Dt(),r=e||function(t){return Nt||(Nt=new Ot({ownerDocument:null==t?void 0:t.document})),Nt}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,t.useCallback)((t=>{i.current.dialog=t}),[]),setBackdropRef:(0,t.useCallback)((t=>{i.current.backdrop=t}),[])})}const zt=(0,t.forwardRef)(((e,n)=>{let{show:r=!1,role:i="dialog",className:o,style:s,children:a,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:d,backdropTransition:f,autoFocus:p=!0,enforceFocus:m=!0,restoreFocus:v=!0,restoreFocusOptions:y,renderDialog:_,renderBackdrop:b=(t=>(0,g.jsx)("div",Object.assign({},t))),manager:x,container:w,onShow:S,onHide:A=(()=>{}),onExit:E,onExited:C,onExiting:k,onEnter:T,onEntering:M,onEntered:P}=e,L=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,Ft);const O=function(e,n){const r=Dt(),[i,o]=(0,t.useState)((()=>It(e,null==r?void 0:r.document)));if(!i){const t=It(e);t&&o(t)}return(0,t.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,t.useEffect)((()=>{const t=It(e);t!==i&&o(t)}),[e,i]),i}(w),R=jt(x),I=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),F=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(r),[N,j]=(0,t.useState)(!r),z=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(()=>R),[R]),G&&!F&&r&&(z.current=Tt()),d||r||N?r&&N&&j(!1):j(!0);const B=_t((()=>{if(R.add(),X.current=Q(document,"keydown",W),Y.current=Q(document,"focus",(()=>setTimeout(V)),!0),S&&S(),p){const t=Tt(document);R.dialog&&t&&!Mt(R.dialog,t)&&(z.current=t,R.dialog.focus())}})),U=_t((()=>{var t;(R.remove(),null==X.current||X.current(),null==Y.current||Y.current(),v)&&(null==(t=z.current)||null==t.focus||t.focus(y),z.current=null)}));(0,t.useEffect)((()=>{r&&O&&B()}),[r,O,B]),(0,t.useEffect)((()=>{N&&U()}),[N,U]),Pt((()=>{U()}));const V=_t((()=>{if(!m||!I()||!R.isTopModal())return;const t=Tt();R.dialog&&t&&!Mt(R.dialog,t)&&R.dialog.focus()})),H=_t((t=>{t.target===t.currentTarget&&(null==u||u(t),!0===l&&A())})),W=_t((t=>{c&&27===t.keyCode&&R.isTopModal()&&(null==h||h(t),t.defaultPrevented||A())})),Y=(0,t.useRef)(),X=(0,t.useRef)(),q=function(){j(!0),null==C||C(...arguments)},Z=d;if(!O||!(r||Z&&!N))return null;const K=Object.assign({role:i,ref:R.setDialogRef,"aria-modal":"dialog"===i||void 0},L,{style:s,className:o,tabIndex:-1});let J=_?_(K):(0,g.jsx)("div",Object.assign({},K,{children:t.cloneElement(a,{role:"document"})}));Z&&(J=(0,g.jsx)(Z,{appear:!0,unmountOnExit:!0,in:!!r,onExit:E,onExiting:k,onExited:q,onEnter:T,onEntering:M,onEntered:P,children:J}));let $=null;if(l){const t=f;$=b({ref:R.setBackdropRef,onClick:H}),t&&($=(0,g.jsx)(t,{appear:!0,in:!!r,children:$}))}return(0,g.jsx)(g.Fragment,{children:D.createPortal((0,g.jsxs)(g.Fragment,{children:[$,J]}),O)})}));zt.displayName="Modal";const Bt=Object.assign(zt,{Manager:Ot}),Ut={[z]:"show",[B]:"show"},Vt=t.forwardRef(((e,n)=>{let{className:r,children:o,transitionClasses:s={},...a}=e;const l=(0,t.useCallback)(((t,e)=>{rt(t),null==a.onEnter||a.onEnter(t,e)}),[a]);return(0,g.jsx)(at,{ref:n,addEndListener:et,...a,onEnter:l,childRef:o.ref,children:(e,n)=>t.cloneElement(o,{...n,className:i()("fade",r,o.props.className,Ut[e],s[e])})})}));Vt.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Vt.displayName="Fade";const Ht=Vt,Wt=w("offcanvas-body"),Gt={[z]:"show",[B]:"show"},Yt=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,children:s,...a}=e;return r=b(r,"offcanvas"),(0,g.jsx)(at,{ref:n,addEndListener:et,...a,childRef:s.ref,children:(e,n)=>t.cloneElement(s,{...n,className:i()(o,s.props.className,(e===z||e===U)&&"".concat(r,"-toggling"),Gt[e])})})}));Yt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Yt.displayName="OffcanvasToggling";const Xt=Yt,qt=t.createContext({onHide(){}});var Zt=n(7),Kt=n.n(Zt);const Qt={"aria-label":Kt().string,onClick:Kt().func,variant:Kt().oneOf(["white"])},Jt=t.forwardRef(((t,e)=>{let{className:n,variant:r,...o}=t;return(0,g.jsx)("button",{ref:e,type:"button",className:i()("btn-close",r&&"btn-close-".concat(r),n),...o})}));Jt.displayName="CloseButton",Jt.propTypes=Qt,Jt.defaultProps={"aria-label":"Close"};const $t=Jt,te=t.forwardRef(((e,n)=>{let{closeLabel:r,closeVariant:i,closeButton:o,onHide:s,children:a,...l}=e;const c=(0,t.useContext)(qt),u=_t((()=>{null==c||c.onHide(),null==s||s()}));return(0,g.jsxs)("div",{ref:n,...l,children:[a,o&&(0,g.jsx)($t,{"aria-label":r,variant:i,onClick:u})]})}));te.defaultProps={closeLabel:"Close",closeButton:!1};const ee=te,ne=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,...o}=t;return n=b(n,"offcanvas-header"),(0,g.jsx)(ee,{ref:e,...o,className:i()(r,n)})}));ne.displayName="OffcanvasHeader",ne.defaultProps={closeLabel:"Close",closeButton:!1};const re=ne,ie=e=>t.forwardRef(((t,n)=>(0,g.jsx)("div",{...t,ref:n,className:i()(t.className,e)}))),oe=w("offcanvas-title",{Component:ie("h5")});var se=Function.prototype.bind.call(Function.prototype.call,[].slice);function ae(t,e){return se(t.querySelectorAll(e))}function le(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const ce=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ue=".sticky-top",he=".navbar-toggler";class de extends Ot{adjustAndStore(t,e,n){const r=e.style[t];e.dataset[t]=r,L(e,{[t]:"".concat(parseFloat(L(e,t))+n,"px")})}restore(t,e){const n=e.dataset[t];void 0!==n&&(delete e.dataset[t],L(e,{[t]:n}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();var n,r;if(r="modal-open",(n=e).classList?n.classList.add(r):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";ae(e,ce).forEach((e=>this.adjustAndStore(i,e,t.scrollBarWidth))),ae(e,ue).forEach((e=>this.adjustAndStore(o,e,-t.scrollBarWidth))),ae(e,he).forEach((e=>this.adjustAndStore(o,e,t.scrollBarWidth)))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();var n,r;r="modal-open",(n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=le(n.className,r):n.setAttribute("class",le(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";ae(e,ce).forEach((t=>this.restore(i,t))),ae(e,ue).forEach((t=>this.restore(o,t))),ae(e,he).forEach((t=>this.restore(o,t)))}}let fe;const pe=de;function ge(t){return(0,g.jsx)(Xt,{...t})}function me(t){return(0,g.jsx)(Ht,{...t})}const ve=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,children:s,"aria-labelledby":a,placement:l,show:c,backdrop:u,keyboard:h,scroll:d,onEscapeKeyDown:f,onShow:p,onHide:m,container:v,autoFocus:y,enforceFocus:_,restoreFocus:x,restoreFocusOptions:w,onEntered:S,onExit:A,onExiting:E,onEnter:C,onEntering:k,onExited:T,backdropClassName:M,manager:P,...L}=e;const O=(0,t.useRef)();r=b(r,"offcanvas");const{onToggle:R}=(0,t.useContext)(gt)||{},D=_t((()=>{null==R||R(),null==m||m()})),I=(0,t.useMemo)((()=>({onHide:D})),[D]);const F=(0,t.useCallback)((t=>(0,g.jsx)("div",{...t,className:i()("".concat(r,"-backdrop"),M)})),[M,r]);return(0,g.jsx)(qt.Provider,{value:I,children:(0,g.jsx)(Bt,{show:c,ref:n,backdrop:u,container:v,keyboard:h,autoFocus:y,enforceFocus:_&&!d,restoreFocus:x,restoreFocusOptions:w,onEscapeKeyDown:f,onShow:p,onHide:D,onEnter:function(t){t&&(t.style.visibility="visible");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];null==C||C(t,...n)},onEntering:k,onEntered:S,onExit:A,onExiting:E,onExited:function(t){t&&(t.style.visibility="");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];null==T||T(...n)},manager:P||(d?(O.current||(O.current=new pe({handleContainerOverflow:!1})),O.current):function(t){return fe||(fe=new de(t)),fe}()),transition:ge,backdropTransition:me,renderBackdrop:F,renderDialog:t=>(0,g.jsx)("div",{role:"dialog",...t,...L,className:i()(o,r,"".concat(r,"-").concat(l)),"aria-labelledby":a,children:s})})})}));ve.displayName="Offcanvas",ve.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};const ye=Object.assign(ve,{Body:Wt,Header:re,Title:oe}),_e=t.forwardRef(((e,n)=>{let{className:r,bsPrefix:o,backdrop:s,backdropClassName:a,keyboard:l,scroll:c,placement:u,autoFocus:h,enforceFocus:d,restoreFocus:f,restoreFocusOptions:p,onShow:m,onHide:v,onEscapeKeyDown:y,onEnter:_,onEntering:x,onEntered:w,onExit:S,onExiting:A,onExited:E,...C}=e;const k=(0,t.useContext)(gt);o=b(o,"offcanvas");const T="string"===typeof(null==k?void 0:k.expand),M=kt(T?k.expand:"xs","up");return T&&M?(0,g.jsx)("div",{ref:n,...C,className:i()(r,o,"".concat(o,"-").concat(u))}):(0,g.jsx)(ye,{ref:n,show:!(null==k||!k.expanded),bsPrefix:o,backdrop:s,backdropClassName:a,keyboard:l,scroll:c,placement:u,autoFocus:h,enforceFocus:d,restoreFocus:f,restoreFocusOptions:p,onShow:m,onHide:v,onEscapeKeyDown:y,onEnter:_,onEntering:x,onEntered:w,onExit:S,onExiting:A,onExited:E,...C})}));_e.displayName="NavbarOffcanvas";const be=_e,xe=w("navbar-text",{Component:"span"}),we=t.forwardRef(((e,n)=>{const{bsPrefix:r,expand:s,variant:a,bg:l,fixed:c,sticky:h,className:d,as:f="nav",expanded:p,onToggle:m,onSelect:v,collapseOnSelect:y,..._}=u(e,{expanded:"onToggle"}),x=b(r,"navbar"),w=(0,t.useCallback)((function(){null==v||v(...arguments),y&&p&&(null==m||m(!1))}),[v,y,p,m]);void 0===_.role&&"nav"!==f&&(_.role="navigation");let S="".concat(x,"-expand");"string"===typeof s&&(S="".concat(S,"-").concat(s));const A=(0,t.useMemo)((()=>({onToggle:()=>null==m?void 0:m(!p),bsPrefix:x,expanded:!!p,expand:s})),[x,p,s,m]);return(0,g.jsx)(gt.Provider,{value:A,children:(0,g.jsx)(o.Provider,{value:w,children:(0,g.jsx)(f,{ref:n,..._,className:i()(d,x,s&&S,a&&"".concat(x,"-").concat(a),l&&"bg-".concat(l),h&&"sticky-".concat(h),c&&"fixed-".concat(c))})})})}));we.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},we.displayName="Navbar";const Se=Object.assign(we,{Brand:A,Collapse:vt,Offcanvas:be,Text:xe,Toggle:xt}),Ae=t.forwardRef(((t,e)=>{let{bsPrefix:n,fluid:r,as:o="div",className:s,...a}=t;const l=b(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,g.jsx)(o,{ref:e,...a,className:i()(s,r?"".concat(l).concat(c):l)})}));Ae.displayName="Container",Ae.defaultProps={fluid:!1};const Ee=Ae;const Ce=n.p+"static/media/stantec.d8032f6eec2e08b9db0d8c23a146379f.svg";function ke(){return(0,g.jsx)(Se,{variant:"dark",expand:"lg",style:{background:"#343e48",zIndex:100},children:(0,g.jsxs)(Ee,{fluid:!0,children:[(0,g.jsx)(Se.Brand,{children:(0,g.jsxs)("div",{children:[(0,g.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAABMCAYAAADA+U17AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQwMDJEODI0QzJDQzExRTg4NjIxODU2RTI4Q0E0Q0M4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQwMDJEODI1QzJDQzExRTg4NjIxODU2RTI4Q0E0Q0M4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDAwMkQ4MjJDMkNDMTFFODg2MjE4NTZFMjhDQTRDQzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDAwMkQ4MjNDMkNDMTFFODg2MjE4NTZFMjhDQTRDQzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz731VbkAAAXBElEQVR42uxdCXhVxRmdYEAUDFRQC1i0UESUUJBqy1IBxYJsrSLgWkVBQUBCFVvBlrgV3MUK2Bpaq4AgqFQEQayI1eICVdncQFCqgNEiiqJAQv/DO9dMhrnbu/cleXr/75vvJe/NzN3O/HP+ZebmqAzLqCVd68jHVCm/lPKFlAl3dnl6QqaPu3fvXpXId1eqVcAx/iKlr5RcKQD5eAH7ucmtTyTbgd3b8l2f5NYnku3APsjyXU2DrlRPHkUicUpuTDwaA+QmKcMJ2rlSLhMu/T+fdu1JVY6Xv9+Xz5HSZm7yWBKJKjkxAfty+ZhkfP2mlG5S3rM0+YeU+6XMMDT6LinHCLjfS4zHRKoCFTnd8t2xUv7tUv+nUh6x0JQaUk5OHksiVYKKiBS7fN/I5fvve/T1cfJYEqkqGvsOKV/G0M8yKYuTx5JIhXBs4dAnyMfNUppJWSvlN8KD3zTqgF48IaV+mufyjJQzpd/tRr/95eN3Ug4l6K8y6yQcO5HQGluA9T0CqquUo8inl8n3HfV6AraX5KOji7HoJ3PQrwXUY+VjlpQ2PPYgKX9LHlsicVCR06gtdakr5SkBXh8D3G/JRwcpq0Kcw2QpZ0vbXRqgq0mZKH/eaKn/S/ntoOTRJRIV2F+4fA9wPSYgu9gA9wfy8XMpzwXou1DqD5NSooEanpGHpFzh0gYDYHfy6BKJCuzF5NVu7aeSMujgBqWAD/tRl3alUoZIvesM6nGIfMyX0t/jfO6RdnuSR5eIp/EoYDpAPgvInXcAlwKcpQbgGsjHQimtPPq6G/1I271aO/RtA+ETUq+3cYzDeIwTPI7xZymmhsfgGqZS2YM7pUyS3xcmxmOisW9jOZXgeEbAcomhgTerVODEi16AOswklXDalbjULTFA3USlXH1eoL5O+htioS0zOahw/r2kLJDvu8R4jyqbzyf2RJrAvszyXZEHvXjMoz9QiPmkFIFE6v5YPl6Q0tSDtlwuxy802uUBxFL6mbOQlMEx3iMM5vPSbIs8mI1GCSMnSnk+jeNu9CivS1miUjnyl0pp4tPXWZY+btN+P9LneH5lpXG8BR511xAroLhwAXdyo9O5yt2XfaOA53CdXsjnV/JdP3oyLnVpB7fgEqkH912xD6g7q1TeSJ5LFRiJ50o/c0LSlpwYgY3MwwdVKpd8csi2uH9HRTh2Aa8Rs9E/Q7QLckzce8fwf1rKGCmvWOrVtvRX38BQlGs0YxINA/Z3Bj+RPHczaWqJrp3/HpZeSIGWv96jXVuV8nU38QA1Fh8s8gD1Z5ghLKAOQlseiNsWUakkr7EVOJs20majKzN8LCijFyv4+uKSxnw2GPj1dGADvI+EpRcCuHEqlaZa6tKuKacNm7ST8rBKJT3ZZCumGTnGEgPUrVUqscqLtlwq7Z7M0E28kdNwTgU8sMs5Wyga9i0rgJbi+q7NUlrdiYqy5jdTNr0X90gZ4tFwhUpFB4sNsEGrTNceQlRZT029PiRt+Zq0ZZ+LMUavyGtSfmx8V8R7VeLTdi4N8rA0CQbjJl0DcWa9KOA52y5+Ij+hTH5E5VLbpS1+e4n/45hmtFc/l6OlbDB+R6xhSsBzhSfrGp/7jfTmYo3Tt+VxbYJ1AdfmGOCBgTbOB3S/EPC8a7TrwoeYFxFEr0rpLv1/ZKEtMzw0PGhLH91NmWFgQ2ZLOZ8PMW5gD6bhadobP5TyQZrAzrFw56uk/MHyGzRf9wjABm+uG+P9bsPvdelGA9jMIEVAsUE1g14Ucgr0pBf0ZOjtltAY+SgCgJAE1cUC6qE+tGWLlJNN33sFCGaqx6UcnAE+P9LFiB0Z43EQsygksE35hZTDqjj1wODrYcFqLXy/n6tEADKFvNpNEyGX+jkBXCejHbRtB2r1sDJb2ZOgCumJcIuQrpPSXtq9Xkk3F1pjMT0mcQlyc453+Q2eqENivobbSQfMwdU+C3j1SirE/ZwXVsAIUB7hQ/vMpUNQjqdIEfR26wju10KcHLj9OUYS1AFSpvjQohUE9YZKvrkAwHMxargCj9/qKHc3a7qykxTQ5m3IBrFhrZFrrogA5llamltdqoAaPCwAvMxot5W05JkAJzVO6o8wookHqlSqqpch+zRpS3El3Egbf21Fb80PIvbdXJVfZodjzTPqgI7kxnxNtkXXtbIE2F/ZaJtnEpQA5zUfeoH29woYxxnttvMBzXFp57jlrjeoRx1yp74epwW+3VPafl5JNxJeF1vOOTwNywhO3VMTRkwOjcFyn/EdBs+AmK/pcMt3n2cJsI+0fLfNN7uPbrf2LtOVI4WgDnQbOu1ALc52qb9Afr/PADW4+1LOEm6CnJByuduVIPCT9nShabDQEQLP17w1QQULOi40vpvJgb7N+P7qGK+nLr0OprybBaCuSUPXlNWB1jzSUwF64RXWBXWYlWYSFLTdC8ruVnPkWulvpJ49WEkCICBnobfF6ILUJxgbhwT2YMPDUsrZaRepmUl9Tovpem5S+8cgdiv3HQaCCGbeTwOUyRGOkUtF19CmOAMv5hVAfUb3ymyPavvC5KQUgUTqtuUU3sSDtgyS499URbSE45+FwdjdBbwNyI13hnhIw43vkJfuuD5ty+FGR7yOY6RMUyn3rilwHmyP2H+dACWoq7QhqV5rOjWQ17Ja2ZPdQH/Xh1qlTgpwDj0ZbgLNvpTUwg/U+xKmlPsCYAADC3ynVqHpT4/WAdwITn3sYlAODdhnX4vhqWuzl+kF0uU05Z0fbwqCRYjcwimAxCEs47NlLX7t442qDMEgf4d0eCFnmeaWev+VMsIx/lRIcCMJaoTPxe9LRSXFcAM1fOVIUXTzy0JjIMr5jyrO8/6jUouYbRHBQwP2Ybr4YNc8ZXw3KaLWRgS0D22YH/hQordV9slqKpktKorbCB4NAScWINzrMkCaePC0juSobgMLIEHAZlWW3FRoP+RXPMMpM4xg24qfWbR1qcWQvJ1GpiPwjlxDTRVV4AUZqLwT4oLKTheKY8q6mO7/DVL+qDTXXyR/KDwbAm5MwzOUsYMqxS1oUc+j27epqd/LMo2xid6jxT5GsJ+2hpyr7Fstm4azE2aPwrdhIzxAYGyO6V6Ast5fgfe+sTL82XFtSnkyjaWoSVDgkr3iCLxkMAkKA+5oH6MJnLCDy+/6PYcPdkNEBfM5qcV2jwGgyK8VAYCAzEbOqK8ob3/7Raryk6DO5qy4m7PU7y3tevG+R9fYmuZG7sjPSewbpNnNIhqKX6rsln22Aaf07j51h8XwDGCjIMx+q0+9X1XgPcilEyGorPOhU2+pstD59ZzNTPDv245apdyI8W38LoBcSS2VDm9CPnefbwGoHfmSxpqXa/RgFV/eB+hIjSp0/QjHLwlRzgrR9x7OFubuB3AJ3hWrxtbAvYGbuWMFS9uAzXAyv6kCgZe4xXGNQoMPsvx+gcVrAl4aJFMRhlkz7f9GnKIfVN8Ngfa+RaX82bpcSGUyP+5kGoC7mKtdkFPhFx27Wurf+i1+ACXUypgerzJ4tpkXgvzoK1SwHI2v1f5ROxiQ01z49bdRQEmwoLeFjZJk5B00AtYdJPOzPB74wG85qHVDDqDTF8p2szyQB1TwxKNplrr5Kr4wezYIBjdW2ZfaKElGF6WK5s4h1dD34YOPs5+Aen5G0RSfVwQRLvN1ImvT7AvAW8ybb2bUbXQMn4ACf7m5ZhEh+A9VKvRsm77TEdAlMzcbXpX3+Te4/XER7zHiFsUu99sxHncGfD77uZ485dgFm+vQGu3CzmrxIeOk4Kab82aPBu+4APwsWuXgm5MF1Gss/VenF8HRZvU4GpHfjVDq49L/i5UA7ESyUHICABqJ/1eTI/r5qbFL1CgBYKjgihwDOQvjlX+iPnyuVwQBeALsBNhegEMAYW4IDwcEkazzBXzzAgAaU8hUeg+CCrT4WOl/QgLsREIDW0CHDVoQcGmURr8A33AB3xSP/pHRh2hYuotGsVBhqByjpIKAnUcaVo98+F8qFQmD0YbV+0iGOsFjsKP9swaPhoENn7e5jA75IKeoVPQO9O4FVT6HHTNbJ3LL5ar8IpCe7FPfbAg0cDPLdlU+SlmH14W8HGelVC0eH3bAJp73Lu1al/Dv+lR82QFsAR2MnDkqeogcXo8xAr49Rv/NCermEfvHO28ukP4/zTCwYSMUqfKr0d9QqeVvo1TKdYcEIrfXiIzmvcBLqJztyvrwHmD7gxu0urD071bl1xwiZbUHDawJ7OMA7fdFnPW2ceBsNAzIvars3Zp/oB3jGGutOTBG0dDHwPi7Kp/Ps47XOpzX2oZ1O6mK2RUrtOQSaLhJyO3FuxkRMesf4IT3KP8ADx7o6dJ/ES1bhH+RV3KJ8t8et8R4eDaBxlsj/U+hxnzHzYCNID9RqTcswIhFoOVtPvxrDPAsV2VLrP7F63UCM/CiIHiAdF/kssMGuYl93qn1cSqpGZZlFdDzgGeBgExLHg/2zvM8PjTvUJZpPC8/acP2OJYZxkZI+lH2i4Gyhp6cQiknZRMVyRVQAMzzVLB0S4ANO1veKwDaJG3hbupNbeRGWVoqLdQZQGbxoa8lsEFVEGU60aV+Q13jyTk5b0SIKzxfwAGMjDtnf3CkD0wmAJy9uHeosm2CS/i/7mK7itQOGvNJ3pcRrOeIo82hXFbz79d5/TjWdGpkfc2lE4Xsodz3IzEFq2eWaefuyAi67y7mbKhIUaby+FkD7lyedBBQ40aeIYD+hg/K33goDwmYsB3CfA/wBfLQ0aMy0RhIz0r/HcipLwzQT09qtcKY7hF8tF9RC+sSdunUIpbzaIxDK//FojE/1ECtHwt8FquSFqj9l6Oh364hgA3lMYDgvsxQQooDMMq1VrpUC2i84WafrINaF/kefK2zNsrDCqJI/Q1Q6/3vJocNuu6xY4z3CBG+miqe3Z5GcxbKp+beZTlWXWVPaNpBo/wIy2+HGQDUaaSNzs0kX65PxaYrL6Xs2zFkHbA3+dTB9HuSgMszOUd+/5LW93jlvwupLu9y0Mzx6X+vFGxxe77yX/29PsZ75AzW6zXA1Ka2bRayr1XUkoq83RRQQmT96ck9hxJ8ANtT1Pb6vitNyOU/pfcEno+jVNlCWScqaL79bRLvZW3j+Oa1op8pIWaDKgPs0cq+CeVqTv2dBVBBdvgE+EqkjOHNf0zZX6zkyGYaQPnS5uWgJyx1p9PIvccF4MW0A+KSP6nUlroj6D3AaiG8lXiw8n67mZfRrVzu+QQabON4zId4rIvJoeGRwIql2QT5bPJ9aPkh1OoPcXZZQcqxiH1PtxxvOgeJs/qkiK69S9jvDNo6Q5T760rmauWKKuXuEw7bmgZLKS3lZQKgN90aMRqJkb5L6n3uUe9Q0oLjebNBObbwpi+XtqUu7XJZv8TmyjPOowP7xxT9CR6GtNkas7vvYBp//egGW08tNoOK4TwC70MXr4guRfS0tHY5Flysv1WpzLW6dCvercpWwCBvYyy9Go4f+xZVtsn+Ado5QctvoOdlFo3FO+na0/3cp9AIh2flQBqx/bX2RXRlOv0O4N8/Mc79cWXfvbVygB1EBESnUoN3UuWTYj6jdgGVeFBAtTOdE5H+j6MW7E6rvZrGv1fypt0H0AayRJPI43daguSKNOWI7RygP9CLYQK+x0IAug61yMAA1XeS/93qFnFMgJ2IL7AFdIhQPazCRyCxTcBoGHw+/Tej+yrslgXgjf28aFAC7ATYbqC7SKV8x+musgE1QTLU1y79tyO9qJ9m/wh+nC79b0mAnYgvsAVw8KEWqvIvvElX4No6x0xj5aCZrKK/dRb9DpD+X0qAnYgV2AK2PFrDcPX4ZfStZ0EW2gnKO6cDwZWFqnyuSAuf/j+iwViT3oPaXnRapValTBSAL0iAncg3wBZQ4xPuonY+9RHMuVgA9LQ2IDAIEKzoEcP5wDhEbsZfnYxA6R+DYZwK9hLPwdKuKAF2Ig6w2yv3l406gshjDwHOhxb6Uo2ejSgOegQeeroFa+QYAzmAvDj/BmnfJAF2Io6v+HsBvBCdbKCGINAixdlDLh1E7Xv7l1cEUn5DgAA5zF7h9Ey+wg1h6l9Ziptg9ZGePYfNJzvEeD6I9B1bCZg5xKCq8Gg9UVWBjUiZ7QU7yP8YQ03tm+EldfA6ZrgI3w9xDojenRQkj1rqOBvxuM0u8zJ4rxBlg9GL1zL/mX/38aiPPIxR/Bv1nlTh3nBgE2QtggYiootI8eZKwAzydc4w7ks6ni0sZviT5fv/qv1f+hrJeETKKdx72BMNYVTkIdwdNE/EoA3wdgziw7ctl9rBUT4xzMpzrf8c3lwk2HfmAAWoL3JC8BmkInfRqB0SYMBuVKnXmzj7+L0Y8djNOXPsIjCOqmBQY4Z4jc/O2ZYMGZcIvQ8O2Vc7OhaWG98jlI93EW2NBdhpgAth7x9Sa6w1l39p9erwgYDuwKcNOrPeLXIo9evyBqLdy1Jvm895wCNTXeqV20Y2g8BGjgV89MiOO4/aGDMUtuHVz3UVvUF44P3ouYGmRR4I8lqQrNSe/Ti7AGCav4F/jydFQwoDkpXmcwZYSkqDfI1XSf3G8t4WUIMCLAiSwd44lwMf930tFY7j1cL5LtAoxpV8Vks5K+21UNL1vJ7D+fvjtI9g+7xCLewsU1tIuobjI4+njUZdkJ+CNOVe/L0dbSjM+L+PTWOH1JZIANIT1L8g57tdAPZqGn3WoHYfxAeTo/WLIE/oBaMZBPYnnC2woLZQpTLuLuA5O29Jq04a96nGQ7ersrRUaNvrOCBuJghbELCI9J7EKRnaMI/gaEy62I2DBXVv4UBAX8jxRjLYbfxuNo+PGQZpCG9zMKHPgwhiPMP7eY6gSqUcRNdxwOkrn85k2zYEMjarX81ZCbbRcwQ1lB12tSri5zwO6makGHeQ+i7nta3gtT5CqjZUxfBW4HS2OOttgBpSi9prhYD0Hik1Q4C6Lac3aIgTjcGGfu8ntakK0pBadyXvA2YJpLMep8q/veo4ajPUgf/eyXjrQW38ALXfKgJyJX/PJ1jyqRmvJdDxnBpwFlvD38dzgLxBbYljOZl5eQRYPoF7MzXyGwT9GN5n57gHkyoVkEIBlKdq13MQB9840rBXSAHzSIeG8/mV8LpbaX07f7fiwLiL17GB9ZtSoU3iwIzlLRbpAPtEnxkAez4vETAeFgDU4GnPK++ADW7CMVUE2K2oXZyV4JhukfHYV5VP/s/ntP8iwTKMU/wnqmzbgi4E6RF8DrVJLxzg/kfjtWv50AEG+PpbqrL1lC3YZiMH0Rk0XAt4vo6naRs9NfVIn6oT6IoDFHnsHQnybtpvkGv4HG7hcfMJ7JakOB8RoF9xFkLdGhwcjQlWnMtL2v1ZSQWA83LeKXm82n9ZXIUBO8j+15imXhDgNvEAdQG1kZ923x3Sy5JJ+ZH2cG4l3XiXXppTtHpNtXrLVdm2B1dzuv4nwQj++yjbruZ19uVxnLeEFRMIR1BzDiSA3uLvq0njRpLGfUzK0YJ06XWNagDkH5ASbFRlGZWlpFNjVdm+I84yvEbsH30fzQKO3Zrn6RjEoBFbSMemkW5cQAo0lsdwcvw/pvuzq2FQv8dBGVnS4dg1OI12DlAdnBBBm1laJPFI3rRfBzzkldL2jirEsRPJAknLK0JPRC8aOb1V2SuW3WQbNX0eR7lXbskeWs3QdAvSMUYTYCcSeRcfekmupIESdb9tTK9nCZgj86wE2AmwYxEB+JnkVul6MPAGqz4C6k/iOJ8E2N9tie2NBgLIR2kMpBMxghHZNS5QJ5JI7BsKiuaG9Y6I0oAA1WEd/04AHfu70hONnQA7I8JV5/B8wJcJXyz8tHD5ONsvIJo4kxvtqATYicQp/xdgALk6TzgmetwsAAAAAElFTkSuQmCC",height:45,style:{paddingLeft:"30px"},alt:"NCC"}),(0,g.jsx)("span",{style:{paddingLeft:"30px"},children:"Crash Analysis Dashboard"})]})}),(0,g.jsx)("span",{className:"float-end",children:(0,g.jsx)("img",{src:Ce,height:35,alt:"Stantec logo"})})]})})}const Te=t=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ke,{}),(0,g.jsx)("main",{children:t.children})]});function Me(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Pe=n(441),Le=n(613),Oe=n.n(Le);const Re=function(t){function e(t,r,l,c,d){for(var f,p,g,m,b,w=0,S=0,A=0,E=0,C=0,O=0,D=g=f=0,F=0,N=0,j=0,z=0,B=l.length,U=B-1,V="",H="",W="",G="";F<B;){if(p=l.charCodeAt(F),F===U&&0!==S+E+A+w&&(0!==S&&(p=47===S?10:47),E=A=w=0,B++,U++),0===S+E+A+w){if(F===U&&(0<N&&(V=V.replace(h,"")),0<V.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(F)}p=59}switch(p){case 123:for(f=(V=V.trim()).charCodeAt(0),g=1,z=++F;F<B;){switch(p=l.charCodeAt(F)){case 123:g++;break;case 125:g--;break;case 47:switch(p=l.charCodeAt(F+1)){case 42:case 47:t:{for(D=F+1;D<U;++D)switch(l.charCodeAt(D)){case 47:if(42===p&&42===l.charCodeAt(D-1)&&F+2!==D){F=D+1;break t}break;case 10:if(47===p){F=D+1;break t}}F=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;F++<U&&l.charCodeAt(F)!==p;);}if(0===g)break;F++}if(g=l.substring(z,F),0===f&&(f=(V=V.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<N&&(V=V.replace(h,"")),p=V.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=L}if(z=(g=e(r,N,g,p,d+1)).length,0<R&&(b=a(3,g,N=n(L,V,j),r,T,k,z,p,d,c),V=N.join(""),void 0!==b&&0===(z=(g=b.trim()).length)&&(p=0,g="")),0<z)switch(p){case 115:V=V.replace(x,s);case 100:case 109:case 45:g=V+"{"+g+"}";break;case 107:g=(V=V.replace(v,"$1 $2"))+"{"+g+"}",g=1===P||2===P&&o("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=V+g,112===c&&(H+=g,g="")}else g=""}else g=e(r,n(r,V,j),g,c,d+1);W+=g,g=j=N=D=f=0,V="",p=l.charCodeAt(++F);break;case 125:case 59:if(1<(z=(V=(0<N?V.replace(h,""):V).trim()).length))switch(0===D&&(f=V.charCodeAt(0),45===f||96<f&&123>f)&&(z=(V=V.replace(" ",":")).length),0<R&&void 0!==(b=a(1,V,r,t,T,k,H.length,c,d,c))&&0===(z=(V=b.trim()).length)&&(V="\0\0"),f=V.charCodeAt(0),p=V.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){G+=V+l.charAt(F);break}default:58!==V.charCodeAt(z-1)&&(H+=i(V,f,p,V.charCodeAt(2)))}j=N=D=f=0,V="",p=l.charCodeAt(++F)}}switch(p){case 13:case 10:47===S?S=0:0===1+f&&107!==c&&0<V.length&&(N=1,V+="\0"),0<R*I&&a(0,V,r,t,T,k,H.length,c,d,c),k=1,T++;break;case 59:case 125:if(0===S+E+A+w){k++;break}default:switch(k++,m=l.charAt(F),p){case 9:case 32:if(0===E+w+S)switch(C){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===E+S+w&&(N=j=1,m="\f"+m);break;case 108:if(0===E+S+w+M&&0<D)switch(F-D){case 2:112===C&&58===l.charCodeAt(F-3)&&(M=C);case 8:111===O&&(M=O)}break;case 58:0===E+S+w&&(D=F);break;case 44:0===S+A+E+w&&(N=1,m+="\r");break;case 34:case 39:0===S&&(E=E===p?0:0===E?p:E);break;case 91:0===E+S+A&&w++;break;case 93:0===E+S+A&&w--;break;case 41:0===E+S+w&&A--;break;case 40:if(0===E+S+w){if(0===f)if(2*C+3*O===533);else f=1;A++}break;case 64:0===S+A+E+w+D+g&&(g=1);break;case 42:case 47:if(!(0<E+w+A))switch(S){case 0:switch(2*p+3*l.charCodeAt(F+1)){case 235:S=47;break;case 220:z=F,S=42}break;case 42:47===p&&42===C&&z+2!==F&&(33===l.charCodeAt(z+2)&&(H+=l.substring(z,F+1)),m="",S=0)}}0===S&&(V+=m)}O=C,C=p,F++}if(0<(z=H.length)){if(N=r,0<R&&(void 0!==(b=a(2,H,N,t,T,k,z,c,d,c))&&0===(H=b).length))return G+H+W;if(H=N.join(",")+"{"+H+"}",0!==P*M){switch(2!==P||o(H,2)||(M=0),M){case 111:H=H.replace(_,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}M=0}}return G+H+W}function n(t,e,n){var i=e.trim().split(g);e=i;var o=i.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<o;++a)e[a]=r(t,e[a],n).trim();break;default:var l=a=0;for(e=[];a<o;++a)for(var c=0;c<s;++c)e[l++]=r(t[c]+" ",i[a],n).trim()}return e}function r(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(m,"$1"+t.trim());case 58:return t.trim()+e.replace(m,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(m,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function i(t,e,n,r){var s=t+";",a=2*e+3*n+4*r;if(944===a){t=s.indexOf(":",9)+1;var l=s.substring(t,s.length-1).trim();return l=s.substring(0,t).trim()+l+";",1===P||2===P&&o(l,1)?"-webkit-"+l+l:l}if(0===P||2===P&&!o(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(C,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return f.test(s)?s.replace(d,":-webkit-")+s.replace(d,":-moz-")+s:s;case 1e3:switch(e=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=s.replace(b,"tb");break;case 232:l=s.replace(b,"tb-rl");break;case 220:l=s.replace(b,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(l=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===E.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?i(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+s}return s}function o(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),D(2!==e?r:r.replace(A,"$1"),n,e)}function s(t,e){var n=i(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(w," or ($1)").substring(4):"("+e+")"}function a(t,e,n,r,i,o,s,a,l,u){for(var h,d=0,f=e;d<R;++d)switch(h=O[d].call(c,t,f,n,r,i,o,s,a,l,u)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==e)return f}function l(t){return void 0!==(t=t.prefix)&&(D=null,t?"function"!==typeof t?P=1:(P=2,D=t):P=0),l}function c(t,n){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=a(-1,n,r,r,T,k,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var o=e(L,r,n,0,0);return 0<R&&(void 0!==(i=a(-2,o,r,r,T,k,o.length,0,0,0))&&(o=i)),"",M=0,k=T=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,_=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,k=1,T=1,M=0,P=1,L=[],O=[],R=0,D=null,I=0;return c.use=function t(e){switch(e){case void 0:case null:R=O.length=0;break;default:if("function"===typeof e)O[R++]=e;else if("object"===typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else I=0|!!e}return t},c.set=l,void 0!==t&&l(t),c};const De={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};const Ie=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}};var Fe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const Ne=Ie((function(t){return Fe.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var je=n(110),ze=n.n(je);function Be(){return(Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Ue=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},Ve=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,Pe.typeOf)(t)},He=Object.freeze([]),We=Object.freeze({});function Ge(t){return"function"==typeof t}function Ye(t){return t.displayName||t.name||"Component"}function Xe(t){return t&&"string"==typeof t.styledComponentId}var qe="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Ze="undefined"!=typeof window&&"HTMLElement"in window,Ke=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function Qe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Je=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)(i<<=1)<0&&Qe(16,""+t);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(t+1),a=0,l=e.length;a<l;a++)this.tag.insertRule(s,e[a])&&(this.groupSizes[t]++,s++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),r=n+e;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,o=r;o<i;o++)e+=this.tag.getRule(o)+"/*!sc*/\n";return e},t}(),$e=new Map,tn=new Map,en=1,nn=function(t){if($e.has(t))return $e.get(t);for(;tn.has(en);)en++;var e=en++;return $e.set(t,e),tn.set(e,t),e},rn=function(t){return tn.get(t)},on=function(t,e){e>=en&&(en=e+1),$e.set(t,e),tn.set(e,t)},sn="style["+qe+'][data-styled-version="5.3.5"]',an=new RegExp("^"+qe+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),ln=function(t,e,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&t.registerName(e,r)},cn=function(t,e){for(var n=(e.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var s=n[i].trim();if(s){var a=s.match(an);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(on(c,l),ln(t,c,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(s)}}},un=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},hn=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(t){for(var e=t.childNodes,n=e.length;n>=0;n--){var r=e[n];if(r&&1===r.nodeType&&r.hasAttribute(qe))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(qe,"active"),r.setAttribute("data-styled-version","5.3.5");var s=un();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},dn=function(){function t(t){var e=this.element=hn(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,r=e.length;n<r;n++){var i=e[n];if(i.ownerNode===t)return i}Qe(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),fn=function(){function t(t){var e=this.element=hn(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e),r=this.nodes[t];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),pn=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),gn=Ze,mn={isServer:!Ze,useCSSOMInjection:!Ke},vn=function(){function t(t,e,n){void 0===t&&(t=We),void 0===e&&(e={}),this.options=Be({},mn,{},t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&Ze&&gn&&(gn=!1,function(t){for(var e=document.querySelectorAll(sn),n=0,r=e.length;n<r;n++){var i=e[n];i&&"active"!==i.getAttribute(qe)&&(cn(t,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}t.registerId=function(t){return nn(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(Be({},this.options,{},e),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(e=this.options).isServer,r=e.useCSSOMInjection,i=e.target,t=n?new pn(i):r?new dn(i):new fn(i),new Je(t)));var t,e,n,r,i},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(nn(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},e.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(nn(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(nn(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),n=e.length,r="",i=0;i<n;i++){var o=rn(i);if(void 0!==o){var s=t.names.get(o),a=e.getGroup(i);if(s&&a&&s.size){var l=qe+".g"+i+'[id="'+o+'"]',c="";void 0!==s&&s.forEach((function(t){t.length>0&&(c+=t+",")})),r+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},t}(),yn=/(a)(d)/gi,_n=function(t){return String.fromCharCode(t+(t>25?39:97))};function bn(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=_n(e%52)+n;return(_n(e%52)+n).replace(yn,"$1-$2")}var xn=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},wn=function(t){return xn(5381,t)};function Sn(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Ge(n)&&!Xe(n))return!1}return!0}var An=wn("5.3.5"),En=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Sn(t),this.componentId=e,this.baseHash=xn(An,e),this.baseStyle=n,vn.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=Hn(this.rules,t,e,n).join(""),s=bn(xn(this.baseHash,o)>>>0);if(!e.hasNameForId(r,s)){var a=n(o,"."+s,void 0,r);e.insertRules(r,s,a)}i.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=xn(this.baseHash,n.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var f=Hn(d,t,e,n),p=Array.isArray(f)?f.join(""):f;c=xn(c,p+h),u+=p}}if(u){var g=bn(c>>>0);if(!e.hasNameForId(r,g)){var m=n(u,"."+g,void 0,r);e.insertRules(r,g,m)}i.push(g)}}return i.join(" ")},t}(),Cn=/^\s*\/\/.*$/gm,kn=[":","[",".","#"];function Tn(t){var e,n,r,i,o=void 0===t?We:t,s=o.options,a=void 0===s?We:s,l=o.plugins,c=void 0===l?He:l,u=new Re(a),h=[],d=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,r,i,o,s,a,l,c,u,h){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}((function(t){h.push(t)})),f=function(t,r,o){return 0===r&&-1!==kn.indexOf(o[n.length])||o.match(i)?t:"."+e};function p(t,o,s,a){void 0===a&&(a="&");var l=t.replace(Cn,""),c=o&&s?s+" "+o+" { "+l+" }":l;return e=a,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(s||!o?"":o,c)}return u.use([].concat(c,[function(t,e,i){2===t&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,f))},d,function(t){if(-2===t){var e=h;return h=[],e}}])),p.hash=c.length?c.reduce((function(t,e){return e.name||Qe(15),xn(t,e.name)}),5381).toString():"",p}var Mn=t.createContext(),Pn=(Mn.Consumer,t.createContext()),Ln=(Pn.Consumer,new vn),On=Tn();function Rn(){return(0,t.useContext)(Mn)||Ln}function Dn(){return(0,t.useContext)(Pn)||On}function In(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=Rn(),s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,t.useMemo)((function(){return Tn({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){Oe()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(Mn.Provider,{value:s},t.createElement(Pn.Provider,{value:a},e.children))}var Fn=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=On);var r=n.name+e.hash;t.hasNameForId(n.id,r)||t.insertRules(n.id,r,e(n.rules,r,"@keyframes"))},this.toString=function(){return Qe(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=On),this.name+t.hash},t}(),Nn=/([A-Z])/,jn=/([A-Z])/g,zn=/^ms-/,Bn=function(t){return"-"+t.toLowerCase()};function Un(t){return Nn.test(t)?t.replace(jn,Bn).replace(zn,"-ms-"):t}var Vn=function(t){return null==t||!1===t||""===t};function Hn(t,e,n,r){if(Array.isArray(t)){for(var i,o=[],s=0,a=t.length;s<a;s+=1)""!==(i=Hn(t[s],e,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return Vn(t)?"":Xe(t)?"."+t.styledComponentId:Ge(t)?"function"!=typeof(l=t)||l.prototype&&l.prototype.isReactComponent||!e?t:Hn(t(e),e,n,r):t instanceof Fn?n?(t.inject(n,r),t.getName(r)):t:Ve(t)?function t(e,n){var r,i,o=[];for(var s in e)e.hasOwnProperty(s)&&!Vn(e[s])&&(Array.isArray(e[s])&&e[s].isCss||Ge(e[s])?o.push(Un(s)+":",e[s],";"):Ve(e[s])?o.push.apply(o,t(e[s],s)):o.push(Un(s)+": "+(r=s,(null==(i=e[s])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in De?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(t):t.toString();var l}var Wn=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function Gn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ge(t)||Ve(t)?Wn(Hn(Ue(He,[t].concat(n)))):0===n.length&&1===t.length&&"string"==typeof t[0]?t:Wn(Hn(Ue(t,n)))}new Set;var Yn=function(t,e,n){return void 0===n&&(n=We),t.theme!==n.theme&&t.theme||e||n.theme},Xn=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,qn=/(^-|-$)/g;function Zn(t){return t.replace(Xn,"-").replace(qn,"")}var Kn=function(t){return bn(wn(t)>>>0)};function Qn(t){return"string"==typeof t&&!0}var Jn=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},$n=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function tr(t,e,n){var r=t[n];Jn(e)&&Jn(r)?er(r,e):t[n]=e}function er(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];if(Jn(s))for(var a in s)$n(a)&&tr(t,s[a],a)}return t}var nr=t.createContext();nr.Consumer;var rr={};function ir(e,n,r){var i=Xe(e),o=!Qn(e),s=n.attrs,a=void 0===s?He:s,l=n.componentId,c=void 0===l?function(t,e){var n="string"!=typeof t?"sc":Zn(t);rr[n]=(rr[n]||0)+1;var r=n+"-"+Kn("5.3.5"+n+rr[n]);return e?e+"-"+r:r}(n.displayName,n.parentComponentId):l,u=n.displayName,h=void 0===u?function(t){return Qn(t)?"styled."+t:"Styled("+Ye(t)+")"}(e):u,d=n.displayName&&n.componentId?Zn(n.displayName)+"-"+n.componentId:n.componentId||c,f=i&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,p=n.shouldForwardProp;i&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var g,m=new En(r,d,i?e.componentStyle:void 0),v=m.isStatic&&0===a.length,y=function(e,n){return function(e,n,r,i){var o=e.attrs,s=e.componentStyle,a=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,u=e.styledComponentId,h=e.target,d=function(t,e,n){void 0===t&&(t=We);var r=Be({},e,{theme:t}),i={};return n.forEach((function(t){var e,n,o,s=t;for(e in Ge(s)&&(s=s(r)),s)r[e]=i[e]="className"===e?(n=i[e],o=s[e],n&&o?n+" "+o:n||o):s[e]})),[r,i]}(Yn(n,(0,t.useContext)(nr),a)||We,n,o),f=d[0],p=d[1],g=function(t,e,n,r){var i=Rn(),o=Dn();return e?t.generateAndInjectStyles(We,i,o):t.generateAndInjectStyles(n,i,o)}(s,i,f),m=r,v=p.$as||n.$as||p.as||n.as||h,y=Qn(v),_=p!==n?Be({},n,{},p):n,b={};for(var x in _)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?b.as=_[x]:(c?c(x,Ne,v):!y||Ne(x))&&(b[x]=_[x]));return n.style&&p.style!==n.style&&(b.style=Be({},n.style,{},p.style)),b.className=Array.prototype.concat(l,u,g!==u?g:null,n.className,p.className).filter(Boolean).join(" "),b.ref=m,(0,t.createElement)(v,b)}(g,e,n,v)};return y.displayName=h,(g=t.forwardRef(y)).attrs=f,g.componentStyle=m,g.displayName=h,g.shouldForwardProp=p,g.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):He,g.styledComponentId=d,g.target=i?e.target:e,g.withComponent=function(t){var e=n.componentId,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(n,["componentId"]),o=e&&e+"-"+(Qn(t)?t:Zn(Ye(t)));return ir(t,Be({},i,{attrs:f,componentId:o}),r)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?er({},e.defaultProps,t):t}}),g.toString=function(){return"."+g.styledComponentId},o&&ze()(g,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var or=function(t){return function t(e,n,r){if(void 0===r&&(r=We),!(0,Pe.isValidElementType)(n))return Qe(1,String(n));var i=function(){return e(n,r,Gn.apply(void 0,arguments))};return i.withConfig=function(i){return t(e,n,Be({},r,{},i))},i.attrs=function(i){return t(e,n,Be({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(ir,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){or[t]=or(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=Sn(t),vn.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,n,r){var i=r(Hn(this.rules,e,n,r).join(""),""),o=this.componentId+t;n.insertRules(o,o,i)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,n,r){t>2&&vn.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=un();return"<style "+[n&&'nonce="'+n+'"',qe+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Qe(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return Qe(2);var r=((n={})[qe]="",n["data-styled-version"]="5.3.5",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=un();return i&&(r.nonce=i),[t.createElement("style",Be({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new vn({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?Qe(2):t.createElement(In,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(t){return Qe(3)}}();const sr=or;function ar(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(n),!0).forEach((function(e){dr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hr(t,e,n){return e&&ur(t.prototype,e),n&&ur(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fr(){return fr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fr.apply(this,arguments)}function pr(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}function gr(t){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gr(t)}function mr(t,e){return mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},mr(t,e)}function vr(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t,e){if(e&&("object"===typeof e||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yr(t)}function br(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Gk){return!1}}();return function(){var n,r=gr(t);if(e){var i=gr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _r(this,n)}}function xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||Sr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t){return function(t){if(Array.isArray(t))return Ar(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Sr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){if(t){if("string"===typeof t)return Ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(t,e):void 0}}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Er=hr((function t(e){var n=this,r=e.expanded,i=void 0===r?[]:r,o=e.allowMultipleExpanded,s=void 0!==o&&o,a=e.allowZeroExpanded,l=void 0!==a&&a;cr(this,t),dr(this,"expanded",void 0),dr(this,"allowMultipleExpanded",void 0),dr(this,"allowZeroExpanded",void 0),dr(this,"toggleExpanded",(function(t){return n.isItemDisabled(t)?n:n.isItemExpanded(t)?n.augment({expanded:n.expanded.filter((function(e){return e!==t}))}):n.augment({expanded:n.allowMultipleExpanded?[].concat(wr(n.expanded),[t]):[t]})})),dr(this,"isItemDisabled",(function(t){var e=n.isItemExpanded(t),r=1===n.expanded.length;return Boolean(e&&!n.allowZeroExpanded&&r)})),dr(this,"isItemExpanded",(function(t){return-1!==n.expanded.indexOf(t)})),dr(this,"getPanelAttributes",(function(t,e){var r=null!==e&&void 0!==e?e:n.isItemExpanded(t);return{role:n.allowMultipleExpanded?void 0:"region","aria-hidden":n.allowMultipleExpanded?!r:void 0,"aria-labelledby":n.getButtonId(t),id:n.getPanelId(t),hidden:!r||void 0}})),dr(this,"getHeadingAttributes",(function(){return{role:"heading"}})),dr(this,"getButtonAttributes",(function(t,e){var r=null!==e&&void 0!==e?e:n.isItemExpanded(t),i=n.isItemDisabled(t);return{id:n.getButtonId(t),"aria-disabled":i,"aria-expanded":r,"aria-controls":n.getPanelId(t),role:"button",tabIndex:0}})),dr(this,"getPanelId",(function(t){return"accordion__panel-".concat(t)})),dr(this,"getButtonId",(function(t){return"accordion__heading-".concat(t)})),dr(this,"augment",(function(e){return new t(lr({expanded:n.expanded,allowMultipleExpanded:n.allowMultipleExpanded,allowZeroExpanded:n.allowZeroExpanded},e))})),this.expanded=i,this.allowMultipleExpanded=s,this.allowZeroExpanded=l})),Cr=(0,t.createContext)(null),kr=function(e){pr(r,e);var n=br(r);function r(){var t;cr(this,r);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return dr(yr(t=n.call.apply(n,[this].concat(i))),"state",new Er({expanded:t.props.preExpanded,allowMultipleExpanded:t.props.allowMultipleExpanded,allowZeroExpanded:t.props.allowZeroExpanded})),dr(yr(t),"toggleExpanded",(function(e){t.setState((function(t){return t.toggleExpanded(e)}),(function(){t.props.onChange&&t.props.onChange(t.state.expanded)}))})),dr(yr(t),"isItemDisabled",(function(e){return t.state.isItemDisabled(e)})),dr(yr(t),"isItemExpanded",(function(e){return t.state.isItemExpanded(e)})),dr(yr(t),"getPanelAttributes",(function(e,n){return t.state.getPanelAttributes(e,n)})),dr(yr(t),"getHeadingAttributes",(function(){return t.state.getHeadingAttributes()})),dr(yr(t),"getButtonAttributes",(function(e,n){return t.state.getButtonAttributes(e,n)})),t}return hr(r,[{key:"render",value:function(){var e=this.state,n=e.allowZeroExpanded,r=e.allowMultipleExpanded;return(0,t.createElement)(Cr.Provider,{value:{allowMultipleExpanded:r,allowZeroExpanded:n,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),r}(t.PureComponent);dr(kr,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var Tr,Mr=function(e){pr(r,e);var n=br(r);function r(){var t;cr(this,r);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return dr(yr(t=n.call.apply(n,[this].concat(i))),"renderChildren",(function(e){return e?t.props.children(e):null})),t}return hr(r,[{key:"render",value:function(){return(0,t.createElement)(Cr.Consumer,null,this.renderChildren)}}]),r}(t.PureComponent),Pr=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Lr=function(e){var n=e.className,r=void 0===n?"accordion":n,i=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,l=vr(e,Pr);return(0,t.createElement)(kr,{preExpanded:a,allowMultipleExpanded:i,allowZeroExpanded:o,onChange:s},(0,t.createElement)("div",fr({"data-accordion-component":"Accordion",className:r},l)))};!function(t){t.Accordion="Accordion",t.AccordionItem="AccordionItem",t.AccordionItemButton="AccordionItemButton",t.AccordionItemHeading="AccordionItemHeading",t.AccordionItemPanel="AccordionItemPanel"}(Tr||(Tr={}));var Or=Tr,Rr=0;var Dr=t.useId||function(){var t=Rr;return Rr+=1,"raa-".concat(t)},Ir=/[\u0009\u000a\u000c\u000d\u0020]/g;function Fr(t){return""!==t&&!Ir.test(t)||(console.error('uuid must be a valid HTML5 id but was given "'.concat(t,'", ASCII whitespaces are forbidden')),!1)}var Nr=(0,t.createContext)(null),jr=function(e){var n=e.children,r=e.uuid,i=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){i.toggleExpanded(r)},a=function(e){var i=null!==o&&void 0!==o?o:e.isItemExpanded(r),a=e.isItemDisabled(r),l=e.getPanelAttributes(r,o),c=e.getHeadingAttributes(r),u=e.getButtonAttributes(r,o);return(0,t.createElement)(Nr.Provider,{value:{uuid:r,expanded:i,disabled:a,toggleExpanded:s,panelAttributes:l,headingAttributes:c,buttonAttributes:u}},n)};return(0,t.createElement)(Mr,null,a)},zr=function(e){return(0,t.createElement)(Mr,null,(function(n){return(0,t.createElement)(jr,fr({},e,{accordionContext:n}))}))},Br=function(e){var n=e.children,r=function(t){return t?n(t):null};return(0,t.createElement)(Nr.Consumer,null,r)},Ur=["uuid","dangerouslySetExpanded","className","activeClassName"],Vr=function(e){var n=e.uuid,r=e.dangerouslySetExpanded,i=e.className,o=void 0===i?"accordion__item":i,s=e.activeClassName,a=vr(e,Ur),l=xr((0,t.useState)(Dr()),1)[0],c=null!==n&&void 0!==n?n:l,u=function(e){var n=e.expanded&&s?s:o;return(0,t.createElement)("div",fr({"data-accordion-component":"AccordionItem",className:n},a))};return Fr(c.toString()),a.id&&Fr(a.id),(0,t.createElement)(zr,{uuid:c,dangerouslySetExpanded:r},(0,t.createElement)(Br,null,u))};function Hr(t){return t&&(t.matches('[data-accordion-component="Accordion"]')?t:Hr(t.parentElement))}function Wr(t){var e=Hr(t);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}Vr.displayName=Or.AccordionItem;var Gr="End",Yr="Enter",Xr="Home",qr=" ",Zr="Spacebar",Kr="ArrowUp",Qr="ArrowDown",Jr="ArrowLeft",$r="ArrowRight",ti=["toggleExpanded","className"],ei=function(e){var n=e.toggleExpanded,r=e.className,i=void 0===r?"accordion__button":r,o=vr(e,ti);return o.id&&Fr(o.id),(0,t.createElement)("div",fr({className:i},o,{role:"button",tabIndex:0,onClick:n,onKeyDown:function(t){var e=t.key;if(e!==Yr&&e!==qr&&e!==Zr||(t.preventDefault(),n()),t.target instanceof HTMLElement)switch(e){case Xr:t.preventDefault(),function(t){var e=(Wr(t)||[])[0];e&&e.focus()}(t.target);break;case Gr:t.preventDefault(),function(t){var e=Wr(t)||[],n=e[e.length-1];n&&n.focus()}(t.target);break;case Jr:case Kr:t.preventDefault(),function(t){var e=Wr(t)||[],n=e.indexOf(t);if(-1!==n){var r=e[n-1];r&&r.focus()}}(t.target);break;case $r:case Qr:t.preventDefault(),function(t){var e=Wr(t)||[],n=e.indexOf(t);if(-1!==n){var r=e[n+1];r&&r.focus()}}(t.target)}},"data-accordion-component":"AccordionItemButton"}))},ni=function(e){return(0,t.createElement)(Br,null,(function(n){var r=n.toggleExpanded,i=n.buttonAttributes;return(0,t.createElement)(ei,fr({toggleExpanded:r},e,i))}))},ri=function(e){pr(r,e);var n=br(r);function r(){var t;cr(this,r);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return dr(yr(t=n.call.apply(n,[this].concat(i))),"ref",void 0),dr(yr(t),"setRef",(function(e){t.ref=e})),t}return hr(r,[{key:"componentDidUpdate",value:function(){r.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){r.VALIDATE(this.ref)}},{key:"render",value:function(){return(0,t.createElement)("div",fr({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(t){if(void 0===t)throw new Error("ref is undefined");if(1!==t.childElementCount||!t.firstElementChild||"AccordionItemButton"!==t.firstElementChild.getAttribute("data-accordion-component"))throw new Error("AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.\n\nFrom the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):\n\n\u201cThe button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.\u201d\n\n")}}]),r}(t.PureComponent);dr(ri,"defaultProps",{className:"accordion__heading","aria-level":3});var ii=function(e){return(0,t.createElement)(Br,null,(function(n){var r=n.headingAttributes;return e.id&&Fr(e.id),(0,t.createElement)(ri,fr({},e,r))}))};ii.displayName=Or.AccordionItemHeading;var oi=["className","region","id"],si=function(e){var n=e.className,r=void 0===n?"accordion__panel":n,i=e.region,o=e.id,s=vr(e,oi),a=function(e){var n=e.panelAttributes;o&&Fr(o);var a=lr(lr({},n),{},{"aria-labelledby":i?n["aria-labelledby"]:void 0});return(0,t.createElement)("div",fr({"data-accordion-component":"AccordionItemPanel",className:r},s,a,{role:i?"region":void 0}))};return(0,t.createElement)(Br,null,a)},ai=n(756);function li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ci=[255,255,255],ui=1;let hi=0;class di{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"id",void 0),li(this,"color",void 0),li(this,"intensity",void 0),li(this,"type","ambient");const{color:e=ci}=t,{intensity:n=ui}=t;this.id=t.id||"ambient-".concat(hi++),this.color=e,this.intensity=n}}function fi(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function pi(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||fi()}const gi="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";pi();class mi{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";li(this,"storage",void 0),li(this,"id",void 0),li(this,"config",{}),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(Gk){return null}}(n),this.id=t,this.config={},Object.assign(this.config,e),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function vi(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let yi;function _i(t){return"string"===typeof t?yi[t.toUpperCase()]||yi.WHITE:t}function bi(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(yi||(yi={}));const xi={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},wi=(globalThis,xi.window||xi.self||xi.global),Si=xi.process||{};console;function Ai(){let t;var e,n;if(pi&&"performance"in wi)t=null===wi||void 0===wi||null===(e=wi.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Si){var r;const e=null===Si||void 0===Si||null===(r=Si.hrtime)||void 0===r?void 0:r.call(Si);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const Ei={debug:pi&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Ci={enabled:!0,level:0};function ki(){}const Ti={},Mi={once:!0};class Pi{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};li(this,"id",void 0),li(this,"VERSION",gi),li(this,"_startTs",Ai()),li(this,"_deltaTs",Ai()),li(this,"_storage",void 0),li(this,"userData",{}),li(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new mi("__probe-".concat(this.id,"__"),Ci),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)"function"===typeof t[i]&&(e.find((t=>i===t))||(t[i]=t[i].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ai()-this._startTs).toPrecision(10))}getDelta(){return Number((Ai()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.updateConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){bi(t,e)}warn(t){return this._getLogFunction(0,t,Ei.warn,arguments,Mi)}error(t){return this._getLogFunction(0,t,Ei.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,Ei.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,Ei.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,Ei.debug||Ei.info,arguments,Mi)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||ki,n&&[n],{tag:Ri(e)}):ki}image(t){let{logLevel:e,priority:r,image:i,message:o="",scale:s=1}=t;return this._shouldLog(e||r)?pi?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=vi(t,n,r);console.log(...e)},t.src=e,ki}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...vi(e,n,r)),ki;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...vi(t,n,r)),t.src=e.toDataURL(),ki}return ki}({image:i,message:o,scale:s}):function(t){let{image:e,message:r="",scale:i=1}=t,o=null;try{o=n(214)}catch(s){}if(o)return()=>o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((t=>console.log(t)));return ki}({image:i,message:o,scale:s}):ki}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||ki)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Oi({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||ki)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Li(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=Oi({logLevel:t,message:e,args:r,opts:i}),bi(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=Ai();const o=i.tag||i.message;if(i.once){if(Ti[o])return ki;Ti[o]=Ai()}return e=function(t,e,n){if("string"===typeof e){const r=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){return pi||"string"!==typeof t||(e&&(e=_i(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=_i(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return ki}}function Li(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return bi(Number.isFinite(e)&&e>=0),e}function Oi(t){const{logLevel:e,message:n}=t;t.logLevel=Li(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const i=typeof t.message;return bi("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function Ri(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}li(Pi,"VERSION",gi);const Di=new Pi({id:"deck"}),Ii={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ii,"IDENTITY",{get:()=>(Di.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Fi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ni={common:0,meters:1,pixels:2},ji={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},zi="draw",Bi="mask";var Ui=1e-6,Vi="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Hi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*a-r*s,_=n*l-i*s,b=n*c-o*s,x=r*l-i*a,w=r*c-o*a,S=i*c-o*l,A=u*g-h*p,E=u*m-d*p,C=u*v-f*p,k=h*m-d*g,T=h*v-f*g,M=d*v-f*m,P=y*M-_*T+b*k+x*C-w*E+S*A;return P?(P=1/P,t[0]=(a*M-l*T+c*k)*P,t[1]=(i*T-r*M-o*k)*P,t[2]=(g*S-m*w+v*x)*P,t[3]=(d*w-h*S-f*x)*P,t[4]=(l*C-s*M-c*E)*P,t[5]=(n*M-i*C+o*E)*P,t[6]=(m*b-p*S-v*_)*P,t[7]=(u*S-d*b+f*_)*P,t[8]=(s*T-a*C+c*A)*P,t[9]=(r*C-n*T-o*A)*P,t[10]=(p*w-g*b+v*y)*P,t[11]=(h*b-u*w-f*y)*P,t[12]=(a*E-s*k-l*A)*P,t[13]=(n*k-r*E+i*A)*P,t[14]=(g*_-p*x-m*y)*P,t[15]=(u*x-h*_+d*y)*P,t):null}function Wi(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*a+x*h+w*g,t[1]=_*i+b*l+x*d+w*m,t[2]=_*o+b*c+x*f+w*v,t[3]=_*s+b*u+x*p+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*a+x*h+w*g,t[5]=_*i+b*l+x*d+w*m,t[6]=_*o+b*c+x*f+w*v,t[7]=_*s+b*u+x*p+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*a+x*h+w*g,t[9]=_*i+b*l+x*d+w*m,t[10]=_*o+b*c+x*f+w*v,t[11]=_*s+b*u+x*p+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*a+x*h+w*g,t[13]=_*i+b*l+x*d+w*m,t[14]=_*o+b*c+x*f+w*v,t[15]=_*s+b*u+x*p+w*y,t}function Gi(t,e,n){var r,i,o,s,a,l,c,u,h,d,f,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*g+a*m+h*v+e[12],t[13]=i*g+l*m+d*v+e[13],t[14]=o*g+c*m+f*v+e[14],t[15]=s*g+u*m+p*v+e[15]),t}function Yi(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Xi(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=s*i+u*r,t[6]=a*i+h*r,t[7]=l*i+d*r,t[8]=c*i-o*r,t[9]=u*i-s*r,t[10]=h*i-a*r,t[11]=d*i-l*r,t}function qi(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=s*i+u*r,t[2]=a*i+h*r,t[3]=l*i+d*r,t[4]=c*i-o*r,t[5]=u*i-s*r,t[6]=h*i-a*r,t[7]=d*i-l*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Zi=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t};var Ki=function(t,e,n,r,i,o,s){var a=1/(e-n),l=1/(r-i),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(s+o)*c,t[15]=1,t};function Qi(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}!function(){var t=function(){var t=new Vi(4);return Vi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function Ji(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function $i(t){let e,n={};return r=>{for(const i in r)if(!Ji(r[i],n[i])){e=t(r),n=r;break}return e}}const to=[0,0,0,0],eo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],no=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ro=[0,0,0],io=[0,0,0],oo=$i((function(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=t;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=to,l=to,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:d}=so(t,e,n);d&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Qi([],l,s),o=r||o,s=Wi([],i,o),s=Wi([],s,eo));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(e,r,i),h=e.getDistanceScales(),d=[e.width*n,e.height*n],f=Qi([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:d,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:ro,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:no,project_uCameraPosition:l};if(u){const t=e.getDistanceScales(u);switch(r){case Ii.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case Ii.LNGLAT:case Ii.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case Ii.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function so(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:io;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===Ii.LNGLAT_OFFSETS||e===Ii.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Fi.WEB_MERCATOR:e!==Ii.LNGLAT&&e!==Ii.CARTESIAN||(r=[0,0,0],o=!1);break;case Fi.WEB_MERCATOR_AUTO_OFFSET:e===Ii.LNGLAT?i=r:e===Ii.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Fi.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Fi.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}function ao(t){let{viewport:e,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=Ii.DEFAULT,coordinateOrigin:o=io,autoWrapLongitude:s=!1}=t;i===Ii.DEFAULT&&(i=e.isGeospatial?Ii.LNGLAT:Ii.CARTESIAN);const a=oo({viewport:e,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||no,a}const lo=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"_pool",[]),li(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,n){let{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=i||t&&t.constructor||Float32Array,u=e*r+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let h=1/0;l&&(h=l*r+o);const d=this._allocate(c,u,a,h);return t&&s?d.set(t):a||d.fill(0,0,4),this._release(t),d}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=t.BYTES_PER_ELEMENT*i,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}},co=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function uo(t){let{precision:e=co.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=mo(t),"".concat(parseFloat(t.toPrecision(e)))}function ho(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fo(t,e,n){return vo(t,(t=>Math.max(e,Math.min(n,t))))}function po(t,e,n){return ho(t)?t.map(((t,r)=>po(t,e[r],n))):n*e+(1-n)*t}function go(t,e,n){const r=co.EPSILON;n&&(co.EPSILON=n);try{if(t===e)return!0;if(ho(t)&&ho(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!go(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=co.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{co.EPSILON=r}}function mo(t){return Math.round(t/co.EPSILON)*co.EPSILON}function vo(t,e,n){if(ho(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}class yo extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:ho(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(co)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+uo(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!go(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=r[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=r[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(co.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function _o(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function bo(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function xo(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(co.debug&&!_o(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function wo(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class So extends yo{get x(){return this[0]}set x(t){this[0]=bo(t)}get y(){return this[1]}set y(t){this[1]=bo(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return bo(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return bo(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=r[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=r[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return wo(t>=0&&t<this.ELEMENTS,"index is out of range"),bo(this[t])}setComponent(t,e){return wo(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}function Ao(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}var Eo=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};!function(){var t=function(){var t=new Vi(3);return Vi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function Co(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}const ko=[0,0,0];let To;class Mo extends So{static get ZERO(){return To||(To=new Mo(0,0,0),Object.freeze(To)),To}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&ho(t)?this.copy(t):(co.debug&&(bo(t),bo(e),bo(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return co.debug&&(bo(t.x),bo(t.y),bo(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=bo(t)}angle(t){return function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a),c=l&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,t)}cross(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2];t[0]=i*l-o*a,t[1]=o*s-r*l,t[2]=r*a-i*s}(this,this,t),this.check()}rotateX(t){let{radians:e,origin:n=ko}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY(t){let{radians:e,origin:n=ko}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ(t){let{radians:e,origin:n=ko}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Ao(this,this,t),this.check()}transformAsVector(t){return Co(this,this,t),this.check()}transformByMatrix3(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],l=e[1],c=e[2],u=i*c-o*l,h=o*a-r*c,d=r*l-i*a,f=i*d-o*h,p=o*u-r*d,g=r*h-i*u,m=2*s;u*=m,h*=m,d*=m,f*=2,p*=2,g*=2,t[0]=a+u+f,t[1]=l+h+p,t[2]=c+d+g}(this,this,t),this.check()}}const Po=new Mo;function Lo(t,e,n,r){Po.set(t,e,n);const i=Po.len();return{distance:r/i,normal:new Mo(-t/i,-e/i,-n/i)}}function Oo(t){return t-Math.fround(t)}let Ro;function Do(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,o=(i-r)/n;Ro=lo.allocate(Ro,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let e=0;e<n;e++){const r=t[s++];Ro[a+e]=r,Ro[a+e+n]=Oo(r)}a+=2*n}return Ro.subarray(0,o*n*2)}class Io extends yo{toString(){let t="[";if(co.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=bo(n),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[n+r];return e}setColumn(t,e){const n=t*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}function Fo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function No(t,e){return t[0]=-e[0],t[1]=-e[1],t}function jo(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var zo;!function(){var t=function(){var t=new Vi(2);return Vi!=Float32Array&&(t[0]=0,t[1]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(zo||(zo={}));const Bo=45*Math.PI/180,Uo=1,Vo=.1,Ho=500,Wo=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Go extends Io{static get IDENTITY(){return function(){Xo||(Xo=new Go,Object.freeze(Xo));return Xo}()}static get ZERO(){return function(){Yo||(Yo=new Go([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Yo));return Yo}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return zo}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=h,this[12]=d,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,g){return this[0]=t,this[1]=i,this[2]=l,this[3]=d,this[4]=e,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=r,this[13]=a,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Wo)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,h=r*a,d=i*s,f=i*a,p=i*l,g=o*s,m=o*a,v=o*l;t[0]=1-h-p,t[1]=u+v,t[2]=d-m,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:o=Vo,far:s=Ho}=t;return s===1/0?function(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,h=-1,d=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=h,t[12]=0,t[13]=0,t[14]=d,t[15]=0}(this,e,n,r,i,o):function(t,e,n,r,i,o,s){var a=1/(n-e),l=1/(i-r),c=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0}(this,e,n,r,i,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,o,s,a,l,c,u,h,d,f,p=e[0],g=e[1],m=e[2],v=r[0],y=r[1],_=r[2],b=n[0],x=n[1],w=n[2];Math.abs(p-b)<Ui&&Math.abs(g-x)<Ui&&Math.abs(m-w)<Ui?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=p-b,h=g-x,d=m-w,i=y*(d*=f=1/Math.hypot(u,h,d))-_*(h*=f),o=_*(u*=f)-v*d,s=v*h-y*u,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=h*s-d*o,l=d*i-u*s,c=u*o-h*i,(f=Math.hypot(a,l,c))?(a*=f=1/f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*p+o*g+s*m),t[13]=-(a*p+l*g+c*m),t[14]=-(u*p+h*g+d*m),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:o=Vo,far:s=Ho}=t;return Ki(this,e,n,r,i,o,s),this.check()}orthographic(t){const{fovy:e=Bo,aspect:n=Uo,focalDistance:r=1,near:i=Vo,far:o=Ho}=t;qo(e);const s=e/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return qo(e),Zi(this,e,n,r,i),this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*s-n*o)*(h*m-d*g)-(e*a-r*o)*(u*m-d*p)+(e*l-i*o)*(u*g-h*p)+(n*a-r*s)*(c*m-d*f)-(n*l-i*s)*(c*g-h*f)+(r*l-i*a)*(c*p-u*f)}(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return Hi(this,this),this.check()}multiplyLeft(t){return Wi(this,t,this),this.check()}multiplyRight(t){return Wi(this,this,t),this.check()}rotateX(t){return Xi(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=s*i-u*r,t[2]=a*i-h*r,t[3]=l*i-d*r,t[8]=o*r+c*i,t[9]=s*r+u*i,t[10]=a*r+h*i,t[11]=l*r+d*i}(this,this,t),this.check()}rotateZ(t){return qi(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,o,s,a,l,c,u,h,d,f,p,g,m,v,y,_,b,x,w,S,A,E,C,k,T=r[0],M=r[1],P=r[2],L=Math.hypot(T,M,P);L<Ui||(T*=L=1/L,M*=L,P*=L,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],l=e[1],c=e[2],u=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],_=T*T*s+o,b=M*T*s+P*i,x=P*T*s-M*i,w=T*M*s-P*i,S=M*M*s+o,A=P*M*s+T*i,E=T*P*s+M*i,C=M*P*s-T*i,k=P*P*s+o,t[0]=a*_+h*b+g*x,t[1]=l*_+d*b+m*x,t[2]=c*_+f*b+v*x,t[3]=u*_+p*b+y*x,t[4]=a*w+h*S+g*A,t[5]=l*w+d*S+m*A,t[6]=c*w+f*S+v*A,t[7]=u*w+p*S+y*A,t[8]=a*E+h*C+g*k,t[9]=l*E+d*C+m*k,t[10]=c*E+f*C+v*k,t[11]=u*E+p*C+y*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Yi(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return Gi(this,this,t),this.check()}transform(t,e){return 4===t.length?(xo(e=Qi(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=Ao(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return xo(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:n=Co(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return xo(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let Yo,Xo;function qo(t){if(t>2*Math.PI)throw Error("expected radians")}function Zo(t,e){const n=Qi([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function Ko(t,e){const n=t%e;return n<0?e+n:n}function Qo(t,e,n){return t<e?e:t>n?n:t}const Jo=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function $o(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ts=Math.PI,es=ts/4,ns=ts/180,rs=180/ts,is=512,os=4003e4,ss=85.051129,as=1.5;function ls(t){const[e,n]=t;$o(Number.isFinite(e)),$o(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*ns;return[is*(e*ns+ts)/(2*ts),is*(ts+Math.log(Math.tan(es+.5*r)))/(2*ts)]}function cs(t){const[e,n]=t,r=e/is*(2*ts)-ts,i=2*(Math.atan(Math.exp(n/is*(2*ts)-ts))-es);return[r*rs,i*rs]}function us(t){const{latitude:e}=t;$o(Number.isFinite(e));const n=Math.cos(e*ns);return function(t){return Jo(t)}(os*n)-9}function hs(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;$o(Number.isFinite(e)&&Number.isFinite(n));const i=Math.cos(e*ns),o=512/360,s=o/i,a=12790407194604047e-21/i,l={unitsPerMeter:[a,a,a],metersPerUnit:[1/a,1/a,1/a],unitsPerDegree:[o,s,a],degreesPerUnit:[.703125,1/s,1/a]};if(r){const t=ns*Math.tan(e*ns)/i,n=o*t/2,r=12790407194604047e-21*t,c=r/s*a;l.unitsPerDegree2=[0,n,r],l.unitsPerMeter2=[c,0,c]}return l}function ds(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=hs({longitude:n,latitude:r,highPrecision:!0}),u=ls(t);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const h=cs(u),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],d]:h}function fs(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=ps(as)}=t;void 0!==r&&(u=ps(r));const h=u*ns,d=i*ns,f=gs(u);let p=f;s&&(p+=s[2]*a/Math.cos(d)/n);const g=h*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(Qo(Math.PI/2-d-g,.01,Math.PI-.01)),v=Math.sin(d)*m+p,y=10*p;return{fov:h,aspect:e/n,focalDistance:f,near:l,far:Math.min(v*c,y)}}function ps(t){return 2*Math.atan(.5/t)*rs}function gs(t){return.5/Math.tan(.5*t*ns)}function ms(t,e){const[n,r,i=0]=t;return $o(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Zo(e,[n,r,i,1])}function vs(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=t;if($o(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Zo(e,[r,i,o,1])}const s=Zo(e,[r,i,0,1]),a=Zo(e,[r,i,1,1]),l=s[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return jo([],s,a,u)}function ys(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,l],[c,u]]=r,h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return $o(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),d=ls([a,Qo(u,-85.051129,ss)]),f=ls([c,Qo(l,-85.051129,ss)]),p=[Math.max(Math.abs(f[0]-d[0]),i),Math.max(Math.abs(f[1]-d[1]),i)],g=[e-h.left-h.right-2*Math.abs(s[0]),n-h.top-h.bottom-2*Math.abs(s[1])];$o(g[0]>0&&g[1]>0);const m=g[0]/p[0],v=g[1]/p[1],y=(h.right-h.left)/2/m,_=(h.bottom-h.top)/2/v,b=cs([(f[0]+d[0])/2+y,(f[1]+d[1])/2+_]),x=Math.min(o,Jo(Math.abs(Math.min(m,v))));return $o(Number.isFinite(x)),{longitude:b[0],latitude:b[1],zoom:x}}const _s=Math.PI/180;function bs(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Zo(r,[e,0,1,1]),o=Zo(r,[e,t.height,1,1]),s=cs(jo([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}const xs=Math.PI/180,ws=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ss=[0,0,0],As={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Es{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"id",void 0),li(this,"x",void 0),li(this,"y",void 0),li(this,"width",void 0),li(this,"height",void 0),li(this,"isGeospatial",void 0),li(this,"zoom",void 0),li(this,"focalDistance",void 0),li(this,"position",void 0),li(this,"modelMatrix",void 0),li(this,"distanceScales",void 0),li(this,"scale",void 0),li(this,"center",void 0),li(this,"cameraPosition",void 0),li(this,"projectionMatrix",void 0),li(this,"viewMatrix",void 0),li(this,"viewMatrixUncentered",void 0),li(this,"viewMatrixInverse",void 0),li(this,"viewProjectionMatrix",void 0),li(this,"pixelProjectionMatrix",void 0),li(this,"pixelUnprojectionMatrix",void 0),li(this,"resolution",void 0),li(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||As,this.focalDistance=t.focalDistance||1,this.position=t.position||Ss,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Fi.WEB_MERCATOR:Fi.WEB_MERCATOR_AUTO_OFFSET:Fi.IDENTITY}equals(t){return t instanceof Es&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&go(t.projectionMatrix,this.projectionMatrix)&&go(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ms(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,s=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=vs([r,s,o],this.pixelUnprojectionMatrix,a),[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=ls(t);return e[1]=fo(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?cs(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),n=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),i=this.unproject([this.width,this.height],t);return[Math.min(e[0],n[0],r[0],i[0]),Math.min(e[1],n[1],r[1],i[1]),Math.max(e[0],n[0],r[0],i[0]),Math.max(e[1],n[1],r[1],i[1])]}getDistanceScales(t){return t?hs({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:n,width:r=1,height:i=1}=t;return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:Lo((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Lo(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Lo(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Lo(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Lo(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Lo(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=us({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||hs({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=t;let s=Ss;if(i&&(s=o?new Go(o).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new Mo(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=ws,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Go).multiplyRight(e).translate(new Mo(this.center).negate()),this.projectionMatrix=n||function(t){let{width:e,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:s,near:a,far:l}=t;const c=e/n,u=r?(new Go).orthographic({fovy:i,aspect:c,focalDistance:o,near:a,far:l}):(new Go).perspective({fovy:i,aspect:c,near:a,far:l});if(s){const{left:t=0,right:r=0,top:i=0,bottom:o=0}=s,a=fo((t+e-r)/2,0,e)-e/2,l=fo((i+n-o)/2,0,n)-n/2;u[8]-=2*a/e,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*xs,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var h;Wi(u,u,this.projectionMatrix),Wi(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=Hi([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(h=this.viewMatrixInverse)[12],h[13],h[14]];const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Yi(d,d,[this.width/2,-this.height/2,1]),Gi(d,d,[1,-1,0]),Wi(f,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=Hi([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Di.warn("Pixel project matrix not invertible")()}}li(Es,"displayName","Viewport");const Cs=Math.PI/180;function ks(t){return 512/4003e4/Math.cos(t*Cs)}class Ts extends Es{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,orthographic:l=!1,projectionMatrix:c,repeat:u=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:f,height:p,altitude:g=1.5}=t;const m=Math.pow(2,r);let v;f=f||1,p=p||1;let y=null;c?(g=c[5]/2,v=ps(g)):(t.fovy?(v=t.fovy,g=gs(v)):v=ps(g),y=fs({width:f,height:p,pitch:i,fovy:v,nearZMultiplier:s,farZMultiplier:a}));let _=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Gi(a,a,[0,0,-i]),Xi(a,a,-n*ns),qi(a,a,r*ns);const l=o/e;var c,u;return Yi(a,a,[l,l,l]),s&&Gi(a,a,((c=[])[0]=-(u=s)[0],c[1]=-u[1],c[2]=-u[2],c)),a}({height:p,pitch:i,bearing:o,scale:m,altitude:g});if(h){_=(new Go).translate([512*h,0,0]).multiplyLeft(_)}super({...t,width:f,height:p,viewMatrix:_,longitude:n,latitude:e,zoom:r,...y,fovy:v,focalDistance:g}),li(this,"longitude",void 0),li(this,"latitude",void 0),li(this,"pitch",void 0),li(this,"bearing",void 0),li(this,"altitude",void 0),li(this,"fovy",void 0),li(this,"orthographic",void 0),li(this,"_subViewports",void 0),li(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=g,this.fovy=v,this.orthographic=l,this._subViewports=u?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let r=e;r<=n;r++){const t=r?new Ts({...this,worldOffset:r}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*ks(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/ks(n)]}addMetersToLngLat(t,e){return ds(t,e)}panByPosition(t,e){const n=vs(e,this.pixelUnprojectionMatrix),r=Fo([],this.projectFlat(t),No([],n)),i=Fo([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let l,c;const u=t.fovy?.5*t.fovy*_s:Math.atan(.5/t.altitude),h=(90-t.pitch)*_s;return u>h-.01?(l=bs(t,0,e),c=bs(t,n,e)):(l=i([0,0],o),c=i([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=ys({width:n,height:r,bounds:t,...e});return new Ts({width:n,height:r,longitude:i,latitude:o,zoom:s})}}function Ms(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.projectPosition(t);if(n&&e instanceof Ts){const[n,i,o=0]=t,s=e.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function Ps(t,e){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:s}=e,[a,l,c=0]=t;switch(r&&([a,l,c]=Qi([],[a,l,c,1],r)),i){case Ii.LNGLAT:return Ms([a,l,c],n,s);case Ii.LNGLAT_OFFSETS:return Ms([a+o[0],l+o[1],c+(o[2]||0)],n,s);case Ii.METER_OFFSETS:return Ms(ds(o,[a,l,c]),n,s);case Ii.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function Ls(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===Ii.DEFAULT&&(i=e.isGeospatial?Ii.LNGLAT:Ii.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:u}=so(n,r,i),h=Ps(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:u});if(u){const t=n.projectPosition(l||c);Eo(h,h,t)}return h}li(Ts,"displayName","WebMercatorViewport");const Os=[255,255,255],Rs=1,Ds=[0,0,1],Is=[0,0,1];let Fs=0;class Ns{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"id",void 0),li(this,"color",void 0),li(this,"intensity",void 0),li(this,"type","point"),li(this,"position",void 0),li(this,"attenuation",void 0),li(this,"projectedLight",void 0);const{color:e=Os}=t,{intensity:n=Rs}=t,{position:r=Is}=t;this.id=t.id||"point-".concat(Fs++),this.color=e,this.intensity=n,this.type="point",this.position=r,this.attenuation=function(t){if(t.attenuation)return t.attenuation;if("intensity"in t)return[0,0,t.intensity||0];return Ds}(t),this.projectedLight={...this}}getProjectedLight(t){let{layer:e}=t;const{projectedLight:n}=this,r=e.context.viewport,{coordinateSystem:i,coordinateOrigin:o}=e.props,s=Ls(this.position,{viewport:r,coordinateSystem:i,coordinateOrigin:o,fromCoordinateSystem:r.isGeospatial?Ii.LNGLAT:Ii.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return n.color=this.color,n.intensity=this.intensity,n.position=s,n}}const js="vs",zs="fs";function Bs(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Us={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Vs(t){let e=Hs(t);return"object"===e?t?"type"in t?Object.assign({},t,Us[t.type]):"value"in t?(e=Hs(t.value),Object.assign({type:e},t,Us[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Us[e])}function Hs(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class Ws{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}=t;Bs("string"===typeof e),this.name=e,this.vs=n||u,this.fs=r||h,this.getModuleUniforms=s,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);"string"===typeof r&&(r={order:0,injection:r}),e[i][n]=r}return e}(c),o&&(this.uniforms=function(t){const e={};for(const n in t){const r=Vs(t[n]);e[n]=r}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:Bs(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&Bs(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function Gs(t){return Ys(qs(t))}function Ys(t){const e={},n={};return Xs({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function Xs(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&Xs({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function qs(t,e){return t.map((t=>(t instanceof Ws||(Bs("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Bs(t.name,"shader module has no name"),(t=new Ws(t)).dependencies=qs(t.dependencies)),t)))}function Zs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}const Ks={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Qs={};Object.keys(Ks).forEach((t=>{Qs[t]=t}));const Js={};function $s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Ks[e];if(Bs(r,e),!Zs(n))return!0;if(e in Js)return Js[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Js[e]=l,l}function ta(t,e){const n=Ks[e];Bs(n,e);const r=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return Bs(!1===i||!0===i),i}function ea(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>ta(t,e)))}const na={[js]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[zs]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},ra="__LUMA_INJECT_DECLARATIONS__",ia=/void\s+main\s*\([^)]*\)\s*\{\n?/,oa=/}\n?[^{}]*$/,sa=[];function aa(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===js;for(const o in n){const e=n[o];e.sort(((t,e)=>t.order-e.order)),sa.length=e.length;for(let t=0,n=e.length;t<n;++t)sa[t]=e[t].injection;const r="".concat(sa.join("\n"),"\n");switch(o){case"vs:#decl":i&&(t=t.replace(ra,r));break;case"vs:#main-start":i&&(t=t.replace(ia,(t=>t+r)));break;case"vs:#main-end":i&&(t=t.replace(oa,(t=>r+t)));break;case"fs:#decl":i||(t=t.replace(ra,r));break;case"fs:#main-start":i||(t=t.replace(ia,(t=>t+r)));break;case"fs:#main-end":i||(t=t.replace(oa,(t=>r+t)));break;default:t=t.replace(o,(t=>t+r))}}return t=t.replace(ra,""),r&&(t=t.replace(/\}\s*$/,(t=>t+na[e]))),t}function la(t){const e={};return Bs(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function ca(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const ua=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ha=[...ua,[ca("attribute"),"in $1"],[ca("varying"),"out $1"]],da=[...ua,[ca("varying"),"in $1"]],fa=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],pa=[...fa,[ca("in"),"attribute $1"],[ca("out"),"varying $1"]],ga=[...fa,[ca("in"),"varying $1"]],ma="gl_FragColor",va=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ya=/void\s+main\s*\([^)]*\)\s*\{\n?/;function _a(t,e,n){switch(e){case 300:return n?ba(t,ha):function(t){const e=(t=ba(t,da)).match(va);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(ma,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(ya,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(ma,"\\b"),"g"),e)}return t}(t);case 100:return n?ba(t,pa):function(t){const e=(t=ba(t,ga)).match(va);if(e){const n=e[1];t=t.replace(va,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ma)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function ba(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const xa="\n\n".concat(ra,"\n\n"),wa={[js]:"vertex",[zs]:"fragment"};function Sa(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=e;Bs("string"===typeof r,"shader source must be a string");const d=i===js,f=r.split("\n");let p=100,g="",m=r;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const v={};o.forEach((t=>{Object.assign(v,t.getDefines())})),Object.assign(v,s);let y=u?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:r}=t;return e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(wa[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(wa[e].toUpperCase(),"\n")}({type:i}),"\n").concat(function(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937),i=function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r);return{gpuVendor:i,vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return ea(t,Qs.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),ea(t,Qs.GLSL_DERIVATIVES)&&$s(t,Qs.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),ea(t,Qs.GLSL_FRAG_DATA)&&$s(t,Qs.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),ea(t,Qs.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(v),"\n").concat(d?"":"precision highp float;\n\n","\n"):"".concat(g,"\n");const _=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!==typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})})),e}(a),b={},x={},w={};for(const S in l){const t="string"===typeof l[S]?{injection:l[S],order:0}:l[S],e=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(e){const n=e[2],r=e[3];n?"decl"===r?x[S]=[t]:w[S]=[t]:b[S]=[t]}else w[S]=[t]}for(const S of o){h&&S.checkDeprecations(m,h);y+=S.getModuleSource(i,p);const t=S.injections[i];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?x:w;r[e]=r[e]||[],r[e].push(t[e])}else b[e]=b[e]||[],b[e].push(t[e])}}return y+=xa,y=aa(y,i,x),y+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(_[i],b),y+=m,y=aa(y,i,w),y=_a(y,c?100:p,d),y}function Aa(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const Ea=new Pi({id:"luma.gl"});function Ca(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const ka="Invalid WebGLRenderingContext";function Ta(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function Ma(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function Pa(t){return Ca(Ta(t),ka),t}function La(t){return Ca(Ma(t),"Requires WebGL2"),t}const Oa={};function Ra(t,e){var n;Oa[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const Da=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const e=new t.VertexAttrib(n);this.attribs[r]=e}this.maxAttrib=0};(Da.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Ia=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(Oa[n]=!0)}while(0!==n);for(n in Oa)if(Oa[n])return delete Oa[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject,o=i.attribs[t];switch(r){case 34975:return o.buffer;case 34338:return o.enabled;case 34339:return o.size;case 34340:return o.stride;case 34341:return o.type;case 34922:return o.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,s,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=s,c.offset=a,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};Ia.prototype.VERTEX_ARRAY_BINDING_OES=34229,Ia.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new Da(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Ia.prototype.createVertexArrayOES=function(){const t=new Da(this);return this.vertexArrayObjects.push(t),t},Ia.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},Ia.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof Da&&t.hasBeenBound&&t.ext===this)},Ia.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void Ra(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let a=0;a<=s;a++){const t=i.attribs[a],s=r?r.attribs[a]:null;if(r&&t.enabled===s.enabled||(t.enabled?n.enableVertexAttribArray.call(e,a):n.disableVertexAttribArray.call(e,a)),t.enabled){let i=!1;r&&t.buffer===s.buffer||(o!==t.buffer&&(n.bindBuffer.call(e,34962,t.buffer),o=t.buffer),i=!0),(i||t.cached!==s.cached)&&n.vertexAttribPointer.call(e,a,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const Fa="OES_element_index",Na="WEBGL_draw_buffers",ja="WEBGL_debug_renderer_info",za=t=>Ma(t)?void 0:0,Ba={3074:t=>Ma(t)?void 0:36064,35723:t=>Ma(t)?void 0:4352,35977:za,32937:za,36795:(t,e)=>{const n=Ma(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(ja);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(ja);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:za,35071:za,37447:za,36063:(t,e)=>{if(!Ma(t)){const n=t.getExtension(Na);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:za,35374:za,35377:za,34852:t=>{if(!Ma(t)){const e=t.getExtension(Na);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Fa)?2147483647:65535,33001:t=>t.getExtension(Fa)?16777216:65535,33e3:t=>16777216,37157:za,35373:za,35657:za,36183:za,37137:za,34045:za,35978:za,35979:za,35968:za,35376:za,35375:za,35659:za,37154:za,35371:za,35658:za,35076:za,35077:za,35380:za};const Ua="ANGLE_instanced_arrays";const Va={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ca(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Ua]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ca(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ca(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ca(!1)},deleteQuery:()=>{Ca(!1)},beginQuery:()=>{Ca(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Ha={readBuffer:(t,e,n)=>{Ma(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=function(t,e){return{webgl2:Ma(t),ext:t.getExtension(e)}}(t,Ua);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Ma(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>Ma(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=Ba[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function Wa(t,e){let{extension:n,target:r,target2:i}=e;const o=Va[n];Ca(o);const{meta:s={}}=o,{suffix:a=""}=s,l=t.getExtension(n);for(const c of Object.keys(o)){const e="".concat(c).concat(a);let n=null;"meta"===c||"function"===typeof t[c]||(l&&"function"===typeof l[e]?n=function(){return l[e](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(r))),n&&(r[c]=n,i[c]=n)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"===typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Ia(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Wa(t,{extension:n,target:t.luma,target2:t})}(t,Va),function(t,e){let{target:n,target2:r}=e;Object.keys(Ha).forEach((e=>{if("function"===typeof Ha[e]){const i=t[e]?t[e].bind(t):()=>{},o=Ha[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Ga={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ya=(t,e,n)=>e?t.enable(n):t.disable(n),Xa=(t,e,n)=>t.hint(n,e),qa=(t,e,n)=>t.pixelStorei(n,e);function Za(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Ka={3042:Ya,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Ya,2885:(t,e)=>t.cullFace(e),2929:Ya,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Ya,35723:Xa,36006:(t,e)=>{const n=Ma(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:Xa,2849:(t,e)=>t.lineWidth(e),32823:Ya,32824:"polygonOffset",10752:"polygonOffset",35977:Ya,32938:"sampleCoverage",32939:"sampleCoverage",3089:Ya,3088:(t,e)=>t.scissor(...e),2960:Ya,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:qa,3317:qa,37440:qa,37441:qa,37443:qa,3330:qa,3332:qa,3331:qa,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:qa,32878:qa,3316:qa,3315:qa,32877:qa,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Za(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Za(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Za(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Za(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=Za(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Qa(t,e,n){return void 0!==e[t]?e[t]:n[t]}const Ja={blendEquation:(t,e,n)=>t.blendEquationSeparate(Qa(32777,e,n),Qa(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Qa(32969,e,n),Qa(32968,e,n),Qa(32971,e,n),Qa(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Qa(32824,e,n),Qa(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Qa(32938,e,n),Qa(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Qa(2962,e,n),Qa(2967,e,n),Qa(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Qa(34816,e,n),Qa(36003,e,n),Qa(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Qa(2964,e,n),Qa(2965,e,n),Qa(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Qa(34817,e,n),Qa(34818,e,n),Qa(34819,e,n))},$a={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},tl=(t,e)=>t.isEnabled(e),el={3042:tl,2884:tl,2929:tl,3024:tl,32823:tl,32926:tl,32928:tl,3089:tl,2960:tl,35977:tl};function nl(t){for(const e in t)return!1;return!0}function rl(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function il(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function ol(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(t.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function sl(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}class al{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?hl(t):Object.assign({},Ga),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ca(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ul(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){Ca(void 0!==i);const o=t[i],s=this.cache[i];rl(o,s)||(n=!0,e=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}function ll(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Ca(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new al(t,{copyState:r}),sl(t);for(const n in $a){ol(t,n,$a[n])}il(t,"getParameter"),il(t,"isEnabled")}return t.state.enable=n,t}function cl(t){Ca(t.state),t.state.pop()}function ul(t,e){if(Ca(Ta(t),"setParameters requires a WebGL context"),nl(e))return;const n={};for(const i in e){const r=Number(i),o=Ka[i];o&&("string"===typeof o?n[o]=!0:o(t,e[i],r))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,Ja[i])(t,e,r)}}function hl(t,e){if("number"===typeof(e=e||Ga)){const n=e,r=el[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const e=el[i];r[i]=e?e(t,Number(i)):t.getParameter(Number(i))}return r}function dl(t,e,n){if(nl(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||ll(t,{copyState:!1}),t.state.push()}(t),ul(t,e),r)i=n(t),cl(t);else try{i=n(t)}finally{cl(t)}return i}function fl(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function pl(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=fl(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return ml(e,r,i,o,n)}function gl(t){const e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function ml(t,e,n,r,i){const o=vl(t[0],e,n);let s=yl(t[1],e,r,i),a=vl(t[0]+1,e,n);const l=a===n-1?a:a-1;let c;return a=yl(t[1]+1,e,r,i),i?(a=0===a?a:a+1,c=s,s=a):c=a===r-1?a:a-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}function vl(t,e,n){return Math.min(Math.round(t*e),n-1)}function yl(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const _l=pi(),bl=_l&&"undefined"!==typeof document,xl={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function wl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ca(_l,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},xl,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let i;t.onError=r;const{canvas:o}=t,s=El({canvas:o,width:e,height:n,onError:r});return i=Al(s,t),i?(i=Sl(i,t),Cl(i),i):null}function Sl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||kl(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},xl,e);const{manageState:n,debug:r}=e;return n&&ll(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ea.log(1,...e)()}}),_l&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Ea.level=Math.max(Ea.level,1)):Ea.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Al(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function El(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;if("string"===typeof n){bl&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}function Cl(t){const e=Ma(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Ea.info(1,"".concat(e).concat(i," context ").concat(r))()}function kl(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function Tl(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(Ea.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let n=e;const o=Math.floor(r*n),s=Math.floor(i*n);t.canvas.width=o,t.canvas.height=s,t.drawingBufferWidth===o&&t.drawingBufferHeight===s||(Ea.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function Ml(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class Pl{constructor(t,e){li(this,"name",void 0),li(this,"type",void 0),li(this,"sampleSize",1),li(this,"time",void 0),li(this,"count",void 0),li(this,"samples",void 0),li(this,"lastTiming",void 0),li(this,"lastSampleTime",void 0),li(this,"lastSampleCount",void 0),li(this,"_count",0),li(this,"_time",0),li(this,"_samples",0),li(this,"_startTime",0),li(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Ml(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Ml()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Ll{constructor(t){li(this,"id",void 0),li(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof Pl?t:new Pl(e,n)),this.stats[e]}}const Ol="8.5.14";const Rl=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new Ll({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==Ol)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Ol));globalThis.luma||(pi()&&Ea.log(1,"luma.gl ".concat(Ol," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Ol,version:Ol,log:Ea,stats:Rl,globals:{modules:{},nodeIO:{}}});globalThis.luma;function Dl(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Il(t,e){if("string"!==typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return Dl(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function Fl(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const Nl={};function jl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";Nl[t]=Nl[t]||1;const e=Nl[t]++;return"".concat(t,"-").concat(e)}function zl(t){return Dl("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function Bl(t){let e=!0;for(const n in t){e=!1;break}return e}function Ul(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((t=>{o.methodName||(o[t]=()=>{throw Ea.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const Vl="Resource subclass must define virtual methods";class Hl{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pa(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||jl(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Dl(t=Il(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Ma(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=Ma(this.gl),o={},s=e||Object.keys(r);for(const a of s){const e=r[a];if(e&&(!("webgl2"in e)||i)&&(!("extension"in e)||this.gl.getExtension(e.extension))){const r=n?Fl(this.gl,a):a;o[r]=this.getParameter(a,t),n&&"GLenum"===e.type&&(o[r]=Fl(this.gl,o[r]))}}return o}setParameter(t,e){Dl(t=Il(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=Ma(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Il(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return Ul(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(Vl)}_deleteHandle(){throw new Error(Vl)}_bindHandle(t){throw new Error(Vl)}_getOptsFromHandle(){throw new Error(Vl)}_getParameter(t,e){throw new Error(Vl)}_setParameter(t,e){throw new Error(Vl)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=Rl.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Rl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const n=Rl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const e=Rl.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}function Wl(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Gl(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Yl(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const t=a*s,n=(r-a-1)*s;o.set(e.subarray(t,t+s)),e.copyWithin(t,n,n+s),e.set(o,n)}}function Xl(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let t=0;t<i;t++)for(let r=0;r<4;r++)s[4*(a*i+t)+r]=e[4*(2*a*n+2*t)+r];return{data:s,width:i,height:o}}function ql(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in e){const e=r[a]?"".concat(t,".").concat(r[a]):"N/A";Ea.removed("".concat(t,".").concat(a),e)()}for(const a in i)if(a in e){const e=i[a];Ea.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(e))()}let s=null;for(const a in o)if(a in e){const n=o[a];Ea.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(n))(),s=s||Object.assign({},e),s[n]=e[a],delete s[a]}return s||e}const Zl={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Kl={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Ql{static getBytesPerElement(t){return Gl(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){Dl(t.size);return Gl(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Ql(...[Zl,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Ql.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Ql.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=ql("Accessor",t,Kl),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const Jl={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},$l={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Jl},tc={removedProps:Jl};class ec extends Hl{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ql.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Ql.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=ql("Buffer",t,$l),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=ql("Buffer",t,tc))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new Ql(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;Dl(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(La(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:o}=this;return La(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};La(this.gl);const i=Gl(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),s=n;let a,l;t?(l=t.length,a=l-s):(a=Math.min(o,r||o),l=s+a);const c=Math.min(o,a);return r=r||c,Dl(r<=c),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(Dl(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;Dl(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=Wl(t);return Dl(i),this.setAccessor(new Ql(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Dl(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/Gl(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new Ql(this.accessor,{type:Wl(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Ea.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ea.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Ea.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Ea.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Ql(this.accessor,t),this}}const nc={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},rc={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},ic={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const oc=[9729,9728],sc=globalThis.WebGLBuffer||function(){};class ac extends Hl{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=nc[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=Ma(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=nc[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=jl("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:l={},textureUnit:c}=t;e||(e=r);let{width:u,height:h,dataFormat:d,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:u,height:h,compressed:p,dataFormat:d,type:f}=this._deduceParameters({format:i,type:f,dataFormat:d,compressed:p,data:e,width:u,height:h})),this.width=u,this.height=h,this.depth=m,this.format=i,this.type=f,this.dataFormat=d,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Ea.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:u,height:h,depth:m,format:i,type:f,dataFormat:d,border:o,mipmaps:g,parameters:l,compressed:p}),g&&this.generateMipmap(),this.setParameters(a),s&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Ea.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),dl(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=t;let{data:l=null,type:c=this.type,width:u=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:c,dataFormat:d,compressed:f,width:u,height:h}=this._deduceParameters({format:i,type:c,dataFormat:d,compressed:f,data:l,width:u,height:h}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:f}));let v=0;if(dl(this.gl,a,(()=>{switch(m){case"null":p.texImage2D(e,r,i,u,h,o,d,c,l);break;case"typed-array":p.texImage2D(e,r,i,u,h,o,d,c,l,s);break;case"buffer":g=La(p),g.bindBuffer(35052,l.handle||l),g.texImage2D(e,r,i,u,h,o,d,c,s),g.bindBuffer(35052,null);break;case"browser-object":Ma(p)?p.texImage2D(e,r,i,u,h,o,d,c,l):p.texImage2D(e,r,i,d,c,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),v+=n.levelSize;break;default:Dl(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(v,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=rc[this.dataFormat]||4,e=ic[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:f=0,border:p=this.border,parameters:g={}}=t;if(({type:u,dataFormat:h,compressed:d,width:s,height:a}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:d,data:r,width:s,height:a})),Dl(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,s=t.shape[0],a=t.shape[1]}r instanceof ec&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),dl(this.gl,g,(()=>{if(d)this.gl.compressedTexSubImage2D(e,l,i,o,s,a,c,r);else if(null===r)this.gl.texSubImage2D(e,l,i,o,s,a,h,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,o,s,a,h,u,r,f);else if(r instanceof sc){const t=La(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,l,i,o,s,a,h,u,f),t.bindBuffer(35052,null)}else if(Ma(this.gl)){La(this.gl).texSubImage2D(e,l,i,o,s,a,h,u,r)}else this.gl.texSubImage2D(e,l,i,o,h,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ea.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof ec?{data:e.handle,dataType:"buffer"}:e instanceof sc?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=t;const l=nc[e];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Dl(r,"Could not deduced texture size"),Dl(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),Dl(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Dl(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!Ma(this.gl)&&(!(!this.width||!this.height)&&(!zl(this.width)||!zl(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===oc.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let lc="";class cc extends ac{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return ac.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;Pa(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,Dl("string"===typeof n),n=lc+n,new Promise(((t,e)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(i){e(i)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const uc="EXT_color_buffer_float",hc={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:uc,bpp:2},33327:{gl2:uc,bpp:4},34842:{gl2:uc,bpp:8},33326:{gl2:uc,bpp:4},33328:{gl2:uc,bpp:8},34836:{gl2:uc,bpp:16},35898:{gl2:uc,bpp:4}};class dc extends Hl{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=Ma(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}(t,e,hc)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return Dl(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&Ma(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*hc[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const fc=6144,pc=6145,gc=6146,mc=34041,vc="clear: bad arguments";function yc(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),Dl(0!==s,vc),dl(t,o,(()=>{t.clear(s)}))}const _c=[34069,34070,34071,34072,34073,34074];class bc extends ac{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pa(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:o=0,format:s=6408,type:a=5121}=t;const{gl:l}=this,c=r||i,u=await Promise.all(_c.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),_c.forEach(((t,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&Ea.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{e&&n?l.texImage2D(t,i,s,e,n,o,s,a,r):l.texImage2D(t,i,s,s,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:c}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?c.texImage2D(e,0,a,n,r,s,a,l,u):c.texImage2D(e,0,a,a,l,u),this}}bc.FACES=_c;class xc extends ac{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Ma(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};La(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:s=0,format:a,type:l=5121,offset:c=0,data:u,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),dl(this.gl,h,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,u),u instanceof ec&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=rc[this.dataFormat]||4,e=ic[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function wc(t,e){const{gl:n,width:r,height:i,id:o}=t;return new zc(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function Sc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=Ec(t);Dl(u);const{gl:d,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,36064===o&&null===f&&(o=1028),Dl(p[o]),c=c||p[o].type,s=Cc(s,c,i,a,l),c=c||Wl(s);const g=d.bindFramebuffer(36160,f);return d.readPixels(n,r,a,l,i,c,s),d.bindFramebuffer(36160,g||null),h&&u.delete(),s}function Ac(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Sc(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=Xl({data:r,width:i,height:o}));Yl({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(r),a.putImageData(l,0,0),s.toDataURL()}function Ec(t){return t instanceof zc?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:wc(t),deleteFramebuffer:!0}}function Cc(t,e,n,r,i){if(t)return t;const o=Gl(e=e||5121,{clamped:!1}),s=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Dl(!1),0}}(n);return new o(r*i*s)}const kc="TIMER_QUERY",Tc="ELEMENT_INDEX_UINT32",Mc="BLEND_EQUATION_MINMAX",Pc="FLOAT_BLEND",Lc="TEXTURE_FLOAT",Oc="COLOR_ATTACHMENT_RGBA32F",Rc="GLSL_DERIVATIVES";const Dc={["WEBGL2"]:[!1,!0],["VERTEX_ARRAY_OBJECT"]:["OES_vertex_array_object",!0],[kc]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],["INSTANCED_RENDERING"]:["ANGLE_instanced_arrays",!0],["MULTIPLE_RENDER_TARGETS"]:["WEBGL_draw_buffers",!0],[Tc]:["OES_element_index_uint",!0],[Mc]:["EXT_blend_minmax",!0],[Pc]:["EXT_float_blend"],["COLOR_ENCODING_SRGB"]:["EXT_sRGB",!0],["TEXTURE_DEPTH"]:["WEBGL_depth_texture",!0],[Lc]:["OES_texture_float",!0],["TEXTURE_HALF_FLOAT"]:["OES_texture_half_float",!0],["TEXTURE_FILTER_LINEAR_FLOAT"]:["OES_texture_float_linear"],["TEXTURE_FILTER_LINEAR_HALF_FLOAT"]:["OES_texture_half_float_linear"],["TEXTURE_FILTER_ANISOTROPIC"]:["EXT_texture_filter_anisotropic"],[Oc]:[function(t){const e=new cc(t,{format:6408,type:5126,dataFormat:6408}),n=new zc(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],["COLOR_ATTACHMENT_FLOAT"]:[!1,"EXT_color_buffer_float"],["COLOR_ATTACHMENT_HALF_FLOAT"]:["EXT_color_buffer_half_float"],["GLSL_FRAG_DATA"]:["WEBGL_draw_buffers",!0],["GLSL_FRAG_DEPTH"]:["EXT_frag_depth",!0],[Rc]:["OES_standard_derivatives",!0],["GLSL_TEXTURE_LOD"]:["EXT_shader_texture_lod",!0]};function Ic(t,e){return Fc(t,e)}function Fc(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>Nc(t,e)))}function Nc(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=Dc[e];let r;Dl(n,e);const i=Ma(t)&&n[1]||n[0];if("function"===typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"===typeof i?r=Boolean(t.getExtension(i)):"boolean"===typeof i?r=i:Dl(!1);return r}(t,e)),t.luma.caps[e]||Ea.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const jc="Multiple render targets not supported";class zc extends Hl{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new zc(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=La(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=La(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=t;if(Dl(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const u in r){const t=r[u];(Array.isArray(t)?t[0]:t).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,s,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return Dl(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&Ea.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const r in this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Dl(void 0!==o,"Misspelled framebuffer binding point?");const t=Number(o),e=r[t];let i=e;if(i)if(i instanceof dc)this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[n,r=0,o=0]=e;i=n,this._attachTexture({attachment:t,texture:n,layer:r,level:o})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);n&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(zc.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&yc(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=fc,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};La(t),dl(t,{framebuffer:e},(()=>{switch(n){case fc:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case pc:t.clearBufferfv(pc,0,[i]);break;case gc:t.clearBufferiv(gc,0,[i]);break;case mc:const[e,o]=i;t.clearBufferfi(mc,0,e,o);break;default:Dl(!1,vc)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Ea.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ea.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ea.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ea.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ea.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ea.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:o}=t;const s=La(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?s.invalidateFramebuffer(36008,e):s.invalidateFramebuffer(36008,e,n,r,i,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Fl(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?Fl(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?Fl(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!==typeof window&&window.open(Ac(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>Ea.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=Ac(this,{targetMaxHeight:100});return Ea.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&(o=o||{},o[36064]=new cc(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new dc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new dc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&Dl(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof dc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:La(o).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:Dl(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=Ma(n=this.gl)?n:null;var n;e?e.readBuffer(t):Dl(36064===t||1029===t,jc),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=La(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):Dl(1===t.length&&(36064===t[0]||1029===t[0]),jc)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Dc)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Nc(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}zc.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const Bc={5126:tu.bind(null,"uniform1fv",Yc,1,eu),35664:tu.bind(null,"uniform2fv",Yc,2,eu),35665:tu.bind(null,"uniform3fv",Yc,3,eu),35666:tu.bind(null,"uniform4fv",Yc,4,eu),5124:tu.bind(null,"uniform1iv",Xc,1,eu),35667:tu.bind(null,"uniform2iv",Xc,2,eu),35668:tu.bind(null,"uniform3iv",Xc,3,eu),35669:tu.bind(null,"uniform4iv",Xc,4,eu),35670:tu.bind(null,"uniform1iv",Xc,1,eu),35671:tu.bind(null,"uniform2iv",Xc,2,eu),35672:tu.bind(null,"uniform3iv",Xc,3,eu),35673:tu.bind(null,"uniform4iv",Xc,4,eu),35674:tu.bind(null,"uniformMatrix2fv",Yc,4,nu),35675:tu.bind(null,"uniformMatrix3fv",Yc,9,nu),35676:tu.bind(null,"uniformMatrix4fv",Yc,16,nu),35678:$c,35680:$c,5125:tu.bind(null,"uniform1uiv",qc,1,eu),36294:tu.bind(null,"uniform2uiv",qc,2,eu),36295:tu.bind(null,"uniform3uiv",qc,3,eu),36296:tu.bind(null,"uniform4uiv",qc,4,eu),35685:tu.bind(null,"uniformMatrix2x3fv",Yc,6,nu),35686:tu.bind(null,"uniformMatrix2x4fv",Yc,8,nu),35687:tu.bind(null,"uniformMatrix3x2fv",Yc,6,nu),35688:tu.bind(null,"uniformMatrix3x4fv",Yc,12,nu),35689:tu.bind(null,"uniformMatrix4x2fv",Yc,8,nu),35690:tu.bind(null,"uniformMatrix4x3fv",Yc,12,nu),35678:$c,35680:$c,35679:$c,35682:$c,36289:$c,36292:$c,36293:$c,36298:$c,36299:$c,36300:$c,36303:$c,36306:$c,36307:$c,36308:$c,36311:$c},Uc={},Vc={},Hc={},Wc=[0];function Gc(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(Wc[0]=t,t=Wc);const i=t.length;if(i%e&&Ea.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function Yc(t,e){return Gc(t,e,Float32Array,Uc)}function Xc(t,e){return Gc(t,e,Int32Array,Vc)}function qc(t,e){return Gc(t,e,Uint32Array,Hc)}function Zc(t,e,n){const r=Bc[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function Kc(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function Qc(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof ac||(t instanceof dc||t instanceof zc&&Boolean(t.texture))))}function Jc(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function $c(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function tu(t,e,n,r){let i=null,o=null;return(s,a,l)=>{const c=e(l,n),u=c.length;let h=!1;if(null===i)i=new Float32Array(u),o=u,h=!0;else{Dl(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==i[t]){h=!0;break}}return h&&(r(s,t,a,c),i.set(c)),h}}function eu(t,e,n,r){t[e](n,r)}function nu(t,e,n,r){t[e](n,!1,r)}function ru(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function iu(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||ru(e)||"(unnamed)",l="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const e=i[u];if(e.length<=1)continue;const n=e.split(":"),r=n[0],a=parseInt(n[2],10);if(isNaN(a))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==r?o[a]=e:s[a]=e}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const o=String(r+e),s=o.length;return su(o,i-s)+n+t}))}(e);return{shaderName:l,errors:ou(o,c),warnings:ou(s,c)}}function ou(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),o=i[0],s=parseInt(i[1],10)||0,a=e.substring(i.join(":").length+1).trim();n+=su("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function su(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}class au extends Hl{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Dl(!1),"unknown"}}constructor(t,e){Pa(t),Dl("string"===typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:ru(e.source,null)||e.id||jl("unnamed ".concat(au.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=ru(e,null);n&&(this.id=jl(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(au.getTypeName(this.shaderType),":").concat(this.id)}getName(){return ru(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=iu(t,this.source,this.shaderType,this.id);throw Ea.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),Ea.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class lu extends au{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class cu extends au{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const uu=5126,hu=5124,du=5125,fu={[uu]:[uu,1,"float"],35664:[uu,2,"vec2"],35665:[uu,3,"vec3"],35666:[uu,4,"vec4"],[hu]:[hu,1,"int"],35667:[hu,2,"ivec2"],35668:[hu,3,"ivec3"],35669:[hu,4,"ivec4"],[du]:[du,1,"uint"],36294:[du,2,"uvec2"],36295:[du,3,"uvec3"],36296:[du,4,"uvec4"],35670:[uu,1,"bool"],35671:[uu,2,"bvec2"],35672:[uu,3,"bvec3"],35673:[uu,4,"bvec4"],35674:[uu,8,"mat2"],35685:[uu,8,"mat2x3"],35686:[uu,8,"mat2x4"],35675:[uu,12,"mat3"],35687:[uu,12,"mat3x2"],35688:[uu,12,"mat3x4"],35676:[uu,16,"mat4"],35689:[uu,16,"mat4x2"],35690:[uu,16,"mat4x3"]};function pu(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Dl(!1),0}}function gu(t){const e=fu[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function mu(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=uu}for(const n in fu){const[r,i,o]=fu[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class vu{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Ma(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:o}=gu(n),s={type:i,size:r*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new Ql(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:o}=gu(n),s={location:t,name:e,accessor:new Ql({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const yu=35981,_u=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class bu extends Hl{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",_u),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=yu}=t;return this.hash=e||"",this.vs="string"===typeof n?new lu(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new cu(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,Dl(this.vs instanceof lu),Dl(this.fs instanceof cu),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(La(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new vu(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:f,parameters:p={},uniforms:g,samplers:m}=t;if((g||m)&&(Ea.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Ea.priority>=e){const t=f?f.id:"default",i="mode=".concat(Fl(this.gl,n)," verts=").concat(r," ")+"instances=".concat(c," indexType=").concat(Fl(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);Ea.log(e,i)()}return Dl(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===c)&&(h.bindForDraw(r,c,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),d){const t=pu(n);d.begin(t)}this._bindTextures(),dl(this.gl,p,(()=>{a&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):a&&Ma(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,l,i):a?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)})),d&&d.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ea.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!Qc(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof zc&&(t=t.texture),t instanceof ac)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&Jc(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const r of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new lu({handle:r});break;case 35632:n.fs=new cu({handle:r})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=jl(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Ea.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Ea.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||Ea.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=Kc(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=Zc(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=Zc(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class xu{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new xu(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=t,l=this._getModuleList(t.modules),c=this._getHash(e),u=this._getHash(n),h=l.map((t=>this._getHash(t.name))).sort(),d=o.map((t=>this._getHash(t))),f=Object.keys(r).sort(),p=Object.keys(i).sort(),g=[],m=[];for(const y of f)g.push(this._getHash(y)),g.push(this._getHash(r[y]));for(const y of p)m.push(this._getHash(y)),m.push(this._getHash(i[y]));const v="".concat(c,"/").concat(u,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[v]){const t=function(t,e){const{vs:n,fs:r}=e,i=Gs(e.modules||[]);return{gl:t,vs:Sa(t,Object.assign({},e,{source:n,type:js,modules:i})),fs:Sa(t,Object.assign({},e,{source:r,type:zs,modules:i})),getUniforms:Aa(i)}}(this.gl,{vs:e,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[v]=new bu(this.gl,{hash:v,vs:t.vs,fs:t.fs,varyings:o,bufferMode:s}),this._getUniforms[v]=t.getUniforms||(t=>{}),this._useCounts[v]=0}return this._useCounts[v]++,this._programCache[v]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const t=this._defaultModules[i],o=t.name;e[r++]=t,n[o]=!0}for(let i=0,o=t.length;i<o;++i){const o=t[i],s=o.name;n[s]||(e[r++]=o,n[s]=!0)}return e.length=r,e}}const wu=[255,255,255],Su=1,Au=[0,0,-1];let Eu=0;class Cu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"id",void 0),li(this,"color",void 0),li(this,"intensity",void 0),li(this,"type","directional"),li(this,"direction",void 0),li(this,"shadow",void 0);const{color:e=wu}=t,{intensity:n=Su}=t,{direction:r=Au}=t,{_shadow:i=!1}=t;this.id=t.id||"directional-".concat(Eu++),this.color=e,this.intensity=n,this.type="directional",this.direction=new Mo(r).normalize().toArray(),this.shadow=i}getProjectedLight(t){return this}}class ku extends class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};li(this,"id",void 0),li(this,"gl",void 0),li(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}{render(t){return ul(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearCanvas:s=!0}=t;t.pass=t.pass||"unknown";const a=this.gl;s&&function(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;ul(t,{viewport:[0,0,e,n]}),t.clear(16640)}(a);const l=[];for(const c of r){const r=i&&i[c.id];o(c);const s=this._getDrawLayerParams(c,t),u=c.subViewports||[c];for(const i of u){const o=this._drawLayersInViewport(a,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},s);l.push(o)}}return l}_getDrawLayerParams(t,e){let{layers:n,pass:r,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}=e;const l=[],c=Tu(),u={layer:n[0],viewport:t,isPicking:r.startsWith("picking"),renderPass:r,cullRect:o},h={};for(let d=0;d<n.length;d++){const e=n[d],o=this._shouldDrawLayer(e,u,i,h),f={shouldDrawLayer:o};o&&(f.layerRenderIndex=c(e,o),f.moduleParameters=this._getModuleParameters(e,s,r,a),f.layerParameters=this.getLayerParameters(e,d,t)),l[d]=f}return l}_drawLayersInViewport(t,e,n){let{layers:r,moduleParameters:i,pass:o,target:s,viewport:a,view:l}=e;const c=function(t,e){let{moduleParameters:n,target:r,viewport:i}=e;const o=r&&"default-framebuffer"!==r.id,s=n&&n.devicePixelRatio||fl(t),a=o?r.height:t.drawingBufferHeight,l=i;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(t,{moduleParameters:i,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;dl(t,{scissorTest:!0,scissor:c},(()=>yc(t,e)))}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ul(t,{viewport:c});for(let d=0;d<r.length;d++){const t=r[d],{shouldDrawLayer:e,layerRenderIndex:i,moduleParameters:s,layerParameters:l}=n[d];if(e&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(e){u.visibleCount++,s.viewport=a;try{t._drawLayer({moduleParameters:s,uniforms:{layerIndex:i},parameters:l})}catch(h){t.raiseError(h,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:fl(this.gl)});if(e)for(const a of e){var s;Object.assign(o,null===(s=a.getModuleParameters)||void 0===s?void 0:s.call(a,t))}return Object.assign(o,this.getModuleParameters(t,e),r)}}function Tu(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const t=n[l]=n[l]||Tu(e[l],e);c=t(i,o),n[a]=t}else Number.isFinite(s)?(c=s+(e[l]||0),n[a]=null):c=t;return o&&c>=t&&(t=c+1),e[a]=c,c};return r}class Mu extends ku{constructor(t,e){super(t,e),li(this,"shadowMap",void 0),li(this,"depthBuffer",void 0),li(this,"fbo",void 0),this.shadowMap=new cc(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new dc(t,{format:33189,width:1,height:1}),this.fbo=new zc(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;dl(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=fl(this.gl),i=n.width*r,o=n.height*r;i===e.width&&o===e.height||e.resize({width:i,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Pu={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Lu="#define SMOOTH_EDGE_RADIUS 0.5",Ou={name:"geometry",vs:"\n".concat(Lu,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(Lu,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Ru=Object.keys(Ii).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(Ii[t],";"))).join(""),Du=Object.keys(Fi).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Fi[t],";"))).join(""),Iu=Object.keys(Ni).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ni[t],";"))).join(""),Fu="".concat(Ru,"\n").concat(Du,"\n").concat(Iu,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\n      return 1.0 / cos(radians(y));\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n'),Nu={};const ju={name:"project",dependencies:[Pu,Ou],vs:Fu,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nu;return"viewport"in t?ao(t):{}}},zu=$i((function(t){let{viewport:e,center:n}=t;return new Go(e.viewProjectionMatrix).invert().transform(n)})),Bu=$i((function(t){let{viewport:e,shadowMatrices:n}=t;const r=[],i=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,s=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[n,r,i]=t,o=vs([n,r,i],e);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(t,i)));for(const a of n){const t=a.clone().translate(new Mo(e.center).negate()),n=s.map((e=>t.transform(e))),i=(new Go).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});r.push(i.multiplyRight(a))}return r})),Uu=[0,0,0,1],Vu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Hu(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Uu,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=zu({viewport:t.viewport,center:e.project_uCenter}),o=[],s=Bu({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const n=s[a],r=n.clone().translate(new Mo(t.viewport.center).negate());e.project_uCoordinateSystem===Ii.LNGLAT&&e.project_uProjectionMode===Fi.WEB_MERCATOR?(s[a]=r,o[a]=i):(s[a]=n.clone().multiplyRight(Vu),o[a]=r.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const Wu={name:"shadow",dependencies:[ju],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?Hu(t,e):{}}},Gu={color:[255,255,255],intensity:1},Yu=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Xu=[0,0,0,200/255];class qu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};li(this,"id","lighting-effect"),li(this,"props",null),li(this,"shadowColor",Xu),li(this,"shadow",void 0),li(this,"ambientLight",null),li(this,"directionalLights",[]),li(this,"pointLights",[]),li(this,"shadowPasses",[]),li(this,"shadowMaps",[]),li(this,"dummyShadowMap",null),li(this,"programManager",void 0),li(this,"shadowMatrices",void 0);for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow))}preRender(t,e){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=xu.getDefaultProgramManager(t),Wu&&this.programManager.addDefaultModule(Wu)),this.dummyShadowMap||(this.dummyShadowMap=new cc(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Wu),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Go).lookAt({eye:new Mo(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new Mu(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new di(Gu),this.directionalLights.push(new Cu(Yu[0]),new Cu(Yu[1])))}}const Zu=new di({color:[255,255,255],intensity:1}),Ku=new Ns({color:[255,255,255],intensity:.8,position:[-.144528,49.739968,8e4]}),Qu=new Ns({color:[255,255,255],intensity:.8,position:[-3.807751,54.104682,8e3]}),Ju=new qu({ambientLight:Zu,pointLight1:Ku,pointLight2:Qu}),$u={ambient:.64,diffuse:.6,shininess:32,specularColor:[51,51,51]},th={data:[],filteredData:[],ndx:{},hasNdx:!1,scatterLayer:{id:"scatterplot",radiusScale:10,radiusMinPixels:.25,opacity:.9,visible:!0,getPosition:t=>[t.lng,t.lat],getFillColor:t=>"Fatal"===t.severity?[255,0,0,125]:"Serious"===t.severity?[255,165,0,125]:"Minor"===t.severity?[255,255,0,125]:[0,0,255,125],getRadius:t=>"Fatal"===t.severity?10:"Serious"===t.severity?6:"Minor"===t.severity?4:2,pickable:!0,parameters:{2929:!1}},hexLayer:{id:"hexmap",coverage:.75,elevationScale:5,extruded:!0,getPosition:t=>[t.lng,t.lat],pickable:!0,autoHighlight:!0,highlightColor:[0,255,0],radius:500,upperPercentile:100,lowerPercentile:0,opacity:.8,visible:!1,material:$u},heatLayer:{id:"heatmap-layer",pickable:!1,getPosition:t=>[t.lng,t.lat],getWeight:1,opacity:.8,visible:!1,radiusPixels:10,intensity:1,weightsTextureSize:1024,threshold:.1,debounceTimeout:1e3},hexWeightedLayer:{id:"hexmapWeighted",coverage:.75,elevationScale:5,extruded:!0,getPosition:t=>[t.lng,t.lat],pickable:!0,autoHighlight:!0,highlightColor:[0,255,0],radius:500,upperPercentile:100,lowerPercentile:0,opacity:.8,visible:!1,material:$u,getColorWeight:t=>t.cost,colorAggregation:"SUM",getElevationWeight:t=>t.cost,elevationAggregation:"SUM"},layerControllers:[{layer:"scatterLayer",title:"Crash Points",controllers:[{property:"opacity",title:"Layer Opacity (%)",minX:0,maxX:1,stepX:.01},{property:"radiusScale",title:"Radius Scale",minX:1,maxX:100,stepX:1}]},{layer:"hexLayer",title:"Hex Layer",controllers:[{property:"opacity",title:"Layer Opacity (%)",minX:0,maxX:1,stepX:.01},{property:"radius",title:"Hex Edge Length (m)",minX:10,maxX:1e4,stepX:10},{property:"coverage",title:"Coverage (%)",minX:0,maxX:1,stepX:.05},{property:"elevationScale",title:"Column Height",minX:0,maxX:50,stepX:1},{property:"upperPercentile",title:"Upper Percentile",minX:0,maxX:100,stepX:1},{property:"lowerPercentile",title:"Lower Percentile",minX:0,maxX:100,stepX:1}]},{layer:"hexWeightedLayer",title:"Social Cost Weighted Hex Layer",controllers:[{property:"opacity",title:"Layer Opacity (%)",minX:0,maxX:1,stepX:.01},{property:"radius",title:"Hex Edge Length (m)",minX:10,maxX:1e4,stepX:10},{property:"coverage",title:"Coverage (%)",minX:0,maxX:1,stepX:.05},{property:"elevationScale",title:"Column Height",minX:0,maxX:50,stepX:1},{property:"upperPercentile",title:"Upper Percentile",minX:0,maxX:100,stepX:1},{property:"lowerPercentile",title:"Lower Percentile",minX:0,maxX:100,stepX:1}]},{layer:"heatLayer",title:"Heat Layer (experimental)",controllers:[{property:"opacity",title:"Layer Opacity (%)",minX:0,maxX:1,stepX:.01},{property:"radiusPixels",title:"Radius (pixels)",minX:1,maxX:50,stepX:1},{property:"intensity",title:"Intensity",minX:0,maxX:5,stepX:.1},{property:"threshold",title:"Threshold",minX:0,maxX:10,stepX:.01}]}],initialViewState:{longitude:176.8,latitude:-39.6,zoom:11,pitch:60,bearing:0}},eh=(t,e)=>{const{type:n,payload:r}=e;switch(n){case"load_data":return{...t,data:r.data,ndx:r.ndx,hasNdx:!0};case"update_filter":return{...t,filteredData:r.filteredData};case"update_layer_prop":const e={...t[r.layer],[r.field]:r.value};return{...t,[r.layer]:e};default:return console.log("UNKNOWN DISPATCH!"),t}};let nh=ah,rh=ah,ih=ah,oh=lh,sh=ch;function ah(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function lh(t,e){for(var n=t.length;n<e;)t[n++]=0;return t}function ch(t,e){if(e>32)throw new Error("invalid array width!");return t}function uh(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=nh(t)}"undefined"!==typeof Uint8Array&&(nh=function(t){return new Uint8Array(t)},rh=function(t){return new Uint16Array(t)},ih=function(t){return new Uint32Array(t)},oh=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},sh=function(t,e){var n;switch(e){case 16:n=rh(t.length);break;case 32:n=ih(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),uh.prototype.lengthen=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e]=oh(this[e],t);this.length=t},uh.prototype.add=function(){var t,e,n,r,i;for(r=0,i=this.subarrays;r<i;++r)if(n=(~(t=this.masks[r])&t+1)>>>0,!((e=this.width-32*r)>=32)||n)return e<32&&n&1<<e&&(this[r]=sh(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=n,{offset:r,one:n};return this[this.subarrays]=nh(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},uh.prototype.copy=function(t,e){var n,r;for(n=0,r=this.subarrays;n<r;++n)this[n][t]=this[n][e]},uh.prototype.truncate=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)for(var r=this.length-1;r>=t;r--)this[e][r]=0;this.length=t},uh.prototype.zero=function(t){var e,n;for(e=0,n=this.subarrays;e<n;++e)if(this[e][t])return!1;return!0},uh.prototype.zeroExcept=function(t,e,n){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(r===e?this[r][t]&n:this[r][t])return!1;return!0},uh.prototype.zeroExceptMask=function(t,e){var n,r;for(n=0,r=this.subarrays;n<r;++n)if(this[n][t]&e[n])return!1;return!0},uh.prototype.only=function(t,e,n){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(this[r][t]!=(r===e?n:0))return!1;return!0},uh.prototype.onlyExcept=function(t,e,n,r,i){var o,s,a;for(s=0,a=this.subarrays;s<a;++s)if(o=this[s][t],s===e&&(o=(o&n)>>>0),o!=(s===r?i:0))return!1;return!0};const hh={array8:ah,array16:ah,array32:ah,arrayLengthen:lh,arrayWiden:ch,bitarray:uh},dh=(t,e)=>function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]},fh=(t,e)=>{var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}},ph=t=>[0,t.length],gh=t=>t,mh=()=>null,vh=()=>0;function yh(t){function e(t,e,r){for(var i=r-e,o=1+(i>>>1);--o>0;)n(t,o,i,e);return t}function n(e,n,r,i){for(var o,s=e[--i+n],a=t(s);(o=n<<1)<=r&&(o<r&&t(e[i+o])>t(e[i+o+1])&&o++,!(a<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=s}return e.sort=function(t,e,r){for(var i,o=r-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,n(t,1,o,e);return t},e}const _h=yh(gh);_h.by=yh;const bh=_h;function xh(t){var e=bh.by(t);return function(n,r,i,o){var s,a,l,c=new Array(o=Math.min(i-r,o));for(a=0;a<o;++a)c[a]=n[r++];if(e(c,0,o),r<i){s=t(c[0]);do{t(l=n[r])>s&&(c[0]=l,s=t(e(c,0,o)[0]))}while(++r<i)}return c}}const wh=xh(gh);wh.by=xh;const Sh=wh;function Ah(t){function e(e,n,r,i){for(;r<i;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return e.right=e,e.left=function(e,n,r,i){for(;r<i;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r},e}const Eh=Ah(gh);Eh.by=Ah;const Ch=Eh,kh=(t,e,n)=>{for(var r=0,i=e.length,o=n?JSON.parse(JSON.stringify(t)):new Array(i);r<i;++r)o[r]=t[e[r]];return o},Th=t=>t+1,Mh=t=>t-1,Ph=t=>function(e,n){return e+ +t(n)},Lh=t=>function(e,n){return e-t(n)};const Oh=(t,e)=>{const n=t[e];return"function"===typeof n?n.call(t):n},Rh=/\[([\w\d]+)\]/g,Dh=(t,e)=>function(t,e,n,r,i){for(i in r=(n=n.split(".")).splice(-1,1),n)e=e[n[i]]=e[n[i]]||{};return t(e,r)}(Oh,t,e.replace(Rh,".$1"));var Ih=-1;Nh.heap=bh,Nh.heapselect=Sh,Nh.bisect=Ch,Nh.permute=kh;const Fh=Nh;function Nh(){var t,e={add:l,remove:c,dimension:d,groupAll:f,size:p,all:g,allFiltered:m,onChange:v,isElementFiltered:h},n=[],r=0,i=[],o=[],s=[],a=[];function l(i){var s=r,a=i.length;return a&&(n=n.concat(i),t.lengthen(r+=a),o.forEach((function(t){t(i,s,a)})),y("dataAdded")),e}function c(e){for(var o=new Array(r),a=[],l="function"===typeof e,c=function(r){return l?e(n[r],r):t.zero(r)},u=0,h=0;u<r;++u)c(u)?(a.push(u),o[u]=Ih):o[u]=h++;i.forEach((function(t){t(-1,-1,[],a,!0)})),s.forEach((function(t){t(o)}));for(var d=0,f=0;d<r;++d)o[d]!==Ih&&(d!==f&&(t.copy(f,d),n[f]=n[d]),++f);n.length=r=f,t.truncate(f),y("dataRemoved")}function u(e){var n,r,i,o,s=Array(t.subarrays);for(n=0;n<t.subarrays;n++)s[n]=-1;for(r=0,i=e.length;r<i;r++)s[(o=e[r].id())>>7]&=~(1<<(63&o));return s}function h(e,n){var r=u(n||[]);return t.zeroExceptMask(e,r)}function d(e,a){if("string"===typeof e){var l=e;e=function(t){return Dh(t,l)}}var c,u,h,d,f,p,g,m,v,_,b,x,w,S,A={filter:function(t){return null==t?B():Array.isArray(t)?z(t):"function"===typeof t?U(t):j(t)},filterExact:j,filterRange:z,filterFunction:U,filterAll:B,currentFilter:function(){return x},hasCurrentFilter:function(){return w},top:function(e,r){var i,o=[],s=L,l=0;r&&r>0&&(l=r);for(;--s>=P&&e>0;)t.zero(i=p[s])&&(l>0?--l:(o.push(n[i]),--e));if(a)for(s=0;s<E.length&&e>0;s++)t.zero(i=E[s])&&(l>0?--l:(o.push(n[i]),--e));return o},bottom:function(e,r){var i,o,s=[],l=0;r&&r>0&&(l=r);if(a)for(i=0;i<E.length&&e>0;i++)t.zero(o=E[i])&&(l>0?--l:(s.push(n[o]),--e));i=P;for(;i<L&&e>0;)t.zero(o=p[i])&&(l>0?--l:(s.push(n[o]),--e)),i++;return s},group:H,groupAll:function(){var t=H(mh),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:W,remove:W,accessor:e,id:function(){return d}},E=[],C=function(t){return zh(t).sort((function(t,e){var n=g[t],r=g[e];return n<r?-1:n>r?1:t-e}))},k=ph,T=[],M=[],P=0,L=0,O=0;o.unshift(D),o.push(I),s.push(F);var R=t.add();function D(n,i,o){var s,l;if(a){O=0,V=0,S=[];for(var u=0;u<n.length;u++)for(V=0,S=e(n[u]);V<S.length;V++)O++;g=[],s=zh(n.length),l=jh(O,1);for(var d=zh(O),y=0,x=0;x<n.length;x++)if((S=e(n[x])).length)for(s[x]=S.length,V=0;V<S.length;V++)g.push(S[V]),d[y]=x,y++;else s[x]=0,E.push(x+i);var w=C(O);g=kh(g,w),m=kh(d,w)}else g=n.map(e),m=C(o),g=kh(g,m);var A,T,M,R=k(g),D=R[0],I=R[1];if(a)if(o=O,b)for(A=0;A<o;++A)b(g[A],A)||(0===--s[m[A]]&&(t[h][m[A]+i]|=c),l[A]=1);else{for(T=0;T<D;++T)0===--s[m[T]]&&(t[h][m[T]+i]|=c),l[T]=1;for(M=I;M<o;++M)0===--s[m[M]]&&(t[h][m[M]+i]|=c),l[M]=1}else if(b)for(A=0;A<o;++A)b(g[A],A)||(t[h][m[A]+i]|=c);else{for(T=0;T<D;++T)t[h][m[T]+i]|=c;for(M=I;M<o;++M)t[h][m[M]+i]|=c}if(!i)return f=g,p=m,v=s,_=l,P=D,void(L=I);var F,N=f,j=p,z=_,B=0;if(u=0,a&&(F=i,i=N.length,o=O),f=new Array(a?i+o:r),p=a?new Array(i+o):jh(r,r),a&&(_=jh(i+o,1)),a){var U=v.length;v=hh.arrayLengthen(v,r);for(var V=0;V+U<r;V++)v[V+U]=s[V]}for(var H=0;u<i&&B<o;++H)N[u]<g[B]?(f[H]=N[u],a&&(_[H]=z[u]),p[H]=j[u++]):(f[H]=g[B],a&&(_[H]=l[B]),p[H]=m[B++]+(a?F:i));for(;u<i;++u,++H)f[H]=N[u],a&&(_[H]=z[u]),p[H]=j[u];for(;B<o;++B,++H)f[H]=g[B],a&&(_[H]=l[B]),p[H]=m[B]+(a?F:i);R=k(f),P=R[0],L=R[1]}function I(t,e,n){T.forEach((function(t){t(g,m,e,n)})),g=m=null}function F(t){if(a){for(var e=0,n=0;e<E.length;e++)t[E[e]]!==Ih&&(E[n]=t[E[e]],n++);for(E.length=n,e=0,n=0;e<r;e++)t[e]!==Ih&&(n!==e&&(v[n]=v[e]),n++);v=v.slice(0,n)}for(var i,o=f.length,s=0,l=0;s<o;++s)t[i=p[s]]!==Ih&&(s!==l&&(f[l]=f[s]),p[l]=t[i],a&&(_[l]=_[s]),++l);for(f.length=l,a&&(_=_.slice(0,l));l<o;)p[l++]=0;var c=k(f);P=c[0],L=c[1]}function N(e){var n=e[0],r=e[1];if(b)return b=null,V((function(t,e){return n<=e&&e<r}),0===e[0]&&e[1]===f.length),P=n,L=r,A;var o,s,l,u=[],d=[],g=[],m=[];if(n<P)for(o=n,s=Math.min(P,r);o<s;++o)u.push(p[o]),g.push(o);else if(n>P)for(o=P,s=Math.min(n,L);o<s;++o)d.push(p[o]),m.push(o);if(r>L)for(o=Math.max(n,L),s=r;o<s;++o)u.push(p[o]),g.push(o);else if(r<L)for(o=Math.max(P,r),s=L;o<s;++o)d.push(p[o]),m.push(o);if(a){var x=[],w=[];for(o=0;o<u.length;o++)v[u[o]]++,_[g[o]]=0,1===v[u[o]]&&(t[h][u[o]]^=c,x.push(u[o]));for(o=0;o<d.length;o++)v[d[o]]--,_[m[o]]=1,0===v[d[o]]&&(t[h][d[o]]^=c,w.push(d[o]));if(u=x,d=w,k===ph)for(o=0;o<E.length;o++)t[h][l=E[o]]&c&&(t[h][l]^=c,u.push(l));else for(o=0;o<E.length;o++)t[h][l=E[o]]&c||(t[h][l]^=c,d.push(l))}else{for(o=0;o<u.length;o++)t[h][u[o]]^=c;for(o=0;o<d.length;o++)t[h][d[o]]^=c}return P=n,L=r,i.forEach((function(t){t(c,h,u,d)})),y("filtered"),A}function j(t){return x=t,w=!0,N((k=dh(Ch,t))(f))}function z(t){return x=t,w=!0,N((k=fh(Ch,t))(f))}function B(){return x=void 0,w=!1,N((k=ph)(f))}function U(t){x=t,w=!0,b=t,k=ph,V(t,!1);var e=k(f);return P=e[0],L=e[1],A}function V(e,n){var r,o,s,l=[],d=[],g=[],m=[],b=f.length;if(!a)for(r=0;r<b;++r)!(t[h][o=p[r]]&c)^!!(s=e(f[r],r))&&(s?l.push(o):d.push(o));if(a)for(r=0;r<b;++r)e(f[r],r)?(l.push(p[r]),g.push(r)):(d.push(p[r]),m.push(r));if(a){var x=[],w=[];for(r=0;r<l.length;r++)1===_[g[r]]&&(v[l[r]]++,_[g[r]]=0,1===v[l[r]]&&(t[h][l[r]]^=c,x.push(l[r])));for(r=0;r<d.length;r++)0===_[m[r]]&&(v[d[r]]--,_[m[r]]=1,0===v[d[r]]&&(t[h][d[r]]^=c,w.push(d[r])));if(l=x,d=w,n)for(r=0;r<E.length;r++)t[h][o=E[r]]&c&&(t[h][o]^=c,l.push(o));else for(r=0;r<E.length;r++)t[h][o=E[r]]&c||(t[h][o]^=c,d.push(o))}else{for(r=0;r<l.length;r++)t[h][l[r]]&c&&(t[h][l[r]]&=u);for(r=0;r<d.length;r++)t[h][d[r]]&c||(t[h][d[r]]|=c)}i.forEach((function(t){t(c,h,l,d)})),y("filtered")}function H(e){var o={top:N,all:F,reduce:j,reduceCount:z,reduceSum:B,order:U,orderNatural:V,size:H,dispose:W,remove:W};M.push(o);var l,d,g,m,v,y,_,b,x=8,w=Bh(x),S=0,A=mh,E=mh,C=!0,k=e===mh;function P(o,s,c,p){a&&(b=c,c=f.length-o.length,p=o.length);var g,m,T,M,P,L,F=l,N=a?[]:jh(S,w),j=v,z=y,B=_,U=S,V=0,H=0;for(C&&(j=B=mh),C&&(z=B=mh),l=new Array(S),S=0,d=a?U?d:[]:U>1?hh.arrayLengthen(d,r):jh(r,w),U&&(T=(m=F[0]).key);H<p&&!((M=e(o[H]))>=M);)++H;for(;H<p;){for(m&&T<=M?(P=m,L=T,N[V]=S,(m=F[++V])&&(T=m.key)):(P={key:M,value:B()},L=M),l[S]=P;M<=L&&(g=s[H]+(a?b:c),a?d[g]?d[g].push(S):d[g]=[S]:d[g]=S,P.value=j(P.value,n[g],!0),t.zeroExcept(g,h,u)||(P.value=z(P.value,n[g],!1)),!(++H>=p));)M=e(o[H]);G()}for(;V<U;)l[N[V]=S]=F[V++],G();if(a)for(var W=0;W<r;W++)d[W]||(d[W]=[]);if(S>V)if(a)for(V=0;V<b;++V)for(W=0;W<d[V].length;W++)d[V][W]=N[d[V][W]];else for(V=0;V<c;++V)d[V]=N[d[V]];function G(){a?S++:++S===w&&(N=hh.arrayWiden(N,x<<=1),d=hh.arrayWiden(d,x),w=Bh(x))}g=i.indexOf(A),S>1||a?(A=O,E=D):(!S&&k&&(S=1,l=[{key:null,value:B()}]),1===S?(A=R,E=I):(A=mh,E=mh),d=null),i[g]=A}function L(t){if(S>1||a){var e,n,o,s=S,c=l,u=jh(s,s);if(a){for(e=0,o=0;e<r;++e)if(t[e]!==Ih){for(d[o]=d[e],n=0;n<d[o].length;n++)u[d[o][n]]=1;++o}d=d.slice(0,o)}else for(e=0,o=0;e<r;++e)t[e]!==Ih&&(u[d[o]=d[e]]=1,++o);for(l=[],S=0,e=0;e<s;++e)u[e]&&(u[e]=S++,l.push(c[e]));if(S>1||a)if(a)for(e=0;e<o;++e)for(n=0;n<d[e].length;++n)d[e][n]=u[d[e][n]];else for(e=0;e<o;++e)d[e]=u[d[e]];else d=null;i[i.indexOf(A)]=S>1||a?(E=D,A=O):1===S?(E=I,A=R):E=A=mh}else if(1===S){if(k)return;for(var h=0;h<r;++h)if(t[h]!==Ih)return;l=[],S=0,i[i.indexOf(A)]=A=E=mh}}function O(e,r,i,o,s){var f,p,g,m,_;if(!(e===c&&r===h||C))if(a){for(f=0,m=i.length;f<m;++f)if(t.zeroExcept(g=i[f],h,u))for(p=0;p<d[g].length;p++)(_=l[d[g][p]]).value=v(_.value,n[g],!1,p);for(f=0,m=o.length;f<m;++f)if(t.onlyExcept(g=o[f],h,u,r,e))for(p=0;p<d[g].length;p++)(_=l[d[g][p]]).value=y(_.value,n[g],s,p)}else{for(f=0,m=i.length;f<m;++f)t.zeroExcept(g=i[f],h,u)&&((_=l[d[g]]).value=v(_.value,n[g],!1));for(f=0,m=o.length;f<m;++f)t.onlyExcept(g=o[f],h,u,r,e)&&((_=l[d[g]]).value=y(_.value,n[g],s))}}function R(e,r,i,o,s){if(!(e===c&&r===h||C)){var a,d,f,p=l[0];for(a=0,f=i.length;a<f;++a)t.zeroExcept(d=i[a],h,u)&&(p.value=v(p.value,n[d],!1));for(a=0,f=o.length;a<f;++a)t.onlyExcept(d=o[a],h,u,r,e)&&(p.value=y(p.value,n[d],s))}}function D(){var e,i,o;for(e=0;e<S;++e)l[e].value=_();if(a){for(e=0;e<r;++e)for(i=0;i<d[e].length;i++)(o=l[d[e][i]]).value=v(o.value,n[e],!0,i);for(e=0;e<r;++e)if(!t.zeroExcept(e,h,u))for(i=0;i<d[e].length;i++)(o=l[d[e][i]]).value=y(o.value,n[e],!1,i)}else{for(e=0;e<r;++e)(o=l[d[e]]).value=v(o.value,n[e],!0);for(e=0;e<r;++e)t.zeroExcept(e,h,u)||((o=l[d[e]]).value=y(o.value,n[e],!1))}}function I(){var e,i=l[0];for(i.value=_(),e=0;e<r;++e)i.value=v(i.value,n[e],!0);for(e=0;e<r;++e)t.zeroExcept(e,h,u)||(i.value=y(i.value,n[e],!1))}function F(){return C&&(E(),C=!1),l}function N(t){var e=g(F(),0,l.length,t);return m.sort(e,0,e.length)}function j(t,e,n){return v=t,y=e,_=n,C=!0,o}function z(){return j(Th,Mh,vh)}function B(t){return j(Ph(t),Lh(t),vh)}function U(t){function e(e){return t(e.value)}return g=Sh.by(e),m=bh.by(e),o}function V(){return U(gh)}function H(){return S}function W(){var t=i.indexOf(A);return t>=0&&i.splice(t,1),(t=T.indexOf(P))>=0&&T.splice(t,1),(t=s.indexOf(L))>=0&&s.splice(t,1),(t=M.indexOf(o))>=0&&M.splice(t,1),o}return arguments.length<1&&(e=gh),i.push(A),T.push(P),s.push(L),P(f,p,0,r),z().orderNatural()}function W(){M.forEach((function(t){t.dispose()}));var e=o.indexOf(D);return e>=0&&o.splice(e,1),(e=o.indexOf(I))>=0&&o.splice(e,1),(e=s.indexOf(F))>=0&&s.splice(e,1),t.masks[h]&=u,B()}return h=R.offset,c=R.one,u=~c,d=h<<7|Math.log(c)/Math.log(2),D(n,0,r),I(n,0,r),A}function f(){var e,s,a,l,c={reduce:f,reduceCount:p,reduceSum:function(t){return f(Ph(t),Lh(t),vh)},value:function(){u&&(function(){var i;for(e=l(),i=0;i<r;++i)e=s(e,n[i],!0),t.zero(i)||(e=a(e,n[i],!1))}(),u=!1);return e},dispose:g,remove:g},u=!0;function h(i,o){var l;if(!u)for(l=o;l<r;++l)e=s(e,n[l],!0),t.zero(l)||(e=a(e,n[l],!1))}function d(r,i,o,l,c){var h,d,f;if(!u){for(h=0,f=o.length;h<f;++h)t.zero(d=o[h])&&(e=s(e,n[d],c));for(h=0,f=l.length;h<f;++h)t.only(d=l[h],i,r)&&(e=a(e,n[d],c))}}function f(t,e,n){return s=t,a=e,l=n,u=!0,c}function p(){return f(Th,Mh,vh)}function g(){var t=i.indexOf(d);return t>=0&&i.splice(t,1),(t=o.indexOf(h))>=0&&o.splice(t,1),c}return i.push(d),o.push(h),h(n,0),p()}function p(){return r}function g(){return n}function m(e){var i=[],o=0,s=u(e||[]);for(o=0;o<r;o++)t.zeroExceptMask(o,s)&&i.push(n[o]);return i}function v(t){if("function"===typeof t)return a.push(t),function(){a.splice(a.indexOf(t),1)};console.warn("onChange callback parameter must be a function!")}function y(t){for(var e=0;e<a.length;e++)a[e](t)}return t=new hh.bitarray(0),arguments.length?l(arguments[0]):e}function jh(t,e){return(e<257?hh.array8:e<65537?hh.array16:hh.array32)(t)}function zh(t){for(var e=jh(t,t),n=-1;++n<t;)e[n]=n;return e}function Bh(t){return 8===t?256:16===t?65536:4294967296}function Uh(){}function Vh(t){return null==t?Uh:function(){return this.querySelector(t)}}function Hh(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Wh(){return[]}function Gh(t){return null==t?Wh:function(){return this.querySelectorAll(t)}}function Yh(t){return function(){return this.matches(t)}}function Xh(t){return function(e){return e.matches(t)}}var qh=Array.prototype.find;function Zh(){return this.firstElementChild}var Kh=Array.prototype.filter;function Qh(){return Array.from(this.children)}function Jh(t){return new Array(t.length)}function $h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function td(t){return function(){return t}}function ed(t,e,n,r,i,o){for(var s,a=0,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new $h(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function nd(t,e,n,r,i,o,s){var a,l,c,u=new Map,h=e.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(f[a]=c=s.call(l,l.__data__,a,e)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(t,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new $h(t,o[a]);for(a=0;a<h;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function rd(t){return t.__data__}function id(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function od(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}$h.prototype={constructor:$h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var sd="http://www.w3.org/1999/xhtml";const ad={svg:"http://www.w3.org/2000/svg",xhtml:sd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ld(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ad.hasOwnProperty(e)?{space:ad[e],local:t}:t}function cd(t){return function(){this.removeAttribute(t)}}function ud(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hd(t,e){return function(){this.setAttribute(t,e)}}function dd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fd(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function pd(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function md(t){return function(){this.style.removeProperty(t)}}function vd(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yd(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function _d(t,e){return t.style.getPropertyValue(e)||gd(t).getComputedStyle(t,null).getPropertyValue(e)}function bd(t){return function(){delete this[t]}}function xd(t,e){return function(){this[t]=e}}function wd(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Sd(t){return t.trim().split(/^|\s+/)}function Ad(t){return t.classList||new Ed(t)}function Ed(t){this._node=t,this._names=Sd(t.getAttribute("class")||"")}function Cd(t,e){for(var n=Ad(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function kd(t,e){for(var n=Ad(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Td(t){return function(){Cd(this,t)}}function Md(t){return function(){kd(this,t)}}function Pd(t,e){return function(){(e.apply(this,arguments)?Cd:kd)(this,t)}}function Ld(){this.textContent=""}function Od(t){return function(){this.textContent=t}}function Rd(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Dd(){this.innerHTML=""}function Id(t){return function(){this.innerHTML=t}}function Fd(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Nd(){this.nextSibling&&this.parentNode.appendChild(this)}function jd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zd(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===sd&&e.documentElement.namespaceURI===sd?e.createElement(t):e.createElementNS(n,t)}}function Bd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ud(t){var e=ld(t);return(e.local?Bd:zd)(e)}function Vd(){return null}function Hd(){var t=this.parentNode;t&&t.removeChild(this)}function Wd(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gd(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yd(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Xd(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function qd(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Zd(t,e,n){var r=gd(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Kd(t,e){return function(){return Zd(this,t,e)}}function Qd(t,e){return function(){return Zd(this,t,e.apply(this,arguments))}}Ed.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Jd=[null];function $d(t,e){this._groups=t,this._parents=e}function tf(){return new $d([[document.documentElement]],Jd)}$d.prototype=tf.prototype={constructor:$d,select:function(t){"function"!==typeof t&&(t=Vh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=t.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new $d(r,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){return Hh(t.apply(this,arguments))}}(t):Gh(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),i.push(s));return new $d(r,i)},selectChild:function(t){return this.select(null==t?Zh:function(t){return function(){return qh.call(this.children,t)}}("function"===typeof t?t:Xh(t)))},selectChildren:function(t){return this.selectAll(null==t?Qh:function(t){return function(){return Kh.call(this.children,t)}}("function"===typeof t?t:Xh(t)))},filter:function(t){"function"!==typeof t&&(t=Yh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new $d(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,rd);var n=e?nd:ed,r=this._parents,i=this._groups;"function"!==typeof t&&(t=td(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,f=id(t.call(u,u&&u.__data__,c,r)),p=f.length,g=a[c]=new Array(p),m=s[c]=new Array(p),v=l[c]=new Array(d);n(u,h,g,m,v,f,e);for(var y,_,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<p;);y._next=_||null}}return(s=new $d(s,r))._enter=a,s._exit=l,s},enter:function(){return new $d(this._enter||this._groups.map(Jh),this._parents)},exit:function(){return new $d(this._exit||this._groups.map(Jh),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],h=r[l],d=u.length,f=a[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)a[l]=n[l];return new $d(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=od);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new $d(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=ld(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ud:cd:"function"===typeof e?n.local?pd:fd:n.local?dd:hd)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?md:"function"===typeof e?yd:vd)(t,e,null==n?"":n)):_d(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?bd:"function"===typeof e?wd:xd)(t,e)):this.node()[t]},classed:function(t,e){var n=Sd(t+"");if(arguments.length<2){for(var r=Ad(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?Pd:e?Td:Md)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ld:("function"===typeof t?Rd:Od)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Dd:("function"===typeof t?Fd:Id)(t)):this.node().innerHTML},raise:function(){return this.each(Nd)},lower:function(){return this.each(jd)},append:function(t){var e="function"===typeof t?t:Ud(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:Ud(t),r=null==e?Vd:"function"===typeof e?e:Vh(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Hd)},clone:function(t){return this.select(t?Gd:Wd)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=Yd(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?qd:Xd,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?Qd:Kd)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const ef=tf;var nf={value:()=>{}};function rf(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new of(r)}function of(t){this._=t}function sf(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function af(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function lf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=nf,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}of.prototype=rf.prototype={constructor:of,on:function(t,e){var n,r=this._,i=sf(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=lf(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lf(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=af(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new of(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const cf=rf;var uf,hf,df=0,ff=0,pf=0,gf=0,mf=0,vf=0,yf="object"===typeof performance&&performance.now?performance:Date,_f="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bf(){return mf||(_f(xf),mf=yf.now()+vf)}function xf(){mf=0}function wf(){this._call=this._time=this._next=null}function Sf(t,e,n){var r=new wf;return r.restart(t,e,n),r}function Af(){mf=(gf=yf.now())+vf,df=ff=0;try{!function(){bf(),++df;for(var t,e=uf;e;)(t=mf-e._time)>=0&&e._call.call(void 0,t),e=e._next;--df}()}finally{df=0,function(){var t,e,n=uf,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:uf=e);hf=t,Cf(r)}(),mf=0}}function Ef(){var t=yf.now(),e=t-gf;e>1e3&&(vf-=e,gf=t)}function Cf(t){df||(ff&&(ff=clearTimeout(ff)),t-mf>24?(t<1/0&&(ff=setTimeout(Af,t-yf.now()-vf)),pf&&(pf=clearInterval(pf))):(pf||(gf=yf.now(),pf=setInterval(Ef,1e3)),df=1,_f(Af)))}function kf(t,e,n){var r=new wf;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}wf.prototype=Sf.prototype={constructor:wf,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?bf():+n)+(null==e?0:+e),this._next||hf===this||(hf?hf._next=this:uf=this,hf=this),this._call=t,this._time=n,Cf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cf())}};var Tf=cf("start","end","cancel","interrupt"),Mf=[];function Pf(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var c,u,h,d;if(1!==n.state)return l();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return kf(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(kf((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Sf(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:Tf,tween:Mf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Lf(t,e){var n=Rf(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Of(t,e){var n=Rf(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Rf(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Df=n(97);function If(t,e){var n,r;return function(){var i=Of(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function Ff(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Of(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Nf(t,e,n){var r=t._id;return t.each((function(){var t=Of(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Rf(t,r).value[e]}}var jf=n(419),zf=n(765),Bf=n(211),Uf=n(514);function Vf(t,e){var n;return("number"===typeof e?zf.Z:e instanceof jf.ZP?Bf.ZP:(n=(0,jf.ZP)(e))?(e=n,Bf.ZP):Uf.Z)(t,e)}function Hf(t){return function(){this.removeAttribute(t)}}function Wf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gf(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Yf(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Xf(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttribute(t)}}function qf(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttributeNS(t.space,t.local)}}function Zf(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Kf(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qf(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Kf(t,i)),n}return i._value=e,i}function Jf(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Zf(t,i)),n}return i._value=e,i}function $f(t,e){return function(){Lf(this,t).delay=+e.apply(this,arguments)}}function tp(t,e){return e=+e,function(){Lf(this,t).delay=e}}function ep(t,e){return function(){Of(this,t).duration=+e.apply(this,arguments)}}function np(t,e){return e=+e,function(){Of(this,t).duration=e}}function rp(t,e){if("function"!==typeof e)throw new Error;return function(){Of(this,t).ease=e}}function ip(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Lf:Of;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var op=ef.prototype.constructor;function sp(t){return function(){this.style.removeProperty(t)}}function ap(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function lp(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&ap(t,o,n)),r}return o._value=e,o}function cp(t){return function(e){this.textContent=t.call(this,e)}}function up(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&cp(r)),e}return r._value=t,r}var hp=0;function dp(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function fp(){return++hp}var pp=ef.prototype;dp.prototype=function(t){return ef().transition(t)}.prototype={constructor:dp,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Vh(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=t.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,Pf(h[d],e,n,d,h,Rf(a,n)));return new dp(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Gh(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=t.call(l,l.__data__,h,c),p=Rf(l,n),g=0,m=f.length;g<m;++g)(d=f[g])&&Pf(d,e,n,g,f,p);o.push(f),s.push(l)}return new dp(o,s,e,n)},selectChild:pp.selectChild,selectChildren:pp.selectChildren,filter:function(t){"function"!==typeof t&&(t=Yh(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&l.push(o);return new dp(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=e[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=e[a];return new dp(s,this._parents,this._name,this._id)},selection:function(){return new op(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=fp(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=Rf(s,e);Pf(s,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new dp(r,this._parents,t,n)},call:pp.call,nodes:pp.nodes,node:pp.node,size:pp.size,empty:pp.empty,each:pp.each,on:function(t,e){var n=this._id;return arguments.length<2?Rf(this.node(),n).on.on(t):this.each(ip(n,t,e))},attr:function(t,e){var n=ld(t),r="transform"===n?Df.w:Vf;return this.attrTween(t,"function"===typeof e?(n.local?qf:Xf)(n,r,Nf(this,"attr."+t,e)):null==e?(n.local?Wf:Hf)(n):(n.local?Yf:Gf)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=ld(t);return this.tween(n,(r.local?Qf:Jf)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?Df.Y:Vf;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=_d(this,t),s=(this.style.removeProperty(t),_d(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,sp(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=_d(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=_d(this,t)),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}(t,r,Nf(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var l=Of(this,t),c=l.on,u=null==l.value[s]?o||(o=sp(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=_d(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,lp(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Nf(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,up(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Rf(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?If:Ff)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?$f:tp)(e,t)):Rf(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?ep:np)(e,t)):Rf(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(rp(e,t)):Rf(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;Of(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each((function(){var n=Of(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:pp[Symbol.iterator]};var gp={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mp(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}ef.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}(this,t)}))},ef.prototype.transition=function(t){var e,n;t instanceof dp?(e=t._id,t=t._name):(e=fp(),(n=gp).time=bf(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Pf(s,t,e,c,a,n||mp(s,e));return new dp(r,this._parents,t,e)};const{abs:vp,max:yp,min:_p}=Math;function bp(t){return[+t[0],+t[1]]}function xp(t){return[bp(t[0]),bp(t[1])]}["w","e"].map(wp),["n","s"].map(wp),["n","w","e","s","nw","ne","sw","se"].map(wp);function wp(t){return{type:t}}var Sp={},Ap={};function Ep(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Cp(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function kp(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Tp(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+kp(-t,6):t>9999?"+"+kp(t,6):kp(t,4)}(t.getUTCFullYear())+"-"+kp(t.getUTCMonth()+1,2)+"-"+kp(t.getUTCDate(),2)+(i?"T"+kp(e,2)+":"+kp(n,2)+":"+kp(r,2)+"."+kp(i,3)+"Z":r?"T"+kp(e,2)+":"+kp(n,2)+":"+kp(r,2)+"Z":n||e?"T"+kp(e,2)+":"+kp(n,2)+"Z":"")}function Mp(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,s=0,a=0,l=o<=0,c=!1;function u(){if(l)return Ap;if(c)return c=!1,Sp;var e,r,i=s;if(34===t.charCodeAt(i)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?l=!0:10===(r=t.charCodeAt(s++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(r=t.charCodeAt(e=s++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==Ap;){for(var h=[];r!==Sp&&r!==Ap;)h.push(r),r=u();e&&null==(h=e(h,a++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?Tp(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ep(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ep(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Cp(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Cp(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}}var Pp=Mp(","),Lp=Pp.parse,Op=(Pp.parseRows,Pp.format,Pp.formatBody,Pp.formatRows,Pp.formatRow,Pp.formatValue,Mp("\t")),Rp=Op.parse;Op.parseRows,Op.format,Op.formatBody,Op.formatRows,Op.formatRow,Op.formatValue;function Dp(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ip(t,e){return fetch(t,e).then(Dp)}function Fp(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),Ip(e,n).then((function(e){return t(e,r)}))}}var Np=Fp(Lp);Fp(Rp);function jp(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function zp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Bp=n(855);const Up=Symbol("implicit");function Vp(){var t=new Bp.L,e=[],n=[],r=Up;function i(i){let o=t.get(i);if(void 0===o){if(r!==Up)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Bp.L;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Vp(e,n).unknown(r)},zp.apply(i,arguments),i}function Hp(){var t,e,n=Vp().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,a=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=s<o,d=h?s:o,f=h?o:s;t=(f-d)/Math.max(1,n-l+2*c),a&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*u,e=t*(1-l),a&&(d=Math.round(d),e=Math.round(e));var p=jp(n).map((function(e){return d+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,s]=t,o=+o,s=+s,h()):[o,s]},n.rangeRound=function(t){return[o,s]=t,o=+o,s=+s,a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Hp(r(),[o,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},zp.apply(h(),arguments)}var Wp=new Date,Gp=new Date;function Yp(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var s,a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=function(n){return Yp((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Wp.setTime(+e),Gp.setTime(+r),t(Wp),t(Gp),Math.floor(n(Wp,Gp))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}const Xp=6e4,qp=864e5,Zp=6048e5;function Kp(t){return Yp((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Zp}))}var Qp=Kp(0),Jp=Kp(1),$p=Kp(2),tg=Kp(3),eg=Kp(4),ng=Kp(5),rg=Kp(6),ig=(Qp.range,Jp.range,$p.range,tg.range,eg.range,ng.range,rg.range,Yp((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/qp}),(function(t){return t.getUTCDate()-1})));const og=ig;ig.range;function sg(t){return Yp((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xp)/Zp}))}var ag=sg(0),lg=sg(1),cg=sg(2),ug=sg(3),hg=sg(4),dg=sg(5),fg=sg(6),pg=(ag.range,lg.range,cg.range,ug.range,hg.range,dg.range,fg.range,Yp((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xp)/qp),(t=>t.getDate()-1)));const gg=pg;pg.range;var mg=Yp((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));mg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Yp((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const vg=mg;mg.range;var yg=Yp((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));yg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Yp((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const _g=yg;yg.range;function bg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Sg,Ag,Eg={"-":"",_:" ",0:"0"},Cg=/^\s*\d+/,kg=/^%/,Tg=/[\\^$*+?|[\]().{}]/g;function Mg(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Pg(t){return t.replace(Tg,"\\$&")}function Lg(t){return new RegExp("^(?:"+t.map(Pg).join("|")+")","i")}function Og(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Rg(t,e,n){var r=Cg.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Dg(t,e,n){var r=Cg.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ig(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Fg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ng(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function jg(t,e,n){var r=Cg.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Bg(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ug(t,e,n){var r=Cg.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Vg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Hg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Wg(t,e,n){var r=Cg.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Gg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Yg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Xg(t,e,n){var r=Cg.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function qg(t,e,n){var r=Cg.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Zg(t,e,n){var r=Cg.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Kg(t,e,n){var r=kg.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Qg(t,e,n){var r=Cg.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Jg(t,e,n){var r=Cg.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function $g(t,e){return Mg(t.getDate(),e,2)}function tm(t,e){return Mg(t.getHours(),e,2)}function em(t,e){return Mg(t.getHours()%12||12,e,2)}function nm(t,e){return Mg(1+gg.count(vg(t),t),e,3)}function rm(t,e){return Mg(t.getMilliseconds(),e,3)}function im(t,e){return rm(t,e)+"000"}function om(t,e){return Mg(t.getMonth()+1,e,2)}function sm(t,e){return Mg(t.getMinutes(),e,2)}function am(t,e){return Mg(t.getSeconds(),e,2)}function lm(t){var e=t.getDay();return 0===e?7:e}function cm(t,e){return Mg(ag.count(vg(t)-1,t),e,2)}function um(t){var e=t.getDay();return e>=4||0===e?hg(t):hg.ceil(t)}function hm(t,e){return t=um(t),Mg(hg.count(vg(t),t)+(4===vg(t).getDay()),e,2)}function dm(t){return t.getDay()}function fm(t,e){return Mg(lg.count(vg(t)-1,t),e,2)}function pm(t,e){return Mg(t.getFullYear()%100,e,2)}function gm(t,e){return Mg((t=um(t)).getFullYear()%100,e,2)}function mm(t,e){return Mg(t.getFullYear()%1e4,e,4)}function vm(t,e){var n=t.getDay();return Mg((t=n>=4||0===n?hg(t):hg.ceil(t)).getFullYear()%1e4,e,4)}function ym(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mg(e/60|0,"0",2)+Mg(e%60,"0",2)}function _m(t,e){return Mg(t.getUTCDate(),e,2)}function bm(t,e){return Mg(t.getUTCHours(),e,2)}function xm(t,e){return Mg(t.getUTCHours()%12||12,e,2)}function wm(t,e){return Mg(1+og.count(_g(t),t),e,3)}function Sm(t,e){return Mg(t.getUTCMilliseconds(),e,3)}function Am(t,e){return Sm(t,e)+"000"}function Em(t,e){return Mg(t.getUTCMonth()+1,e,2)}function Cm(t,e){return Mg(t.getUTCMinutes(),e,2)}function km(t,e){return Mg(t.getUTCSeconds(),e,2)}function Tm(t){var e=t.getUTCDay();return 0===e?7:e}function Mm(t,e){return Mg(Qp.count(_g(t)-1,t),e,2)}function Pm(t){var e=t.getUTCDay();return e>=4||0===e?eg(t):eg.ceil(t)}function Lm(t,e){return t=Pm(t),Mg(eg.count(_g(t),t)+(4===_g(t).getUTCDay()),e,2)}function Om(t){return t.getUTCDay()}function Rm(t,e){return Mg(Jp.count(_g(t)-1,t),e,2)}function Dm(t,e){return Mg(t.getUTCFullYear()%100,e,2)}function Im(t,e){return Mg((t=Pm(t)).getUTCFullYear()%100,e,2)}function Fm(t,e){return Mg(t.getUTCFullYear()%1e4,e,4)}function Nm(t,e){var n=t.getUTCDay();return Mg((t=n>=4||0===n?eg(t):eg.ceil(t)).getUTCFullYear()%1e4,e,4)}function jm(){return"+0000"}function zm(){return"%"}function Bm(t){return+t}function Um(t){return Math.floor(+t/1e3)}function Vm(t,e,n){this.k=t,this.x=e,this.y=n}Sg=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=Lg(i),u=Og(i),h=Lg(o),d=Og(o),f=Lg(s),p=Og(s),g=Lg(a),m=Og(a),v=Lg(l),y=Og(l),_={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:$g,e:$g,f:im,g:gm,G:vm,H:tm,I:em,j:nm,L:rm,m:om,M:sm,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Bm,s:Um,S:am,u:lm,U:cm,V:hm,w:dm,W:fm,x:null,X:null,y:pm,Y:mm,Z:ym,"%":zm},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:_m,e:_m,f:Am,g:Im,G:Nm,H:bm,I:xm,j:wm,L:Sm,m:Em,M:Cm,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Bm,s:Um,S:km,u:Tm,U:Mm,V:Lm,w:Om,W:Rm,x:null,X:null,y:Dm,Y:Fm,Z:jm,"%":zm},x={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:Hg,e:Hg,f:Zg,g:zg,G:jg,H:Gg,I:Gg,j:Wg,L:qg,m:Vg,M:Yg,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Ug,Q:Qg,s:Jg,S:Xg,u:Dg,U:Ig,V:Fg,w:Rg,W:Ng,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:zg,Y:jg,Z:Bg,"%":Kg};function w(t,e){return function(n){var r,i,o,s=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(i=Eg[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),l=a+1);return s.push(t.slice(l,a)),s.join("")}}function S(t,e){return function(n){var r,i,o=wg(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=xg(wg(o.y,0,1))).getUTCDay(),r=i>4||0===i?Jp.ceil(r):Jp(r),r=og.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=bg(wg(o.y,0,1))).getDay(),r=i>4||0===i?lg.ceil(r):lg(r),r=gg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?xg(wg(o.y,0,1)).getUTCDay():bg(wg(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,xg(o)):bg(o)}}function A(t,e,n,r){for(var i,o,s=0,a=e.length,l=n.length;s<a;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=x[i in Eg?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(e,_),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Sg.format,Ag=Sg.parse,Sg.utcFormat,Sg.utcParse,Vm.prototype={constructor:Vm,scale:function(t){return 1===t?this:new Vm(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Vm(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Vm(1,0,0);Vm.prototype;const Hm={F:"Fatal",S:"Serious",M:"Minor",N:"Non-injury"},Wm=["January","February","March","April","May","June","July","August","September","October","November","December"],Gm=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ym={0:"None",1:"Single Vehicle Crash",2:"Two Vehicle Crash",3:"Three Vehicle Crash",4:"Four (or more) Vehicle Crash"},Xm={D:"Dry",W:"Wet",I:"Icy"},qm={C:"Car",V:"Van/ute",X:"Taxi / Taxi Van",B:"Bus",L:"School Bus",T:"Truck",M:"Motorcycle",P:"Moped",S:"Bicycle",O:"Other",E:"Pedestrian",K:"Skateboard/skater",Q:"Equestrian",H:"Wheeled Pedestrian",4:"4wd/SUV"},Zm={A:"driven or accompanied animals, i.e. under control",B:"bridge abutment, handrail or approach, includes tunnels",C:"upright cliff or bank, retaining walls",D:"debris, boulder or object dropped from vehicle",E:"over edge of bank",F:"fence, letterbox, hoarding etc.",G:"guard or guide rail (including median barriers)",H:"house or building",I:"traffic island or median strip",J:"public furniture, eg phone boxes, bus shelters, signal controllers, etc",K:"kerb, when directly contributing to incident",L:"landslide, washout or floodwater",M:"parked motor vehicle",N:"train",P:"utility pole, includes lighting columns",Q:"broken down vehicle, workmens vehicle, taxis picking up, etc",R:"roadwork signs or drums, holes and excavations, etc",S:"traffic signs or signal bollards",T:"trees, shrubbery of a substantial nature",V:"ditch",W:"wild animal, strays, or out of control animals",X:"other",Y:"objects thrown at or dropped onto vehicles",Z:"into water, river or sea"},Km={101:{group:"All Road User Factors",subgroup:"Alcohol",desc:"Alcohol suspected"},102:{group:"All Road User Factors",subgroup:"Alcohol",desc:"Alcohol test below limit"},103:{group:"All Road User Factors",subgroup:"Alcohol",desc:"Alcohol test above limit or test refused"},105:{group:"All Road User Factors",subgroup:"Alcohol",desc:"Impaired non-driver (pedestrian /cyclist/passenger, etc)"},100:{group:"All Road User Factors",subgroup:"Alcohol",desc:"Other - alcohol"},108:{group:"All Road User Factors",subgroup:"Drugs",desc:"Drugs suspected"},109:{group:"All Road User Factors",subgroup:"Drugs",desc:"Drugs present"},221:{group:"All Road User Factors",subgroup:"Drugs",desc:"Impaired non-driver (pedestrian /cyclist/passenger, etc)"},220:{group:"All Road User Factors",subgroup:"Drugs",desc:"Other drugs"},381:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Another vehicle"},383:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Pedestrian"},385:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Size or position of fixed object or obstacle."},386:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Own vehicle"},387:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Misjudged intentions of another party"},380:{group:"All Road User Factors",subgroup:"Misjudged speed, distance, size or position of",desc:"Other - misjudged speed, distance, size or position"},501:{group:"All Road User Factors",subgroup:"Illness",desc:"Sudden illness"},504:{group:"All Road User Factors",subgroup:"Illness",desc:"Medical illness"},505:{group:"All Road User Factors",subgroup:"Illness",desc:"Mental illness"},506:{group:"All Road User Factors",subgroup:"Illness",desc:"Attempted suicide"},500:{group:"All Road User Factors",subgroup:"Illness",desc:"Other illness"},502:{group:"All Road User Factors",subgroup:"Disability",desc:"Physical impairment"},503:{group:"All Road User Factors",subgroup:"Disability",desc:"Defective vision"},507:{group:"All Road User Factors",subgroup:"Disability",desc:"Impaired ability due to old age."},508:{group:"All Road User Factors",subgroup:"Disability",desc:"Other disability"},521:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Intentionally leaving/boarding moving vehicle"},523:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Riding in insecure position."},524:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Interfered with driver."},525:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Opened door inadvertently"},527:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Child playing in parked vehicle"},520:{group:"All Road User Factors",subgroup:"Driver or passenger boarding, leaving or in vehicle",desc:"Other - driver or passenger boarding, leaving or in vehicle"},531:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Casualty drowned"},532:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Casualty thrown from vehicle"},535:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Electrocution"},536:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Unsecured child seat"},537:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Child restrained failure/inappropriate"},672:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Seatbelt failed/defective"},673:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Air bag failed/defective"},530:{group:"All Road User Factors",subgroup:"Reason for death/injury",desc:"Other \u2013 reasons for death/injury"},111:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"Entering /on curve"},112:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"On straight"},113:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"Approaching a traffic control"},115:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"When passing school bus."},116:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"At temporary speed limit"},117:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"At crash or emergency"},118:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"For road conditions"},119:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"For weather conditions"},182:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"Travelling unreasonably slowly"},110:{group:"Driver only factors",subgroup:"Inappropriate speed",desc:"Other inappropriate speed conditions"},121:{group:"Driver only factors",subgroup:"Position on road",desc:"Swung wide on bend"},122:{group:"Driver only factors",subgroup:"Position on road",desc:"Swung wide at intersection"},123:{group:"Driver only factors",subgroup:"Position on road",desc:"Cutting corner on bend"},124:{group:"Driver only factors",subgroup:"Position on road",desc:"Cutting corner at intersection"},125:{group:"Driver only factors",subgroup:"Position on road",desc:"Too far right"},126:{group:"Driver only factors",subgroup:"Position on road",desc:"Vehicle crossed flush median"},129:{group:"Driver only factors",subgroup:"Position on road",desc:"Too far left"},120:{group:"Driver only factors",subgroup:"Position on road",desc:"Other position on road"},131:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control when turning"},132:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control under braking"},133:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control under acceleration"},134:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control while returning to seal from unsealed shoulder"},135:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control - road conditions"},136:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control - vehicle fault"},137:{group:"Driver only factors",subgroup:"Lost control",desc:"Lost control avoiding another party"},130:{group:"Driver only factors",subgroup:"Lost control",desc:"Other lost control"},141:{group:"Driver only factors",subgroup:"Appropriate signalling",desc:"Failed to signal in time"},145:{group:"Driver only factors",subgroup:"Appropriate signalling",desc:"Incorrect signal"},140:{group:"Driver only factors",subgroup:"Appropriate signalling",desc:"Other failed to signal"},151:{group:"Driver only factors",subgroup:"Overtaking",desc:"Overtaking line of traffic or queue"},152:{group:"Driver only factors",subgroup:"Overtaking",desc:"Overtaking in the face of oncoming traffic"},156:{group:"Driver only factors",subgroup:"Overtaking",desc:"With insufficient visibility"},157:{group:"Driver only factors",subgroup:"Overtaking",desc:"Overtaking at an intersection"},158:{group:"Driver only factors",subgroup:"Overtaking",desc:"On left without due care"},159:{group:"Driver only factors",subgroup:"Overtaking",desc:"Cut in after overtaking"},160:{group:"Driver only factors",subgroup:"Overtaking",desc:"Vehicle signalling turn"},150:{group:"Driver only factors",subgroup:"Overtaking",desc:"Other overtaking"},171:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Turned from incorrect lane"},173:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Travelled straight from turning lane or flush median"},174:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Turned from incorrect position on road"},176:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Turned into incorrect lane"},177:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Weaving or cut in on multi-lane roads"},179:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Long vehicle tracked outside lane"},184:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Incorrect merging / diverging"},170:{group:"Driver only factors",subgroup:"Wrong lane or turned from wrong position",desc:"Other wrong lane or position"},183:{group:"Driver only factors",subgroup:"Following too close",desc:"Motorist crowded cyclist"},181:{group:"Driver only factors",subgroup:"Following too close",desc:"Following too closely"},180:{group:"Driver only factors",subgroup:"Following too close",desc:"Other \u2013 too close"},191:{group:"Driver only factors",subgroup:"Sudden action",desc:"Suddenly braked"},192:{group:"Driver only factors",subgroup:"Sudden action",desc:"Suddenly turned left/right"},194:{group:"Driver only factors",subgroup:"Sudden action",desc:"Swerved to avoid pedestrian"},195:{group:"Driver only factors",subgroup:"Sudden action",desc:"Swerved to avoid animal"},196:{group:"Driver only factors",subgroup:"Sudden action",desc:"Swerved to avoid crash or broken down vehicle"},197:{group:"Driver only factors",subgroup:"Sudden action",desc:"Swerved to avoid vehicle"},199:{group:"Driver only factors",subgroup:"Sudden action",desc:"Swerved avoiding emergency vehicle"},190:{group:"Driver only factors",subgroup:"Sudden action",desc:"Other sudden action"},201:{group:"Driver only factors",subgroup:"Forbidden movements",desc:"Wrong way on road/ motorway"},202:{group:"Driver only factors",subgroup:"Forbidden movements",desc:"Non-compliance with regulatory device with sign or marking"},204:{group:"Driver only factors",subgroup:"Forbidden movements",desc:"Driving / riding in pedestrian space"},208:{group:"Driver only factors",subgroup:"Forbidden movements",desc:"Motor vehicle in special purpose lane"},200:{group:"Driver only factors",subgroup:"Forbidden movements",desc:"Other \u2013 forbidden movements"},321:{group:"Driver only factors",subgroup:"Did not stop",desc:"At Stop sign"},322:{group:"Driver only factors",subgroup:"Did not stop",desc:"At full red traffic signal"},324:{group:"Driver only factors",subgroup:"Did not stop",desc:"At amber traffic signal"},326:{group:"Driver only factors",subgroup:"Did not stop",desc:"At flashing red signals (railway crossing, fire stations,etc)"},327:{group:"Driver only factors",subgroup:"Did not stop",desc:"For traffic controller"},328:{group:"Driver only factors",subgroup:"Did not stop",desc:"For school patrol/kea crossing"},320:{group:"Driver only factors",subgroup:"Did not stop",desc:"Other - did not stop"},301:{group:"Driver only factors",subgroup:"Failed to give way",desc:"At a priority traffic control"},303:{group:"Driver only factors",subgroup:"Failed to give way",desc:"When turning to non-turning traffic."},304:{group:"Driver only factors",subgroup:"Failed to give way",desc:"When priority defined by road markings"},306:{group:"Driver only factors",subgroup:"Failed to give way",desc:"To a pedestrian"},308:{group:"Driver only factors",subgroup:"Failed to give way",desc:"When entering roadway from driveway"},309:{group:"Driver only factors",subgroup:"Failed to give way",desc:"To traffic approaching or crossing from the right"},312:{group:"Driver only factors",subgroup:"Failed to give way",desc:"Entering roadway not from driveway or intersection."},313:{group:"Driver only factors",subgroup:"Failed to give way",desc:"Failed to give way to emergency vehicle"},314:{group:"Driver only factors",subgroup:"Failed to give way",desc:"Driver waved through"},315:{group:"Driver only factors",subgroup:"Failed to give way",desc:"When turning right to opposing left turning traffic"},316:{group:"Driver only factors",subgroup:"Failed to give way",desc:"To traffic approaching or crossing from the left"},300:{group:"Driver only factors",subgroup:"Failed to give way",desc:"Other - failed to give way"},351:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Passengers"},354:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Animal or insect in vehicle"},357:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Emotionally upset / road rage"},359:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Cell phone"},361:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Navigation device"},364:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Vehicle console inbuilt features: radio/heater/etc."},365:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Objects under driver\u2019s pedals"},366:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Food, cigarettes, beverages"},362:{group:"Driver only factors",subgroup:"Attention diverted (inside vehicle)",desc:"Non cell communication device"},352:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Scenery or persons outside vehicle"},353:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Other traffic"},355:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Trying to find intersection, house number, destination, HWF"},356:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Advertising or signs."},363:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Driver dazzled"},350:{group:"Driver only factors",subgroup:"Attention diverted (outside vehicle)",desc:"Other - attention diverted by Other"},331:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Vehicle slowing, stopping or stationary in front"},332:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Bend in road"},333:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Indication of vehicle in front"},334:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Failed to notice control"},336:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Failed to notice signs"},339:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Failed to notice road works"},340:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Failed to notice markings"},341:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Obstructions on roadway"},534:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Another party wearing dark clothing"},330:{group:"Driver only factors",subgroup:"Failed to notice",desc:"Other \u2013 inattentive"},371:{group:"Driver only factors",subgroup:"Did not see or look for other parties until too late",desc:"Did not check/notice another party behind"},375:{group:"Driver only factors",subgroup:"Did not see or look for other parties until too late",desc:"Did not check/notice another party"},377:{group:"Driver only factors",subgroup:"Did not see or look for other parties until too late",desc:"When visibility obstructed by other traffic."},370:{group:"Driver only factors",subgroup:"Did not see or look for other parties until too late",desc:"Other \u2013 did not see or look"},401:{group:"Driver only factors",subgroup:"Lack of experience",desc:"In driving in fast complex or heavy traffic"},402:{group:"Driver only factors",subgroup:"Lack of experience",desc:"New driver/ under instruction"},403:{group:"Driver only factors",subgroup:"Lack of experience",desc:"Driving unfamiliar with vehicle/towing"},404:{group:"Driver only factors",subgroup:"Lack of experience",desc:"Overseas / migrant driver fails to adjust to NZ road rules and road conditions"},407:{group:"Driver only factors",subgroup:"Lack of experience",desc:"Driver over-reacted"},400:{group:"Driver only factors",subgroup:"Lack of experience",desc:"Other lack of experience"},411:{group:"Driver only factors",subgroup:"Fatigue (drowsy, tired or fell asleep)",desc:"Long trip"},412:{group:"Driver only factors",subgroup:"Fatigue (drowsy, tired or fell asleep)",desc:"Lack of sleep"},414:{group:"Driver only factors",subgroup:"Fatigue (drowsy, tired or fell asleep)",desc:"Long day (working/recreation)"},415:{group:"Driver only factors",subgroup:"Fatigue (drowsy, tired or fell asleep)",desc:"Exceeded driving hours"},410:{group:"Driver only factors",subgroup:"Fatigue (drowsy, tired or fell asleep)",desc:"Other fatigue"},421:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Started in gear / stalled"},423:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Wrong pedal / foot slipped"},426:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Lights not switched on"},428:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Parking brake not fully applied."},429:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Trailer coupling or safety chain not secured."},420:{group:"Driver only factors",subgroup:"Vehicle control mistakes",desc:"Other vehicle controls"},441:{group:"Driver only factors",subgroup:"Parking",desc:"Parked vehicle is not visible"},443:{group:"Driver only factors",subgroup:"Parking",desc:"Incorrectly parked vehicle"},447:{group:"Driver only factors",subgroup:"Parking",desc:"Not clear of rail Xing"},440:{group:"Driver only factors",subgroup:"Parking",desc:"Other parking"},431:{group:"Driver only factors",subgroup:"Intentional action",desc:"Racing"},432:{group:"Driver only factors",subgroup:"Intentional action",desc:"Playing 'chicken'"},433:{group:"Driver only factors",subgroup:"Intentional action",desc:"Wheel spins / wheelies / doughnuts / drifting etc"},434:{group:"Driver only factors",subgroup:"Intentional action",desc:"Intimidating driving"},511:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Homicide/suicide (successful)"},512:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Intentional collision"},514:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Evading enforcement"},515:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Object thrown (at/by/from)  "},518:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Over the speed limit"},510:{group:"Driver only factors",subgroup:"Intentional or criminal",desc:"Other intentional or criminal"},701:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Not keeping to footpath."},702:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Not keeping to side of road"},703:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Not facing oncoming traffic"},704:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Not on outside of blind curve"},705:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Wheeled pedestrian behaviour"},700:{group:"Pedestrian factors",subgroup:"Walking along road",desc:"Other \u2013 pedestrian walking along the road"},711:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Walking heedless of traffic"},712:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Stepping out from behind vehicles."},713:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Running heedless of traffic."},714:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Failed to use pedestrian crossing when one within 20 metres"},715:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Waiting on carriageway/confused by traffic"},717:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Stepping suddenly onto crossing"},718:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Not complying with traffic signals or school patrols."},719:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Misjudged speed and/or distance of vehicle."},740:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Looking the wrong way"},710:{group:"Pedestrian factors",subgroup:"Crossing road",desc:"Other \u2013 pedestrian crossing the road"},721:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Pushing, working on or unloading vehicle"},722:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Playing / unnecessarily on road."},723:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Working on road"},725:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Vision obscured by umbrella or hood"},726:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Child escaped from supervision"},727:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Unsupervised child"},729:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Pedestrian from or to school bus"},730:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Pedestrian behind reversing /manoeuvring vehicle"},731:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Overseas pedestrian"},732:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Pedestrian attention diverted by cigarette, cell phone, music player"},733:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Pedestrian from or to scheduled service"},533:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Equestrian not keeping to verge"},720:{group:"Pedestrian factors",subgroup:"Miscellaneous Pedestrian",desc:"Other \u2013 pedestrian"},601:{group:"Vehicle factors",subgroup:"Lights",desc:"Dazzling headlights"},602:{group:"Vehicle factors",subgroup:"Lights",desc:"Headlights inadequate/ no headlights or failed suddenly"},604:{group:"Vehicle factors",subgroup:"Lights",desc:"Brake lights or indicators faulty or not fitted"},605:{group:"Vehicle factors",subgroup:"Lights",desc:"Tail lights inadequate or no tail lights"},606:{group:"Vehicle factors",subgroup:"Lights",desc:"Reflectors inadequate or no reflectors"},607:{group:"Vehicle factors",subgroup:"Lights",desc:"Lights or reflectors obscured"},608:{group:"Vehicle factors",subgroup:"Lights",desc:"Confusing/dazzling lights"},609:{group:"Vehicle factors",subgroup:"Lights",desc:"Lights or reflectors at fault or dirty"},600:{group:"Vehicle factors",subgroup:"Lights",desc:"Other - lights or reflectors"},611:{group:"Vehicle factors",subgroup:"Brakes",desc:"Parking brake failed/defective"},613:{group:"Vehicle factors",subgroup:"Brakes",desc:"Service brake failed"},614:{group:"Vehicle factors",subgroup:"Brakes",desc:"Service brake defective"},615:{group:"Vehicle factors",subgroup:"Brakes",desc:"Jack-knifed \u2013 uneven braking"},610:{group:"Vehicle factors",subgroup:"Brakes",desc:"Other \u2013 brakes"},621:{group:"Vehicle factors",subgroup:"Steering",desc:"Defective"},622:{group:"Vehicle factors",subgroup:"Steering",desc:"Failed suddenly"},620:{group:"Vehicle factors",subgroup:"Steering",desc:"Other \u2013 steering"},631:{group:"Vehicle factors",subgroup:"Tyres",desc:"Puncture or blowout"},632:{group:"Vehicle factors",subgroup:"Tyres",desc:"Worn tread on tyre"},633:{group:"Vehicle factors",subgroup:"Tyres",desc:"Incorrect tyre type"},634:{group:"Vehicle factors",subgroup:"Tyres",desc:"Mixed types (tread)/space savers"},630:{group:"Vehicle factors",subgroup:"Tyres",desc:"Other \u2013 tyres"},641:{group:"Vehicle factors",subgroup:"Windscreens, mirrors, visors",desc:"Shattered windscreen"},642:{group:"Vehicle factors",subgroup:"Windscreens, mirrors, visors",desc:"Vehicle windows/helmet visors/goggles/glasses/misted/dirty/ windscreen wipers"},643:{group:"Vehicle factors",subgroup:"Windscreens, mirrors, visors",desc:"Rear vision mirror"},640:{group:"Vehicle factors",subgroup:"Windscreens, mirrors, visors",desc:"Other \u2013 windscreen/mirror"},651:{group:"Vehicle factors",subgroup:"Mechanical",desc:"Engine failure"},652:{group:"Vehicle factors",subgroup:"Mechanical",desc:"Transmission failure /broken axil"},653:{group:"Vehicle factors",subgroup:"Mechanical",desc:"Accelerator or throttle jammed"},650:{group:"Vehicle factors",subgroup:"Mechanical",desc:"Other mechanical "},661:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Body, chassis or frame (cycle/motorcycle) failure"},662:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Suspension failure"},665:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Inadequate tow coupling"},666:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Inadequate or no safety chain"},668:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Wheel off"},660:{group:"Vehicle factors",subgroup:"Chassis/running gear",desc:"Other \u2013chassis/gear"},667:{group:"Vehicle factors",subgroup:"Body/doors",desc:"Door/bonnet catch failed, defective or not shut"},670:{group:"Vehicle factors",subgroup:"Body/doors",desc:"Inconspicuous colour"},671:{group:"Vehicle factors",subgroup:"Body/doors",desc:"Blind spot"},664:{group:"Vehicle factors",subgroup:"Body/doors",desc:"Other body/doors"},681:{group:"Vehicle factors",subgroup:"Load",desc:"Load interferes with driver"},682:{group:"Vehicle factors",subgroup:"Load",desc:"Not well secured"},683:{group:"Vehicle factors",subgroup:"Load",desc:"Over-hanging"},684:{group:"Vehicle factors",subgroup:"Load",desc:"Load obscured vision"},686:{group:"Vehicle factors",subgroup:"Load",desc:"Over-dimensional vehicle or load"},687:{group:"Vehicle factors",subgroup:"Load",desc:"Load too heavy"},688:{group:"Vehicle factors",subgroup:"Load",desc:"Towed vehicle or trailer too heavy or incompatible"},680:{group:"Vehicle factors",subgroup:"Load",desc:"Other - load"},691:{group:"Vehicle factors",subgroup:"Miscellaneous vehicle",desc:"Emergency vehicle"},692:{group:"Vehicle factors",subgroup:"Miscellaneous vehicle",desc:"Vehicle caught fire"},693:{group:"Vehicle factors",subgroup:"Miscellaneous vehicle",desc:"Being towed"},697:{group:"Vehicle factors",subgroup:"Miscellaneous vehicle",desc:"Software Failure"},690:{group:"Vehicle factors",subgroup:"Miscellaneous vehicle",desc:"Other - vehicle"},804:{group:"Road Factors",subgroup:"Road condition",desc:"Loose material on seal"},807:{group:"Road Factors",subgroup:"Road condition",desc:"Painted markings"},808:{group:"Road Factors",subgroup:"Road condition",desc:"Recently graded"},809:{group:"Road Factors",subgroup:"Road condition",desc:"Surface bleeding/defective"},813:{group:"Road Factors",subgroup:"Road condition",desc:"Deep loose metal"},828:{group:"Road Factors",subgroup:"Road condition",desc:"Steel/iron covers and joints"},801:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Rain"},802:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Frost or ice"},803:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Snow or hail"},805:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Mud/effluent"},806:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Oil/fuel"},800:{group:"Road Factors",subgroup:"Wet surfaces",desc:"Other \u2013 slippery"},811:{group:"Road Factors",subgroup:"Surface condition",desc:"Potholed"},812:{group:"Road Factors",subgroup:"Surface condition",desc:"Uneven"},814:{group:"Road Factors",subgroup:"Surface condition",desc:"High crown"},815:{group:"Road Factors",subgroup:"Surface condition",desc:"Curve not well banked"},816:{group:"Road Factors",subgroup:"Surface condition",desc:"Edge badly defined or gave way"},817:{group:"Road Factors",subgroup:"Surface condition",desc:"Under construction or maintenance"},818:{group:"Road Factors",subgroup:"Surface condition",desc:"Unusually narrow"},810:{group:"Road Factors",subgroup:"Surface condition",desc:"Other \u2013 surface condition"},821:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Fallen tree or branch"},822:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Slip or subsidence"},823:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Flood waters, large puddles and fords."},824:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Road works not adequately lit/sign posted"},826:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Roadside object fell on vehicle"},827:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Object flicked by other vehicle"},820:{group:"Road Factors",subgroup:"Obstructions and objects",desc:"Other \u2013 road obstructed"},831:{group:"Road Factors",subgroup:"Visibility limited by road feature",desc:"Curve"},832:{group:"Road Factors",subgroup:"Visibility limited by road feature",desc:"Crest"},837:{group:"Road Factors",subgroup:"Visibility limited by road feature",desc:"Bank"},849:{group:"Road Factors",subgroup:"Visibility limited by road feature",desc:"Traffic signs"},833:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Building"},834:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Trees"},835:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Hedge or fence"},836:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Scrub, long grass or foliage"},838:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Temporary obstruction, dust or smoke"},839:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Parked vehicle"},829:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Signs/billboards/hoardings"},830:{group:"Road Factors",subgroup:"Visibility limited by other feature",desc:"Other \u2013 road feature limit visibility "},841:{group:"Road Factors",subgroup:"Signs and signals",desc:"Damaged removed or malfunction"},842:{group:"Road Factors",subgroup:"Signs and signals",desc:"Badly located"},843:{group:"Road Factors",subgroup:"Signs and signals",desc:"Ineffective / inadequate/obscured"},844:{group:"Road Factors",subgroup:"Signs and signals",desc:"Necessary"},845:{group:"Road Factors",subgroup:"Signs and signals",desc:"Signals off"},840:{group:"Road Factors",subgroup:"Signs and signals",desc:"Other \u2013 signs or signals"},851:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Faded"},852:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Difficult to see due to weather or geometry"},853:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Markings necessary"},872:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Traffic island(s) ineffective, badly located or designed."},884:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Barriers necessary"},885:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Island necessary"},850:{group:"Road Factors",subgroup:"Markings/islands/barriers",desc:"Other \u2013 markings/islands/barriers"},861:{group:"Road Factors",subgroup:"Street lighting",desc:"Failed"},862:{group:"Road Factors",subgroup:"Street lighting",desc:"Inadequate for road and pedestrian crossing"},860:{group:"Road Factors",subgroup:"Street lighting",desc:"Other - street lighting factors"},901:{group:"Environment factors",subgroup:"Weather",desc:"Heavy rain"},902:{group:"Environment factors",subgroup:"Weather",desc:"Dazzling sun"},903:{group:"Environment factors",subgroup:"Weather",desc:"Strong wind"},904:{group:"Environment factors",subgroup:"Weather",desc:"Fog or mist"},905:{group:"Environment factors",subgroup:"Weather",desc:"Snow, sleet or hail"},900:{group:"Environment factors",subgroup:"Weather",desc:"Other - weather"},910:{group:"Environment factors",subgroup:"Animals",desc:"Other \u2013 animal factors"},911:{group:"Environment factors",subgroup:"Animals",desc:"Household pets rushed out or playing."},912:{group:"Environment factors",subgroup:"Animals",desc:"Farm animals straying"},913:{group:"Environment factors",subgroup:"Animals",desc:"Farm animals attended, but inadequate warning or unexpected."},914:{group:"Environment factors",subgroup:"Animals",desc:"Farm animals attended, but out of control."},915:{group:"Environment factors",subgroup:"Animals",desc:" Wild animal"},999:{group:"No identifiable factors",subgroup:"Unknown",desc:"Unknown"},920:{group:"No identifiable factors",subgroup:"Old",desc:"other entering or leaving land use"},921:{group:"No identifiable factors",subgroup:"Old",desc:"roadside stall"},922:{group:"No identifiable factors",subgroup:"Old",desc:"service station"},923:{group:"No identifiable factors",subgroup:"Old",desc:"specialised liquor outlet"},924:{group:"No identifiable factors",subgroup:"Old",desc:"take-away food outlet"},925:{group:"No identifiable factors",subgroup:"Old",desc:"shopping complex"},926:{group:"No identifiable factors",subgroup:"Old",desc:"car parking building/area"},927:{group:"No identifiable factors",subgroup:"Old",desc:"other commercial activity"},928:{group:"No identifiable factors",subgroup:"Old",desc:"industrial site"},929:{group:"No identifiable factors",subgroup:"Old",desc:"private house or farm"},930:{group:"No identifiable factors",subgroup:"Old",desc:"non-commercial activities"},931:{group:"No identifiable factors",subgroup:"Old",desc:"mobile shop or vendor"},305:{group:"No identifiable factors",subgroup:"Old",desc:"when turning left, to opposing right turning traffic (oldroad rule)"},517:{group:"No identifiable factors",subgroup:"Old",desc:"Stolen vehicle"},358:{group:"No identifiable factors",subgroup:"Old",desc:"Cigarette, radio, glove box, heater, AC, obj under drivers feet/pedal"}},Qm=(0,t.createContext)(th),Jm=e=>{let{children:n}=e;const[r,i]=(0,t.useReducer)(eh,th),o=t=>{i({type:"update_filter",payload:{filteredData:t}})};(0,t.useEffect)((()=>{Np("https://raw.githubusercontent.com/petehilljnr/test-data/main/ncc_cas.csv").then((t=>{const e=Ag("%Y-%m-%d");t.forEach((t=>{t.lat=+t.lat,t.lng=+t.lng,t.severity=Hm[t.severity]||"Unknown",t.cost=+t.cost,t.crash_date=e(t.crash_date),t.crash_year=t.crash_date.getFullYear()||"Not Recorded",t.crash_month=Wm[t.crash_date.getMonth()]||"Not Recorded",t.crash_day=Gm[t.crash_date.getDay()]||"Not Recorded",t.crash_time=""===t.crash_time?"??":t.crash_time,t.road_type="SH"===t.road_type?"State Highway":"Local Authority",t.tla=""===t.tla?"Unknown":t.tla,t.road_wet=Xm[t.road_wet]||"Unknown",t.vehicles=t.vehicles.split(";").map((t=>qm[t]||"Unknown")),t.cause_main=t.veh_cause.split(";").map((t=>Km[t]?Km[t].group:"None")),t.cause_sub=t.veh_cause.split(";").map((t=>Km[t]?Km[t].subgroup:"None")),t.cause_detail=t.veh_cause.split(";").map((t=>Km[t]?Km[t].desc:"None")),t.cause=t.veh_cause.split(";").map((t=>Km[t])),t.objects=t.objects.split(";").map((t=>Zm[t]||"None")),t.dsi=+t.dsi,t.num_veh=Ym[t.num_veh]||"Unknown"})),console.log(t);const n=Fh(t);i({type:"load_data",payload:{ndx:n,data:t}}),o(n.allFiltered())}))}),[]);const s={...r,updateFilteredData:o,updateLayerProp:t=>{i({type:"update_layer_prop",payload:t})}};return(0,g.jsx)(Qm.Provider,{value:s,children:n})},$m=()=>{const e=(0,t.useContext)(Qm);if(void 0===e)throw new Error("useCrashData must be used within CrashDataContext");return e},tv=t=>(0,g.jsx)("span",{className:"float-right",style:{padding:"0.1rem",cursor:"pointer",color:"white",fontSize:"0.65rem"},onClick:()=>{t.chart.filterAll(),ai.redrawAll()},children:"reset"}),ev=e=>{const{ndx:n,hasNdx:r,updateFilteredData:i}=$m(),[o,s]=(0,t.useState)({}),a=(0,t.useRef)(null),l=e.chartFunction;return(0,t.useEffect)((()=>{if(r){const t=l(a.current,n);t.on("filtered",(function(){const t=n.allFiltered();i(t)})),t.width(550),t.render(),s(t)}}),[n,l]),(0,g.jsx)(g.Fragment,{children:r&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{ref:a,style:{width:"100%"},children:[(0,g.jsx)("label",{style:{paddingLeft:"10px",fontSize:"1rem",color:"white"},children:e.title}),(0,g.jsx)(tv,{chart:o})]})})})},nv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.crash_day)),i=r.group().reduceCount();return n.dimension(r).group(i).height(200).elasticX(!0).colors("#7AC350").xAxis().ticks(4),n},rv=(t,e)=>{const n=ai.barChart(t),r=e.dimension((t=>t.crash_time)),i=r.group().reduceCount();return n.dimension(r).group(i).margins({left:35,right:0,top:10,bottom:45}).height(280).colors("#7AC350").x(Hp()).xUnits(ai.units.ordinal).brushOn(!1).elasticY(!0).gap(1),n},iv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.crash_month)),i=r.group().reduceCount();return n.dimension(r).group(i).height(300).elasticX(!0).colors("#7AC350").xAxis().ticks(4),n},ov=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.road_wet)),i=r.group().reduceCount();return n.dimension(r).group(i).height(200).elasticX(!0).colors("#7AC350").xAxis().ticks(4),n},sv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.road_type)),i=r.group().reduceCount();return n.dimension(r).group(i).height(120).elasticX(!0).turnOnControls(!0).colors("#7AC350").xAxis().ticks(4),n},av=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.severity)),i=r.group().reduceCount();return n.dimension(r).group(i).height(200).elasticX(!0).turnOnControls(!0).colors("#7AC350").xAxis().ticks(4),n},lv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((t=>t.tla)),i=r.group().reduceCount();return n.dimension(r).group(i).height(250).elasticX(!0).turnOnControls(!0).colors("#7AC350").xAxis().ticks(4),n},cv=(t,e)=>{const n=ai.barChart(t),r=e.dimension((t=>t.crash_year)),i=r.group().reduceCount();return n.dimension(r).group(i).margins({left:50,right:0,top:10,bottom:50}).height(280).colors("#7AC350").x(Hp()).xUnits(ai.units.ordinal).brushOn(!1).elasticY(!0),n.on("pretransition",(function(t){t.select(".axis.x").attr("text-anchor","end").selectAll("text").attr("transform","rotate(-90)").attr("dy","-0.7em").attr("dx","-1em").attr("font-size","0.3rem")})),n},uv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((function(t){return t.vehicles}),!0),i=r.group();return n.dimension(r).group(i).height(400).elasticX(!0).colors("#7AC350").xAxis().ticks(4),n},hv=(t,e)=>{const n=ai.rowChart(t),r=e.dimension((function(t){return t.num_veh})),i=r.group();return n.dimension(r).group(i).height(200).elasticX(!0).colors("#7AC350").xAxis().ticks(4),n},dv=[{group:"Date and Time",components:[t=>(0,g.jsx)(ev,{chartFunction:cv,title:"By Crash Year"}),t=>(0,g.jsx)(ev,{chartFunction:iv,title:"By Month"}),t=>(0,g.jsx)(ev,{chartFunction:nv,title:"By Week Day"}),t=>(0,g.jsx)(ev,{chartFunction:rv,title:"By Hour"})]},{group:"Location",components:[t=>(0,g.jsx)(ev,{chartFunction:lv,title:"By TLA"}),t=>(0,g.jsx)(ev,{chartFunction:sv,title:"By Road Type"})]},{group:"Vehicles",components:[t=>(0,g.jsx)(ev,{chartFunction:hv,title:"Number of Vehicles"}),t=>(0,g.jsx)(ev,{chartFunction:uv,title:"Vehicle Types Involved"})]},{group:"Others",components:[t=>(0,g.jsx)(ev,{chartFunction:av,title:"By Severity"}),t=>(0,g.jsx)(ev,{chartFunction:ov,title:"By Road Condition"})]}];var fv;const pv=sr.div(fv||(fv=Me(["\n  position: absolute;\n  left: 0;\n  top: 71px;\n  bottom: 0px;\n  background: rgba(0, 0, 0, 0.5);\n  width: 600px;\n  color: white;\n  z-index: 100;\n  padding: 10px;\n  overflow-y: auto;\n  overflow-x: hidden;\n"]))),gv=function(){return(0,g.jsx)(pv,{children:(0,g.jsxs)(Lr,{allowMultipleExpanded:!0,allowZeroExpanded:!0,children:[(0,g.jsx)("h5",{children:"Chart Filters"}),dv.map((t=>(0,g.jsxs)("div",{children:[(0,g.jsx)("hr",{style:{backgroundColor:"darkgray"}}),(0,g.jsxs)(Vr,{children:[(0,g.jsx)(ii,{style:{marginTop:"0px"},children:(0,g.jsx)(ni,{style:{padding:"3px 3px 5px 15px",backgroundColor:"transparent",color:"white"},children:t.group},"".concat(t.group,"-button"))},"".concat(t.group,"-heading")),(0,g.jsx)(si,{style:{width:"100%",marginTop:"10px",padding:"5px",border:"1px solid darkgray",borderRadius:"4px",background:"rgba(255,255,255,0.1)"},children:t.components.map(((e,n)=>(0,g.jsx)(e,{},"".concat(t.group,"-").concat(n))))},"".concat(t.group,"-panel"))]},"".concat(t.group))]},"".concat(t.group,"-main"))))]},"chartContainer")})};let mv=1,vv=1;class yv{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,o=mv++,s={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const r of e)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:t,channel:e}=r;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=vv++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const _v="Awaiting state",bv="Matched. State transferred from previous layer",xv="Initialized",wv="Discarded. Awaiting garbage collection",Sv="No longer matched. Awaiting garbage collection",Av="Finalized! Awaiting garbage collection",Ev=Symbol.for("component"),Cv=Symbol.for("asyncPropDefaults"),kv=Symbol.for("asyncPropOriginal"),Tv=Symbol.for("asyncPropResolved");let Mv={};function Pv(t,e,n,r){Di.level>0&&Mv[t]&&Mv[t].call(null,e,n,r)}function Lv(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?Ov(t,e,[]):e(t)?[t]:[]}function Ov(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?Ov(i,e,n):e(i)&&n.push(i)}return n}function Rv(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}const Dv=t=>"boolean"===typeof t,Iv=t=>"function"===typeof t,Fv=t=>null!==t&&"object"===typeof t,Nv=t=>Fv(t)&&t.constructor==={}.constructor,jv=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,zv=t=>"undefined"!==typeof Blob&&t instanceof Blob,Bv=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||Fv(t)&&Iv(t.tee)&&Iv(t.cancel)&&Iv(t.getReader))(t)||(t=>Fv(t)&&Iv(t.read)&&Iv(t.pipe)&&Dv(t.readable))(t);function Uv(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function Vv(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function Hv(t){var e,n;let r;return Uv(t,"null loader"),Uv(Vv(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let Wv="";const Gv={};const Yv=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Xv=/^([-\w.]+\/[-\w.+]+)/;function qv(t){const e=Xv.exec(t);return e?e[1]:t}function Zv(t){const e=Yv.exec(t);return e?e[1]:""}const Kv=/\?.*/;function Qv(t){if(jv(t)){const e=Jv(t.url||"");return{url:e,type:qv(t.headers.get("content-type")||"")||Zv(e)}}return zv(t)?{url:Jv(t.name||""),type:t.type||""}:"string"===typeof t?{url:Jv(t),type:Zv(t)}:{url:"",type:""}}function Jv(t){return t.replace(Kv,"")}async function $v(t){if(jv(t))return t;const e={},n=function(t){return jv(t)?t.headers["content-length"]||-1:zv(t)?t.size:"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Qv(t);i&&(e["content-type"]=i);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function ty(t,e){if("string"===typeof t){t=function(t){for(const e in Gv)if(t.startsWith(e)){const n=Gv[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(Wv).concat(t)),t}(t);let n=e;return null!==e&&void 0!==e&&e.fetch&&"function"!==typeof(null===e||void 0===e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await $v(t)}const ey=new Pi({id:"loaders.gl"});class ny{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const ry=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),iy="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),oy=(iy&&parseFloat(iy[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){li(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:ry,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),sy={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function ay(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const ly=()=>{const t=ay();return t.globalOptions=t.globalOptions||{...oy},t.globalOptions};function cy(t,e,n,r){return n=n||[],function(t,e){hy(t,null,oy,sy,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};hy(r,n.id,i,o,e)}}(t,n=Array.isArray(n)?n:[n]),fy(e,t,r)}function uy(t,e){const n=ly(),r=t||n;return"function"===typeof r.fetch?r.fetch:Fv(r.fetch)?t=>ty(t,r):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:ty}function hy(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Fv(t[a]),c="baseUri"===a&&!e,u="workerUrl"===a&&e;if(!(a in n)&&!c&&!u)if(a in r)ey.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const t=dy(a,i);ey.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(t))()}}}function dy(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function fy(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new ny),py(r,ly()),py(r,e),r}function py(t,e){for(const n in e)if(n in e){const r=e[n];Nv(r)&&Nv(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function gy(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const my="3.2.4";"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const vy="object"!==typeof process||"[object process]"!==String(process)||process.browser,yy="undefined"!==typeof window&&"undefined"!==typeof window.orientation,_y="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);_y&&parseFloat(_y[1]);class by{}const xy=new Map;function wy(t){gy(t.source&&!t.url||!t.source&&t.url);let e=xy.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Sy((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),xy.set(t.url,e)),t.source&&(e=Sy(t.source),xy.set(t.source,e))),gy(e),e}function Sy(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Ay(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(Ey(t))r.add(t);else if(Ey(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const i in t)Ay(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function Ey(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const Cy=()=>{};class ky{static isSupported(){return"undefined"!==typeof Worker&&vy||void 0!==typeof by}constructor(t){li(this,"name",void 0),li(this,"source",void 0),li(this,"url",void 0),li(this,"terminated",!1),li(this,"worker",void 0),li(this,"onMessage",void 0),li(this,"onError",void 0),li(this,"_loadableURL","");const{name:e,source:n,url:r}=t;gy(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=Cy,this.onError=t=>console.log(t),this.worker=vy?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Cy,this.onError=Cy,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||Ay(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=wy({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new by(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new by(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class Ty{constructor(t,e){li(this,"name",void 0),li(this,"workerThread",void 0),li(this,"isRunning",!0),li(this,"result",void 0),li(this,"_resolve",(()=>{})),li(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){gy(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){gy(this.isRunning),this.isRunning=!1,this._reject(t)}}class My{static isSupported(){return ky.isSupported()}constructor(t){li(this,"name","unnamed"),li(this,"source",void 0),li(this,"url",void 0),li(this,"maxConcurrency",1),li(this,"maxMobileConcurrency",1),li(this,"onDebug",(()=>{})),li(this,"reuseWorkers",!0),li(this,"props",{}),li(this,"jobQueue",[]),li(this,"idleQueue",[]),li(this,"count",0),li(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new Ty(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new ky({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return yy?this.maxMobileConcurrency:this.maxConcurrency}}const Py={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ly{static isSupported(){return ky.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ly._workerFarm=Ly._workerFarm||new Ly({}),Ly._workerFarm.setProps(t),Ly._workerFarm}constructor(t){li(this,"props",void 0),li(this,"workerPools",new Map),this.props={...Py},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new My({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}li(Ly,"_workerFarm",void 0);const Oy="latest";async function Ry(t,e,n,r,i){const o=t.id,s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e=Oy);const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return gy(i),i}(t,n),a=Ly.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",Dy.bind(null,i));l.postMessage("process",{input:e,options:n,context:r});const c=await l.result;return await c.result}async function Dy(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:o,input:s,options:a}=r;try{const n=await t(s,a);e.postMessage("done",{id:o,result:n})}catch(i){const t=i instanceof Error?i.message:"unknown error";e.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}n(521);function Iy(t){return t&&"object"===typeof t&&t.isBuffer}function Fy(t){if(Iy(t))return function(t){if(Iy(t))return new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer;return t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}async function Ny(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=r.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(i);let s=0;for(const a of r)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}const jy=262144;function zy(t,e){return ry?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!==e&&void 0!==e&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await t;if(i)return;yield Fy(o)}}catch(i){n.releaseLock()}}(t,e):async function*(t,e){for await(const n of t)yield Fy(n)}(t)}function By(t,e){if("string"===typeof t)return function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||262144;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:n=jy}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}(t,e);if(zv(t))return async function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||1048576;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(Bv(t))return zy(t,e);if(jv(t)){return zy(t.body,e)}throw new Error("makeIterator")}const Uy="Cannot convert supplied data type";async function Vy(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||r)return function(t,e,n){if(e.text&&"string"===typeof t)return t;if((t=>t&&"object"===typeof t&&t.isBuffer)(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(Uy)}(t,e);if(zv(t)&&(t=await $v(t)),jv(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(Bv(t)&&(t=By(t,n)),(t=>t&&"function"===typeof t[Symbol.iterator])(t)||(t=>t&&"function"===typeof t[Symbol.asyncIterator])(t))return Ny(t);throw new Error(Uy)}const Hy=new Pi({id:"loaders.gl"}),Wy=()=>{const t=ay();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Gy(){return Wy()}const Yy=/\.([^.]+)$/;function Xy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Zy(t))return null;if(e&&!Array.isArray(e))return Hv(e);let i=[];e&&(i=i.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||i.push(...Gy()),Qy(i);const o=qy(t,i,n,r);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(Ky(t));return o}function qy(t,e,n,r){const{url:i,type:o}=Qv(t),s=i||(null===r||void 0===r?void 0:r.url);let a=null,l="";var c;(null!==n&&void 0!==n&&n.mimeType&&(a=Jy(e,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType)),a=a||function(t,e){const n=e&&Yy.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,s),l=l||(a?"matched url ".concat(s):""),a=a||Jy(e,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"===typeof e){if($y(e,n))return n}else if(ArrayBuffer.isView(e)){if(t_(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(t_(e,0,n))return n}return null}(e,t),l=l||(a?"matched initial data ".concat(e_(t)):""),a=a||Jy(e,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l)&&Hy.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}function Zy(t){return!(t instanceof Response&&204===t.status)}function Ky(t){const{url:e,type:n}=Qv(t);let r="No valid loader found (";r+=e?"".concat(function(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?e_(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function Qy(t){for(const e of t)Hv(e)}function Jy(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function $y(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function t_(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===n_(t,e,r.length);default:return!1}}(t,e,n,r)))}function e_(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return n_(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return n_(t,0,e)}return""}function n_(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}async function r_(t,e,n,r){gy(!r||"object"===typeof r),!e||Array.isArray(e)||Vv(e)||(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Qv(t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),s=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Zy(t))return null;let i=Xy(t,e,{...n,nothrow:!0},r);if(i)return i;if(zv(t)&&(i=Xy(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!i&&(null===n||void 0===n||!n.nothrow))throw new Error(Ky(t));return i}(t,o,n);return s?(r=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n)return n;const r={fetch:uy(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}({url:i,parse:r_,loaders:o},n=cy(n,s,o,i),r),await async function(t,e,n,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:my;gy(t,"no worker provided");const n=t.version}(t),jv(e)){const t=e,{ok:n,redirected:i,status:o,statusText:s,type:a,url:l}=t,c=Object.fromEntries(t.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:s,type:a,url:l}}if(e=await Vy(e,t,n),t.parseTextSync&&"string"===typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!Ly.isSupported()&&!!(vy||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,n))return await Ry(t,e,n,r,r_);if(t.parseText&&"string"===typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw gy(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(s,t,n,r)):null}async function i_(t,e,n,r){Array.isArray(e)||Vv(e)||(void 0,n=e,e=void 0);const i=uy(n);let o=t;return"string"===typeof t&&(o=await i(t)),zv(t)&&(o=await i(t)),await r_(o,e,n)}class o_{constructor(t,e,n){li(this,"id",void 0),li(this,"context",void 0),li(this,"isLoaded",void 0),li(this,"persistent",void 0),li(this,"_loadCount",0),li(this,"_subscribers",new Set),li(this,"_data",void 0),li(this,"_loader",void 0),li(this,"_error",void 0),li(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"===typeof t&&(r=i_(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const i of this._subscribers)i.onChange(this.getData())}}class s_{constructor(t){let{gl:e,protocol:n}=t;li(this,"protocol",void 0),li(this,"_context",void 0),li(this,"_resources",void 0),li(this,"_consumers",void 0),li(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}=t,o=this._resources[e];o?o.setData(n,r):(o=new o_(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const n=this._consumers[e];if(n){for(const t in n){const e=n[t],r=this._resources[e.resourceId];r&&r.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:n,consumerId:r,requestId:i="default"}=t;const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,o=i[t]=i[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const a_=[ju],l_=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function c_(t){const e=xu.getDefaultProgramManager(t);for(const n of a_)e.addDefaultModule(n);for(const n of l_)e.addShaderHook(n);return e}class u_{constructor(t){let{deck:e,stats:n,viewport:r,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};li(this,"layers",void 0),li(this,"context",void 0),li(this,"resourceManager",void 0),li(this,"_lastRenderedLayers",[]),li(this,"_needsRedraw",!1),li(this,"_needsUpdate",!1),li(this,"_nextLayers",null),li(this,"_debug",!1),li(this,"activateViewport",(t=>{Pv("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new s_({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&c_(t),stats:n||new Ll({id:"deck.gl"}),viewport:r||new Es({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new yv,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){Pv("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=Lv(t,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const o of t)n[o.id]?Di.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const i of t){i.context=this.context;const t=e[i.id];null===t&&Di.warn("Multiple new layers with same id ".concat(i.id))(),e[i.id]=null;let o=null;try{this._debug&&t!==i&&i.validateProps(),t?(this._transferLayerState(t,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=xv}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=bv,e!==t&&(t.lifecycle=wv)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=Sv;try{t._finalize(),t.lifecycle=Av}catch(e){this._handleError("finalization",e,t)}}}function h_(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&h_(r,i)))return!1}return!0}class d_{constructor(t){li(this,"width",void 0),li(this,"height",void 0),li(this,"views",void 0),li(this,"viewState",void 0),li(this,"controllers",void 0),li(this,"timeline",void 0),li(this,"_viewports",void 0),li(this,"_viewportMap",void 0),li(this,"_isUpdating",void 0),li(this,"_needsRedraw",void 0),li(this,"_needsUpdate",void 0),li(this,"_eventManager",void 0),li(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Lv(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!h_(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else Di.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>t.makeViewport({viewState:e,width:this.width,height:this.height})})}_updateController(t,e,n,r){const i=t.controller;if(i){const o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),this._viewports.unshift(s)}for(const r in e){const t=e[r];t&&!this.controllers[r]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const f_=/([0-9]+\.?[0-9]*)(%|px)/;function p_(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=f_.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function g_(t,e){return t.relative?Math.round(t.position*e):t.position}function m_(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class v_{constructor(t){li(this,"id",void 0),li(this,"viewportInstance",void 0),li(this,"_x",void 0),li(this,"_y",void 0),li(this,"_width",void 0),li(this,"_height",void 0),li(this,"_padding",void 0),li(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:s=null,viewportInstance:a}=t||{};m_(!a||a instanceof Es),this.viewportInstance=a,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=p_(n),this._y=p_(r),this._width=p_(i),this._height=p_(o),this._padding=s&&{left:p_(s.left||0),right:p_(s.right||0),top:p_(s.top||0),bottom:p_(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&h_(this.props,t.props))}makeViewport(t){let{width:e,height:n,viewState:r}=t;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:n}=t;const r={x:g_(this._x,e),y:g_(this._y,n),width:g_(this._width,e),height:g_(this._height,n)};return this._padding&&(r.padding={left:g_(this._padding.left,e),top:g_(this._padding.top,n),right:g_(this._padding.right,e),bottom:g_(this._padding.bottom,n)}),r}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}class y_{constructor(t){li(this,"_inProgress",void 0),li(this,"_handle",void 0),li(this,"_timeline",void 0),li(this,"time",void 0),li(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const __=()=>{};let b_;!function(t){t[t.BREAK=1]="BREAK",t[t.SNAP_TO_END=2]="SNAP_TO_END",t[t.IGNORE=3]="IGNORE"}(b_||(b_={}));const x_=t=>t,w_=b_.BREAK;class S_{constructor(t){li(this,"getControllerState",void 0),li(this,"props",void 0),li(this,"propsInTransition",void 0),li(this,"transition",void 0),li(this,"onViewStateChange",void 0),li(this,"onStateChange",void 0),li(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=t,a=s(e/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new y_(t.timeline),this.onViewStateChange=t.onViewStateChange||__,this.onStateChange=t.onStateChange||__}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===b_.SNAP_TO_END?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===b_.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=i.initializeProps(t,r);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||x_,interpolator:i,interruption:e.transitionInterruption||w_,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}const A_=["longitude","latitude","zoom","bearing","pitch"],E_=["longitude","latitude","zoom"];class C_ extends class{constructor(t){li(this,"_propsToCompare",void 0),li(this,"_propsToExtract",void 0),li(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!go(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];m_(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:A_,required:E_},super(n.transitionProps),li(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(t),s=r(e),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=po(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,po(t.around,e.around,n)))}return r}}const k_={transitionDuration:0},T_=t=>1-(1-t)*(1-t),M_=["wheel"],P_=["panstart","panmove","panend"],L_=["pinchstart","pinchmove","pinchend"],O_=["tripanstart","tripanmove","tripanend"],R_=["doubletap"],D_=["keydown"],I_={};class F_{constructor(t){li(this,"props",void 0),li(this,"state",{}),li(this,"transitionManager",void 0),li(this,"eventManager",void 0),li(this,"onViewStateChange",void 0),li(this,"onStateChange",void 0),li(this,"makeViewport",void 0),li(this,"_controllerState",void 0),li(this,"_events",{}),li(this,"_interactionState",{isDragging:!1}),li(this,"_customEvents",[]),li(this,"_eventStartBlocked",null),li(this,"_panMove",!1),li(this,"invertPan",!1),li(this,"dragMode","rotate"),li(this,"inertia",0),li(this,"scrollZoom",!0),li(this,"dragPan",!0),li(this,"dragRotate",!0),li(this,"doubleClickZoom",!0),li(this,"touchZoom",!0),li(this,"touchRotate",!1),li(this,"keyboard",!0),this.transitionManager=new S_({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(M_,c&&n),this.toggleEvents(P_,c&&(r||i)),this.toggleEvents(L_,c&&(s||a)),this.toggleEvents(O_,c&&a),this.toggleEvents(R_,c&&o),this.toggleEvents(D_,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,k_,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,k_,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:T_},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,k_,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:T_},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,k_,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,k_,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:T_},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return I_._startPinchRotation=t.rotation,I_._lastPinchEvent=t,this.updateViewport(n,k_,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:I_._startPinchRotation-n})}return this.updateViewport(e,k_,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),I_._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=I_;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:T_},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return I_._startPinchRotation=null,I_._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(i),l.isRotating=!0):(a=s.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(i),l.isRotating=!0):(a=s.moveRight(r),l.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(r),l.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new C_({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:k_}}class N_{constructor(t,e){li(this,"_viewportProps",void 0),li(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class j_ extends N_{constructor(t){const{width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:s=0,pitch:a=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:h=0,maxPitch:d=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:_,normalize:b=!0}=t;m_(Number.isFinite(i)),m_(Number.isFinite(r)),m_(Number.isFinite(o)),super({width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:s,pitch:a,altitude:l,maxZoom:u,minZoom:h,maxPitch:d,minPitch:f,normalize:b,position:c},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:_}),li(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:n}=t;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,i,s,o):{bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=fo(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=fo(r,n,e);const{maxPitch:i,minPitch:o,pitch:s}=t;t.pitch=fo(s,o,i);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=Ko(i+180,360)-180),(a<-180||a>180)&&(a=Ko(a+180,360)-180);const l=Jo(n/512);if(s<=l)s=l,o=0;else{const t=n/2/Math.pow(2,s),e=cs([0,t])[1];if(o<e)o=e;else{const e=cs([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let h=0;o>0?Math.abs(c-a)>5&&(h=o/(a-c)*1.2):o<0&&a>5&&(h=1-s/a),h=fo(h,-1,1);const{minPitch:d,maxPitch:f}=this.getViewportProps();let p=n;return h>0?p=n+h*(f-n):h<0&&(p=n-h*(d-n)),{pitch:p,bearing:r+180*u}}}class z_ extends F_{constructor(){super(...arguments),li(this,"ControllerState",j_),li(this,"transition",{transitionDuration:300,transitionInterpolator:new C_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),li(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class B_ extends v_{get ViewportType(){return Ts}get ControllerType(){return z_}}li(B_,"displayName","MapView");class U_ extends ku{constructor(t,e){super(t,e),li(this,"maskMap",void 0),li(this,"fbo",void 0);const{mapSize:n=2048}=e;this.maskMap=new cc(t,{width:n,height:n,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new zc(t,{id:"maskmap",width:n,height:n,attachments:{36064:this.maskMap}})}render(t){const e=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,dl(e,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},(()=>super.render({...t,target:this.fbo,pass:"mask"})))}shouldDrawLayer(t){return t.props.operation===Bi}delete(){this.fbo.delete(),this.maskMap.delete()}}const V_=(new Go).lookAt({eye:[0,0,1]});function H_(t){let{width:e,height:n,near:r,far:i,padding:o}=t,s=-e/2,a=e/2,l=-n/2,c=n/2;if(o){const{left:t=0,right:r=0,top:i=0,bottom:u=0}=o,h=fo((t+e-r)/2,0,e)-e/2,d=fo((i+n-u)/2,0,n)-n/2;s-=h,a-=h,l+=d,c+=d}return(new Go).ortho({left:s,right:a,bottom:l,top:c,near:r,far:i})}class W_ extends Es{constructor(t){const{width:e,height:n,near:r=.1,far:i=1e3,zoom:o=0,target:s=[0,0,0],padding:a=null,flipY:l=!0}=t,c=Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:o,h=Math.min(c,u),d=Math.pow(2,h);let f;if(c!==u){const t=Math.pow(2,c),e=Math.pow(2,u);f={unitsPerMeter:[t/d,e/d,1],metersPerUnit:[d/t,d/e,1]}}super({...t,longitude:void 0,position:s,viewMatrix:V_.clone().scale([d,d*(l?-1:1),d]),projectionMatrix:H_({width:e||1,height:n||1,padding:a,near:r,far:i}),zoom:h,distanceScales:f})}projectFlat(t){let[e,n]=t;const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat(t){let[e,n]=t;const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(t,e){const n=vs(e,this.pixelUnprojectionMatrix),r=Fo([],this.projectFlat(t),No([],n)),i=Fo([],this.center,r);return{target:this.unprojectFlat(i)}}}class G_ extends N_{constructor(t){const{width:e,height:n,rotationX:r=0,rotationOrbit:i=0,target:o=[0,0,0],zoom:s=0,minRotationX:a=-90,maxRotationX:l=90,minZoom:c=-1/0,maxZoom:u=1/0,startPanPosition:h,startRotatePos:d,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}=t;super({width:e,height:n,rotationX:r,rotationOrbit:i,target:o,zoom:s,minRotationX:a,maxRotationX:l,minZoom:c,maxZoom:u},{startPanPosition:h,startRotatePos:d,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}),li(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan(t){let{pos:e,startPosition:n}=t;const r=this.getState().startPanPosition||n;if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||void 0===o||void 0===s)return this;let c;if(e){let t=(e[0]-i[0])/a;const n=(e[1]-i[1])/l;(o<-90||o>90)&&(t*=-1),c={rotationX:o+180*n,rotationOrbit:s+180*t}}else c={rotationX:o+r,rotationOrbit:s+n};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:r}=n;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:r,minZoom:i}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);return fo(n+Math.log2(e),i,r)}_panFromCenter(t){const{width:e,height:n,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r,maxRotationX:i,minRotationX:o,rotationOrbit:s}=t;return t.zoom=Array.isArray(r)?[fo(r[0],n,e),fo(r[1],n,e)]:fo(r,n,e),t.rotationX=fo(t.rotationX,o,i),(s<-180||s>180)&&(t.rotationOrbit=function(t,e){const n=t%e;return n<0?e+n:n}(s+180,360)-180),t}}class Y_ extends G_{constructor(t){super(t),li(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:r,minZoom:i}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[t,e]=n;switch(this.zoomAxis){case"X":t=fo(t+o,i,r);break;case"Y":e=fo(e+o,i,r);break;default:let n=Math.min(t+o,e+o);n<i&&(o+=i-n),n=Math.max(t+o,e+o),n>r&&(o+=r-n),t+=o,e+=o}return[t,e]}return fo(n+o,i,r)}}class X_ extends F_{constructor(){super(...arguments),li(this,"ControllerState",Y_),li(this,"transition",{transitionDuration:300,transitionInterpolator:new C_(["target","zoom"])}),li(this,"dragMode","pan")}_onPanRotate(){return!1}}class q_ extends v_{get ViewportType(){return W_}get ControllerType(){return X_}}li(q_,"displayName","OrthographicView");class Z_{constructor(){li(this,"id","mask-effect"),li(this,"props",null),li(this,"useInPicking",!0),li(this,"dummyMaskMap",void 0),li(this,"channels",[]),li(this,"masks",null),li(this,"maskPass",void 0),li(this,"maskMap",void 0),li(this,"lastViewport",void 0)}preRender(t,e){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}=e;this.dummyMaskMap||(this.dummyMaskMap=new cc(t,{width:1,height:1}));const a=n.filter((t=>t.props.visible&&t.props.operation===Bi));if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new U_(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),c=i[0],u=!this.lastViewport||!this.lastViewport.equals(c);for(const h in l)this._renderChannel(l[h],{layerFilter:r,onViewportActive:o,views:s,viewport:c,viewportChanged:u})}_renderChannel(t,e){let{layerFilter:n,onViewportActive:r,views:i,viewport:o,viewportChanged:s}=e;const a=this.channels[t.index];if(!a)return;const l=t===a||a.layers.length!==t.layers.length||t.layerBounds.some(((t,e)=>t!==a.layerBounds[e]));if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,(l||s)&&(this.lastViewport=o,t.bounds=function(t){let{layers:e,viewport:n}=t,r=null;for(const s of e){const t=s.getBounds();t&&(r?(r[0]=Math.min(r[0],t[0][0]),r[1]=Math.min(r[1],t[0][1]),r[2]=Math.max(r[2],t[1][0]),r[3]=Math.max(r[3],t[1][1])):r=[t[0][0],t[0][1],t[1][0],t[1][1]])}const i=n.getBounds();if(!r)return i;const o=function(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}(i);return r[2]-r[0]<o[2]-o[0]||r[3]-r[1]<o[3]-o[1]||(r[0]=Math.max(r[0],o[0]),r[1]=Math.max(r[1],o[1]),r[2]=Math.min(r[2],o[2]),r[3]=Math.min(r[3],o[3])),r}({layers:t.layers,viewport:o}),l||!go(t.bounds,a.bounds))){const{maskPass:e,maskMap:s}=this,a=function(t){let{bounds:e,viewport:n,width:r,height:i}=t;if(e[2]<=e[0]||e[3]<=e[1])return null;if(r-=2,i-=2,n instanceof Ts){const{longitude:t,latitude:n,zoom:o}=ys({width:r,height:i,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Ts({longitude:t,latitude:n,zoom:o,x:1,y:1,width:r,height:i})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],s=Math.min(20,r/(e[2]-e[0]),i/(e[3]-e[1]));return new q_({x:1,y:1}).makeViewport({width:r,height:i,viewState:{target:o,zoom:Math.log2(s)}})}({bounds:t.bounds,viewport:o,width:s.width,height:s.height});t.maskBounds=a?a.getBounds():[0,0,1,1],e.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:n,viewports:a?[a]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const e={};let n=0;for(const r of t){const{id:t}=r.root;let i=e[t];if(!i){if(++n>4){Di.warn("Too many mask layers. The max supported is 4")();continue}i={id:t,index:this.channels.findIndex((e=>(null===e||void 0===e?void 0:e.id)===t)),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},e[t]=i}i.layers.push(r),i.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const t=this.channels[r];t&&t.id in e||(this.channels[r]=null)}for(const r in e){const t=e[r];t.index<0&&(t.index=this.channels.findIndex((t=>!t)),this.channels[t.index]=t)}return e}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const K_=new qu;class Q_{constructor(){li(this,"effects",void 0),li(this,"_internalEffects",void 0),li(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length===this.effects.length&&h_(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new Z_),t.some((t=>t instanceof qu))||this._internalEffects.push(K_)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class J_ extends ku{shouldDrawLayer(t){return t.props.operation===zi}}const $_={blendFunc:[1,0,32771,0],blendEquation:32774};class tb extends ku{constructor(){super(...arguments),li(this,"pickZ",void 0),li(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:h,effects:d,pass:f="picking",pickZ:p}=t;const g=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const v=dl(g,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...$_,blend:!p},(()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:h,effects:null===d||void 0===d?void 0:d.filter((t=>t.useInPicking)),pass:f})));this._colors=null;return{decodePickingColor:m&&eb.bind(null,m),stats:v}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===zi}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters};return this._colors?(Object.assign(r,$_),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):(Di.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colors,t,n)):r.blend=!1,r}}function eb(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class nb{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new J_(t),this.pickLayersPass=new tb(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||zc.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Pv("deckRenderer.renderLayers",this,r,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){let n=null;for(const r of t)r.preRender(this.gl,e),r.postRender&&(n=r);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new zc(this.gl),new zc(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const rb={pickedColor:null,pickedObjectIndex:-1};function ib(t){let{pickedColors:e,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:s}=t;const{x:a,y:l,width:c,height:u}=s;let h=o*o,d=-1,f=0;for(let p=0;p<u;p++){const t=p+l-i,n=t*t;if(n>h)f+=4*c;else for(let i=0;i<c;i++){if(e[f+3]-1>=0){const t=i+a-r,e=t*t+n;e<=h&&(h=e,d=f)}f+=4}}if(d>=0){const t=e.slice(d,d+4),r=n(t);if(r){const e=Math.floor(d/4/c),n=d/4-e*c;return{...r,pickedColor:t,pickedX:a+n,pickedY:l+e}}Di.error("Picked non-existent layer. Is picking buffer corrupt?")()}return rb}function ob(t){let e,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:s,z:a}=t,l=r[0];if(r.length>1&&(l=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null===n||void 0===n?void 0:n.pickedViewports)||r,{x:o,y:s})),l){const t=[o-l.x,s-l.y];void 0!==a&&(t[2]=a),e=l.unproject(t)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:e,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function sb(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,l=s?[s]:[];if("hover"===r){const t=n.index,e=n.layerId,r=s?s.props.id:null;if(r!==e||a!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=r,n.index=a,n.info=null}}const c=ob(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===s&&(e.color=o,e.index=a,e.picked=!0),e=ab({layer:t,info:e,mode:r});const i=e.layer;t===s&&"hover"===r&&(n.info=e),u.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),u}function ab(t){let{layer:e,info:n,mode:r}=t;for(;e&&n;){const t=n.layer||null;n.sourceLayer=t,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:t}),e=e.parent}return n}class lb{constructor(t){li(this,"gl",void 0),li(this,"pickingFBO",void 0),li(this,"depthFBO",void 0),li(this,"pickLayersPass",void 0),li(this,"layerFilter",void 0),li(this,"lastPickedInfo",void 0),li(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new tb(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:n,layers:r,viewports:i}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?r.find((t=>t.id===s)):null,c=a&&i.find((t=>t.id===a))||i[0],u=c&&c.unproject([e-c.x,n-c.y]),h={x:e,y:n,viewport:c,coordinate:u,layer:l};return{...o,...h}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new zc(n),zc.isSupported(n,{colorBufferFloat:!0}))){const t=new zc(n);t.attach({36064:new cc(n,{format:Ma(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>t.isPickable()&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}=t;const d=this._getPickable(e),f=fl(this.gl);if(!d)return{result:[],emptyInfo:ob({viewports:r,x:i,y:o,pixelRatio:f})};this._resizeBuffer();const p=pl(this.gl,[i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*f),{width:v,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:v,deviceHeight:y}),b={x:i-s,y:o-s,width:2*s+1,height:2*s+1};let x;const w=[],S=new Set;for(let A=0;A<a;A++){let t,e;if(_){t=ib({...this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:b,effects:h,pass:"picking:".concat(l)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:_})}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&c&&this.depthFBO){e=this._drawAndSample({layers:[t.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:b,effects:h,pass:"picking:".concat(l,":z")},!0).pickedColors[0]}t.pickedLayer&&A+1<a&&(S.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),x=sb({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:d,viewports:r,x:i,y:o,z:e,pixelRatio:f});for(const n of x.values())n.layer&&w.push(n);if(!t.pickedColor)break}for(const A of S)A.restorePickingColors();return{result:w,emptyInfo:x.get(null)}}_pickVisibleObjects(t){let{layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}=t;const d=this._getPickable(e);if(!d)return[];this._resizeBuffer();const f=fl(this.gl),p=pl(this.gl,[i,o],!0),g=p.x,m=p.y+p.height,v=pl(this.gl,[i+s,o+a],!0),y=v.x+v.width,_=v.y,b={x:g,y:_,width:y-g,height:m-_},x=function(t){let{pickedColors:e,decodePickingColor:n}=t;const r=new Map;if(e)for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const t=e.slice(i,i+4),o=t.join(",");if(!r.has(o)){const e=n(t);e?r.set(o,{...e,color:t}):Di.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:{x:i,y:o,width:s,height:a},effects:h,pass:"picking:".concat(l)})),w=new Map,S=Number.isFinite(c);for(let A=0;A<x.length&&!(S&&c&&w.size>=c);A++){const t=x[A];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:f};e=ab({layer:t.pickedLayer,info:e,mode:l}),w.has(e.object)||w.set(e.object,e)}return Array.from(w.values())}_drawAndSample(t){let{layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l}=t,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c}),{x:d,y:f,width:p,height:g}=o,m=new(c?Float32Array:Uint8Array)(p*g*4);return Sc(u,{sourceX:d,sourceY:f,sourceWidth:p,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:h}}_getPickingRect(t){let{deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=t;const s=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-s,c=Math.min(o,n+r+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const cb={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ub{constructor(t){li(this,"el",null),li(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,cb),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"===typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className),Object.assign(r.style,t.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:hb}=globalThis,db="undefined"!==typeof Image,fb="undefined"!==typeof ImageBitmap,pb=Boolean(hb),gb=!!ry||pb;function mb(t){const e=yb(t);if(!e)throw new Error("Not an image");return e}function vb(t){switch(mb(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function yb(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const _b=/^data:image\/svg\+xml/,bb=/\.svg((\?|#).*)?$/;function xb(t){return t&&(_b.test(t)||bb.test(t))}function wb(t,e){if(xb(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Sb(t,e,n){const r=function(t,e){if(xb(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return wb(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(i){r(i)}}))}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}const Ab={};let Eb=!0;async function Cb(t,e,n){let r;if(xb(n)){r=await Sb(t,e,n)}else r=wb(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!kb(e)&&Eb||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Eb=!1}return await createImageBitmap(t)}(r,i)}function kb(t){for(const e in t||Ab)return!1;return!0}const Tb=!1,Mb=!0;function Pb(t){const e=Lb(t);return function(t){const e=Lb(t);if(!(e.byteLength>=24&&2303741511===e.getUint32(0,Tb)))return null;return{mimeType:"image/png",width:e.getUint32(16,Tb),height:e.getUint32(20,Tb)}}(e)||function(t){const e=Lb(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Tb)&&255===e.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,Tb);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,Tb),width:e.getUint16(i+7,Tb)};if(!n.has(t))return null;i+=2,i+=e.getUint16(i,Tb)}return null}(e)||function(t){const e=Lb(t);if(!(e.byteLength>=10&&1195984440===e.getUint32(0,Tb)))return null;return{mimeType:"image/gif",width:e.getUint16(6,Mb),height:e.getUint16(8,Mb)}}(e)||function(t){const e=Lb(t);if(!(e.byteLength>=14&&16973===e.getUint16(0,Tb)&&e.getUint32(2,Mb)===e.byteLength))return null;return{mimeType:"image/bmp",width:e.getUint32(18,Mb),height:e.getUint32(22,Mb)}}(e)}function Lb(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const Ob={id:"image",module:"images",name:"Images",version:"3.2.4",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{},o=function(t){switch(t){case"auto":case"data":return function(){if(fb)return"imagebitmap";if(db)return"image";if(gb)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return fb||db||gb;case"imagebitmap":return fb;case"image":return db;case"data":return gb;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let s;switch(o){case"imagebitmap":s=await Cb(t,e,i);break;case"image":s=await Sb(t,e,i);break;case"data":s=await async function(t,e){const{mimeType:n}=Pb(t)||{},r=globalThis._parseImageNode;return Uv(r),await r(t,n)}(t);break;default:Uv(!1)}return"data"===r&&(s=vb(s)),s},tests:[t=>Boolean(Pb(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const Rb={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},Db="8.8.2",Ib=globalThis.deck&&globalThis.deck.VERSION;if(Ib&&Ib!==Db)throw new Error("deck.gl - multiple versions detected: ".concat(Ib," vs ").concat(Db));Ib||(Di.log(1,"deck.gl ".concat(Db))(),globalThis.deck={...globalThis.deck,VERSION:Db,version:Db,log:Di,_registerLoggers:function(t){Mv=t}},function(t){const e=Wy();t=Array.isArray(t)?t:[t];for(const n of t){const t=Hv(n);e.find((e=>t===e))||e.unshift(t)}}([Rb,[Ob,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Fb=globalThis.deck,Nb=globalThis;function jb(t){if(!t&&!pi())return"Node";if(fi(t))return"Electron";const e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":Nb.chrome?"Chrome":Nb.safari?"Safari":Nb.mozInnerScreenX?"Firefox":"Unknown"}class zb extends Hl{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Ma(t),r=Fc(t,kc);let i=n||r;for(const o of e)switch(o){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:Dl(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return zb.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const Bb=pi()&&"undefined"!==typeof document;let Ub=0;class Vb{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>wl(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:f=Rl.get("animation-loop-".concat(Ub++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(Ea.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return Dl("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=zb.isSupported(this.gl,["timers"])?new zb(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return Ea.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Bb?new Promise(((t,e)=>{Bb&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Sl(this.props.gl,t):this.onCreateContext(t),!Ta(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");ul(this.gl,Ga),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas)return void Tl(t,gl(e.useDevicePixels),e);const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new zc(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var Hb=n(938),Wb=n.n(Hb);const Gb={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(Wb().PointerEventInput),Wb().MouseInput.prototype.handler=function(t){let e=Gb[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const Yb=Wb().Manager,Xb=Wb();class qb{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const Zb=Xb?[[Xb.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Xb.Rotate,{enable:!1}],[Xb.Pinch,{enable:!1}],[Xb.Swipe,{enable:!1}],[Xb.Pan,{threshold:0,enable:!1}],[Xb.Press,{enable:!1}],[Xb.Tap,{event:"doubletap",taps:2,enable:!1}],[Xb.Tap,{event:"anytap",enable:!1}],[Xb.Tap,{enable:!1}]]:null,Kb={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Qb={doubletap:["tap"]},Jb={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},$b={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},tx={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},ex={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},nx="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",rx="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let ix=!1;try{const t={get passive(){return ix=!0,!0}};rx.addEventListener("test",null,t),rx.removeEventListener("test",null)}catch(Yk){ix=!1}const ox=-1!==nx.indexOf("firefox"),{WHEEL_EVENTS:sx}=$b,ax="wheel",lx=4.000244140625;class cx extends qb{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;rx.WheelEvent&&(ox&&t.deltaMode===rx.WheelEvent.DOM_DELTA_PIXEL&&(e/=rx.devicePixelRatio),t.deltaMode===rx.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%lx===0&&(e=Math.floor(e/lx)),t.shiftKey&&e&&(e*=.25),this.callback({type:ax,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(sx),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!ix&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===ax&&(this.options.enable=e)}}const{MOUSE_EVENTS:ux}=$b,hx="pointermove",dx="pointerover",fx="pointerout",px="pointerenter",gx="pointerleave";class mx extends qb{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(ux),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===hx&&(this.enableMoveEvent=e),t===dx&&(this.enableOverEvent=e),t===fx&&(this.enableOutEvent=e),t===px&&(this.enableEnterEvent=e),t===gx&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(dx,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(fx,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(px,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(gx,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(hx,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:vx}=$b,yx="keydown",_x="keyup";class bx extends qb{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:yx,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:_x,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(vx),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===yx&&(this.enableDownEvent=e),t===_x&&(this.enableUpEvent=e)}}const xx="contextmenu";class wx extends qb{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:xx,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===xx&&(this.options.enable=e)}}const Sx={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Ax(t){const e=Sx[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===e?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===e&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}function Ex(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o}}}const Cx={srcElement:"root",priority:0};class kx{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=Cx;"string"===typeof n||n&&n.addEventListener?a={...Cx,srcElement:n}:n&&(a={...Cx,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);const t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...Ax(t),...Ex(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const Tx={events:null,recognizers:null,recognizerOptions:{},Manager:Yb,touchAction:"none",tabIndex:0};class Mx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,n=Jb[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...Tx,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||Zb}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(Kb).forEach((t=>{const e=this.manager.get(t);e&&Kb[t].forEach((t=>{e.recognizeWith(t)}))}));for(const r in e.recognizerOptions){const t=this.manager.get(r);if(t){const n=e.recognizerOptions[r];delete n.enable,t.set(n)}}this.wheelInput=new cx(t,this._onOtherEvent,{enable:!1}),this.moveInput=new mx(t,this._onOtherEvent,{enable:!1}),this.keyInput=new bx(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new wx(t,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=Qb[t];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!==typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:o,events:s}=this,a=ex[t]||t;let l=s.get(a);l||(l=new kx(this),s.set(a,l),l.recognizerName=tx[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=ex[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function Px(){}const Lx={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Px,onResize:Px,onViewStateChange:Px,onInteractionStateChange:Px,onBeforeRender:Px,onAfterRender:Px,onLoad:Px,onError:t=>Di.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class Ox{constructor(t){li(this,"props",void 0),li(this,"width",0),li(this,"height",0),li(this,"userData",{}),li(this,"canvas",null),li(this,"viewManager",null),li(this,"layerManager",null),li(this,"effectManager",null),li(this,"deckRenderer",null),li(this,"deckPicker",null),li(this,"eventManager",null),li(this,"tooltip",null),li(this,"metrics",void 0),li(this,"animationLoop",void 0),li(this,"stats",void 0),li(this,"viewState",void 0),li(this,"cursorState",void 0),li(this,"_needsRedraw",void 0),li(this,"_pickRequest",void 0),li(this,"_lastPointerDownInfo",null),li(this,"_metricsCounter",void 0),li(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),li(this,"_onEvent",(t=>{const e=ji[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let l=!1;s&&(l=s.call(o,i,t)),!l&&a&&a(i,t)})),li(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...Lx,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Di.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===jb()&&Di.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Ll({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&lo.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,s,a;(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(t=this.layerManager)||void 0===t||t.finalize(),this.layerManager=null,null===(e=this.viewManager)||void 0===e||e.finalize(),this.viewManager=null,null===(n=this.effectManager)||void 0===n||n.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(i=this.deckPicker)||void 0===i||i.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(s=this.tooltip)||void 0===s||s.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(a=this.canvas.parentElement)||void 0===a||a.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Di.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Di.removed("onLayerClick","onClick")(),t.initialViewState&&!h_(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return m_(this.viewManager),this.viewManager.views}getViewports(t){return m_(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_pick(t,e,n){m_(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),m_(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const e=t.clientWidth||t.width,n=t.clientHeight||t.height;var r;e===this.width&&n===this.height||(this.width=e,this.height=n,null===(r=this.viewManager)||void 0===r||r.setProps({width:e,height:n}),this.props.onResize({width:e,height:n}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=t;return new Vb({width:e,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:r,onCreateContext:t=>wl({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new B_({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const s of n){var e;i=s,o=(null===(e=s.layer)||void 0===e?void 0:e.onHover(s,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,Sl(t,{enable:!0,copyState:!0})),this.tooltip=new ub(this.canvas),ul(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new yv;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new Mx(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in ji)this.eventManager.on(r,this._onEvent);this.viewManager=new d_({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new u_(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new Q_,this.deckRenderer=new nb(t),this.deckPicker=new lb(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;ul(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Di.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=Rl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}li(Ox,"defaultProps",Lx),li(Ox,"VERSION",Fb.VERSION);const Rx="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function Dx(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}class Ix{constructor(t,e){li(this,"opts",void 0),li(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function Fx(t){return t.stride||t.size*t.bytesPerElement}function Nx(t,e){e.offset&&Di.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Fx(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}const jx=[],zx=[];function Bx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=jx;const i={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(zx.length=t.length,r=zx):r=jx,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function Ux(t){return t&&t[Symbol.asyncIterator]}const Vx=[],Hx=[[0,1/0]];function Wx(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,l=s-r;if(a>l)return void n.set(e.subarray(0,l),r);if(n.set(e,r),!o)return;let c=a;for(;c<l;){const t=o(c,e);for(let e=0;e<i;e++)n[r+c]=t[e]||0,c++}}const Gx={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Yx(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Gx[n],...e,...t,type:n}}function Xx(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function qx(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Zx(t){t.push(t.shift())}function Kx(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function Qx(t){let{buffer:e,numInstances:n,attribute:r,fromLength:i,fromStartIndices:o,getData:s=(t=>t)}=t;const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*a,c=r.byteOffset,u=r.startIndices,h=o&&u,d=Kx(r,n),f=r.isConstant;if(!h&&i>=d)return;const p=f?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!f){const t=s;s=(e,n)=>r.normalizeConstant(t(e,n))}const g=f?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t,t+l),e),m=e.getData({length:i}),v=new Float32Array(d);!function(t){let{source:e,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:s}=t;if(!Array.isArray(s))return Wx({source:e,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((t,e)=>i(t+l,e)),u=Math.min(o.length,s.length);for(let h=1;h<u;h++){const t=o[h]*r,i=s[h]*r;Wx({source:e.subarray(a,t),target:n,start:l,end:i,size:r,getData:c}),a=t,l=i}l<n.length&&Wx({source:[],target:n,start:l,size:r,getData:c})}({source:m,target:v,sourceStartIndices:o,targetStartIndices:u,size:l,getData:g}),e.byteLength<v.byteLength+c&&e.reallocate(v.byteLength+c),e.subData({data:v,offset:c})}class Jx extends class{constructor(t,e,n){li(this,"gl",void 0),li(this,"id",void 0),li(this,"size",void 0),li(this,"settings",void 0),li(this,"value",void 0),li(this,"doublePrecision",void 0),li(this,"_buffer",void 0),li(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,i=5130===r;let o,{defaultValue:s}=e;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=i?5126:!r&&e.isIndexed?t&&Ic(t,Tc)?5125:5123:r||5126;let a=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.doublePrecision=i,i&&!1===e.fp64&&(a=Float32Array),this.value=null,this.settings={...e,defaultType:a,defaultValue:s,logicalType:r,type:o,size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new ec(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Fx(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),lo.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=Nx(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new Ix(this,i.high),n["".concat(t,"64Low")]=r?new Ix(this,i.low):new Float32Array(this.size),n}if(e){const n=Nx(this.getAccessor(),e);return{[t]:new Ix(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof ec?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=Fx(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=Fx(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=Do(t,r));const s=t.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?Do(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=lo.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),e&&r&&o.subData({data:r instanceof Float64Array?Do(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||Di.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=r[0],e;switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Hx}),li(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!==typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition;return Yx(Array.isArray(e)?t[e.find((e=>t[e]))]:t[e],n)}setNeedsUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===Hx)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const r=t[o];r[1]<e[0]?(n.push(r),i=o+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=Hx}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Vx}setNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==Hx),!0))}updateBuffer(t){let{numInstances:e,data:n,props:r,context:i}=t;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[t,a]of o)s.call(i,this,{data:n,startRow:t,endRow:a,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of o){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){if(void 0===t||"function"===typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;m_(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=function(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(e,r)=>{let{index:i,target:a}=r;if(!o){const e=i*l+c;for(let r=0;r<n;r++)a[r]=t[e+r];return a}const h=o[i],d=o[i+1]||u;let f;if(s){f=new Array(d-h);for(let e=h;e<d;e++){const r=e*l+c;a=new Array(n);for(let e=0;e<n;e++)a[e]=t[r+e];f[e-h]=a}}else if(l===n)f=t.subarray(h*n+c,d*n+c);else{f=new t.constructor((d-h)*n);let e=0;for(let r=h;r<d;r++){const i=r*l+c;for(let r=0;r<n;r++)f[e++]=t[i+r]}}return f}}(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?e[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,e){let{data:n,startRow:r,endRow:i,props:o,numInstances:s}=e;if(t.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:h}=t,{accessor:d,transform:f}=a,p=l.binaryAccessor||("function"===typeof d?d:o[d]);m_("function"===typeof p,'accessor "'.concat(d,'" is not a function'));let g=t.getVertexOffset(r);const{iterable:m,objectInfo:v}=Bx(n,r,i);for(const y of m){v.index++;let e=p(y,v);if(f&&(e=f.call(this,e)),h){const n=(v.index<h.length-1?h[v.index+1]:s)-h[v.index];if(e&&Array.isArray(e[0])){let n=g;for(const r of e)t._normalizeValue(r,c,n),n+=u}else e&&e.length>u?c.set(e,g):(t._normalizeValue(e,v.target,0),Rv({target:c,source:v.target,start:g,count:n}));g+=n*u}else t._normalizeValue(e,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const $x="void main() {gl_FragColor = vec4(0);}",tw="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",ew="#version 300 es\n".concat(tw);function nw(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function rw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?ew:e>300?"#version ".concat(e,"\n").concat(tw):$x;const o=iw(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function iw(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Bs(!1),null}}class ow extends Hl{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Ma(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};La(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Bl(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=r,Ea.warn((()=>"".concat(this.id," unused varying buffer ").concat(t)))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof ec===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class sw{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof ec?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Dl(Ma(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const t=this.feedbackMap[r];r in e&&(n[t]=r)}Object.assign(n,t.feedbackBuffers);for(const r in n){const t=n[r];if("string"===typeof t){const i=e[t],{byteLength:o,usage:s,accessor:a}=i;n[r]=this._createNewBuffer(r,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new ow(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Dl(n[i]instanceof ec)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new ec(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function aw(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const lw={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},cw="transform_uSampler_",uw="transform_uSize_",hw="transform_position";function dw(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t;let o=Object.keys(n).length,s=null;const a={};let l=e,c={};if(o>0||r){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,i,l)=>{if(o>0){const r=function(t,e){const n={},r=function(t){return nw(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat(cw).concat(t),n="".concat(uw).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Bs(!1),null}}(i),c="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(s,").").concat(l,";\n");n[r]=o;return{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,c=la([c,n]),Object.assign(a,r.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){const n=nw(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Dl(i);const t="".concat(uw).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(hw," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(hw,", 0, 1.);\n");c=la([c,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}const fw={10241:9728,10240:9728,10242:33071,10243:33071};class pw{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];s[e]=n[t]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&(({width:o,height:s}=r),i["".concat(uw).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),i["".concat(uw).concat(a)]=[o,s];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=Sc(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Bs(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let a=0;a<n.length;a+=4)for(let t=0;t<i;t++)o[s++]=n[a+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof cc)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!==typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new ec(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new zc(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const n in e)e[n].setParameters(fw)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){Dl(t instanceof cc||t instanceof bc||t instanceof xc);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u}=t;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=dw({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=la([t.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:t._fs||rw({version:aw(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[lw].concat(t.modules||[]):t.modules,uniforms:i,inject:l}}}let gw=null;function mw(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!gw||gw.byteLength<n)&&(gw=new ArrayBuffer(n)),gw),0,e)}class vw extends Hl{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(Ma(t)||"Chrome"===jb())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new vw(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return vw.MAX_ATTRIBUTES=vw.MAX_ATTRIBUTES||t.getParameter(34921),vw.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:vw._setConstantFloatArray(t,e,n);break;case Int32Array:vw._setConstantIntArray(t,e,n);break;case Uint32Array:vw._setConstantUintArray(t,e,n);break;default:Dl(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return vw.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Dl(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:l,divisor:c}=n,{gl:u,gl2:h}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),l?(Dl(Ma(u)),h.vertexAttribIPointer(t,r,i,o,s)):u.vertexAttribPointer(t,r,i,a,o,s),u.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!vw.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new ec(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=mw(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Dl(!1)}}static _setConstantIntArray(t,e,n){switch(Dl(Ma(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Dl(!1)}}static _setConstantUintArray(t,e,n){switch(Dl(Ma(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Dl(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return Dl(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const yw=/^(.+)__LOCATION_([0-9]+)$/,_w=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class bw{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new vw(t),Ul(this,"VertexArray","v6.0",_w),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new ec(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof ec&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof ec&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,Ea.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const l=this.accessors[o]||{},c=Ql.resolve(a.accessor,l,n,r),{size:u,type:h}=c;return Dl(Number.isFinite(u)&&Number.isFinite(h)),{location:o,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=yw.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof ec)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof ec){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof ec))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(t,e){if(vw.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){vw.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,o=i>0;if(t.isInstanced=t.isInstanced||o,n instanceof ec){const e=n;if(o){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ea.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function xw(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=ww(t[s],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}function ww(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return xw(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2),o=i.indexOf(".0");return o===i.length-2?i.slice(0,-1):i}function Sw(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o,s,a,l="NOT PROVIDED",c=1,u=0,h=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),e instanceof ec){const t=e,{data:d,changed:f}=t.getDebugData();let p;if(s=f?"*":"",a=d,h=t.byteLength,u=h/d.BYTES_PER_ELEMENT/c,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(h," bytes ").concat(Fl(i,l),")")}else o=!0,p="".concat(h," bytes");return{[r]:"".concat(s).concat(ww(a,{size:c,isInteger:o})),"Format ":p}}return a=e,c=e.length,l=String(e.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[r]:"".concat(ww(a,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function Aw(t,e){const{type:n,size:r}=e,i=mu(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function Ew(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;Dl(n);const o=".*Matrix",s=n._uniformSetters,a={},l=Object.keys(s).sort();let c=0;for(const d of l)d.match(".*_.*")||d.match(o)||Cw({table:a,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)d.match(o)&&Cw({table:a,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)a[d]||Cw({table:a,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;let u=0;const h={};if(!i)for(const d in r){const t=r[d];a[d]||(u++,h[d]={Type:"NOT USED: ".concat(t),[e]:ww(t)})}return{table:a,count:c,unusedTable:h,unusedCount:u}}function Cw(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=function(t){return void 0!==t&&null!==t}(s);return(!o||!a)&&(e[i]={[n]:a?ww(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function kw(t){const{type:e,size:n}=t.accessor,r=mu(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Tw={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Mw(t,e){const{attributeMap:n=Tw}=e||{};return n&&n[t]||t}function Pw(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Dl(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Lw=()=>{},Ow={};class Rw{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=jl("model")}=e;Dl(Ta(t)),this.id=n,this.gl=t,this.id=e.id||jl("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||xu.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Dl(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return Dl(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return Dl(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=Mw(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const e=s.value,n={...s};delete n.value,r[a]=[new ec(t,e),n],Pw(o,n)}}if(i){const e=i.value||i;Dl(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new ec(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Bl(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return yc(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=t;let l;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),Ea.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&Ea.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=Lw,onAfterRender:v=Lw}=this.props;m(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(Ow,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:h,isInstanced:p,instanceCount:g,offset:u?d:0}));return v(),Ea.priority>=2&&this._logDrawCallEnd(l,a,n),y}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ea.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Dl(t instanceof bu,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new bw(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof ec&&e.delete()}}_setAnimationProps(t){this.animated&&Dl(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Bl(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new ow(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Ea.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ea.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Sw(e,e.elements,null,n));const i=e.values;for(const o in i){const t=e._getAttributeInfo(o);if(t){let s="".concat(o,": ").concat(t.name);const a=e.accessors[t.location];a&&(s="".concat(o,": ").concat(Aw(t.name,a))),r[s]=Sw(e,i[o],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=Ew({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=Ew({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Ea.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&Ea.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=kw(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=kw(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);Ea.table(t,i)(),Ea.table(t,o)(),Ea.table(t+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),Ea.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}class Dw{static isSupported(t){return Ma(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();Dl(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new Rw(e,Object.assign({},t,{fs:t.fs||rw({version:aw(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=r.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!Bl(t.feedbackBuffers)||!Bl(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new sw(t,e)),function(t){if(!Bl(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new pw(t,e)),Dl(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=Object.assign(e,r.getDrawOptions(e));return e}}const Iw="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const Fw={interpolation:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;li(this,"gl",void 0),li(this,"type","interpolation"),li(this,"attributeInTransition",void 0),li(this,"settings",void 0),li(this,"attribute",void 0),li(this,"transition",void 0),li(this,"currentStartIndices",void 0),li(this,"currentLength",void 0),li(this,"transform",void 0),li(this,"buffers",void 0),this.gl=e,this.transition=new y_(r),this.attribute=n,this.attributeInTransition=new Jx(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(t,e){const n=qx(e.size);return new Dw(t,{vs:Iw,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const i={byteLength:0,usage:35050};this.buffers=[new ec(e,i),new ec(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;Zx(r);const o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)Qx({buffer:s,...o});this.currentStartIndices=i.startIndices,this.currentLength=Kx(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Xx(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;li(this,"gl",void 0),li(this,"type","spring"),li(this,"attributeInTransition",void 0),li(this,"settings",void 0),li(this,"attribute",void 0),li(this,"transition",void 0),li(this,"currentStartIndices",void 0),li(this,"currentLength",void 0),li(this,"texture",void 0),li(this,"framebuffer",void 0),li(this,"transform",void 0),li(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new y_(r),this.attribute=n,this.attributeInTransition=new Jx(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(t){return new cc(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(t,e){return new zc(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(t,e,n){const r=qx(e.size);return new Dw(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new ec(e,i),new ec(e,i),new ec(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)Qx({buffer:s,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=Kx(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Xx(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Zx(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return Sc(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Nw{constructor(t,e){let{id:n,timeline:r}=e;li(this,"id",void 0),li(this,"isSupported",void 0),li(this,"gl",void 0),li(this,"timeline",void 0),li(this,"transitions",void 0),li(this,"needsRedraw",void 0),li(this,"numInstances",void 0),this.id=n,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Dw.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update(t){let{attributes:e,transitions:n,numInstances:r}=t;this.numInstances=r||1;for(const i in e){const t=e[i],r=t.getTransitionSetting(n);r&&this._updateAttribute(i,t,r)}for(const i in this.transitions){const t=e[i];t&&t.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Di.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const o=Fw[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(Di.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const jw="attributeManager.invalidate";class zw{constructor(t){let{id:e="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};li(this,"id",void 0),li(this,"gl",void 0),li(this,"attributes",void 0),li(this,"updateTriggers",void 0),li(this,"needsRedraw",void 0),li(this,"userData",void 0),li(this,"stats",void 0),li(this,"attributeTransitionManager",void 0),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Nw(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);Pv(jw,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);Pv(jw,this,"all")}update(t){let{data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}=t,l=!1;Pv("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const t=this.attributes[c],i=t.settings.accessor;t.startIndices=r,t.numInstances=n,o[c]&&Di.removed("props.".concat(c),"data.attributes.".concat(c))(),t.setExternalBuffer(s[c])||t.setBinaryValue("string"===typeof i?s[i]:void 0,e.startIndices)||"string"===typeof i&&!s[i]&&t.setConstantValue(o[i])||t.needsUpdate()&&(l=!0,this._updateAttribute({attribute:t,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||t.needsRedraw()}l&&Pv("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getChangedAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new Jx(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(Pv("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&Pv("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,Pv("attribute.updateEnd",e,n))}}const Bw=1e-5;function Uw(t,e,n,r,i){const o=e-t;return(n-e)*i+-o*r+o+e}function Vw(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const Hw={interpolation:class extends y_{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,o=i(t/r);this._value=po(e,n,o)}},spring:class extends y_{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let s=function(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Uw(t[s],e[s],n[s],r,i);return o}return Uw(t,e,n,r,i)}(i,o,e,n,r);const a=Vw(s,e),l=Vw(s,o);a<Bw&&l<Bw&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class Ww{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=Yx(r)))return;const o=Hw[r.type];if(!o)return void Di.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:e,toValue:n}),i.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function Gw(t,e){const n=Xw({newProps:t,oldProps:e,propTypes:Qw(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(Kw(t,e,"all"))return{all:!0}}const n={};let r=!1;for(const i in t.updateTriggers)if("all"!==i){Kw(t,e,i)&&(n[i]=!0,r=!0)}return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:Zw(t,e),transitionsChanged:Yw(t,e)}}function Yw(t,e){if(!t.transitions)return!1;const n={},r=Qw(t);let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&qw(t[o],e[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function Xw(t){let{newProps:e,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=t;if(n===e)return!1;if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(e))if(!(s in r)){if(!(s in n))return"".concat(o,".").concat(s," added");const t=qw(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}for(const s of Object.keys(n))if(!(s in r)){if(!(s in e))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(e,s)){const t=qw(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}}return!1}function qw(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function Zw(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Kw(t,e,n){let r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=e.updateTriggers[n];i=void 0===i||null===i?{}:i;return Xw({oldProps:i,newProps:r,triggerName:n})}function Qw(t){const e=t[Ev],n=e&&e.constructor;return n?n._propTypes:{}}function Jw(t){if(null===(e=t)||"object"!==typeof e)throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function $w(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}const tS={10241:9987,10240:9729,10242:33071,10243:33071},eS={};const nS={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||sS(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>rS(t,e)},accessor:{validate(t,e){const n=aS(t);return"function"===n||n===aS(e.value)},equal:(t,e,n)=>"function"===typeof e||rS(t,e)},array:{validate:(t,e)=>e.optional&&!t||sS(t),equal:(t,e,n)=>n.compare?rS(t,e):t===e},object:{equal:(t,e,n)=>n.compare?h_(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"===typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>function(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof cc)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let r=null;e.compressed&&(r={10241:e.data.length>1?9985:9729});const i=new cc(n,{...e,parameters:{...tS,...r,...t.props.textureParameters}});return eS[i.id]=!0,i}(n,t),release:t=>{var e;(e=t)&&e instanceof cc&&eS[e.id]&&(e.delete(),delete eS[e.id])}}};function rS(t,e){if(t===e)return!0;if(!sS(t)||!sS(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function iS(t,e){switch(aS(e)){case"object":return oS(t,e);case"array":return oS(t,{type:"array",value:e,compare:!1});case"boolean":return oS(t,{type:"boolean",value:e});case"number":return oS(t,{type:"number",value:e});case"function":return oS(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function oS(t,e){return"type"in e?{name:t,...nS[e.type],...e}:"value"in e?{name:t,type:aS(e.value),...e}:{name:t,type:"object",value:e}}function sS(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function aS(t){return sS(t)?"array":null===t?"null":typeof t}function lS(t){const e=hS(t,"_mergedDefaultProps");return e||(function(t){if(!t.prototype)return;const e=Object.getPrototypeOf(t),n=lS(e),r=function(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const t=null===o||void 0===o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=iS(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(hS(t,"defaultProps")||{}),i=function(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=function(t){const e=hS(t,"layerName")||hS(t,"componentName");e||Di.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,t),o={...e._propTypes,...r.propTypes};!function(t,e){const n={},r={};for(const i in e){const t=e[i],{name:o,value:s}=t;t.async&&(n[o]=s,r[o]=cS(o))}t[Cv]=n,t[kv]={},Object.defineProperties(t,r)}(i,o);const s={...e._deprecatedProps,...r.deprecatedProps};(function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const i of e[n])uS(this,i)||(this[i]=t);Di.deprecated(r,e[n].join("/"))()}})})(i,s),t._mergedDefaultProps=i,t._propTypes=o,t._deprecatedProps=s}(t),t._mergedDefaultProps)}function cS(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||Ux(e)?this[kv][t]=e:this[Tv][t]=e},get(){if(this[Tv]){if(t in this[Tv]){return this[Tv][t]||this[Cv][t]}if(t in this[kv]){const e=this[Ev]&&this[Ev].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Cv][t]}}return this[Cv][t]}}}function uS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hS(t,e){return uS(t,e)&&t[e]}let dS=0;class fS{constructor(){li(this,"id",void 0),li(this,"props",void 0),li(this,"count",void 0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.props=function(t,e){const n=lS(t.constructor),r=Object.create(n);r[Ev]=t,r[kv]={},r[Tv]={};for(let i=0;i<e.length;++i){const t=e[i];for(const e in t)r[e]=t[e]}return Object.freeze(r),r}(this,e),this.id=this.props.id,this.count=dS++}clone(t){const{props:e}=this,n={};for(const r in e[Cv])r in e[Tv]?n[r]=e[Tv][r]:r in e[kv]&&(n[r]=e[kv][r]);return new this.constructor({...e,...n,...t})}}li(fS,"componentName","Component"),li(fS,"defaultProps",{});const pS=Object.freeze({});class gS extends class{constructor(t){li(this,"component",void 0),li(this,"onAsyncPropUpdated",void 0),li(this,"asyncProps",void 0),li(this,"oldProps",void 0),li(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||pS}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){const e=t[Tv]||{},n=t[kv]||t,r=t[Cv]||{};for(const i in e){const t=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t),e[i]=this.getAsyncProp(i)}for(const i in n){const t=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):Ux(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e)})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const s of e){const{dataTransform:e}=this.component.props;i=e?e(s,i):i.concat(s),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}{constructor(t){let{attributeManager:e,layer:n}=t;super(n),li(this,"attributeManager",void 0),li(this,"needsRedraw",void 0),li(this,"needsUpdate",void 0),li(this,"subLayers",void 0),li(this,"usesPickingColorCache",void 0),li(this,"changeFlags",void 0),li(this,"viewport",void 0),li(this,"uniformTransitions",void 0),li(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,e){const n=this.component.props.fetch;return n?n(e,{propName:t,layer:this.layer}):super._fetch(t,e)}_onResolve(t,e){const n=this.component.props.onDataLoad;"data"===t&&n&&n(e,{propName:t,layer:this.layer})}_onError(t,e){this.layer.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const mS=2**24-1,vS=Object.freeze([]),yS=$i((t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)}));let _S=new Uint8ClampedArray(0);const bS={data:{type:"data",value:vS,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:s}=e;const{resourceManager:a}=r.context;var l;(o=o||r.getLoadOptions(),i=i||r.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(t);return c||o||(a.add({resourceId:t,data:i_(t,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:t=>{var e;return null===(e=r.internalState)||void 0===e?void 0:e.reloadAsyncProp(n,t)},consumerId:r.id,requestId:n}):i_(t,i,o)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:zi,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:Ii.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,100*-e]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class xS extends fS{constructor(){super(...arguments),li(this,"internalState",null),li(this,"lifecycle",_v),li(this,"context",void 0),li(this,"state",void 0),li(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){m_(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=Ps(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=ms(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){m_(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){m_(this.internalState);return Ls(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===Ii.DEFAULT||t===Ii.LNGLAT||t===Ii.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){m_(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Jw(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const e=this.getAttributeManager();if(!e)return null;const{positions:n,instancePositions:r}=e.attributes;return null===(t=n||r)||void 0===t?void 0:t.getBounds()}getShaders(t){for(const e of this.props.extensions)t=$w(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const a of n)e.invalidateAll(a);else e.invalidateAll();const{props:r,oldProps:i}=t,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable,s=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==s&&e){const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(s&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||s||(r.constant=!0,r.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo(t){let{info:e,mode:n,sourceLayer:r}=t;const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(t,e){var n,r,i,o;(e&&(t.message="".concat(e,": ").concat(t.message)),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&yS({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,e){let{numInstances:n}=e;if(t.constant)return;const r=Math.floor(_S.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>mS&&Di.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),_S=lo.allocate(_S,n,{size:3,copy:!0,maxCount:Math.max(n,mS)});const t=Math.floor(_S.length/3),e=[];for(let n=r;n<t;n++)this.encodePickingColor(n,e),_S[3*n+0]=e[0],_S[3*n+1]=e[1],_S[3*n+2]=e[2]}t.value=_S.subarray(0,3*n)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==_S.buffer&&(n.value=_S.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){m_(!this.internalState),m_(Number.isFinite(this.props.coordinateSystem)),Pv("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new gS({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Di.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Ww(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Pv("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Pv("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const t=this._getUpdateParams(),o=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(s){}for(const e of this.props.extensions)e.updateState.call(this,t,e);const a=this.getModels()[0]!==o[0];this._postUpdate(t,a)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Pv("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer(t){let{moduleParameters:e=null,uniforms:n={},parameters:r={}}=t;this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:t}=this.props,s=t&&t(n)||[0,0];ul(o.gl,{polygonOffset:s}),dl(o.gl,r,(()=>{const t={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const e of this.props.extensions)e.draw.call(this,t,e);this.draw(t)}))}finally{this.props=i}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const r in t)if(t[r]){let n=!1;if("dataChanged"===r){const i=t[r],o=e[r];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}e[r]||(e[r]=t[r],n=!0),n&&Pv("layer.changeFlag",this,r,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=Gw(t,e);if(n.updateTriggersChanged)for(const i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=Qw(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new zw(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null===i||void 0===i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),Number.isInteger(s)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);return e=e||r,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}li(xS,"defaultProps",bS),li(xS,"layerName","Layer");const wS={position:"absolute",zIndex:-1};function SS(e,n){if("function"===typeof e)return e(n);if(Array.isArray(e))return e.map((t=>SS(t,n)));if(AS(e)){if(function(t){const e=t.type,n=e&&e.defaultProps;return n&&n.mapStyle}(e))return n.style=wS,(0,t.cloneElement)(e,n);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(e))return(0,t.cloneElement)(e,n)}return e}function AS(t){return t&&"object"===typeof t&&"type"in t||!1}function ES(e){if("function"===typeof e)return(0,t.createElement)(v_,{},e);if(Array.isArray(e))return e.map(ES);if(AS(e)){if(e.type===t.Fragment)return ES(e.props.children);if(Dx(e.type,v_))return e}return e}const CS={mixBlendMode:null};function kS(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const TS=(0,t.forwardRef)(((e,n)=>{const[r,i]=(0,t.useState)(0),o=(0,t.useRef)({control:null,version:r,forceUpdate:()=>i((t=>t+1))}),s=o.current,a=(0,t.useRef)(null),l=(0,t.useRef)(null),c=(0,t.useMemo)((()=>function(e){let{children:n,layers:r=[],views:i=null}=e;const o=[],s=[],a={};return t.Children.forEach(ES(n),(t=>{if(AS(t)){const e=t.type;if(Dx(e,xS)){const n=function(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);s.push(n)}else o.push(t);if(Dx(e,v_)&&e!==v_&&t.props.id){const n=new e(t.props);a[n.id]=n}}else t&&o.push(t)})),Object.keys(a).length>0&&(Array.isArray(i)?i.forEach((t=>{a[t.id]=t})):i&&(a[i.id]=i),i=Object.values(a)),r=s.length>0?[...s,...r]:r,{layers:r,children:o,views:i}}(e)),[e.layers,e.views,e.children]);let u=!0;const h=t=>{var n;return u&&e.viewState?(s.viewStateUpdateRequested=t,null):(s.viewStateUpdateRequested=null,null===(n=e.onViewStateChange)||void 0===n?void 0:n.call(e,t))},d=t=>{var n;u?s.interactionStateUpdateRequested=t:(s.interactionStateUpdateRequested=null,null===(n=e.onInteractionStateChange)||void 0===n||n.call(e,t))},f=(0,t.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:a.current,canvas:l.current,layers:c.layers,views:c.views,onViewStateChange:h,onInteractionStateChange:d};return delete t._customRender,s.deck&&s.deck.setProps(t),t}),[e]);(0,t.useEffect)((()=>{const t=e.Deck||Ox;return s.deck=function(t,e,n){const r=new e({...n,_customRender:e=>{t.redrawReason=e;const n=r.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():kS(t)}});return r}(s,t,{...f,parent:a.current,canvas:l.current}),()=>{var t;return null===(t=s.deck)||void 0===t?void 0:t.finalize()}}),[]),Rx((()=>{kS(s);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=s;t&&h(t),e&&d(e)})),(0,t.useImperativeHandle)(n,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(s)),[]);const p=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:g,width:m,height:v,id:y,style:_}=e,{containerStyle:b,canvasStyle:x}=(0,t.useMemo)((()=>function(t){let{width:e,height:n,style:r}=t;const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(const s in r)s in CS?o[s]=r[s]:i[s]=r[s];return{containerStyle:i,canvasStyle:o}}({width:m,height:v,style:_})),[m,v,_]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===p||s.version!==r){s.lastRenderedViewports=p,s.version=r;const e=function(e){let{children:n,deck:r,ContextProvider:i}=e;const{viewManager:o}=r||{};if(!o||!o.views.length)return[];const s={},a=o.views[0].id;for(const t of n){let e=a,n=t;AS(t)&&Dx(t.type,v_)&&(e=t.props.id||a,n=t.props.children);const r=o.getViewport(e),i=o.getViewState(e);if(r){const{x:t,y:o,width:a,height:l}=r;n=SS(n,{x:t,y:o,width:a,height:l,viewport:r,viewState:i}),s[e]||(s[e]={viewport:r,children:[]}),s[e].children.push(n)}}return Object.keys(s).map((e=>{const{viewport:n,children:o}=s[e],{x:a,y:l,width:c,height:u}=n,h={position:"absolute",left:a,top:l,width:c,height:u},d="view-".concat(e),f=(0,t.createElement)("div",{key:d,id:d,style:h},...o);if(i){const o={viewport:n,container:r.canvas.offsetParent,eventManager:r.eventManager,onViewStateChange:t=>{t.viewId=e,r._onViewStateChange(t)}};return(0,t.createElement)(i,{key:d,value:o},f)}return f}))}({children:c.children,deck:s.deck,ContextProvider:g}),n=(0,t.createElement)("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:l,style:x});s.control=(0,t.createElement)("div",{id:"".concat(y||"deckgl","-wrapper"),ref:a,style:b},[n,e])}return u=!1,s.control}));TS.defaultProps=Ox.defaultProps;const MS=TS,PS=t.createContext(null);function LS(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function OS(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const e=t.center;t.center=new e.constructor(n.longitude,n.latitude),r=r||e!==t.center}if("zoom"in n){const e=t.zoom;t.zoom=n.zoom,r=r||e!==t.zoom}if("bearing"in n){const e=t.bearing;t.bearing=n.bearing,r=r||e!==t.bearing}if("pitch"in n){const e=t.pitch;t.pitch=n.pitch,r=r||e!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const RS=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function DS(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map((t=>{const n=e[t.ref];let r=null;if("interactive"in t&&(r={...t},delete r.interactive),n){r=r||{...t},delete r.ref;for(const t of RS)t in n&&(r[t]=n[t])}return r||t}));return{...t,layers:n}}function IS(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!IS(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){if(!e.hasOwnProperty(i))return!1;if(!IS(t[i],e[i]))return!1}return!0}return!1}const FS={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},NS={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},jS={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},zS=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],BS=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class US{constructor(t,e,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[jS[t.type]];e&&e(t)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[FS[t.type]];if(e){if(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type){const e=this._hoveredFeatures||this._map.queryRenderedFeatures(t.point,{layers:this.props.interactiveLayerIds});t.features=e}e(t),delete t.features}},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[NS[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const n=US.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(e.className=i.className;i.childNodes.length>0;)e.appendChild(i.childNodes[0]);return r._container=e,t.initialViewState&&n._updateViewState(t.initialViewState,!1),r.resize(),n.setProps({...t,styleDiffing:!1}),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),n}_initialize(t){const{props:e}=this,n={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||VS()||null,container:t,style:DS(e.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),e.cursor&&(i.getCanvas().style.cursor=e.cursor),this._createShadowTransform(i);const o=i._render;i._render=t=>{this._inRender=!0,o.call(i,t),this._inRender=!1};const s=i._renderTaskQueue.run;i._renderTaskQueue.run=t=>{s.call(i._renderTaskQueue,t),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const a=i.fire;i.fire=this._fireEvent.bind(this,a),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const l in FS)i.on(l,this._onPointerEvent);for(const l in NS)i.on(l,this._onCameraEvent);for(const l in jS)i.on(l,this._onEvent);this._map=i}recycle(){US.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e;const n=e.updateElevation;n&&(e.updateElevation=r=>{t.transform.elevation=e.elevation,n.call(e,r),n.call(t.transform,r)}),this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:s}=r,a=n.isMoving();a&&(r.cameraElevationReference="sea");const l=OS(r,{...LS(n.transform),...t});if(a&&(r.cameraElevationReference="ground"),l&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=i!==r.zoom),t.rotate||(t.rotate=s!==r.bearing),t.pitch||(t.pitch=o!==r.pitch)}return a||OS(n.transform,t),l}_updateSettings(t,e){const n=this._map;let r=!1;for(const i of zS)i in t&&!IS(t[i],e[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](t[i]));return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){const e={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(e.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(DS(t.mapStyle),e),!0}return!1}_updateStyleComponents(t,e){const n=this._map;let r=!1;return n.style.loaded()&&("light"in t&&!IS(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&!IS(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&!IS(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}_updateHandlers(t,e){const n=this._map;let r=!1;for(const i of BS){const o=t[i];IS(o,e[i])||(r=!0,o?n[i].enable(o):n[i].disable())}return r}_updateHover(t){var e;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=t.type,o=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0;let s;if("mousemove"===i)try{s=this._map.queryRenderedFeatures(t.point,{layers:n.interactiveLayerIds})}catch(r){s=[]}else s=[];const a=s.length>0;!a&&o&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,a&&!o&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=i}else this._hoveredFeatures=null}_fireEvent(t,e,n){const r=this._map,i=r.transform,o="string"===typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in NS&&("object"===typeof e&&(e.viewState=LS(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const e=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=e}}}function VS(){let t=null;if("undefined"!==typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(e){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/ncc-cas-dev",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(n){}return t}US.savedMaps=[];const HS=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function WS(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>t.transform.locationPoint(e.LngLat.convert(n)),unproject:n=>t.transform.pointLocation(e.Point.convert(n))};for(const i of function(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}(n))i in r||HS.includes(i)||(r[i]=n[i].bind(n));return r}const GS="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,YS=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const XS=t.createContext(null),qS={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},ZS=(0,t.forwardRef)(((e,r)=>{const i=(0,t.useContext)(PS),[o,s]=(0,t.useState)(null),a=(0,t.useRef)(),{current:l}=(0,t.useRef)({mapLib:null,map:null});(0,t.useEffect)((()=>{const t=e.mapLib;let r,o=!0;return Promise.resolve(t||n.e(483).then(n.t.bind(n,483,23))).then((t=>{if(o){if(t.Map||(t=t.default),!t||!t.Map)throw new Error("Invalid mapLib");if(!t.supported(e))throw new Error("Map is not supported by this browser");!function(t,e){for(const n of YS)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(e.RTLTextPlugin,(t=>{t&&console.error(t)}),!1)}(t,e),e.reuseMaps&&(r=US.reuse(e,a.current)),r||(r=new US(t.Map,e,a.current)),l.map=WS(r,t),l.mapLib=t,s(r),null===i||void 0===i||i.onMapMount(l.map,e.id)}})).catch((t=>{e.onError({type:"error",target:null,originalEvent:null,error:t})})),()=>{o=!1,r&&(null===i||void 0===i||i.onMapUnmount(e.id),e.reuseMaps?r.recycle():r.destroy())}}),[]),GS((()=>{o&&o.setProps(e)})),(0,t.useImperativeHandle)(r,(()=>l.map),[o]);const c=(0,t.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return t.createElement("div",{id:e.id,ref:a,style:c},o&&t.createElement(XS.Provider,{value:l},e.children))}));ZS.displayName="Map",ZS.defaultProps=qS;const KS=ZS,QS=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function JS(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const t=e[r];Number.isFinite(t)&&!QS.test(r)?n[r]="".concat(t,"px"):n[r]=t}}function $S(e){const{map:n,mapLib:r}=(0,t.useContext)(XS),i=(0,t.useRef)({props:e});i.current.props=e;const o=(0,t.useMemo)((()=>{let n=!1;t.Children.forEach(e.children,(t=>{t&&(n=!0)}));const s={...e,element:n?document.createElement("div"):null},a=new r.Marker(s).setLngLat([e.longitude,e.latitude]);return a.getElement().addEventListener("click",(t=>{var e,n;null===(n=(e=i.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:a,originalEvent:t})})),a.on("dragstart",(t=>{var e,n;const r=t;r.lngLat=o.getLngLat(),null===(n=(e=i.current.props).onDragStart)||void 0===n||n.call(e,r)})),a.on("drag",(t=>{var e,n;const r=t;r.lngLat=o.getLngLat(),null===(n=(e=i.current.props).onDrag)||void 0===n||n.call(e,r)})),a.on("dragend",(t=>{var e,n;const r=t;r.lngLat=o.getLngLat(),null===(n=(e=i.current.props).onDragEnd)||void 0===n||n.call(e,r)})),a}),[]);return(0,t.useEffect)((()=>(o.addTo(n.getMap()),()=>{o.remove()})),[]),(0,t.useEffect)((()=>{JS(o.getElement(),e.style)}),[e.style]),o.getLngLat().lng===e.longitude&&o.getLngLat().lat===e.latitude||o.setLngLat([e.longitude,e.latitude]),e.offset&&!function(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}(o.getOffset(),e.offset)&&o.setOffset(e.offset),o.isDraggable()!==e.draggable&&o.setDraggable(e.draggable),o.getRotation()!==e.rotation&&o.setRotation(e.rotation),o.getRotationAlignment()!==e.rotationAlignment&&o.setRotationAlignment(e.rotationAlignment),o.getPitchAlignment()!==e.pitchAlignment&&o.setPitchAlignment(e.pitchAlignment),o.getPopup()!==e.popup&&o.setPopup(e.popup),(0,D.createPortal)(e.children,o.getElement())}$S.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};t.memo($S);function tA(t){return new Set(t?t.trim().split(/\s+/):[])}t.memo((function(e){const{map:n,mapLib:r}=(0,t.useContext)(XS),i=(0,t.useMemo)((()=>document.createElement("div")),[]),o=(0,t.useRef)({props:e});o.current.props=e;const s=(0,t.useMemo)((()=>{const t={...e},n=new r.Popup(t).setLngLat([e.longitude,e.latitude]);return n.once("open",(t=>{var e,n;null===(n=(e=o.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,t.useEffect)((()=>{const t=t=>{var e,n;null===(n=(e=o.current.props).onClose)||void 0===n||n.call(e,t)};return s.on("close",t),s.setDOMContent(i).addTo(n.getMap()),()=>{s.off("close",t),s.isOpen()&&s.remove()}}),[]),(0,t.useEffect)((()=>{JS(s.getElement(),e.style)}),[e.style]),s.isOpen()&&(s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!IS(s.options.offset,e.offset)&&s.setOffset(e.offset),s.options.anchor===e.anchor&&s.options.maxWidth===e.maxWidth||(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth)),s.options.className!==e.className)){const t=tA(s.options.className),n=tA(e.className);for(const e of t)n.has(e)||s.removeClassName(e);for(const e of n)t.has(e)||s.addClassName(e);s.options.className=e.className}return(0,D.createPortal)(e.children,i)}));function eA(e,n,r){const i=(0,t.useContext)(XS),o=(0,t.useMemo)((()=>e(i)),[]);return(0,t.useEffect)((()=>{var t;const{map:e}=i;return e.hasControl(o)||e.addControl(o,null===(t=r||n)||void 0===t?void 0:t.position),()=>{"function"===typeof n&&n(i),e.hasControl(o)&&e.removeControl(o)}}),[]),o}t.memo((function(e){const n=eA((t=>{let{mapLib:n}=t;return new n.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{JS(n._container,e.style)}),[e.style]),null}));t.memo((function(e){const n=eA((t=>{let{mapLib:n}=t;return new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((()=>{JS(n._controlContainer,e.style)}),[e.style]),null}));const nA=(0,t.forwardRef)(((e,n)=>{const r=(0,t.useRef)({props:e}),i=eA((t=>{let{mapLib:n}=t;const i=new n.GeolocateControl(e),o=i._setupUI;return i._setupUI=t=>{i._container.hasChildNodes()||o(t)},i.on("geolocate",(t=>{var e,n;null===(n=(e=r.current.props).onGeolocate)||void 0===n||n.call(e,t)})),i.on("error",(t=>{var e,n;null===(n=(e=r.current.props).onError)||void 0===n||n.call(e,t)})),i.on("outofmaxbounds",(t=>{var e,n;null===(n=(e=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(e,t)})),i.on("trackuserlocationstart",(t=>{var e,n;null===(n=(e=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(e,t)})),i.on("trackuserlocationend",(t=>{var e,n;null===(n=(e=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(e,t)})),i}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(()=>({trigger:()=>i.trigger()})),[]),(0,t.useEffect)((()=>{JS(i._container,e.style)}),[e.style]),null}));nA.displayName="GeolocateControl";t.memo(nA);t.memo((function(e){const n=eA((t=>{let{mapLib:n}=t;return new n.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((()=>{JS(n._container,e.style)}),[e.style]),null}));function rA(e){const n=eA((t=>{let{mapLib:n}=t;return new n.ScaleControl(e)}),{position:e.position});return n.options.unit===e.unit&&n.options.maxWidth===e.maxWidth||(n.options.maxWidth=e.maxWidth,n.setUnit(e.unit)),(0,t.useEffect)((()=>{JS(n._container,e.style)}),[e.style]),null}rA.defaultProps={unit:"metric",maxWidth:100};t.memo(rA);const iA={name:"project32",dependencies:[ju],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},oA={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const sA={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oA;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},aA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...sA},lA={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class cA{static get DRAW_MODE(){return lA}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=jl("geometry"),drawMode:n=lA.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const n in t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,Dl(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?(Dl(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const r in t){const e=t[r],{value:i,size:o,constant:s}=e;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return Dl(Number.isFinite(n)),n}}const uA=[0,0,0,255],hA={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:uA},getLineColor:{type:"accessor",value:uA},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class dA extends xS{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  \n  // Multiply out line width and clamp to limits\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n\n  // Expand geometry to accomodate edge smoothing\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[iA,aA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:Ni[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Ni[u],lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:f}).draw()}_getModel(t){return new Rw(t,{...this.getShaders(),id:this.props.id,geometry:new cA({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}li(dA,"defaultProps",hA),li(dA,"layerName","ScatterplotLayer");const fA="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",pA={lightSources:{}};function gA(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}function mA(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?gA(e):[0,0,0],n.forEach(((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=gA(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=gA(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),i.lighting_uDirectionalLightCount=r.length,i}const vA={name:"lights",vs:fA,fs:fA,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pA;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},mA({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},yA="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",_A={};function bA(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((t=>t/255))}}function xA(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_A;if(!("material"in t))return{};const{material:e}=t;return e?bA(e):{lighting_uEnabled:!1}}const wA={name:"gouraud-lighting",dependencies:[vA],vs:yA,defines:{LIGHTING_VERTEX:1},getUniforms:xA},SA={name:"phong-lighting",dependencies:[vA],fs:yA,defines:{LIGHTING_FRAGMENT:1},getUniforms:xA};let AA;function EA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(CA(t,e))}function CA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}function kA(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const e=n+a*i,r=n+(o-1-a)*i;for(let n=0;n<i;++n){const i=t[e+n];t[e+n]=t[r+n],t[r+n]=i}}}!function(t){t[t.CLOCKWISE=1]="CLOCKWISE",t[t.COUNTER_CLOCKWISE=-1]="COUNTER_CLOCKWISE"}(AA||(AA={}));class TA extends cA{constructor(t){const{id:e=jl("column-geometry")}=t,{indices:n,attributes:r}=function(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&(Di.assert(i.length>=r),i=i.flatMap((t=>[t[0],t[1]])),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};EA(t,n)!==e&&kA(t,n)}(i,AA.COUNTER_CLOCKWISE));const o=n>0,s=r+1,a=o?3*s+1:r,l=2*Math.PI/r,c=new Uint16Array(o?3*r*2:0),u=new Float32Array(3*a),h=new Float32Array(3*a);let d=0;if(o){for(let t=0;t<s;t++){const o=t*l,s=t%r,a=Math.sin(o),c=Math.cos(o);for(let t=0;t<2;t++)u[d+0]=i?i[2*s]:c*e,u[d+1]=i?i[2*s+1]:a*e,u[d+2]=(.5-t)*n,h[d+0]=i?i[2*s]:c,h[d+1]=i?i[2*s+1]:a,d+=3}u[d+0]=u[d-3],u[d+1]=u[d-2],u[d+2]=u[d-1],d+=3}for(let f=o?0:1;f<s;f++){const t=Math.floor(f/2)*Math.sign(.5-f%2),o=t*l,s=(t+r)%r,a=Math.sin(o),c=Math.cos(o);u[d+0]=i?i[2*s]:c*e,u[d+1]=i?i[2*s+1]:a*e,u[d+2]=n/2,h[d+2]=1,d+=3}if(o){let t=0;for(let e=0;e<r;e++)c[t++]=2*e+0,c[t++]=2*e+2,c[t++]=2*e+0,c[t++]=2*e+1,c[t++]=2*e+1,c[t++]=2*e+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:h}}}}(t);super({...t,id:e,indices:n,attributes:r})}}const MA=[0,0,0,255],PA={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:MA},getLineColor:{type:"accessor",value:MA},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class LA extends xS{getShaders(){const{gl:t}=this.context,e=!Ma(t),n={},r=this.props.flatShading&&Ic(t,Rc);return r&&(n.FLAT_SHADING=1),super.getShaders({vs:"#version 300 es\n\n#define SHADER_NAME column-layer-vertex-shader\n\nin vec3 positions;\nin vec3 normals;\n\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\n\nin vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\n\n// Result\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -1.0 to 1.0, transform it to between 0, 1\n  float elevation = 0.0;\n  // calculate stroke offset\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (stroked) {\n    float widthPixels = clamp(\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n    if (isStroke) {\n      strokeOffsetRatio -= sign(positions.z) * halfOffset;\n    } else {\n      strokeOffsetRatio -= halfOffset;\n    }\n  }\n\n  // if alpha == 0.0 or z < 0.0, do not render element\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n\n  geometry.pickingColor = instancePickingColors;\n\n  // project center of column\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec3 centroidPosition64Low = instancePositions64Low;\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\n  if (radiusUnits == UNIT_METERS) {\n    offset = project_size(offset);\n  }\n  vec3 pos = vec3(offset, 0.);\n  DECKGL_FILTER_SIZE(pos, geometry);\n\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Light calculations\n  if (extruded && !isStroke) {\n#ifdef FLAT_SHADING\n    position_commonspace = geometry.position;\n    vColor = vec4(color.rgb, color.a * opacity);\n#else\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n    vColor = vec4(lightColor, color.a * opacity);\n#endif\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\n\nout vec4 fragColor;\n\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\n\nvoid main(void) {\n  fragColor = vColor;\n#ifdef FLAT_SHADING\n  if (extruded && !isStroke && !picking_uActive) {\n    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n  }\n#endif\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:n,transpileToGLSL100:e,modules:[iA,r?SA:wA,aA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:MA},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:MA},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=r.extensionsChanged||e.flatShading!==n.flatShading;if(i){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}(i||e.diskResolution!==n.diskResolution||e.vertices!==n.vertices||(e.extruded||e.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(e)}getGeometry(t,e,n){const r=new TA({radius:1,height:n?2:0,vertices:e,nradial:t});let i=0;if(e)for(let o=0;o<t;o++){const n=e[o];i+=Math.sqrt(n[0]*n[0]+n[1]*n[1])/t}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/t)*i}),r}_getModel(t){return new Rw(t,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry(t){let{diskResolution:e,vertices:n,extruded:r,stroked:i}=t;const o=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3,wireframeVertexCount:o.indices.value.length}),this.state.model.setProps({geometry:o})}draw(t){let{uniforms:e}=t;const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:a,extruded:l,filled:c,stroked:u,wireframe:h,offset:d,coverage:f,radius:p,angle:g}=this.props,{model:m,fillVertexCount:v,wireframeVertexCount:y,edgeDistance:_}=this.state;m.setUniforms(e).setUniforms({radius:p,angle:g/180*Math.PI,offset:d,extruded:l,stroked:u,coverage:f,elevationScale:a,edgeDistance:_,radiusUnits:Ni[s],widthUnits:Ni[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o}),l&&h&&(m.setProps({isIndexed:!0}),m.setVertexCount(y).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(m.setProps({isIndexed:!1}),m.setVertexCount(v).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!l&&u&&(m.setProps({isIndexed:!1}),m.setVertexCount(2*v/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}li(LA,"layerName","ColumnLayer"),li(LA,"defaultProps",PA);const OA=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];var RA=Math.PI/3,DA=[0,RA,2*RA,3*RA,4*RA,5*RA];function IA(t){return t[0]}function FA(t){return t[1]}function NA(t,e,n){const r=n;return r.domain=()=>t,r.range=()=>e,r}function jA(t,e){return NA(t,e,(n=>function(t,e,n){const r=t[1]-t[0];if(r<=0)return Di.warn("quantizeScale: invalid domain, returning range[0]")(),e[0];const i=r/e.length,o=Math.floor((n-t[0])/i),s=Math.max(Math.min(o,e.length-1),0);return e[s]}(t,e,n)))}function zA(t,e){return NA(t,e,(n=>function(t,e,n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]}(t,e,n)))}function BA(t,e){const n=t.sort(UA);let r=0;const i=Math.max(1,e.length),o=new Array(i-1);for(;++r<i;)o[r-1]=VA(n,r/i);const s=t=>function(t,e,n){return e[function(t,e){let n=0,r=t.length;for(;n<r;){const i=n+r>>>1;UA(t[i],e)>0?r=i:n=i+1}return n}(t,n)]}(o,e,t);return s.thresholds=()=>o,NA(t,e,s)}function UA(t,e){return t-e}function VA(t,e){const n=t.length;if(e<=0||n<2)return t[0];if(e>=1)return t[n-1];const r=(n-1)*e,i=Math.floor(r),o=t[i];return o+(t[i+1]-o)*(r-i)}function HA(t,e){const n=new Map,r=[];for(const i of t){const t="".concat(i);n.has(t)||n.set(t,r.push(i))}return NA(t,e,(t=>function(t,e,n,r){const i="".concat(r);let o=e.get(i);return void 0===o&&(o=t.push(r),e.set(i,o)),n[(o-1)%n.length]}(r,n,e,t)))}function WA(t){return void 0!==t&&null!==t}function GA(t,e){return("function"===typeof e?t.map(e):t).filter(WA)}function YA(t,e){return GA(t,e)}function XA(t,e){return function(t){const e=[];return t.forEach((t=>{!e.includes(t)&&WA(t)&&e.push(t)})),e}(GA(t,e))}const qA=t=>t.length,ZA=t=>t.points,KA=t=>t.index,QA=(t,e)=>t<e?-1:t>e?1:t>=e?0:NaN,JA={getValue:qA,getPoints:ZA,getIndex:KA,filterData:null};class $A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JA;li(this,"maxCount",void 0),li(this,"maxValue",void 0),li(this,"minValue",void 0),li(this,"totalCount",void 0),li(this,"aggregatedBins",void 0),li(this,"sortedBins",void 0),li(this,"binMap",void 0),this.aggregatedBins=this.getAggregatedBins(t,e),this._updateMinMaxValues(),this.binMap=this.getBinMap()}getAggregatedBins(t,e){const{getValue:n=qA,getPoints:r=ZA,getIndex:i=KA,filterData:o}=e,s="function"===typeof o,a=t.length,l=[];let c=0;for(let u=0;u<a;u++){const e=t[u],a=r(e),h=i(e),d=s?a.filter(o):a;e.filteredPoints=s?d:null;const f=d.length?n(d):null;null!==f&&void 0!==f&&(l[c]={i:Number.isFinite(h)?h:u,value:f,counts:d.length},c++)}return l}_percentileToIndex(t){const e=this.sortedBins.length;if(e<2)return[0,0];const[n,r]=t.map((t=>function(t,e,n){return Math.max(e,Math.min(n,t))}(t,0,100)));return[Math.ceil(n/100*(e-1)),Math.floor(r/100*(e-1))]}getBinMap(){const t={};for(const e of this.aggregatedBins)t[e.i]=e;return t}_updateMinMaxValues(){let t=0,e=0,n=3402823466e29,r=0;for(const i of this.aggregatedBins)t=t>i.counts?t:i.counts,e=e>i.value?e:i.value,n=n<i.value?n:i.value,r+=i.counts;this.maxCount=t,this.maxValue=e,this.minValue=n,this.totalCount=r}getValueRange(t){if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((t,e)=>QA(t.value,e.value)))),!this.sortedBins.length)return[];let e=0,n=this.sortedBins.length-1;if(Array.isArray(t)){const r=this._percentileToIndex(t);e=r[0],n=r[1]}return[this.sortedBins[e].value,this.sortedBins[n].value]}getValueDomainByScale(t){let[e=0,n=100]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(((t,e)=>QA(t.value,e.value)))),!this.sortedBins.length)return[];const r=this._percentileToIndex([e,n]);return this._getScaleDomain(t,r)}_getScaleDomain(t,e){let[n,r]=e;const i=this.sortedBins;switch(t){case"quantize":case"linear":default:return[i[n].value,i[r].value];case"quantile":return YA(i.slice(n,r+1),(t=>t.value));case"ordinal":return XA(i,(t=>t.value))}}}const tE={SUM:1,MEAN:2,MIN:3,MAX:4};function eE(t,e){return t+e}function nE(t,e){return e>t?e:t}function rE(t,e){return e<t?e:t}function iE(t,e,n){const r=tE[t]||tE.SUM;switch(e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Number.isFinite(t))return t;return n=>(e.index=n.index,t(n.source,e))}(e,n),r){case tE.MIN:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(rE,1/0):null}(t,e);case tE.SUM:return t=>function(t,e){if(Number.isFinite(e))return t.length?t.length*e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(eE,0):null}(t,e);case tE.MEAN:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(eE,0)/n.length:null}(t,e);case tE.MAX:return t=>function(t,e){if(Number.isFinite(e))return t.length?e:null;const n=t.map(e).filter(Number.isFinite);return n.length?n.reduce(nE,-1/0):null}(t,e);default:return null}}function oE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>(e.indices=n.map((t=>t.index)),t(n.map((t=>t.source)),e))}function sE(){}const aE=["getBins","getDomain","getScaleFunc"],lE=[{key:"fillColor",accessor:"getFillColor",pickingInfo:"colorValue",getBins:{triggers:{value:{prop:"getColorValue",updateTrigger:"getColorValue"},weight:{prop:"getColorWeight",updateTrigger:"getColorWeight"},aggregation:{prop:"colorAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"lowerPercentile"},upperPercentile:{prop:"upperPercentile"},scaleType:{prop:"colorScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"colorDomain"},range:{prop:"colorRange"}},onSet:{props:"onSetColorDomain"}},nullValue:[0,0,0,0]},{key:"elevation",accessor:"getElevation",pickingInfo:"elevationValue",getBins:{triggers:{value:{prop:"getElevationValue",updateTrigger:"getElevationValue"},weight:{prop:"getElevationWeight",updateTrigger:"getElevationWeight"},aggregation:{prop:"elevationAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"elevationLowerPercentile"},upperPercentile:{prop:"elevationUpperPercentile"},scaleType:{prop:"elevationScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"elevationDomain"},range:{prop:"elevationRange"}},onSet:{props:"onSetElevationDomain"}},nullValue:-1}],cE=t=>t.cellSize;class uE{constructor(t){this.state={layerData:{},dimensions:{}},this.changeFlags={},this.dimensionUpdaters={},this._getCellSize=t.getCellSize||cE,this._getAggregator=t.getAggregator,this._addDimension(t.dimensions||lE)}static defaultDimensions(){return lE}updateState(t,e){const{oldProps:n,props:r,changeFlags:i}=t;this.updateGetValueFuncs(n,r,i);const o=this.needsReProjectPoints(n,r,i);let s=!1;if(i.dataChanged||o)this.getAggregatedData(r,e),s=!0;else{(this.getDimensionChanges(n,r,i)||[]).forEach((t=>"function"===typeof t&&t())),s=!0}return this.setState({aggregationDirty:s}),this.state}setState(t){this.state={...this.state,...t}}setDimensionState(t,e){this.setState({dimensions:{...this.state.dimensions,[t]:{...this.state.dimensions[t],...e}}})}normalizeResult(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.hexagons?{data:t.hexagons,...t}:t.layerData?{data:t.layerData,...t}:t}getAggregatedData(t,e){const n=this._getAggregator(t)(t,e);this.setState({layerData:this.normalizeResult(n)}),this.changeFlags={layerData:!0},this.getSortedBins(t)}updateGetValueFuncs(t,e,n){for(const r in this.dimensionUpdaters){const{value:i,weight:o,aggregation:s}=this.dimensionUpdaters[r].getBins.triggers;let a=e[i.prop];this.needUpdateDimensionStep(this.dimensionUpdaters[r].getBins,t,e,n)&&(a=a?oE(a,{data:e.data}):iE(e[s.prop],e[o.prop],{data:e.data})),a&&this.setDimensionState(r,{getValue:a})}}needsReProjectPoints(t,e,n){return this._getCellSize(t)!==this._getCellSize(e)||this._getAggregator(t)!==this._getAggregator(e)||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPosition)}addDimension(t){this._addDimension(t)}_addDimension(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{const{key:e}=t;this.dimensionUpdaters[e]=this.getDimensionUpdaters(t),this.state.dimensions[e]={getValue:null,domain:null,sortedBins:null,scaleFunc:sE}}))}getDimensionUpdaters(t){let{key:e,accessor:n,pickingInfo:r,getBins:i,getDomain:o,getScaleFunc:s,nullValue:a}=t;return{key:e,accessor:n,pickingInfo:r,getBins:{updater:this.getDimensionSortedBins,...i},getDomain:{updater:this.getDimensionValueDomain,...o},getScaleFunc:{updater:this.getDimensionScale,...s},attributeAccessor:this.getSubLayerDimensionAttribute(e,a)}}needUpdateDimensionStep(t,e,n,r){return Object.values(t.triggers).some((t=>t.updateTrigger?r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged[t.updateTrigger]):e[t.prop]!==n[t.prop]))}getDimensionChanges(t,e,n){const r=[];for(const i in this.dimensionUpdaters){const o=aE.find((r=>this.needUpdateDimensionStep(this.dimensionUpdaters[i][r],t,e,n)));o&&r.push(this.dimensionUpdaters[i][o].updater.bind(this,e,this.dimensionUpdaters[i]))}return r.length?r:null}getUpdateTriggers(t){const e=t.updateTriggers||{},n={};for(const r in this.dimensionUpdaters){const{accessor:i}=this.dimensionUpdaters[r];n[i]={},aE.forEach((o=>{Object.values(this.dimensionUpdaters[r][o].triggers).forEach((r=>{let{prop:o,updateTrigger:s}=r;if(s){const t=e[s];"object"!==typeof t||Array.isArray(t)?void 0!==t&&(n[i][o]=t):Object.assign(n[i],t)}else n[i][o]=t[o]}))}))}return n}getSortedBins(t){for(const e in this.dimensionUpdaters)this.getDimensionSortedBins(t,this.dimensionUpdaters[e])}getDimensionSortedBins(t,e){const{key:n}=e,{getValue:r}=this.state.dimensions[n],i=new $A(this.state.layerData.data||[],{getValue:r,filterData:t._filterData});this.setDimensionState(n,{sortedBins:i}),this.getDimensionValueDomain(t,e)}getDimensionValueDomain(t,e){const{getDomain:n,key:r}=e,{triggers:{lowerPercentile:i,upperPercentile:o,scaleType:s}}=n,a=this.state.dimensions[r].sortedBins.getValueDomainByScale(t[s.prop],[t[i.prop],t[o.prop]]);this.setDimensionState(r,{valueDomain:a}),this.getDimensionScale(t,e)}getDimensionScale(t,e){const{key:n,getScaleFunc:r,getDomain:i}=e,{domain:o,range:s}=r.triggers,{scaleType:a}=i.triggers,{onSet:l}=r,c=t[s.prop],u=t[o.prop]||this.state.dimensions[n].valueDomain,h=function(t){switch(t){case"quantize":default:return jA;case"linear":return zA;case"quantile":return BA;case"ordinal":return HA}}(a&&t[a.prop]),d=h(u,c);"object"===typeof l&&"function"===typeof t[l.props]&&t[l.props](d.domain()),this.setDimensionState(n,{scaleFunc:d})}getSubLayerDimensionAttribute(t,e){return n=>{const{sortedBins:r,scaleFunc:i}=this.state.dimensions[t],o=r.binMap[n.index];if(o&&0===o.counts)return e;const s=o&&o.value,a=i.domain();return s>=a[0]&&s<=a[a.length-1]?i(s):e}}getSubLayerAccessors(t){const e={};for(const n in this.dimensionUpdaters){const{accessor:r}=this.dimensionUpdaters[n];e[r]=this.getSubLayerDimensionAttribute(t,n)}return e}getPickingInfo(t){let{info:e}=t;let n=null;if(e.picked&&e.index>-1){const t=this.state.layerData.data[e.index],r={};for(const e in this.dimensionUpdaters){const{pickingInfo:n}=this.dimensionUpdaters[e],{sortedBins:i}=this.state.dimensions[e],o=i.binMap[t.index]&&i.binMap[t.index].value;r[n]=o}n=Object.assign(r,t,{points:t.filteredPoints||t.points})}return e.picked=Boolean(n),e.object=n,e}getAccessor(t){return this.dimensionUpdaters.hasOwnProperty(t)?this.dimensionUpdaters[t].attributeAccessor:sE}}class hE extends xS{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"===typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:y}=this.props,_={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},b=y&&t.id&&y[t.id],x=b&&b.updateTriggers,w=t.id||"sublayer";if(b){const e=this.constructor._propTypes,n=t.type?t.type._propTypes:{};for(const t in b){const r=n[t]||e[t];r&&"accessor"===r.type&&(b[t]=this.getSubLayerAccessor(b[t]))}}Object.assign(_,t,b),_.id="".concat(this.props.id,"-").concat(w),_.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...x};for(const S of g){const t=S.getSubLayerProps.call(this,S);t&&Object.assign(_,t,{updateTriggers:Object.assign(_.updateTriggers,t.updateTriggers)})}return _}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=Lv(this.renderLayers(),Boolean),this.internalState.subLayers=n}Pv("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}function dE(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}li(hE,"layerName","CompositeLayer");class fE extends hE{constructor(){super(...arguments),li(this,"state",void 0)}initializeAggregationLayer(t){super.initializeState(this.context),this.setState({ignoreProps:dE(this.constructor._propTypes,t.data.props),dimensions:t})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){const t=this.getShaders({});t&&t.defines&&(t.defines.NON_INSTANCED_MODEL=1),this.updateShaders(t)}this._updateAttributes()}updateAttributes(t){this.setState({changedAttributes:t})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:t,mousePosition:e,gl:n}=this.context;return Object.assign(Object.create(this.props),{viewport:t,mousePosition:e,pickingActive:0,devicePixelRatio:fl(n)})}updateShaders(t){}isAggregationDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{props:n,oldProps:r,changeFlags:i}=t,{compareAll:o=!1,dimension:s}=e,{ignoreProps:a}=this.state,{props:l,accessors:c=[]}=s,{updateTriggersChanged:u}=i;if(i.dataChanged)return!0;if(u){if(u.all)return!0;for(const t of c)if(u[t])return!0}if(o)return!!i.extensionsChanged||Xw({oldProps:r,newProps:n,ignoreProps:a,propTypes:this.constructor._propTypes});for(const h of l)if(n[h]!==r[h])return!0;return!1}isAttributeChanged(t){const{changedAttributes:e}=this.state;return t?e&&void 0!==e[t]:!function(t){let e=!0;for(const n in t){e=!1;break}return e}(e)}_getAttributeManager(){return new zw(this.context.gl,{id:this.props.id,stats:this.context.stats})}}function pE(){}li(fE,"layerName","AggregationLayer");const gE={colorDomain:null,colorRange:OA,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},colorScaleType:"quantize",onSetColorDomain:pE,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:pE,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(t,e){const{data:n,radius:r}=t,{viewport:i,attributes:o}=e,s=n.length?function(t,e){const{attributes:n}=e,r=n.positions.value,{size:i}=n.positions.getAccessor();let o,s=1/0,a=1/0,l=-1/0,c=-1/0;for(o=0;o<i*t.length;o+=i){const t=r[o],e=r[o+1];Number.isFinite(t)&&Number.isFinite(e)&&(s=Math.min(t,s),l=Math.max(t,l),a=Math.min(e,a),c=Math.max(e,c))}return[s,a,l,c].every(Number.isFinite)?[(s+l)/2,(a+c)/2]:null}(n,e):null,a=function(t,e,n){const{unitsPerMeter:r}=e.getDistanceScales(n);return t*r[0]}(r,i,s),l=[],{iterable:c,objectInfo:u}=Bx(n),h=o.positions.value,{size:d}=o.positions.getAccessor();for(const p of c){u.index++;const t=u.index*d,e=[h[t],h[t+1]];Number.isFinite(e[0])&&Number.isFinite(e[1])?l.push({screenCoord:i.projectFlat(e),source:p,index:u.index}):Di.warn("HexagonLayer: invalid position")()}const f=function(){var t,e,n,r=0,i=0,o=1,s=1,a=IA,l=FA;function c(t){var r,i={},o=[],s=t.length;for(r=0;r<s;++r)if(!isNaN(u=+a.call(null,c=t[r],r,t))&&!isNaN(h=+l.call(null,c,r,t))){var c,u,h,d=Math.round(h/=n),f=Math.round(u=u/e-(1&d)/2),p=h-d;if(3*Math.abs(p)>1){var g=u-f,m=f+(u<f?-1:1)/2,v=d+(h<d?-1:1),y=u-m,_=h-v;g*g+p*p>y*y+_*_&&(f=m+(1&d?1:-1)/2,d=v)}var b=f+"-"+d,x=i[b];x?x.push(c):(o.push(x=i[b]=[c]),x.x=(f+(1&d)/2)*e,x.y=d*n)}return o}function u(t){var e=0,n=0;return DA.map((function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,s=i-e,a=o-n;return e=i,n=o,[s,a]}))}return c.hexagon=function(e){return"m"+u(null==e?t:+e).join("l")+"z"},c.centers=function(){for(var a=[],l=Math.round(i/n),c=Math.round(r/e),u=l*n;u<s+t;u+=n,++l)for(var h=c*e+(1&l)*e/2;h<o+e/2;h+=e)a.push([h,u]);return a},c.mesh=function(){var e=u(t).slice(0,4).join("l");return c.centers().map((function(t){return"M"+t+"m"+e})).join("")},c.x=function(t){return arguments.length?(a=t,c):a},c.y=function(t){return arguments.length?(l=t,c):l},c.radius=function(r){return arguments.length?(e=2*(t=+r)*Math.sin(RA),n=1.5*t,c):t},c.size=function(t){return arguments.length?(r=i=0,o=+t[0],s=+t[1],c):[o-r,s-i]},c.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],s=+t[1][1],c):[[r,i],[o,s]]},c.radius(1)}().radius(a).x((t=>t.screenCoord[0])).y((t=>t.screenCoord[1]));return{hexagons:f(l).map(((t,e)=>({position:i.unprojectFlat([t.x,t.y]),points:t,index:e}))),radiusCommon:a}},getPosition:{type:"accessor",value:t=>t.position},material:!0,_filterData:{type:"function",value:null,optional:!0}};class mE extends fE{constructor(){super(...arguments),li(this,"state",void 0)}initializeState(){const t=new uE({getAggregator:t=>t.hexagonAggregator,getCellSize:t=>t.radius});this.state={cpuAggregator:t,aggregatorState:t.state,vertices:null};this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"}})}updateState(t){if(super.updateState(t),t.changeFlags.propsOrDataChanged){const e=this.state.cpuAggregator.updateState(t,{viewport:this.context.viewport,attributes:this.getAttributes()});if(this.state.aggregatorState.layerData!==e.layerData){const{hexagonVertices:t}=e.layerData||{};this.setState({vertices:t&&this.convertLatLngToMeterOffset(t)})}this.setState({aggregatorState:e})}}convertLatLngToMeterOffset(t){const{viewport:e}=this.context;if(Array.isArray(t)&&6===t.length){const n=t[0],r=t[3],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],o=e.projectFlat(i),{metersPerUnit:s}=e.getDistanceScales(i);return t.map((t=>{const n=e.projectFlat(t);return[(n[0]-o[0])*s[0],(n[1]-o[1])*s[1]]}))}return Di.error("HexagonLayer: hexagonVertices needs to be an array of 6 points")(),null}getPickingInfo(t){let{info:e}=t;return this.state.cpuAggregator.getPickingInfo({info:e})}_onGetSublayerColor(t){return this.state.cpuAggregator.getAccessor("fillColor")(t)}_onGetSublayerElevation(t){return this.state.cpuAggregator.getAccessor("elevation")(t)}_getSublayerUpdateTriggers(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}renderLayers(){const{elevationScale:t,extruded:e,coverage:n,material:r,transitions:i}=this.props,{aggregatorState:o,vertices:s}=this.state,a=this.getSubLayerClass("hexagon-cell",LA),l=this._getSublayerUpdateTriggers();return new a({...s?{vertices:s,radius:1}:{radius:o.layerData.radiusCommon||1,radiusUnits:"common",angle:90},diskResolution:6,elevationScale:t,extruded:e,coverage:n,material:r,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:i&&{getFillColor:i.getColorValue||i.getColorWeight,getElevation:i.getElevationValue||i.getElevationWeight}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:l}),{data:o.layerData.data})}}li(mE,"layerName","HexagonLayer"),li(mE,"defaultProps",gE);const vE=new Float32Array(12);function yE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0;for(const r of t)for(let t=0;t<e;t++)vE[n++]=r[t]||0;return vE}class _E extends xS{getShaders(){return{vs:"#define SHADER_NAME heatp-map-layer-vertex-shader\n\nuniform sampler2D maxTexture;\nuniform float intensity;\nuniform vec2 colorDomain;\nuniform float threshold;\nuniform float aggregationMode;\n\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvoid main(void) {\n  gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\n  vTexCoords = texCoords;\n  vec4 maxTexture = texture2D(maxTexture, vec2(0.5));\n  float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\n  float minValue = maxValue * threshold;\n  if (colorDomain[1] > 0.) {\n    // if user specified custom domain use it.\n    maxValue = colorDomain[1];\n    minValue = colorDomain[0];\n  }\n  vIntensityMax = intensity / maxValue;\n  vIntensityMin = intensity / minValue;\n}\n",fs:"#define SHADER_NAME triangle-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D texture;\nuniform sampler2D colorTexture;\nuniform float aggregationMode;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvec4 getLinearColor(float value) {\n  float factor = clamp(value * vIntensityMax, 0., 1.);\n  vec4 color = texture2D(colorTexture, vec2(factor, 0.5));\n  color.a *= min(value * vIntensityMin, 1.0);\n  return color;\n}\n\nvoid main(void) {\n  vec4 weights = texture2D(texture, vTexCoords);\n  float weight = weights.r;\n\n  if (aggregationMode > 0.5) {\n    weight /= max(1.0, weights.a);\n  }\n\n  // discard pixels with 0 weight.\n  if (weight <= 0.) {\n     discard;\n  }\n\n  vec4 linearColor = getLinearColor(weight);\n  linearColor.a *= opacity;\n  gl_FragColor =linearColor;\n}\n",modules:[iA]}}initializeState(t){let{gl:e}=t;this.getAttributeManager().add({positions:{size:3,noAlloc:!0},texCoords:{size:2,noAlloc:!0}}),this.setState({model:this._getModel(e)})}_getModel(t){const{vertexCount:e}=this.props;return new Rw(t,{...this.getShaders(),id:this.props.id,geometry:new cA({drawMode:6,vertexCount:e})})}draw(t){let{uniforms:e}=t;const{model:n}=this.state,{texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}=this.props;n.setUniforms({...e,texture:r,maxTexture:i,colorTexture:o,intensity:s,threshold:a,aggregationMode:l,colorDomain:c}).draw()}}li(_E,"layerName","TriangleLayer");const bE={mipmaps:!1,parameters:{10240:9729,10241:9729,10242:33071,10243:33071},dataFormat:6408},xE=[0,0],wE={SUM:0,MEAN:1},SE={getPosition:{type:"accessor",value:t=>t.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:OA,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},AE=[Mc,Lc],EE=[Oc,Pc],CE={data:{props:["radiusPixels"]}};class kE extends fE{constructor(){super(...arguments),li(this,"state",void 0)}initializeState(){const{gl:t}=this.context;if(!Fc(t,AE))return this.setState({supported:!1}),void Di.error("HeatmapLayer: ".concat(this.id," is not supported on this browser"))();super.initializeAggregationLayer(CE),this.setState({supported:!0,colorDomain:xE}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){this.state.supported&&(super.updateState(t),this._updateHeatmapState(t))}_updateHeatmapState(t){const{props:e,oldProps:n}=t,r=this._getChangeFlags(t);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),e.colorRange!==n.colorRange&&this._updateColorTexture(t),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:t.context.viewport.zoom})}renderLayers(){if(!this.state.supported)return[];const{weightsTexture:t,triPositionBuffer:e,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:i,colorDomain:o}=this.state,{updateTriggers:s,intensity:a,threshold:l,aggregation:c}=this.props;return new(this.getSubLayerClass("triangle",_E))(this.getSubLayerProps({id:"triangle-layer",updateTriggers:s}),{coordinateSystem:Ii.DEFAULT,data:{attributes:{positions:e,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:i,aggregationMode:wE[c]||0,texture:t,intensity:a,threshold:l,colorDomain:o})}finalizeState(t){super.finalizeState(t);const{weightsTransform:e,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:i,triPositionBuffer:o,triTexCoordBuffer:s,colorTexture:a,updateTimer:l}=this.state;null===e||void 0===e||e.delete(),null===n||void 0===n||n.delete(),null===r||void 0===r||r.delete(),null===i||void 0===i||i.delete(),null===o||void 0===o||o.delete(),null===s||void 0===s||s.delete(),null===a||void 0===a||a.delete(),l&&clearTimeout(l)}_getAttributeManager(){return new zw(this.context.gl,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(t){const e={},{dimensions:n}=this.state;e.dataChanged=this.isAttributeChanged()||this.isAggregationDirty(t,{compareAll:!0,dimension:n.data}),e.viewportChanged=t.changeFlags.viewportChanged;const{zoom:r}=this.state;return t.context.viewport&&t.context.viewport.zoom===r||(e.viewportZoomChanged=!0),e}_createTextures(){const{gl:t}=this.context,{textureSize:e,format:n,type:r}=this.state;this.setState({weightsTexture:new cc(t,{width:e,height:e,format:n,type:r,...bE}),maxWeightsTexture:new cc(t,{format:n,type:r,...bE})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{gl:t}=this.context,{weightsTextureSize:e}=this.props,n=Math.min(e,hl(t,3379)),r=Fc(t,EE),{format:i,type:o}=function(t){let{gl:e,floatTargetSupport:n}=t;return n?{format:Ma(e)?34836:6408,type:5126}:{format:6408,type:5121}}({gl:t,floatTargetSupport:r}),s=r?1:1/255;this.setState({textureSize:n,format:i,type:o,weightsScale:s}),r||Di.warn("HeatmapLayer: ".concat(this.id," rendering to float texture not supported, fallingback to low precession format"))()}getShaders(t){return super.getShaders("max-weights-transform"===t?{vs:"attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\noutTexture = inTexture;\ngl_Position = vec4(0, 0, 0, 1.);\n// Enforce default value for ANGLE issue (https://bugs.chromium.org/p/angleproject/issues/detail?id=3941)\ngl_PointSize = 1.0;\n}\n",_fs:"varying vec4 outTexture;\nvoid main() {\n  gl_FragColor = outTexture;\n  gl_FragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n"}:{vs:"attribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float weights;\nvarying vec4 weightsTexture;\nuniform float radiusPixels;\nuniform float textureWidth;\nuniform vec4 commonBounds;\nuniform float weightsScale;\nvoid main()\n{\n  weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);\n\n  float radiusTexels  = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);\n  gl_PointSize = radiusTexels * 2.;\n\n  vec3 commonPosition = project_position(positions, positions64Low);\n\n  // map xy from commonBounds to [-1, 1]\n  gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;\n  gl_Position.xy = (gl_Position.xy * 2.) - (1.);\n}\n",_fs:"varying vec4 weightsTexture;\n// Epanechnikov function, keeping for reference\n// float epanechnikovKDE(float u) {\n//   return 0.75 * (1.0 - u * u);\n// }\nfloat gaussianKDE(float u){\n  return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\n  float dist = length(gl_PointCoord - vec2(0.5, 0.5));\n  if (dist > 0.5) {\n    discard;\n  }\n  gl_FragColor = weightsTexture * gaussianKDE(2. * dist);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}_createWeightsTransform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{gl:n}=this.context;let{weightsTransform:r}=this.state;const{weightsTexture:i}=this.state;null===(e=r)||void 0===e||e.delete(),r=new Dw(n,{id:"".concat(this.id,"-weights-transform"),elementCount:1,_targetTexture:i,_targetTextureVarying:"weightsTexture",...t}),this.setState({weightsTransform:r})}_setupResources(){const{gl:t}=this.context;this._createTextures();const{textureSize:e,weightsTexture:n,maxWeightsTexture:r}=this.state,i=this.getShaders("weights-transform");this._createWeightsTransform(i);const o=this.getShaders("max-weights-transform"),s=new Dw(t,{id:"".concat(this.id,"-max-weights-transform"),_sourceTextures:{inTexture:n},_targetTexture:r,_targetTextureVarying:"outTexture",...o,elementCount:e*e});this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:s,zoom:null,triPositionBuffer:new ec(t,{byteLength:48,accessor:{size:3}}),triTexCoordBuffer:new ec(t,{byteLength:48,accessor:{size:2}})})}updateShaders(t){this._createWeightsTransform(t)}_updateMaxWeightValue(){const{maxWeightTransform:t}=this.state;t.run({parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32776}})}_updateBounds(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{viewport:e}=this.context,n=[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([e.width,e.height]),e.unproject([0,e.height])].map((t=>t.map(Math.fround))),r=function(t){const e=t.map((t=>t[0])),n=t.map((t=>t[1])),r=Math.min.apply(null,e),i=Math.max.apply(null,e);return[r,Math.min.apply(null,n),i,Math.max.apply(null,n)]}(n),i={visibleWorldBounds:r,viewportCorners:n};let o=!1;if(t||!this.state.worldBounds||(s=this.state.worldBounds,!((a=r)[0]>=s[0]&&a[2]<=s[2]&&a[1]>=s[1]&&a[3]<=s[3]))){const t=this._worldToCommonBounds(r),e=this._commonToWorldBounds(t);this.props.coordinateSystem===Ii.LNGLAT&&(e[1]=Math.max(e[1],-85.051129),e[3]=Math.min(e[3],85.051129),e[0]=Math.max(e[0],-360),e[2]=Math.min(e[2],360));const n=this._worldToCommonBounds(e);i.worldBounds=e,i.normalizedCommonBounds=n,o=!0}var s,a;return this.setState(i),o}_updateTextureRenderingBounds(){const{triPositionBuffer:t,triTexCoordBuffer:e,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:i}=this.context;t.subData(yE(r,3));const o=r.map((t=>function(t,e){const[n,r,i,o]=e;return[(t[0]-n)/(i-n),(t[1]-r)/(o-r)]}(i.projectPosition(t),n)));e.subData(yE(o,2))}_updateColorTexture(t){const{colorRange:e}=t.props;let{colorTexture:n}=this.state;const r=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(Number.isFinite(t[0]))e=new r(t);else{e=new r(4*t.length);let n=0;for(let r=0;r<t.length;r++){const i=t[r];e[n++]=i[0],e[n++]=i[1],e[n++]=i[2],e[n++]=Number.isFinite(i[3])?i[3]:255}}if(n)for(let i=0;i<e.length;i++)e[i]/=255;return e}(e,!1,Uint8Array);n?n.setImageData({data:r,width:e.length}):n=new cc(this.context.gl,{data:r,width:e.length,height:1,...bE}),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:t,colorDomain:e,aggregation:n}=this.props,{weightsTransform:r,worldBounds:i,textureSize:o,weightsTexture:s,weightsScale:a}=this.state;this.state.isWeightMapDirty=!1;const l=this._worldToCommonBounds(i,{useLayerCoordinateSystem:!0});if(e&&"SUM"===n){const{viewport:t}=this.context,n=t.distanceScales.metersPerUnit[2]*(l[2]-l[0])/o;this.state.colorDomain=e.map((t=>t*n*a))}else this.state.colorDomain=e||xE;const c={radiusPixels:t,commonBounds:l,textureWidth:o,weightsScale:a};r.update({elementCount:this.getNumInstances()}),dl(this.context.gl,{clearColor:[0,0,0,0]},(()=>{r.run({uniforms:c,parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32774},clearRenderTarget:!0,attributes:this.getAttributes(),moduleSettings:this.getModuleSettings()})})),this._updateMaxWeightValue(),s.setParameters({10240:9729,10241:9729})}_debouncedUpdateWeightmap(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{updateTimer:e}=this.state;const{debounceTimeout:n}=this.props;t?(e=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(e),e=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:e})}_worldToCommonBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{useLayerCoordinateSystem:n=!1}=e,[r,i,o,s]=t,{viewport:a}=this.context,{textureSize:l}=this.state,{coordinateSystem:c}=this.props,u=n&&(c===Ii.LNGLAT_OFFSETS||c===Ii.METER_OFFSETS),h=u?a.projectPosition(this.props.coordinateOrigin):[0,0],d=2*l/a.scale;let f,p;return n&&!u?(f=this.projectPosition([r,i,0]),p=this.projectPosition([o,s,0])):(f=a.projectPosition([r,i,0]),p=a.projectPosition([o,s,0])),function(t,e,n){const[r,i,o,s]=t,a=o-r,l=s-i;let c=a,u=l;a/l<e/n?c=e/n*l:u=n/e*a,c<e&&(c=e,u=n);const h=(o+r)/2,d=(s+i)/2;return[h-c/2,d-u/2,h+c/2,d+u/2]}([f[0]-h[0],f[1]-h[1],p[0]-h[0],p[1]-h[1]],d,d)}_commonToWorldBounds(t){const[e,n,r,i]=t,{viewport:o}=this.context,s=o.unprojectPosition([e,n]),a=o.unprojectPosition([r,i]);return s.slice(0,2).concat(a.slice(0,2))}}li(kE,"layerName","HeatmapLayer"),li(kE,"defaultProps",SE);n(434);const TE=e=>{const[n,r]=(0,t.useState)(null),{scatterLayer:i,hexLayer:o,heatLayer:s,hexWeightedLayer:a,filteredData:l,initialViewState:c}=$m(),u=[new dA({...i,data:l}),new mE({...o,data:l}),new kE({...s,data:l}),new mE({...a,data:l})],h=(0,t.useRef)(null),d=(0,t.useCallback)((t=>{const e=h.current.pickMultipleObjects({x:t.clientX,y:t.clientY,radius:5,layerIds:["hexmapWeighted","heatmap-layer","hexmap","scatterplot"],depth:1/0});e&&0!==e.length?r(e):r(null)}),[]);return console.log(n),(0,g.jsx)("div",{onClick:d,children:(0,g.jsx)(MS,{ref:h,layers:u,effects:[Ju],initialViewState:c,controller:!0,children:(0,g.jsx)(KS,{mapboxAccessToken:"pk.eyJ1IjoicGV0ZWhpbGxqbnIiLCJhIjoiY2swcjZtd3IxMDJjOTNjb3c1Z25wczQ3NyJ9.2Ut4kmGeVuvc7UUb-qezNw",mapStyle:"mapbox://styles/mapbox/dark-v9"})})})};const ME=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};const PE=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}};var LE=/[A-Z]|^ms/g,OE=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RE=function(t){return 45===t.charCodeAt(1)},DE=function(t){return null!=t&&"boolean"!==typeof t},IE=PE((function(t){return RE(t)?t:t.replace(LE,"-$&").toLowerCase()})),FE=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(OE,(function(t,e,n){return jE={name:e,styles:n,next:jE},e}))}return 1===De[t]||RE(t)||"number"!==typeof e||0===e?e:e+"px"};function NE(t,e,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return jE={name:n.name,styles:n.styles,next:jE},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)jE={name:i.name,styles:i.styles,next:jE},i=i.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=NE(t,e,n[i],!1);else for(var o in n){var s=n[o];if("object"!==typeof s)null!=e&&void 0!==e[s]?r+=o+"{"+e[s]+"}":DE(s)&&(r+=IE(o)+":"+FE(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=NE(t,e,s,!1);switch(o){case"animation":case"animationName":r+=IE(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)DE(s[l])&&(r+=IE(o)+":"+FE(o,s[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var o=jE,s=n(t);return jE=o,NE(t,e,s,r)}}if(null==e)return n;var a=e[n];return void 0===a||r?n:a}var jE,zE=/label:\s*([^\s;\n{]+)\s*;/g;var BE=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";jE=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=NE(n,e,o,!1)):i+=o[0];for(var s=1;s<t.length;s++)i+=NE(n,e,t[s],46===i.charCodeAt(i.length-1)),r&&(i+=o[s]);zE.lastIndex=0;for(var a,l="";null!==(a=zE.exec(i));)l+="-"+a[1];return{name:ME(i)+l,styles:i,next:jE}};const UE=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BE(e)};var VE=function(){function t(t){this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.before=null}var e=t.prototype;return e.insert=function(t){if(this.ctr%(this.isSpeedy?65e3:1)===0){var e,n=function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e}(this);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,e),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(r);try{var o=105===t.charCodeAt(1)&&64===t.charCodeAt(0);i.insertRule(t,o?0:i.cssRules.length)}catch(Gk){0}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),HE="/*|*/";function WE(t){t&&GE.current.insert(t+"}")}var GE={current:null},YE=function(t,e,n,r,i,o,s,a,l,c){switch(t){case 1:switch(e.charCodeAt(0)){case 64:return GE.current.insert(e+";"),"";case 108:if(98===e.charCodeAt(2))return""}break;case 2:if(0===a)return e+HE;break;case 3:switch(a){case 102:case 112:return GE.current.insert(n[0]+e),"";default:return e+(0===c?HE:"")}case-2:e.split("/*|*/}").forEach(WE)}};const XE=function(t){void 0===t&&(t={});var e,n=t.key||"css";void 0!==t.prefix&&(e={prefix:t.prefix});var r=new Re(e);var i,o={};i=t.container||document.head;var s,a=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(a,(function(t){t.getAttribute("data-emotion-"+n).split(" ").forEach((function(t){o[t]=!0})),t.parentNode!==i&&i.appendChild(t)})),r.use(t.stylisPlugins)(YE),s=function(t,e,n,i){var o=e.name;GE.current=n,r(t,e.styles),i&&(l.inserted[o]=!0)};var l={key:n,sheet:new VE({key:n,container:i,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:o,registered:{},insert:s};return l};function qE(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]):r+=n+" "})),r}var ZE=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var i=e;do{t.insert("."+r,i,t.sheet,!0);i=i.next}while(void 0!==i)}},KE=Object.prototype.hasOwnProperty,QE=(0,t.createContext)("undefined"!==typeof HTMLElement?XE():null),JE=(0,t.createContext)({}),$E=(QE.Provider,function(e){var n=function(n,r){return(0,t.createElement)(QE.Consumer,null,(function(t){return e(n,t,r)}))};return(0,t.forwardRef)(n)}),tC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",eC=function(t,e){var n={};for(var r in e)KE.call(e,r)&&(n[r]=e[r]);return n[tC]=t,n},nC=function(){return null},rC=function(e,n,r,i){var o=null===r?n.css:n.css(r);"string"===typeof o&&void 0!==e.registered[o]&&(o=e.registered[o]);var s=n[tC],a=[o],l="";"string"===typeof n.className?l=qE(e.registered,a,n.className):null!=n.className&&(l=n.className+" ");var c=BE(a);ZE(e,c,"string"===typeof s);l+=e.key+"-"+c.name;var u={};for(var h in n)KE.call(n,h)&&"css"!==h&&h!==tC&&(u[h]=n[h]);u.ref=i,u.className=l;var d=(0,t.createElement)(s,u),f=(0,t.createElement)(nC,null);return(0,t.createElement)(t.Fragment,null,f,d)},iC=$E((function(e,n,r){return"function"===typeof e.css?(0,t.createElement)(JE.Consumer,null,(function(t){return rC(n,e,t,r)})):rC(n,e,null,r)}));var oC=function(e,n){var r=arguments;if(null==n||!KE.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=iC,o[1]=eC(e,n);for(var s=2;s<i;s++)o[s]=r[s];return t.createElement.apply(null,o)},sC=(t.Component,function t(e){for(var n=e.length,r=0,i="";r<n;r++){var o=e[r];if(null!=o){var s=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))s=t(o);else for(var a in s="",o)o[a]&&a&&(s&&(s+=" "),s+=a);break;default:s=o}s&&(i&&(i+=" "),i+=s)}}return i});function aC(t,e,n){var r=[],i=qE(t,r,n);return r.length<2?n:i+e(r)}var lC=function(){return null};$E((function(e,n){return(0,t.createElement)(JE.Consumer,null,(function(r){var i=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=BE(e,n.registered);return ZE(n,i,!1),n.key+"-"+i.name},o={css:i,cx:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return aC(n.registered,i,sC(e))},theme:r},s=e.children(o);var a=(0,t.createElement)(lC,null);return(0,t.createElement)(t.Fragment,null,a,s)}))}));function cC(t){var e=t.touches;if(e&&e.length){var n=e[0];return{x:n.clientX,y:n.clientY}}return{x:t.clientX,y:t.clientY}}var uC={position:"relative",display:"inline-block",backgroundColor:"#ddd",borderRadius:5,userSelect:"none",boxSizing:"border-box"},hC={position:"absolute",backgroundColor:"#5e72e4",borderRadius:5,userSelect:"none",boxSizing:"border-box"},dC={position:"relative",display:"block",content:'""',width:18,height:18,backgroundColor:"#fff",borderRadius:"50%",boxShadow:"0 1px 1px rgba(0,0,0,.5)",userSelect:"none",cursor:"pointer",boxSizing:"border-box"},fC={x:{track:s({},uC,{width:200,height:10}),active:s({},hC,{top:0,height:"100%"}),thumb:s({},dC)},y:{track:s({},uC,{width:10,height:200}),active:s({},hC,{left:0,width:"100%"}),thumb:s({},dC)},xy:{track:{position:"relative",overflow:"hidden",width:200,height:200,backgroundColor:"#5e72e4",borderRadius:0},active:{},thumb:s({},dC)},disabled:{opacity:.5}},pC=function(e){var n=e.disabled,r=e.axis,i=e.x,o=e.y,l=e.xmin,c=e.xmax,u=e.ymin,h=e.ymax,d=e.xstep,f=e.ystep,p=e.onChange,g=e.onDragStart,m=e.onDragEnd,v=e.xreverse,y=e.yreverse,_=e.styles,b=a(e,["disabled","axis","x","y","xmin","xmax","ymin","ymax","xstep","ystep","onChange","onDragStart","onDragEnd","xreverse","yreverse","styles"]),x=(0,t.useRef)(null),w=(0,t.useRef)(null),S=(0,t.useRef)({}),A=(0,t.useRef)({});function E(t){var e=t.top,n=t.left;if(p){var i=x.current.getBoundingClientRect(),o=i.width,s=i.height,a=0,g=0;n<0&&(n=0),n>o&&(n=o),e<0&&(e=0),e>s&&(e=s),"x"!==r&&"xy"!==r||(a=n/o*(c-l)),"y"!==r&&"xy"!==r||(g=e/s*(h-u));var m=(0!==a?parseInt(a/d,10)*d:0)+l,_=(0!==g?parseInt(g/f,10)*f:0)+u;p({x:v?c-m+l:m,y:y?h-_+u:_})}}function C(t){if(!n){t.preventDefault(),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation();var e=w.current,r=cC(t);S.current={x:e.offsetLeft,y:e.offsetTop},A.current={x:r.x,y:r.y},document.addEventListener("mousemove",k),document.addEventListener("mouseup",T),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",T),document.addEventListener("touchcancel",T),g&&g(t)}}function k(t){n||(t.preventDefault(),E(function(t){var e=cC(t);return{left:e.x+S.current.x-A.current.x,top:e.y+S.current.y-A.current.y}}(t)))}function T(t){n||(t.preventDefault(),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",T),document.removeEventListener("touchmove",k,{passive:!1}),document.removeEventListener("touchend",T),document.removeEventListener("touchcancel",T),m&&m(t))}function M(t){if(!n){t.preventDefault();var e=cC(t),r=x.current.getBoundingClientRect();S.current={x:e.x-r.left,y:e.y-r.top},A.current={x:e.x,y:e.y},document.addEventListener("mousemove",k),document.addEventListener("mouseup",T),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",T),document.addEventListener("touchcancel",T),E({left:e.x-r.left,top:e.y-r.top}),g&&g(t)}}var P=function(){var t=(o-u)/(h-u)*100,e=(i-l)/(c-l)*100;return t>100&&(t=100),t<0&&(t=0),"x"===r&&(t=0),e>100&&(e=100),e<0&&(e=0),"y"===r&&(e=0),{top:t,left:e}}(),L={};"x"===r&&(L.width=P.left+"%"),"y"===r&&(L.height=P.top+"%"),v&&(L.left=100-P.left+"%"),y&&(L.top=100-P.top+"%");var O={position:"absolute",transform:"translate(-50%, -50%)",left:v?100-P.left+"%":P.left+"%",top:y?100-P.top+"%":P.top+"%"};"x"===r?O.top="50%":"y"===r&&(O.left="50%");var R={track:s({},fC[r].track,{},_.track),active:s({},fC[r].active,{},_.active),thumb:s({},fC[r].thumb,{},_.thumb),disabled:s({},fC.disabled,{},_.disabled)};return oC("div",s({},b,{ref:x,css:UE([R.track,n&&R.disabled],";label:Slider;"),onTouchStart:M,onMouseDown:M}),oC("div",{css:R.active,style:L}),oC("div",{ref:w,style:O,onTouchStart:C,onMouseDown:C,onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()}},oC("div",{css:R.thumb})))};pC.defaultProps={disabled:!1,axis:"x",x:50,xmin:0,xmax:100,y:50,ymin:0,ymax:100,xstep:1,ystep:1,xreverse:!1,yreverse:!1,styles:{}};const gC=pC,mC=t=>{const{updateLayerProp:e}=$m(),{title:n,minx:r,maxx:i,xstep:o,property:s,layer:a}=t,l=$m()[a];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{style:{paddingTop:"5px",fontWeight:"normal"},children:[n," :"," ",(0,g.jsx)("span",{style:{fontSize:"0.75rem",color:"blue"},children:Math.round(100*l[s])/100})]}),(0,g.jsx)("div",{style:{paddingLeft:"10px"},children:(0,g.jsx)(gC,{axis:"x",x:l[s],xmax:i,xmin:r,xstep:o,onChange:t=>{let{x:n}=t;e({layer:a,field:s,value:n})}})})]})};function vC(t,e){return Array.isArray(t)?t.includes(e):t===e}const yC=t.createContext({});yC.displayName="AccordionContext";const _C=yC,bC=t.createContext({eventKey:""});bC.displayName="AccordionItemContext";const xC=bC;function wC(e,n){const{activeEventKey:r,onSelect:i,alwaysOpen:o}=(0,t.useContext)(_C);return t=>{let s=e===r?null:e;o&&(s=Array.isArray(r)?r.includes(e)?r.filter((t=>t!==e)):[...r,e]:[e]),null==i||i(s,t),null==n||n(t)}}const SC=t.forwardRef(((e,n)=>{let{as:r="button",bsPrefix:o,className:s,onClick:a,...l}=e;o=b(o,"accordion-button");const{eventKey:c}=(0,t.useContext)(xC),u=wC(c,a),{activeEventKey:h}=(0,t.useContext)(_C);return"button"===r&&(l.type="button"),(0,g.jsx)(r,{ref:n,onClick:u,...l,"aria-expanded":c===h,className:i()(s,o,!vC(h,c)&&"collapsed")})}));SC.displayName="AccordionButton";const AC=SC,EC=t.forwardRef(((e,n)=>{let{as:r="div",bsPrefix:o,className:s,children:a,eventKey:l,...c}=e;const{activeEventKey:u}=(0,t.useContext)(_C);return o=b(o,"accordion-collapse"),(0,g.jsx)(ft,{ref:n,in:vC(u,l),...c,className:i()(s,o),children:(0,g.jsx)(r,{children:t.Children.only(a)})})}));EC.displayName="AccordionCollapse";const CC=EC,kC=t.forwardRef(((e,n)=>{let{as:r="div",bsPrefix:o,className:s,...a}=e;o=b(o,"accordion-body");const{eventKey:l}=(0,t.useContext)(xC);return(0,g.jsx)(CC,{eventKey:l,children:(0,g.jsx)(r,{ref:n,...a,className:i()(s,o)})})}));kC.displayName="AccordionBody";const TC=kC,MC=t.forwardRef(((t,e)=>{let{as:n="h2",bsPrefix:r,className:o,children:s,onClick:a,...l}=t;return r=b(r,"accordion-header"),(0,g.jsx)(n,{ref:e,...l,className:i()(o,r),children:(0,g.jsx)(AC,{onClick:a,children:s})})}));MC.displayName="AccordionHeader";const PC=MC,LC=t.forwardRef(((e,n)=>{let{as:r="div",bsPrefix:o,className:s,eventKey:a,...l}=e;o=b(o,"accordion-item");const c=(0,t.useMemo)((()=>({eventKey:a})),[a]);return(0,g.jsx)(xC.Provider,{value:c,children:(0,g.jsx)(r,{ref:n,...l,className:i()(s,o)})})}));LC.displayName="AccordionItem";const OC=LC,RC=t.forwardRef(((e,n)=>{const{as:r="div",activeKey:o,bsPrefix:s,className:a,onSelect:l,flush:c,alwaysOpen:h,...d}=u(e,{activeKey:"onSelect"}),f=b(s,"accordion"),p=(0,t.useMemo)((()=>({activeEventKey:o,onSelect:l,alwaysOpen:h})),[o,l,h]);return(0,g.jsx)(_C.Provider,{value:p,children:(0,g.jsx)(r,{ref:n,...d,className:i()(a,f,c&&"".concat(f,"-flush"))})})}));RC.displayName="Accordion";const DC=Object.assign(RC,{Button:AC,Collapse:CC,Item:OC,Header:PC,Body:TC}),IC=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,variant:o,as:s="img",...a}=t;const l=b(n,"card-img");return(0,g.jsx)(s,{ref:e,className:i()(o?"".concat(l,"-").concat(o):l,r),...a})}));IC.displayName="CardImg";const FC=IC,NC=t.createContext(null);NC.displayName="CardHeaderContext";const jC=NC,zC=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,as:s="div",...a}=e;const l=b(r,"card-header"),c=(0,t.useMemo)((()=>({cardHeaderBsPrefix:l})),[l]);return(0,g.jsx)(jC.Provider,{value:c,children:(0,g.jsx)(s,{ref:n,...a,className:i()(o,l)})})}));zC.displayName="CardHeader";const BC=zC,UC=ie("h5"),VC=ie("h6"),HC=w("card-body"),WC=w("card-title",{Component:UC}),GC=w("card-subtitle",{Component:VC}),YC=w("card-link",{Component:"a"}),XC=w("card-text",{Component:"p"}),qC=w("card-footer"),ZC=w("card-img-overlay"),KC=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,bg:o,text:s,border:a,body:l,children:c,as:u="div",...h}=t;const d=b(n,"card");return(0,g.jsx)(u,{ref:e,...h,className:i()(r,d,o&&"bg-".concat(o),s&&"text-".concat(s),a&&"border-".concat(a)),children:l?(0,g.jsx)(HC,{children:c}):c})}));KC.displayName="Card",KC.defaultProps={body:!1};const QC=Object.assign(KC,{Img:FC,Title:WC,Subtitle:GC,Body:HC,Link:YC,Text:XC,Header:BC,Footer:qC,ImgOverlay:ZC}),JC={type:Kt().string,tooltip:Kt().bool,as:Kt().elementType},$C=t.forwardRef(((t,e)=>{let{as:n="div",className:r,type:o="valid",tooltip:s=!1,...a}=t;return(0,g.jsx)(n,{...a,ref:e,className:i()(r,"".concat(o,"-").concat(s?"tooltip":"feedback"))})}));$C.displayName="Feedback",$C.propTypes=JC;const tk=$C,ek=t.createContext({}),nk=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:o,className:s,type:a="checkbox",isValid:l=!1,isInvalid:c=!1,as:u="input",...h}=e;const{controlId:d}=(0,t.useContext)(ek);return o=b(o,"form-check-input"),(0,g.jsx)(u,{...h,ref:n,type:a,id:r||d,className:i()(s,o,l&&"is-valid",c&&"is-invalid")})}));nk.displayName="FormCheckInput";const rk=nk,ik=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,htmlFor:s,...a}=e;const{controlId:l}=(0,t.useContext)(ek);return r=b(r,"form-check-label"),(0,g.jsx)("label",{...a,ref:n,htmlFor:s||l,className:i()(o,r)})}));ik.displayName="FormCheckLabel";const ok=ik;const sk=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:o,bsSwitchPrefix:s,inline:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:v="",type:y="checkbox",label:_,children:x,as:w="input",...S}=e;o=b(o,"form-check"),s=b(s,"form-switch");const{controlId:A}=(0,t.useContext)(ek),E=(0,t.useMemo)((()=>({controlId:r||A})),[A,r]),C=!x&&null!=_&&!1!==_||function(e,n){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===n))}(x,ok),k=(0,g.jsx)(rk,{...S,type:"switch"===y?"checkbox":y,ref:n,isValid:c,isInvalid:u,disabled:l,as:w});return(0,g.jsx)(ek.Provider,{value:E,children:(0,g.jsx)("div",{style:m,className:i()(p,C&&o,a&&"".concat(o,"-inline"),"switch"===y&&s),children:x||(0,g.jsxs)(g.Fragment,{children:[k,C&&(0,g.jsx)(ok,{title:v,children:_}),d&&(0,g.jsx)(tk,{type:f,tooltip:h,children:d})]})})})}));sk.displayName="FormCheck";const ak=Object.assign(sk,{Input:rk,Label:ok});n(391);const lk=t.forwardRef(((e,n)=>{let{bsPrefix:r,type:o,size:s,htmlSize:a,id:l,className:c,isValid:u=!1,isInvalid:h=!1,plaintext:d,readOnly:f,as:p="input",...m}=e;const{controlId:v}=(0,t.useContext)(ek);let y;return r=b(r,"form-control"),y=d?{["".concat(r,"-plaintext")]:!0}:{[r]:!0,["".concat(r,"-").concat(s)]:s},(0,g.jsx)(p,{...m,type:o,size:a,ref:n,readOnly:f,id:l||v,className:i()(c,y,u&&"is-valid",h&&"is-invalid","color"===o&&"".concat(r,"-color"))})}));lk.displayName="FormControl";const ck=Object.assign(lk,{Feedback:tk}),uk=w("form-floating"),hk=t.forwardRef(((e,n)=>{let{controlId:r,as:i="div",...o}=e;const s=(0,t.useMemo)((()=>({controlId:r})),[r]);return(0,g.jsx)(ek.Provider,{value:s,children:(0,g.jsx)(i,{...o,ref:n})})}));hk.displayName="FormGroup";const dk=hk;function fk(e){let{as:n,bsPrefix:r,className:o,...s}=e;r=b(r,"col");const a=function(){const{breakpoints:e}=(0,t.useContext)(v);return e}(),l=[],c=[];return a.forEach((t=>{const e=s[t];let n,i,o;delete s[t],"object"===typeof e&&null!=e?({span:n,offset:i,order:o}=e):n=e;const a="xs"!==t?"-".concat(t):"";n&&l.push(!0===n?"".concat(r).concat(a):"".concat(r).concat(a,"-").concat(n)),null!=o&&c.push("order".concat(a,"-").concat(o)),null!=i&&c.push("offset".concat(a,"-").concat(i))})),[{...s,className:i()(o,...l,...c)},{as:n,bsPrefix:r,spans:l}]}const pk=t.forwardRef(((t,e)=>{const[{className:n,...r},{as:o="div",bsPrefix:s,spans:a}]=fk(t);return(0,g.jsx)(o,{...r,ref:e,className:i()(n,!a.length&&s)})}));pk.displayName="Col";const gk=pk,mk=t.forwardRef(((e,n)=>{let{as:r="label",bsPrefix:o,column:s,visuallyHidden:a,className:l,htmlFor:c,...u}=e;const{controlId:h}=(0,t.useContext)(ek);o=b(o,"form-label");let d="col-form-label";"string"===typeof s&&(d="".concat(d," ").concat(d,"-").concat(s));const f=i()(l,o,a&&"visually-hidden",s&&d);return c=c||h,s?(0,g.jsx)(gk,{ref:n,as:"label",className:f,htmlFor:c,...u}):(0,g.jsx)(r,{ref:n,className:f,htmlFor:c,...u})}));mk.displayName="FormLabel",mk.defaultProps={column:!1,visuallyHidden:!1};const vk=mk,yk=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:o,id:s,...a}=e;const{controlId:l}=(0,t.useContext)(ek);return r=b(r,"form-range"),(0,g.jsx)("input",{...a,type:"range",ref:n,className:i()(o,r),id:s||l})}));yk.displayName="FormRange";const _k=yk,bk=t.forwardRef(((e,n)=>{let{bsPrefix:r,size:o,htmlSize:s,className:a,isValid:l=!1,isInvalid:c=!1,id:u,...h}=e;const{controlId:d}=(0,t.useContext)(ek);return r=b(r,"form-select"),(0,g.jsx)("select",{...h,size:s,ref:n,className:i()(a,r,o&&"".concat(r,"-").concat(o),l&&"is-valid",c&&"is-invalid"),id:u||d})}));bk.displayName="FormSelect";const xk=bk,wk=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,as:o="small",muted:s,...a}=t;return n=b(n,"form-text"),(0,g.jsx)(o,{...a,ref:e,className:i()(r,n,s&&"text-muted")})}));wk.displayName="FormText";const Sk=wk,Ak=t.forwardRef(((t,e)=>(0,g.jsx)(ak,{...t,ref:e,type:"switch"})));Ak.displayName="Switch";const Ek=Object.assign(Ak,{Input:ak.Input,Label:ak.Label}),Ck=t.forwardRef(((t,e)=>{let{bsPrefix:n,className:r,children:o,controlId:s,label:a,...l}=t;return n=b(n,"form-floating"),(0,g.jsxs)(dk,{ref:e,className:i()(r,n),controlId:s,...l,children:[o,(0,g.jsx)("label",{htmlFor:s,children:a})]})}));Ck.displayName="FloatingLabel";const kk=Ck,Tk={_ref:Kt().any,validated:Kt().bool,as:Kt().elementType},Mk=t.forwardRef(((t,e)=>{let{className:n,validated:r,as:o="form",...s}=t;return(0,g.jsx)(o,{...s,ref:e,className:i()(n,r&&"was-validated")})}));Mk.displayName="Form",Mk.propTypes=Tk;const Pk=Object.assign(Mk,{Group:dk,Control:ck,Floating:uk,Check:ak,Switch:Ek,Label:vk,Text:Sk,Range:_k,Select:xk,FloatingLabel:kk});var Lk,Ok={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Rk=t.createContext&&t.createContext(Ok),Dk=function(){return Dk=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Dk.apply(this,arguments)},Ik=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Fk(e){return e&&e.map((function(e,n){return t.createElement(e.tag,Dk({key:n},e.attr),Fk(e.child))}))}function Nk(e){return function(n){return t.createElement(jk,Dk({attr:Dk({},e.attr)},n),Fk(e.child))}}function jk(e){var n=function(n){var r,i=e.attr,o=e.size,s=e.title,a=Ik(e,["attr","size","title"]),l=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Dk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:Dk(Dk({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==Rk?t.createElement(Rk.Consumer,null,(function(t){return n(t)})):n(Ok)}function zk(t){return Nk({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"}}]})(t)}function Bk(t){let{children:e,eventKey:n,title:r}=t;const i=wC(n,(()=>{}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"float-left",style:{color:"black",cursor:"pointer"},onClick:i,children:r}),(0,g.jsx)("span",{className:"float-right",children:(0,g.jsx)(zk,{onClick:i})})]})}const Uk=sr.div(Lk||(Lk=Me(["\n  position: absolute;\n  right: 10px;\n  top: 85px;\n  background: rgba(255, 255, 255, 1);\n  border-radius: 8px;\n  border: 2px solid black;\n  width: 280px;\n  font-size: 0.8rem;\n  font-weight: bold;\n  z-index: 100;\n"]))),Vk=()=>{const t=$m(),{layerControllers:e,updateLayerProp:n}=t;return(0,g.jsx)(Uk,{children:(0,g.jsx)(DC,{flush:!0,children:e.map(((e,r)=>(0,g.jsxs)(QC,{children:[(0,g.jsx)(QC.Header,{style:{width:"100%"},children:(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{className:"float-left",children:(0,g.jsx)(Pk.Check,{type:"switch",label:" ",checked:t[e.layer].visible,onChange:t=>n({layer:e.layer,field:"visible",value:t.target.checked})},"layer-".concat(e.title,"-visible"))}),(0,g.jsx)(Bk,{eventKey:r,title:e.title})]})}),(0,g.jsx)(DC.Collapse,{eventKey:r,children:(0,g.jsx)(QC.Body,{children:e.controllers.map((t=>(0,g.jsx)(mC,{layer:e.layer,title:t.title,maxx:t.maxX,minx:t.minX,xstep:t.stepX,property:t.property,multiplier:t.multiplier},"layer-".concat(e.layer,"-controller-").concat(t.property))))})})]},"card-".concat(e,"-").concat(r))))})})},Hk=()=>(0,g.jsx)(Te,{children:(0,g.jsxs)(Jm,{children:[(0,g.jsx)(gv,{}),(0,g.jsx)(Vk,{}),(0,g.jsx)(TE,{})]})}),Wk=document.getElementById("root");(0,e.s)(Wk).render((0,g.jsx)(Hk,{}))})()})();
//# sourceMappingURL=main.f8dcea0c.js.map